<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="·ª®ng d·ª•ng Pomodoro h·ªó tr·ª£ h·ªçc t·∫≠p v·ªõi t√≠ch h·ª£p Gemini AI v√† giao di·ªán hi·ªán ƒë·∫°i." />
    <title>Pomodoro Study App ‚Äî T√≠ch h·ª£p Gemini AI (Giao di·ªán m·ªõi)</title>
    <style>
    /*
    =============================================
    POMODORO STUDY APP ‚Äî PHI√äN B·∫¢N GIAO DI·ªÜN T·∫¨P TRUNG (v1.0)
    =============================================
    */

    :root {
      /* Theme Dark (M·∫∑c ƒë·ªãnh) - C·∫≠p nh·∫≠t t·ª´ file 2 */
      --bg: #0f1222;
      --panel: #171a2e;
      --panel-rgb: 23, 26, 46; /* Th√™m bi·∫øn RGB cho panel */
      --muted: #212646;
      --text: #f4f6ff;
      --sub: #b7c1ff;
      --acc: #6c8cff;
      --acc-rgb: 108, 140, 255;
      --acc-2: #27d3a2;
      --purple: #a78bfa;
      --warn: #ffb020;
      --danger: #ff5c7a;
      --shadow: 0px 1.8px 2.2px rgba(0, 0, 0, 0.054), 0px 4.3px 5.3px rgba(0, 0, 0, 0.077), 0px 8.1px 10px rgba(0, 0, 0, 0.095), 0px 14.5px 17.9px rgba(0, 0, 0, 0.113), 0px 27.2px 33.4px rgba(0, 0, 0, 0.136), 0px 65px 80px rgba(0, 0, 0, 0.19);
      --radius: 16px;
      --panel-opacity: 0.85;
      --gradient-border: linear-gradient(135deg, var(--acc), var(--acc-2));
    }
    
    /* === START: TH√äM C√ÅC THEME M·ªöI === */
    [data-theme='light'] {
      --bg: #f5f0e8; --panel: #ffffff; --panel-rgb: 255, 255, 255; --muted: #eaddcf; --text: #4a4a4a; --sub: #8a817c; --acc: #d4a373; --acc-rgb: 212, 163, 115; --acc-2: #a3b18a; --warn: #e76f51; --danger: #d00000;
      --shadow: 0px 1.8px 2.2px rgba(0, 0, 0, 0.024), 0px 4.3px 5.3px rgba(0, 0, 0, 0.037), 0px 8.1px 10px rgba(0, 0, 0, 0.045), 0px 14.5px 17.9px rgba(0, 0, 0, 0.053), 0px 27.2px 33.4px rgba(0, 0, 0, 0.066), 0px 65px 80px rgba(0, 0, 0, 0.09);
      --panel-opacity: 0.9;
      /* NgƒÉn n·ªÅn t·ªëi m·∫∑c ƒë·ªãnh khi kh√¥ng c√≥ ·∫£nh */
      --bg-image: none;
    }

    [data-theme='pastel'] {
      --bg: #fde2e4; --panel: #fff1f2; --panel-rgb: 255, 241, 242; --muted: #fad2e1; --text: #595260; --sub: #8c7a8a; --acc: #c78283; --acc-rgb: 199, 130, 131; --acc-2: #7ec4cf; --warn: #f9bf45; --danger: #d7263d;
      --shadow: 0 5px 20px rgba(200,150,150,0.2);
      --panel-opacity: 0.9;
      /* NgƒÉn n·ªÅn t·ªëi m·∫∑c ƒë·ªãnh khi kh√¥ng c√≥ ·∫£nh */
      --bg-image: none;
    }
    
    [data-theme='lofi'] {
      --bg: #2a2a3e; --panel: #3c3c52; --panel-rgb: 60, 60, 82; --muted: #4d4d66; --text: #e0e0ff; --sub: #a0a0c0; --acc: #ff8c69; --acc-rgb: 255, 140, 105; --acc-2: #69c6ff; --warn: #ffd700; --danger: #ff6961;
      /* === Replaced external GIF with inline data URI (offline-safe) === */
      --bg-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4MDAnIGhlaWdodD0nNjAwJz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz48c3RvcCBvZmZzZXQ9JzAlJyBzdG9wLWNvbG9yPScjMmEyYTNlJy8+PHN0b3Agb2Zmc2V0PScxMDAlJyBzdG9wLWNvbG9yPScjM2MzYzUyJy8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9JzEwMCUnIGhlaWdodD0nMTAwJScgZmlsbD0ndXJsKCNnKScvPjwvc3ZnPg==');
      --panel-opacity: 0.8;
    }
    
    [data-theme='space'] {
        --bg: #000000; --panel: #1a1a2e; --panel-rgb: 26, 26, 46; --muted: #2a2a4e; --text: #e0e0ff; --sub: #b0b0e0; --acc: #00aaff; --acc-rgb: 0, 170, 255; --acc-2: #aaff00; --warn: #ffaa00; --danger: #ff0055;
        /* === Replaced external GIF with inline data URI (offline-safe) === */
        --bg-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4MDAnIGhlaWdodD0nNjAwJz48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9J2cnIGN4PSc1MCUnIGN5PSc0MCUnIHI9JzcwJSc+PHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzBiMGIxYScvPjxzdG9wIG9mZnNldD0nMTAwJScgc3RvcC1jb2xvcj0nIzAwMDAwMCcvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPScxMDAlJyBoZWlnaHQ9JzEwMCUnIGZpbGw9J3VybCgjZyknLz48L3N2Zz4=');
        --panel-opacity: 0.75;
    }
    /* === END: TH√äM C√ÅC THEME M·ªöI === */

    *:focus-visible {
      outline: 2px solid var(--acc); outline-offset: 2px; border-radius: 4px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body {
      margin:0; 
      font-family: system-ui, -apple-system, 'Segoe UI Variable', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Inter', sans-serif; 
      
      background-color: var(--bg);
      background-image: var(--bg-image, radial-gradient(1200px 800px at 10% -10%, #20285b 0%, #0f1222 50%, #0b0e1a 100%));
      
      background-size: cover; 
      background-position: center; 
      color:var(--text); 
      transition: background 0.5s ease, color 0.5s ease, filter 0.5s ease;
      text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    a{color:var(--acc)}

    .app{display:flex; min-height:100vh}
    
    .app-nav {
        width: 60px;
        padding: 16px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
        z-index: 100;
    }
    .nav-btn {
        background: transparent;
        border: none;
        color: var(--sub);
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all .2s ease;
        position: relative;
    }
    .nav-btn:hover { background: var(--muted); color: var(--text); }
    .nav-btn.active { background: var(--acc); color: white; }
    .nav-btn svg { width: 24px; height: 24px; }
    .nav-btn .tooltip {
        position: absolute;
        left: 110%;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text);
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 12px;
        box-shadow: var(--shadow);
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: opacity .2s ease, visibility .2s ease;
        pointer-events: none;
        z-index: 200;
    }
    .nav-btn:hover .tooltip { opacity: 1; visibility: visible; }

    .app-content {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
        max-height: 100vh;
    }

    .view { display: none; }
    .view.active { display: grid; gap: 24px; animation: fadeIn .3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .main.reloading { opacity: 0; transition: opacity 0.2s ease-out; }

    .panel-bg{
        background: rgba(23, 26, 46, var(--panel-opacity));
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border:1px solid rgba(255,255,255,.08);
    }
    /* Th√™m c√°c quy t·∫Øc border cho theme light/pastel */
    [data-theme='light'] .panel-bg, [data-theme='pastel'] .panel-bg { border:1px solid rgba(0,0,0,0.05); }
    [data-theme='lofi'] .panel-bg { border:1px solid rgba(255,255,255,0.1); }
    [data-theme='space'] .panel-bg { border:1px solid rgba(255,255,255,0.12); }


header.app-header{display:flex; align-items:center; justify-content:space-between; padding:10px 14px; border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom: 24px; position: relative; z-index: 2000;}
    header .actions{display:flex; gap:8px; align-items:center}
    
    .btn {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text);
      border: none; /* S·ª≠a ƒë·ªïi: b·ªè border m·∫∑c ƒë·ªãnh */
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.08);
      font-weight: 600;
      transition: all .15s ease;
      position: relative;
      overflow: hidden;
    }
    .btn::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        border: 2px solid transparent; border-radius: 12px; background: var(--gradient-border) border-box;
        -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: destination-out; mask-composite: exclude; opacity: 0; transition: opacity 0.3s ease;
    }
    .btn:hover::before { opacity: 1; }
    .btn:hover { background: rgba(255, 255, 255, 0.12); }
    .btn:active { transform: translateY(1px) scale(0.98); filter: brightness(1); }
    .btn:disabled { cursor: not-allowed; filter: brightness(0.8) saturate(0.5); }
    .btn.ghost { background: transparent; border: 1px solid rgba(255, 255, 255, 0.2); }
    .btn.ghost:hover { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.3); }
    .btn.acc { background: var(--acc); color: white; }
    .btn.warn { background: var(--warn); color: white; }
    .btn.danger { background: var(--danger); color: white; }
    .btn.small { padding: 6px 10px; font-size: 14px; border-radius: 9px; }
    .btn.small::before { border-radius: 9px; }
    .btn > svg { width: 16px; height: 16px; stroke-width: 2.5px; }

    /* === START: C·∫¨P NH·∫¨T GIAO DI·ªÜN QU·∫¢N L√ù CH·ª¶ ƒê·ªÄ === */
    #view-topics { grid-template-columns: 1fr; }
    .topic-item { background:rgba(255,255,255,.04); border:1px solid var(--muted); border-radius:12px; padding:8px; margin-bottom:8px; } /* S·ª≠a ƒë·ªïi */
    .topic-header, .sub-row { display:flex; align-items:center; gap:8px; position: relative; }
    .topic-header { cursor: pointer; }
    .topic-header .topic-actions { cursor: default; }
    .topic-header .topic-actions * { cursor: pointer; }
    .topic-item { cursor: pointer; }
    .topic-item .topic-actions { cursor: default; }
    .topic-item .topic-actions * { cursor: pointer; }
    .topic-title { flex:1; font-weight:600; cursor: pointer; }
    .chev { width:28px; height:28px; border-radius:8px; display:inline-flex; align-items:center; justify-content:center; flex-shrink: 0; cursor: pointer; }
    .chev .ico { display:inline-block; transition: transform .18s ease; }
    .chev[aria-expanded="false"] .ico { transform: rotate(-90deg); }
    .subtopics { margin-top:8px; display:flex; flex-direction:column; gap:6px; }
    .subtopics.hidden { display:none; }
    
    .topic-actions, .sub-row .actions {
        opacity: 0;
        visibility: hidden;
        transition: opacity .2s ease, visibility .2s ease;
        display: flex;
        gap: 6px;
        align-items: center;
    }
    .topic-item:hover .topic-actions, .topic-item:focus-within .topic-actions,
    .sub-row:hover .actions, .sub-row:focus-within .actions {
      opacity: 1;
      visibility: visible;
    }
    .actions-menu-btn {
        padding: 0;
        width: 28px;
        height: 28px;
        font-size: 1.2em;
        line-height: 1;
    }
    .actions-menu {
        position: absolute;
        top: 100%;
        right: 0;
        border-radius: 8px;
        padding: 6px;
        box-shadow: var(--shadow);
        z-index: 10;
        min-width: 150px;
        display: none;
        flex-direction: column;
        gap: 4px;
    }
    /* N√¢ng kh·ªëi ƒëang m·ªü menu l√™n tr√™n c√°c kh·ªëi kh√°c */
    .topic-item.menu-active { position: relative; z-index: 20; }
    
    .actions-menu.show { display: flex; }
    .menu-item {
        background: transparent; border: none; color: var(--text);
        padding: 8px 10px; border-radius: 6px; text-align: left;
        width: 100%; cursor: pointer; transition: background .2s ease;
        display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 500;
    }
    .menu-item:hover { background: var(--acc); color: white; }
    .menu-item.danger:hover { background: var(--danger); }
    /* === END: C·∫¨P NH·∫¨T GIAO DI·ªÜN QU·∫¢N L√ù CH·ª¶ ƒê·ªÄ === */

    .subtopic-btn{
        flex:1; 
        text-align:left;
        background-color: rgba(0,0,0,0.02); /* S·ª≠a ƒë·ªïi */
    }
    .subtopic-btn:hover {
        background-color: transparent; /* Hover transparent to avoid blue background */
    }
    .subtopic-btn.active{
        outline:2px solid var(--acc); 
    }
    .subtopic-btn.active:hover {
        background: transparent; /* Gi·ªØ n·ªÅn trong su·ªët khi di chu·ªôt qua */
    }
    
    .panel{border-radius:var(--radius); padding:24px; box-shadow:var(--shadow)}

    .timer-header { display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap; }
    .timer{display:grid; gap:16px; grid-template-columns: 1fr; align-items:center; text-align:center}
    .big-time{font-size: clamp(60px, 12vw, 96px); letter-spacing:1px; font-weight:700; color: var(--text)}
    .state{font-weight:700; letter-spacing:.6px}
    .state.work{color:var(--acc-2)} /* S·ª≠a ƒë·ªïi m√†u */
    .state.break{color:var(--warn)}
    .state.long{color:var(--danger)} /* S·ª≠a ƒë·ªïi m√†u */
    .controls{display:flex; flex-wrap:wrap; gap:12px; justify-content:center}    
    #btnStart { padding: 14px 28px; font-size: 1.2em; }
    #btnPause, #btnResume { padding: 12px 24px; font-size: 1.1em; }

    /* === START: T√ôY CH·ªàNH D·∫¢I PH√ÇN C√ÅCH M·ªÄM M·∫†I H∆†N === */
    #view-timer .panel-bg hr {
        border: none; /* B·ªè ƒë∆∞·ªùng vi·ªÅn m·∫∑c ƒë·ªãnh */
        height: 1px;  /* ƒê·∫∑t chi·ªÅu cao cho ƒë∆∞·ªùng k·∫ª */
        background-color: var(--muted); /* S·ª≠ d·ª•ng m√†u ph·ª• c·ªßa theme */
        opacity: 0.3; /* L√†m cho n√≥ m·ªù ƒëi, h√≤a v√†o n·ªÅn */
        margin-top: 0; /* ƒêi·ªÅu ch·ªânh l·∫°i kho·∫£ng c√°ch */
    }
    /* === END: T√ôY CH·ªàNH D·∫¢I PH√ÇN C√ÅCH M·ªÄM M·∫†I H∆†N === */

    .stats-grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:12px}
    .stat-card{background:rgba(255,255,255,0.04); border:1px solid var(--muted); border-radius:14px; padding:12px; text-align:center} /* S·ª≠a ƒë·ªïi */
    .stat-card h4{margin:4px 0 8px; color:var(--sub); font-weight:600; font-size: 14px;}
    .stat-value{font-size: 20px; font-weight: 600;}
    .tiny{font-size:12px; color:var(--sub)}
    .history{display:grid; gap:8px; max-height:300px; overflow:auto; padding-right:6px}
    .hist-item{display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:start; background:rgba(255,255,255,0.04); border:1px solid var(--muted); border-radius:10px; padding:10px} /* S·ª≠a ƒë·ªïi */

    .row{display:flex; gap:8px; align-items:center}
    .row > * {flex:1}
    input[type="text"], input[type="password"], input[type="number"], select, textarea{width:100%; background:rgba(255,255,255,0.04); color:var(--text); border:1px solid var(--muted); border-radius:10px; padding:10px; outline:none}
    textarea{min-height:80px; resize: vertical;}

    .toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:9999}
    .toast{
        background: var(--panel); /* S·ª≠a ƒë·ªïi */
        border:1px solid var(--muted);
        color:var(--text);
        padding:10px 12px; border-radius:12px; box-shadow:var(--shadow);
        animation: toast-in .3s ease; transform-origin: bottom right;
    }
    @keyframes toast-in { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,var(--panel-opacity)); z-index:10000; backdrop-filter: blur(5px);} /* N√¢ng z-index ƒë·ªÉ n·∫±m tr√™n header */
    .modal.show{display:flex}
    .modal-card{
        position: relative;
        z-index: 10001;
        width:min(720px, 94vw);
        border-radius:16px;
        padding:16px;
        box-shadow:var(--shadow);
        animation: modal-in .25s ease-out;
        max-height: 90vh;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
    }
    body.modal-open { overflow: hidden; }
    @keyframes modal-in { from { opacity: 0; transform: scale(0.92) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    .modal-card h3{margin-top:0}
    .dashboard-table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    .dashboard-table th, .dashboard-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid var(--muted); }
    .dashboard-table th { color: var(--sub); }

    .footer-note{font-size:12px; color:var(--sub)}
    .hidden{display:none !important}

    .notes-list { display: flex; flex-direction: column; gap: 8px; max-height: 250px; overflow-y: auto; padding-right: 6px; }
    .note-item { background: rgba(255,255,255,0.04); border-radius: 10px; padding: 10px; display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; cursor: pointer; } /* S·ª≠a ƒë·ªïi */
    .note-content-wrapper { flex: 1; min-width: 0; }
    .note-content { white-space: pre-wrap; word-break: break-word; max-height: 60px; overflow: hidden; position: relative; transition: max-height 0.35s ease-in-out; }
    .note-content:not(.expanded)::after {
        content: ''; position: absolute; bottom: 0; right: 0; width: 100%; height: 20px; background: linear-gradient(to top, var(--panel) 20%, transparent);
    }
    .note-content.expanded { max-height: 500px; }
    .note-meta { font-size: 11px; color: var(--sub); margin-top: 4px; }
    
    .spinner { border: 2px solid var(--muted); border-top-color: var(--text); border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; } /* S·ª≠a ƒë·ªïi */
    @keyframes spin { to { transform: rotate(360deg); } }

    .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .panel-header h3 { margin: 0; }
    .panel-header .actions { display: flex; gap: 8px; }
    
    .aux-panel { margin-top: 24px; }
    .tab-nav { display: flex; gap: 4px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 16px; }
    .tab-btn { background: transparent; border: none; color: var(--sub); padding: 8px 16px; cursor: pointer; border-bottom: 2px solid transparent; transition: all .2s ease; font-weight: 600; }
    .tab-btn:hover { color: var(--text); }
    .tab-btn.active { color: var(--acc); border-bottom-color: var(--acc); }
    .tab-content {
      display: none;
      padding-top: 8px;
    }
    .tab-content.active {
      animation: fadeIn 0.25s ease-out;
    }
    #tasks.tab-content.active,
    #notes.tab-content.active,
    #ai.tab-content.active {
        display: block;
    }

    #settings-timer.tab-content.active,
    #settings-ui.tab-content.active,
    #settings-integrations.tab-content.active {
        display: flex;
    }

    .settings-row-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }
    .settings-row-toggle span {
      flex: 1;
      cursor: pointer;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 24px;
      flex-shrink: 0;
    }
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-switch .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--muted);
      transition: .3s;
      border-radius: 24px;
    }
    .toggle-switch .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
    }
    .toggle-switch input:checked + .slider {
      background-color: var(--acc-2);
    }
    .toggle-switch input:checked + .slider:before {
      transform: translateX(20px);
    }
    
    .chat-messages { max-height: 250px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; padding: 4px; }
    .chat-msg { padding: 8px 12px; border-radius: 12px; max-width: 85%; word-break: break-word; }
    .chat-msg.user { background: var(--acc); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
    .chat-msg.model { background: var(--muted); align-self: flex-start; border-bottom-left-radius: 4px; }
    .chat-input-area { display: flex; gap: 8px; }

    .methods-list { list-style: none; padding: 0; }
    .method-item { align-items: flex-start; padding: 12px; display: flex; gap: 10px; border-radius: 8px; }
    .method-item:hover { background: rgba(0,0,0,0.03); } /* S·ª≠a ƒë·ªïi */
    .method-item input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; flex-shrink: 0;}
    .method-item label { flex: 1; }
    .method-item label.completed { text-decoration: line-through; color: var(--sub); }
    .method-item .content-wrapper { flex: 1; cursor: pointer; }
    .method-item .concept { font-size: 14px; color: var(--sub); margin-top: 8px; border-left: 2px solid var(--muted); padding-left: 12px; white-space: pre-wrap; word-break: break-word; }
    /* Highlight section titles and bold text inside method content */
    .method-content h4 {
        color: var(--acc-2);
        font-size: 1.1em;
        margin-top: 1.5em;
        margin-bottom: 0.5em;
    }
    .method-content strong {
        color: var(--acc);
        font-weight: 600;
    }
    /* Apply the same highlight to the Guide view */
    #view-guide h4 { color: var(--acc-2); }
    #view-guide strong { color: var(--acc-2); }
    /* Show hand cursor to indicate clickability */
    .method-item, .method-item summary { cursor: pointer; }
    .subtopic-todo-list { list-style: none; padding: 0; margin: 0; max-height: 100px; overflow-y: auto; text-align: left; }
    .subtopic-todo-list li { display: flex; align-items: center; gap: 8px; padding: 4px; transition: all 0.2s ease-out; }
    .subtopic-todo-list li.removing { transform: translateX(100%); opacity: 0; }
    .subtopic-todo-list label { flex: 1; }

    #youtube-player-container { position: absolute; top: -9999px; left: -9999px; width: 1px; height: 1px; overflow: hidden; }

    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1); border-radius: 10px; } /* S·ª≠a ƒë·ªïi */
    ::-webkit-scrollbar-thumb { background: var(--muted); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; }
    ::-webkit-scrollbar-thumb:hover { background: var(--sub); background-clip: content-box; }
    
    .timer-circle-container {
        position: relative; width: clamp(250px, 40vw, 320px); height: clamp(250px, 40vw, 320px); margin: 24px auto; display: flex; align-items: center; justify-content: center;
    }
    .timer-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: rotate(-90deg); }
    .timer-circle-bg, .timer-circle-progress { fill: none; stroke-width: 8; }
    .timer-circle-bg { stroke: var(--muted); } /* S·ª≠a ƒë·ªïi */
    .timer-circle-progress { stroke: var(--acc); stroke-linecap: round; transition: stroke-dashoffset 0.3s linear, stroke 0.5s ease; }
    @keyframes flash { 0%, 100% { box-shadow: 0 0 10px 2px transparent; } 50% { box-shadow: 0 0 20px 8px currentColor; } }
    .timer-circle-container.finished { color: var(--acc-2); animation: flash 1s ease-out; }
    @keyframes breathing-effect { 0% { transform: scale(1); } 50% { transform: scale(1.03); } 100% { transform: scale(1); } }
    .timer-circle-container.breathing { animation: breathing-effect 3s ease-in-out infinite; }
    
    
    
    @media (max-width: 1024px) {
      .app-content { padding: 20px; }
      .panel { padding: 20px; }
      .timer-circle-container { width: clamp(220px, 50vw, 300px); height: clamp(220px, 50vw, 300px); }
    }

    @media (max-width: 768px) {
      .app { flex-direction: column; }
      .app-nav { width: 100%; height: 60px; flex-direction: row; justify-content: center; border-right: none; border-top: 1px solid rgba(255,255,255,.08); order: 2; padding: 0 16px; }
      .app-content { padding: 16px; order: 1; }
      .panel { padding: 16px; }
      .modal-card .tab-nav { overflow-x: auto; }
    }

    @media (max-width: 480px) {
      .app-nav { height: 50px; }
      .nav-btn { flex: 1; }
      header.app-header { flex-direction: column; align-items: stretch; gap: 8px; }
      .btn { padding: 8px 12px; }
      .timer-circle-container { width: clamp(180px, 80vw, 220px); height: clamp(180px, 80vw, 220px); margin: 16px auto; }
      .panel { padding: 12px; }
      .app-content { padding: 12px; }
    }

    #view-timer.no-subtopic-selected > .panel-bg:not(:first-child) { display: none; }
    #view-timer.no-subtopic-selected .timer-header > .presets { display: none; }
    #view-timer.no-subtopic-selected .timer { display: none; }

    header.app-header .actions #btnFullscreen { background: transparent; border: none; box-shadow: none; }
    header.app-header .actions #btnFullscreen:hover { background: var(--muted); filter: none; }
    header.app-header .actions #btnFullscreen:hover::before { opacity: 0; }

    input[type="text"], input[type="password"], input[type="number"], select, textarea {
        background: rgba(255,255,255,0.04) !important; /* S·ª≠a ƒë·ªïi: chuy·ªÉn sang n·ªÅn tr·∫Øng trong su·ªët */
        color: var(--text);
        border: 1px solid rgba(255, 255, 255, 0.1); /* Vi·ªÅn tr·∫Øng m·ªù */
        transition: background .2s ease, border-color .2s ease;
    }
    input[type="text"]:focus, input[type="password"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
        background: rgba(255,255,255,0.06) !important; /* Tinh ch·ªânh: s√°t m·∫´u h∆°n */
        border-color: var(--acc);
    }
    /* === START: S·ª¨A L·ªñI N·ªÄN INPUT/SELECT TR√äN THEME S√ÅNG === */
    [data-theme='light'] input, [data-theme='light'] select, [data-theme='light'] textarea,
    [data-theme='pastel'] input, [data-theme='pastel'] select, [data-theme='pastel'] textarea {
        background: rgba(0, 0, 0, 0.05) !important; /* D√πng n·ªÅn ƒëen m·ªù thay v√¨ tr·∫Øng m·ªù */
        border-color: rgba(0, 0, 0, 0.1); /* Vi·ªÅn ƒëen m·ªù tr√™n theme s√°ng */
    }

    [data-theme='light'] input:focus, [data-theme='light'] select:focus, [data-theme='light'] textarea:focus,
    [data-theme='pastel'] input:focus, [data-theme='pastel'] select:focus, [data-theme='pastel'] textarea:focus {
        background: rgba(0, 0, 0, 0.07) !important; /* TƒÉng ƒë·ªô ƒë·∫≠m khi focus */
    }
    /* === END: S·ª¨A L·ªñI N·ªÄN INPUT/SELECT TR√äN THEME S√ÅNG === */

    /* C·∫£i thi·ªán n·ªÅn v√† m√†u ch·ªØ cho option trong select theo theme hi·ªán t·∫°i */
    select option {
        background: var(--panel);
        color: var(--text);
    }
    
    ::placeholder { color: var(--sub); opacity: 0.7; } /* S·ª≠a ƒë·ªïi */
    ::-ms-input-placeholder { color: var(--sub); }
    :-ms-input-placeholder { color: var(--sub); }

    
    
    .draggable-timer {
        position: fixed;
        bottom: 20px;
        right: 20px;
        color: var(--text);
        padding: 8px 16px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        font-size: 2em;
        font-weight: 600;
        cursor: move;
        user-select: none;
        z-index: 9998;
        opacity: 0;
        transform: scale(0.9);
        pointer-events: none;
        transition: opacity 0.35s ease, transform 0.35s ease;
    }
    body.bg-view-mode .draggable-timer {
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
    }
    .app-nav, .panel-bg, .app-header .actions > *, .app-header > .row {
        transition: opacity 0.35s ease, transform 0.35s ease, background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;
    }
    body.bg-view-mode .app-nav,
    body.bg-view-mode .view.active > .panel-bg {
        opacity: 0;
        pointer-events: none;
        transform: scale(0.98);
    }
    body.bg-view-mode .app-header {
        background: transparent !important;
        border-color: transparent !important;
        box-shadow: none !important;
    }
    body.bg-view-mode .app-header .actions > *:not(#btnToggleBg),
    body.bg-view-mode .app-header > .row {
        opacity: 0;
        pointer-events: none;
    }
    body.bg-view-mode #btnToggleBg {
        opacity: 1;
        pointer-events: auto;
    }
    .sound-permission-bar {
      position: fixed; left: 50%; transform: translateX(-50%);
      bottom: 48px; z-index: 9999;
      border-radius: 12px; padding: 10px 14px;
      display: none; align-items: center; gap: 10px;
      box-shadow: var(--shadow);
    }
    .sound-permission-bar.show { display: flex; }
    .sound-permission-bar .msg { font-size: 14px; color: var(--text); }
    .draggable-timer { text-shadow: 0px 0px 8px rgba(0, 0, 0, 0.9); }

    /* Gi·∫£m/lo·∫°i b·ªè b√≥ng ch·ªØ cho theme s√°ng ƒë·ªÉ tr√°nh nh√≤e/l√≥a */
    body[data-theme='light'],
    body[data-theme='pastel'] { text-shadow: none; }
    body[data-theme='light'] .draggable-timer,
    body[data-theme='pastel'] .draggable-timer { text-shadow: none; }

    /* ============================================= */
/* ========================================================= */
/* START: THI?T L?P PANEL KI?U M?  ?C (FROSTED GLASS)        */
/* ========================================================= */

/* --- 1.  p d?ng hi?u ?ng n?n m? chung cho t?t c? c c panel --- */
.app-nav,
.panel-bg,
.modal-card,
.actions-menu,
.nav-btn .tooltip,
.draggable-timer, 
.sound-permission-bar,
.toast,
.topic-item,
.stat-card,
.hist-item,
.method-item {
    background: rgba(var(--panel-rgb), var(--panel-opacity));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

/* --- 2.  ?nh nghia vi?n cho t?ng lo?i panel --- */
.app-nav {
    border-right: 1px solid rgba(255, 255, 255, 0.1);
}
.panel-bg,
.modal-card,
.actions-menu,
.nav-btn .tooltip,
.draggable-timer, 
.sound-permission-bar,
.toast,
.topic-item,
.stat-card,
.hist-item,
.method-item {
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* --- 3. Tinh ch?nh vi?n cho c c theme S NG (Light/Pastel) --- */
[data-theme='light'] .app-nav,
[data-theme='light'] .panel-bg,
[data-theme='light'] .modal-card,
[data-theme='light'] .actions-menu,
[data-theme='light'] .nav-btn .tooltip,
[data-theme='light'] .draggable-timer,
[data-theme='light'] .sound-permission-bar,
[data-theme='light'] .toast,
[data-theme='light'] .topic-item,
[data-theme='light'] .stat-card,
[data-theme='light'] .hist-item,
[data-theme='light'] .method-item,
[data-theme='pastel'] .app-nav,
[data-theme='pastel'] .panel-bg,
[data-theme='pastel'] .modal-card,
[data-theme='pastel'] .actions-menu,
[data-theme='pastel'] .nav-btn .tooltip,
[data-theme='pastel'] .draggable-timer,
[data-theme='pastel'] .sound-permission-bar,
[data-theme='pastel'] .toast,
[data-theme='pastel'] .topic-item,
[data-theme='pastel'] .stat-card,
[data-theme='pastel'] .hist-item,
[data-theme='pastel'] .method-item {
    border-color: rgba(0, 0, 0, 0.1);
}

/* --- 4. S?a l?i hi?u ?ng fade-out c?a ghi ch  cho ph  h?p --- */
.note-content:not(.expanded)::after {
    background: linear-gradient(to top, rgba(var(--panel-rgb), 1) 20%, transparent);
}

/* --- C c quy t?c c n l?i gi? nguy n t? file g?c --- */
[data-theme='light'] .tab-nav,
[data-theme='pastel'] .tab-nav {
    border-bottom-color: rgba(0, 0, 0, 0.1);
}
.subtopic-btn {
    background-color: transparent;
}
.subtopic-btn:hover {
    background-color: transparent; /* Hover transparent to avoid blue background */
}
.method-item[open] summary {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
    [data-theme='light'] .method-item[open] summary,
    [data-theme='pastel'] .method-item[open] summary {
        border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    /* Editor container (single pane, Rich Text) */
    .editor-container { height: 350px; }
    .editable-content { height: 100%; border: 1px solid var(--muted); border-radius: 10px; padding: 10px; overflow-y: auto; background: var(--bg); }
    .editable-content:focus-within { border-color: var(--acc); outline: none; }
    .editable-content h4 { color: var(--acc-2); font-size: 1.1em; margin-top: 1.5em; margin-bottom: 0.5em; }
    .editable-content strong, .editable-content b { color: var(--acc); font-weight: 600; }
    .editable-content ol, .editable-content ul { padding-left: 20px; }

    /* Editor toolbar for Methods modal */
    .editor-toolbar { display: flex; gap: 6px; margin-bottom: 6px; padding: 4px; background: var(--muted); border-radius: 8px; }
    .editor-toolbar button { font-weight: bold; width: 32px; height: 32px; padding: 0; }
    .editor-toolbar .btn.ghost:hover { background-color: rgba(var(--acc-rgb, 108, 140, 255), 0.15); }
    .editor-toolbar .btn.ghost.active { background-color: rgba(var(--acc-rgb, 108, 140, 255), 0.25); }
    .color-picker-wrapper { position: relative; }
    .color-palette { position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; padding: 6px; border-radius: 8px; border: 1px solid var(--muted); background: var(--panel); box-shadow: var(--shadow); z-index: 10; }
    .color-swatch { width: 24px; height: 24px; border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.5); cursor: pointer; transition: transform 0.15s ease; }
    .color-swatch:hover { transform: scale(1.15); }

    /* Method actions inline with summary and show on hover */
    .method-item summary { display: flex; align-items: center; justify-content: space-between; }
    .method-item summary > span { flex: 1; }
    .method-item summary .topic-actions { margin-left: 8px; }
    .method-title { cursor: pointer; }
    .method-item:hover .topic-actions, .method-item:focus-within .topic-actions { opacity: 1; visibility: visible; }

    </style>
</head>
<body data-theme="default"> <div class="app" id="app">
    <nav class="app-nav">
        <button class="nav-btn active" id="navBtnTimer" data-view="timer" aria-label="ƒê·ªìng h·ªì">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span class="tooltip">ƒê·ªìng h·ªì</span>
        </button>
        <button class="nav-btn" id="navBtnTopics" data-view="topics" aria-label="Ch·ªß ƒë·ªÅ">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
            <span class="tooltip">Ch·ªß ƒë·ªÅ</span>
        </button>
        <button class="nav-btn" id="navBtnStats" data-view="stats" aria-label="Th·ªëng k√™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"></path><path d="m19 9-5 5-4-4-3 3"></path></svg>
            <span class="tooltip">Th·ªëng k√™</span>
        </button>
        <button class="nav-btn" id="navBtnMethods" data-view="methods" aria-label="Kho Tri Th·ª©c">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15.042 21.672L13.684 16.6s.408-1.947 1.25-3.25c.842-1.303 2.002-2.5 3.5-3.5s3.25-1.25 3.25-1.25l5.072 1.358c.27.072.358.42.128.628l-3.35 3.35a.499.499 0 0 1-.594.052l-2.07-1.486c-.44-.314-.82-.53-1.11-.665-.29-.135-.55-.22-.78-.245s-.45.045-.63.155c-.18.11-.3.29-.36.5-.06.21.02.48.18.78.16.3.385.68.665 1.11l1.486 2.07a.499.499 0 0 1-.052.594l-3.35 3.35c-.208.23-.556.142-.628-.128z"/><path d="M12 15l-3-3 3-3 3 3-3 3z"/><path d="M9.01 11.99l-3.005 3.004a.997.997 0 0 1-1.41-1.41l3.004-3.005-3.004-3.005a.997.997 0 0 1 1.41-1.41l3.005 3.004z"/><path d="M5.01 11.99l-3.005 3.004a.997.997 0 0 1-1.41-1.41l3.004-3.005-3.004-3.005a.997.997 0 0 1 1.41-1.41l3.005 3.004z"/></svg>
            <span class="tooltip">Kho Tri Th·ª©c</span>
        </button>
        <button class="nav-btn" id="btnSettings" style="margin-top: auto;" aria-label="C√†i ƒë·∫∑t">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            <span class="tooltip">C√†i ƒë·∫∑t</span>
        </button>
        <button class="nav-btn" id="navBtnGuide" data-view="guide" aria-label="H∆∞·ªõng d·∫´n">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 1 1 5.82 1c0 2-3 2-3 4"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <span class="tooltip">H∆∞·ªõng d·∫´n</span>
        </button>
    </nav>

    <main class="app-content">
      <header class="app-header panel-bg">
        <div class="row" style="gap:12px; align-items:center; flex:0 1 auto">
          <strong>üìö Pomodoro Study App</strong>
          <span class="badge" id="selectedContext">Ch∆∞a ch·ªçn Ch·ªß ƒë·ªÅ con</span>
        </div>
        <div class="actions">
          <button class="btn ghost small" id="btnDashboard" title="Dashboard T·ªïng quan">üìä T·ªïng Quan </button>
          <a href="https://forms.gle/EfFqBJFTbFtDo5H4A" target="_blank" rel="noopener noreferrer" class="btn ghost small" title="G·ª≠i ph·∫£n h·ªìi c·ªßa b·∫°n">üí¨ Ph·∫£n H·ªìi</a>
          <button class="btn ghost small" id="btnExport" title="Xu·∫•t JSON">‚¨áÔ∏è Xu·∫•t File</button>
          <label class="btn ghost small" for="importFile" title="Nh·∫≠p JSON">‚¨ÜÔ∏è Nh·∫≠p File</label>
          <input type="file" id="importFile" accept="application/json" style="display:none" />
          <button class="btn small" id="btnToggleBg" title="·∫®n/Hi·ªán giao di·ªán">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
          </button>
          <button class="btn small" id="btnFullscreen" title="To√†n m√†n h√¨nh">‚ÜóÔ∏è</button>
        </div>
      </header>
      

      <div id="view-timer" class="view active">
        <section class="panel panel-bg">
          <div class="timer-header">
            <div id="welcomePanel" class="hidden panel-bg" style="text-align:center; padding: 20px; border-radius: var(--radius); width: 100%;">
                <h3>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Pomodoro Study App!</h3>
                <p>H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch ch·ªçn m·ªôt <strong>Ch·ªß ƒë·ªÅ con</strong> ho·∫∑c t·∫°o Ch·ªß ƒë·ªÅ/Ch·ªß ƒë·ªÅ con m·ªõi.</p>
                <button class="btn acc" id="btnHelpCreateTopic">Ôºã T·∫°o Ch·ªß ƒë·ªÅ M·ªõi</button>
            </div>
            <div class="presets" role="group" aria-label="Ch·ªçn ch·∫ø ƒë·ªô preset">
                <button id="btnPresetA" class="btn small ghost" data-preset="A"></button>
                <button id="btnPresetB" class="btn small ghost" data-preset="B"></button>
                <button id="btnPresetC" class="btn small ghost" data-preset="C">üåä Flow</button>
            </div>
          </div>
          <hr />
          <div class="timer" aria-live="polite">
            <div class="badge" id="stateBadge">TR·∫†NG TH√ÅI</div>
            
            <div class="timer-circle-container">
              <svg class="timer-svg" viewBox="0 0 100 100">
                  <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                  <circle class="timer-circle-progress" cx="50" cy="50" r="45"></circle>
              </svg>
              <div id="timeDisplay" class="big-time">00:00</div>
            </div>

            <div class="tiny" id="cycleInfo"></div>

            <div class="tiny" id="breakSuggestionDisplay" style="min-height: 1.5em; font-style: italic; opacity: 0.8; transition: opacity 0.3s ease;"></div>

            <div id="windDownChecklist" class="hidden" style="text-align: left; max-width: 300px; margin: 0 auto; padding: 0 10px;">
              <h4 style="margin: 8px 0 4px; color: var(--acc); text-align: center;">Checklist H·∫° nhi·ªát</h4>
              <ul style="list-style: '‚úì '; margin: 0; padding-left: 20px; color: var(--sub);">
                <li>L∆∞u c√¥ng vi·ªác ƒëang l√†m (Save/Commit).</li>
                <li>Ghi ch√∫ nhanh "Next step".</li>
                <li>D·ªçn d·∫πp kh√¥ng gian l√†m vi·ªác.</li>
              </ul>
            </div>
            
            <div class="controls">
              <button class="btn acc" id="btnStart" aria-label="B·∫Øt ƒë·∫ßu (Space)">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu</button>
              <button class="btn warn hidden" id="btnFinishFlow" aria-label="K·∫øt th√∫c phi√™n l√†m vi·ªác">üßò B·∫Øt ƒë·∫ßu ngh·ªâ</button>
              <button class="btn" id="btnPause" aria-label="T·∫°m d·ª´ng (Space)">‚è∏Ô∏è T·∫°m d·ª´ng</button>
              <button class="btn" id="btnResume" aria-label="Ti·∫øp t·ª•c (Space)">‚èµ Ti·∫øp t·ª•c</button>
              <button class="btn warn" id="btnSkip" aria-label="B·ªè qua (N)">‚è≠Ô∏è B·ªè qua</button>
              <button class="btn danger" id="btnReset">‚Ü∫ ƒê·∫∑t l·∫°i</button>
              <button class="btn acc small hidden" id="btnBreakEarly">üßò Ngh·ªâ s·ªõm</button>
            </div>
            <div class="tiny">Ph√≠m t·∫Øt: <strong>Space</strong> = B·∫Øt ƒë·∫ßu/T·∫°m d·ª´ng/Ti·∫øp t·ª•c, <strong>N</strong> = Ti·∫øp theo/B·ªè qua</div>
          </div>
        </section>

        <section class="panel panel-bg aux-panel">
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="tasks">Nhi·ªám v·ª•</button>
                <button class="tab-btn" data-tab="notes">Ghi ch√∫</button>
                <button class="tab-btn" data-tab="ai">Gemini AI</button>
            </nav>
            <div id="tasks" class="tab-content active">
                <h4 style="margin: 0 0 8px; color: var(--sub);">To-do cho ch·ªß ƒë·ªÅ con n√†y:</h4>
                <ul id="subtopicTasksList" class="subtopic-todo-list"></ul>
                <div class="row" style="gap:8px; margin-top: 8px;">
                    <input type="text" id="newSubtopicTaskInput" placeholder="Th√™m m·ªôt task m·ªõi..." />
                    <button id="btnAddSubtopicTask" class="btn small" style="flex: 0 1 auto;">Th√™m</button>
                </div>
            </div>
            <div id="notes" class="tab-content">
                <div id="generalNotesList" class="notes-list"></div>
                <div class="add-note-area" style="margin-top: 12px;">
                    <textarea id="newGeneralNoteText" placeholder="Th√™m ghi ch√∫ m·ªõi..."></textarea>
                    <div style="text-align: right; margin-top: 8px;">
                        <button class="btn acc small" id="btnAddGeneralNote">Ôºã Th√™m ghi ch√∫</button>
                    </div>
                </div>
            </div>
            <div id="ai" class="tab-content">
                <div class="panel-header" style="margin-bottom: 8px; padding: 0;">
                    <h4 style="margin:0;">Gemini cho: <span id="currentSubtopicNameChat">(ch∆∞a ch·ªçn)</span></h4>
                    <div class="actions">
                        <button id="btnClearChat" class="btn small danger" title="X√≥a l·ªãch s·ª≠">üóëÔ∏è</button>
                    </div>
                </div>
                <div id="chatMessages" class="chat-messages"></div>
                <div id="aiPromptSuggestions" style="display: flex; gap: 6px; margin: 8px 0; flex-wrap: wrap;">
                  <button class="btn small ghost" data-prompt="Gi·∫£i th√≠ch kh√°i ni·ªám ch√≠nh c·ªßa ch·ªß ƒë·ªÅ n√†y">Gi·∫£i th√≠ch kh√°i ni·ªám</button>
                  <button class="btn small ghost" data-prompt="T·∫°o m·ªôt d√†n √Ω chi ti·∫øt cho ch·ªß ƒë·ªÅ n√†y">T·∫°o d√†n √Ω</button>
                  <button class="btn small ghost" data-prompt="Li·ªát k√™ 5 c√¢u h·ªèi √¥n t·∫≠p quan tr·ªçng v·ªÅ ch·ªß ƒë·ªÅ n√†y">T·∫°o c√¢u h·ªèi √¥n t·∫≠p</button>
                </div>
                <div class="chat-input-area">
                  <input type="text" id="chatInput" placeholder="H·ªèi Gemini ƒëi·ªÅu g√¨ ƒë√≥..." />
                  <button id="btnSendMessage" class="btn acc">G·ª≠i</button>
                </div>
            </div>
        </section>
      </div>

      <div id="view-topics" class="view">
        <div class="panel panel-bg">
            <div class="row" style="gap:8px; align-items: center; margin-bottom: 12px;">
                <h3 style="margin: 0;">Qu·∫£n l√Ω Ch·ªß ƒë·ªÅ</h3>
                <button class="btn small acc" id="btnAddTopic" style="margin-left: auto;">Ôºã Th√™m Ch·ªß ƒë·ªÅ</button>
            </div>
            <div id="topicsList"></div>
            <div class="footer-note">Nh·∫•p m≈©i t√™n ƒë·ªÉ m·ªü/ƒë√≥ng danh s√°ch ch·ªß ƒë·ªÅ con.</div>
        </div>
      </div>
      
      <div id="view-stats" class="view">
        <section class="panel panel-bg">
            <h3 style="margin:0 0 12px 0;">Th·ªëng k√™ & L·ªãch s·ª≠ ‚Äî <span id="currentSubtopicName">(ch∆∞a ch·ªçn)</span></h3>
            <div class="stats-grid">
              <div class="stat-card"><h4>T·ªïng th·ªùi gian</h4><div class="stat-value" id="statTotal">0 ph√∫t</div></div>
              <div class="stat-card"><h4>Phi√™n</h4><div class="stat-value" id="statSessions">0</div></div>
              <div class="stat-card"><h4>Nhi·ªám v·ª• Ho√†n th√†nh</h4><div class="stat-value" id="statTasks">0</div></div>
            </div>
            <div style="margin-top:12px">
              <h4 style="margin:4px 0 8px; color:var(--sub)">L·ªãch s·ª≠ (L√ÄM VI·ªÜC)</h4>
              <div class="history" id="historyList"></div>
            </div>
        </section>
      </div>
      
      <div id="view-methods" class="view">
        <div class="panel panel-bg">
            <div class="row" style="gap:8px; align-items: center; margin-bottom: 12px;">
                <h3 style="margin:0;">üí° Kho Tri Th·ª©c C√° Nh√¢n H√≥a</h3>
                <button class="btn small acc" id="btnAddMethod" style="margin-left: auto;">Ôºã Th√™m tri th·ª©c</button>
            </div>
            <p class="tiny" style="margin-top: -8px; margin-bottom: 20px;">Nh·∫•p v√†o t·ª´ng m·ª•c ƒë·ªÉ xem chi ti·∫øt.</p>
            <div class="methods-container"></div>
        </div>
      </div>

      <div id="view-guide" class="view">
          <div class="panel panel-bg">
              <h3 style="margin-top: 0;">üìñ Kh√°m Ph√° Pomodoro Study App</h3>
              <p>
                  Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi kh√¥ng gian h·ªçc t·∫≠p ƒë∆∞·ª£c thi·∫øt k·∫ø d√†nh ri√™ng cho s·ª± t·∫≠p trung v√† hi·ªáu qu·∫£. H√£y c√πng kh√°m ph√° nh·ªØng t√≠nh nƒÉng s·∫Ω ƒë·ªìng h√†nh c√πng b·∫°n tr√™n h√†nh tr√¨nh chinh ph·ª•c tri th·ª©c.
              </p>

              <h4>üöÄ Kh·ªüi ƒê·∫ßu Nhanh Ch·ªâ Trong 4 B∆∞·ªõc</h4>
              <p>ƒê·ªÉ h√†nh tr√¨nh c·ªßa b·∫°n lu√¥n m·∫°ch l·∫°c, m·ªçi th·ª© trong ·ª©ng d·ª•ng ƒë∆∞·ª£c s·∫Øp x·∫øp theo c·∫•u tr√∫c <strong>Ch·ªß ƒë·ªÅ L·ªõn ‚Üí Ch·ªß ƒë·ªÅ con</strong>.</p>
              <ol>
                  <li>M·ªü m·ª•c <strong>üìö Ch·ªß ƒë·ªÅ</strong> t·ª´ thanh ƒëi·ªÅu h∆∞·ªõng b√™n c·∫°nh.</li>
                  <li>Nh·∫•n <strong>Ôºã Th√™m Ch·ªß ƒë·ªÅ</strong> ƒë·ªÉ t·∫°o m·ªôt lƒ©nh v·ª±c l·ªõn (v√≠ d·ª•: "Ti·∫øng Anh Giao Ti·∫øp").</li>
                  <li>B√™n c·∫°nh ch·ªß ƒë·ªÅ v·ª´a t·∫°o, nh·∫•n <strong>Ôºã Th√™m</strong> ƒë·ªÉ t·∫°o m·ªôt ch·ªß ƒë·ªÅ con, chi ti·∫øt h∆°n (v√≠ d·ª•: "B√†i 1: Luy·ªán ph√°t √¢m IPA").</li>
                  <li>Ch·ªçn ch·ªß ƒë·ªÅ con ƒë√≥. Gi·ªù ƒë√¢y, b·∫°n ƒë√£ s·∫µn s√†ng ƒë·ªÉ b·∫Øt ƒë·∫ßu phi√™n h·ªçc ƒë·∫ßu ti√™n c·ªßa m√¨nh!</li>
              </ol>

              <hr />
              <h4>‚ú® Nh·ªØng T√≠nh NƒÉng ƒê√°ng Ch√∫ √ù</h4>

              <h4>C√°c Ch·∫ø ƒê·ªô ƒê·ªìng H·ªì Linh Ho·∫°t ‚è±Ô∏è</h4>
              <p>·ª®ng d·ª•ng kh√¥ng ch·ªâ c√≥ Pomodoro. H√£y ch·ªçn ph∆∞∆°ng ph√°p ph√π h·ª£p v·ªõi c√¥ng vi·ªác c·ªßa b·∫°n:</p>
              <ul>
                  <li><strong>Pomodoro C·ªï ƒêi·ªÉn (Ki·ªÉu A/B):</strong> L√†m vi·ªác t·∫≠p trung trong c√°c phi√™n ƒë·ªãnh s·∫µn (v√≠ d·ª•: 25 ph√∫t l√†m, 5 ph√∫t ngh·ªâ) ƒë·ªÉ x√¢y d·ª±ng k·ª∑ lu·∫≠t v√† nh·ªãp ƒë·ªô.</li>
                  <li><strong>Ch·∫ø ƒë·ªô Flowtime (Ki·ªÉu üåä Flow):</strong> D√†nh cho c√¥ng vi·ªác c·∫ßn d√≤ng ch·∫£y s√¢u. ƒê·ªìng h·ªì s·∫Ω ƒë·∫øm l√™n, cho ph√©p b·∫°n l√†m vi·ªác ƒë·∫øn khi t·ª± c·∫£m th·∫•y c·∫ßn ngh·ªâ. Th·ªùi gian ngh·ªâ s·∫Ω ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t d·ª±a tr√™n th·ªùi gian b·∫°n ƒë√£ l√†m vi·ªác.</li>
                  <li><strong>ƒê·ªám "H·∫° nhi·ªát" (Wind-down):</strong> M·ªôt kho·∫£ng ƒë·ªám t√πy ch·ªânh gi·ªØa l√∫c l√†m v√† l√∫c ngh·ªâ, gi√∫p b·∫°n k·∫øt th√∫c c√¥ng vi·ªác ƒëang d·ªü, ghi ch√∫ l·∫°i "b∆∞·ªõc ti·∫øp theo" v√† chuy·ªÉn tr·∫°ng th√°i m·ªôt c√°ch m∆∞·ª£t m√†, kh√¥ng b·ªã c·∫Øt ngang ƒë·ªôt ng·ªôt.</li>
              </ul>

              <h4>Kho Tri Th·ª©c C√° Nh√¢n H√≥a üí°</h4>
              <p>B·∫°n c√≥ th·ªÉ <strong>Th√™m, S·ª≠a, X√≥a</strong> c√°c ph∆∞∆°ng ph√°p v√† ghi ch√∫ quan tr·ªçng. V·ªõi tr√¨nh so·∫°n th·∫£o m·∫°nh m·∫Ω, b·∫°n d·ªÖ d√†ng ƒë·ªãnh d·∫°ng ti√™u ƒë·ªÅ, in ƒë·∫≠m, t·∫°o danh s√°ch v√† th·∫≠m ch√≠ ch·ªçn m√†u ch·ªØ ƒë·ªÉ l√†m n·ªïi b·∫≠t th√¥ng tin.</p>

              <h4>Qu·∫£n L√Ω Ch·ªß ƒê·ªÅ Tr·ª±c Quan</h4>
              <p>D·ªÖ d√†ng s·∫Øp x·∫øp c√°c m·ª•c ti√™u h·ªçc t·∫≠p c·ªßa b·∫°n. S·ª≠ d·ª•ng thao t√°c <strong>k√©o v√† th·∫£</strong> ƒë·ªÉ s·∫Øp x·∫øp l·∫°i th·ª© t·ª± c√°c Ch·ªß ƒë·ªÅ ho·∫∑c di chuy·ªÉn m·ªôt Ch·ªß ƒë·ªÅ con sang m·ªôt lƒ©nh v·ª±c kh√°c m·ªôt c√°ch tr·ª±c quan.</p>

              <h4>Nhi·ªám V·ª• & Ghi Ch√∫ T√≠ch H·ª£p üìù</h4>
              <p>Ngay trong m√†n h√¨nh ƒë·ªìng h·ªì, b·∫°n c√≥ th·ªÉ t·∫°o danh s√°ch vi·ªác c·∫ßn l√†m (to-do) cho t·ª´ng ch·ªß ƒë·ªÅ con ho·∫∑c ghi l·∫°i nh·ªØng √Ω t∆∞·ªüng ch·ª£t n·∫£y ra m√† kh√¥ng l√†m gi√°n ƒëo·∫°n d√≤ng ch·∫£y c√¥ng vi·ªác.</p>

              <h4>Ch·∫ø ƒê·ªô Zen üßò</h4>
              <p>Khi c·∫ßn t·∫≠p trung tuy·ªát ƒë·ªëi, h√£y nh·∫•n v√†o bi·ªÉu t∆∞·ª£ng con m·∫Øt (üëÅÔ∏è). Giao di·ªán s·∫Ω ·∫©n ƒëi, ch·ªâ ƒë·ªÉ l·∫°i h√¨nh n·ªÅn v√† chi·∫øc ƒë·ªìng h·ªì. Trong ch·∫ø ƒë·ªô n√†y, b·∫°n c√≥ th·ªÉ <strong>k√©o th·∫£ ƒë·ªìng h·ªì</strong> ƒë·∫øn b·∫•t k·ª≥ v·ªã tr√≠ n√†o tr√™n m√†n h√¨nh ƒë·ªÉ c√≥ m·ªôt kh√¥ng gian l√†m vi·ªác g·ªçn g√†ng nh·∫•t.</p>

              <h4>Th·ªëng K√™ & C·ªôt M·ªëc üèÜ</h4>
              <p>Theo d√µi h√†nh tr√¨nh c·ªßa b·∫°n qua nh·ªØng con s·ªë bi·∫øt n√≥i. ·ª®ng d·ª•ng s·∫Ω t·ª± ƒë·ªông ghi nh·∫≠n v√† ch√∫c m·ª´ng khi b·∫°n ƒë·∫°t ƒë∆∞·ª£c nh·ªØng c·ªôt m·ªëc quan tr·ªçng v·ªÅ th·ªùi gian t·∫≠p trung, bi·∫øn m·ªói n·ªó l·ª±c th√†nh m·ªôt th√†nh t·ª±u ƒë√°ng t·ª± h√†o.</p>

              <hr />
              <h4>‚å®Ô∏è Ph√≠m T·∫Øt Th√¥ng Minh</h4>
              <ul>
                  <li><kbd>Space</kbd>: B·∫Øt ƒë·∫ßu / T·∫°m d·ª´ng / Ti·∫øp t·ª•c phi√™n h·ªçc.</li>
                  <li><kbd>N</kbd>: B·ªè qua phi√™n l√†m vi·ªác ho·∫∑c ngh·ªâ hi·ªán t·∫°i.</li>
                  <li><kbd>Esc</kbd>: ƒê√≥ng c√°c c·ª≠a s·ªï ƒëang m·ªü (nh∆∞ C√†i ƒë·∫∑t).</li>
              </ul>

              <hr />
              <h4>üõ†Ô∏è C√†i ƒê·∫∑t N√¢ng Cao & T√≠ch H·ª£p</h4>

              <h4>Tr·ª£ L√Ω Gemini AI üß†</h4>
              <p>Bi·∫øn ·ª©ng d·ª•ng th√†nh m·ªôt ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh th√¥ng minh. Ngo√†i vi·ªác h·ªèi ƒë√°p, b·∫°n c√≤n c√≥ th·ªÉ:</p>
              <ul>
                  <li><strong>T·ª± ƒë·ªông ƒê·ªãnh d·∫°ng Th√¥ng minh:</strong> Khi so·∫°n th·∫£o trong m·ª•c "Ph∆∞∆°ng ph√°p", h√£y ƒë·ªÉ AI t·ª± ƒë·ªông ph√¢n t√≠ch v√† ƒë·ªãnh d·∫°ng vƒÉn b·∫£n th√¥ c·ªßa b·∫°n‚Äît·ª± nh·∫≠n di·ªán ti√™u ƒë·ªÅ, c√°c √Ω ch√≠nh c·∫ßn in ƒë·∫≠m v√† danh s√°ch.</li>
                  <li><strong>Thi·∫øt l·∫≠p:</strong> Truy c·∫≠p Google AI Studio ƒë·ªÉ t·∫°o API Key mi·ªÖn ph√≠ v√† d√°n v√†o √¥ "Gemini API Key" trong C√†i ƒë·∫∑t c·ªßa ·ª©ng d·ª•ng.</li>
              </ul>

              <h4>T√πy Bi·∫øn Giao Di·ªán & √Çm Thanh üé®</h4>
              <p>Bi·∫øn kh√¥ng gian h·ªçc t·∫≠p th√†nh c·ªßa ri√™ng b·∫°n:</p>
              <ul>
                  <li><strong>Nhi·ªÅu Theme & H√¨nh n·ªÅn:</strong> L·ª±a ch·ªçn gi·ªØa c√°c theme c√≥ s·∫µn (S√°ng, T·ªëi, Pastel...) ho·∫∑c <strong>t·∫£i l√™n h√¨nh n·ªÅn c·ªßa ri√™ng b·∫°n</strong> ƒë·ªÉ t·∫°o c·∫£m h·ª©ng.</li>
                  <li><strong>√Çm b√°o T√πy ch·ªânh:</strong> B·∫°n c√≥ th·ªÉ <strong>t·∫£i l√™n c√°c file √¢m thanh (.mp3, .wav...) c·ªßa ri√™ng m√¨nh</strong> ƒë·ªÉ s·ª≠ d·ª•ng l√†m chu√¥ng b√°o cho c√°c phi√™n l√†m vi·ªác v√† ngh·ªâ ng∆°i.</li>
              </ul>

              <h4>Nh·∫°c N·ªÅn YouTube üé∂</h4>
              <p>T·∫°o kh√¥ng gian h·ªçc t·∫≠p ho√†n h·∫£o b·∫±ng c√°ch ph√°t m·ªôt video ho·∫∑c danh s√°ch ph√°t YouTube l√†m nh·∫°c n·ªÅn. D√°n ƒë∆∞·ªùng d·∫´n (URL) v√†o √¥ "Nh·∫°c n·ªÅn YouTube" trong C√†i ƒë·∫∑t.</p>

              <h4>An To√†n D·ªØ Li·ªáu: Sao L∆∞u & Ph·ª•c H·ªìi üõ°Ô∏è</h4>
              <p>·ª®ng d·ª•ng t·ª± ƒë·ªông sao l∆∞u ti·∫øn tr√¨nh c·ªßa b·∫°n m·ªói ng√†y. B·∫°n c√≥ th·ªÉ t√πy ch·ªânh s·ªë ng√†y l∆∞u gi·ªØ b·∫£n sao l∆∞u v√† ph·ª•c h·ªìi d·ªØ li·ªáu t·ª´ m·ªôt ng√†y trong qu√° kh·ª© n·∫øu c·∫ßn. ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> Ph·ª•c h·ªìi s·∫Ω ghi ƒë√® to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i.</p>
          </div>
      </div>
    </main>
  </div>

  <div class="modal" id="modalMilestone" role="dialog" aria-modal="true" aria-labelledby="milestoneTitle">
    <div class="modal-card" style="width: min(600px, 94vw);">
        <h3 id="milestoneTitle">üéâ Ch√∫c m·ª´ng B·∫°n!</h3>
        <p id="milestoneMessage" style="white-space: pre-wrap; line-height: 1.6;"></p>
        <div class="row" style="justify-content:flex-end; margin-top:12px">
            <button class="btn acc" id="btnMilestoneClose">Ti·∫øp t·ª•c h√†nh tr√¨nh!</button>
        </div>
    </div>
  </div>
  <div class="modal" id="modalSettings" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal-card">
          <h3 id="settingsTitle">‚öôÔ∏è C√†i ƒë·∫∑t</h3>
          <nav class="tab-nav">
              <button class="tab-btn active" data-tab="settings-timer">ƒê·ªìng h·ªì</button>
              <button class="tab-btn" data-tab="settings-ui">Giao di·ªán & √Çm thanh</button>
              <button class="tab-btn" data-tab="settings-integrations">T√≠ch h·ª£p</button>
          </nav>
          <div class="settings-content">
              <div id="settings-timer" class="tab-content active" style="flex-direction:column; gap:20px;">
                  <div class="row" id="timerPresetSelector" style="margin-bottom:16px;">
                      <button class="btn acc" data-preset-target="A"> Ki·ªÉu A </button>
                      <button class="btn ghost" data-preset-target="B"> Ki·ªÉu B </button>
                      <button class="btn ghost" data-preset-target="C"> Ki·ªÉu C (Flow) </button>
                  </div>
                  <div id="settings-pomodoro">
                      <h4>Th·ªùi l∆∞·ª£ng Pomodoro</h4>
                      <div class="row">
                          <label>L√ÄM VI·ªÜC (ph√∫t)<input type="number" id="set_work" min="1" /></label>
                          <label>H·∫† NHI·ªÜT (ph√∫t)<input type="number" id="set_winddown" min="0" /></label>
                          <label>NGH·ªà NG·∫ÆN (ph√∫t)<input type="number" id="set_short" min="1" /></label>
                          <label>NGH·ªà D√ÄI (ph√∫t)<input type="number" id="set_long" min="1" /></label>
                      </div>
                      <div class="row">
                          <label>Chu k·ª≥ Pomodoro<input type="number" id="set_cycles" min="1" /></label>
                          <label>Chu k·ª≥ ngh·ªâ d√†i<input type="number" id="set_interval" min="2" /></label>
                      </div>
                  </div>
                  <div id="settings-flowtime" class="hidden">
                      <h4>Flowtime</h4>
                      <div class="row">
                          <label>T·ª∑ l·ªá ngh·ªâ (L√†m vi·ªác / X)
                              <input type="number" id="set_flowRatio" min="1" max="20" />
                          </label>
                      </div>
                      <p class="tiny" style="margin-top: 4px;">G·ª£i √Ω: Th·ªùi gian ngh·ªâ = t·ªïng th·ªùi gian l√†m vi·ªác / X. M·∫∑c ƒë·ªãnh l√† 5.</p>
                  </div>
                  <div class="settings-row-toggle">
                          <label for="set_autoStartNext">T·ª± ƒë·ªông b·∫Øt ƒë·∫ßu phi√™n ti·∫øp theo</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_autoStartNext">
                              <span class="slider"></span>
                          </label>
                      </div>
                  <div class="settings-row-toggle">
                          <label for="set_enableWinddown">B·∫≠t H·∫° nhi·ªát sau phi√™n l√†m</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_enableWinddown">
                              <span class="slider"></span>
                          </label>
                      </div>
                  <div class="settings-row-toggle">
                          <label for="set_enableSessionNotes">Nh·∫Øc ghi ch√∫ sau m·ªói phi√™n</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_enableSessionNotes">
                              <span class="slider"></span>
                          </label>
                      </div>
              </div>
              <div id="settings-ui" class="tab-content" style="flex-direction: column; gap: 20px;">
                  <div>
                      <h4>Giao di·ªán</h4>
                      <div class="row">
                          <label>Theme Giao Di·ªán
                                <select id="set_theme_color">
                                    <option value="default">M·∫∑c ƒë·ªãnh (Dark Blue)</option>
                                    <option value="light">Light - Tr√† S·ªØa</option>
                                    <option value="pastel">Pastel - D·ªÖ th∆∞∆°ng</option>
                                    <option value="lofi">Lofi Study Room</option>
                                    <option value="space">Space Station</option>
                                </select>
                          </label>
                      </div>
                      <div class="row" style="margin-top: 12px;">
                          <label>Ch·∫ø ƒë·ªô hi·ªÉn th·ªã n·ªÅn
                              <select id="set_backgroundMode">
                                  <option value="cover">L·∫•p ƒë·∫ßy (M·∫∑c ƒë·ªãnh)</option>
                                  <option value="contain">V·ª´a v·∫∑n (S·∫Øc n√©t)</option>
                                  <option value="auto">K√≠ch th∆∞·ªõc g·ªëc (L·∫∑p l·∫°i)</option>
                              </select>
                          </label>
                      </div>
                      <div class="row">
                          <label>H√¨nh n·ªÅn
                              <label class="btn small ghost" for="uploadBg">T·∫£i ·∫£nh m·ªõi</label>
                              <input type="file" id="uploadBg" accept="image/*" class="hidden" />
                          </label>
                          <button class="btn small danger" id="btnClearBg">X√≥a n·ªÅn</button>
                      </div>
                      <div class="row">
                          <label style="flex: 1;">ƒê·ªô trong su·ªët c·ªßa n·ªÅn</label>
                          <input type="range" id="set_panelOpacity" min="0.1" max="1" step="0.05" style="flex: 2;">
                      </div>
                      
                      
                   </div>
                  
                   <div>
                      <h4>√Çm thanh</h4>
                      <div class="row">
                          <label>√Çm l∆∞·ª£ng (0‚Äì1)<input type="number" id="set_volume" step="0.05" min="0" max="1"/></label>
                          <label>Ki·ªÉu √¢m b√°o
                              <select id="set_theme">
                                  <option value="beep">Beep</option>
                                  <option value="chime">Chime</option>
                              </select>
                          </label>
                           <button class="btn" id="btnTestSound" style="flex: 0 1 auto; align-self: center;">Test</button>
                      </div>
                      <div style="text-align: right; margin-top: 12px;">
                          <button class="btn ghost small" id="btnToggleCustomSounds">T√πy ch·ªânh √¢m b√°o</button>
                      </div>

                      <div id="customSoundsContainer" class="hidden" style="margin-top: 8px;">
                      <div class="row" style="display: flex; gap: 8px; justify-content: flex-end;">
                          <div>
                              <small>√Çm b√°o h·∫øt L√ÄM VI·ªÜC</small>
                              <label title="√Çm b√°o h·∫øt L√ÄM VI·ªÜC" class="btn small ghost" for="uploadSoundWork">L√ÄM VI·ªÜC</label>
                              <input type="file" id="uploadSoundWork" accept="audio/*" class="hidden" />
                          </div>
                          <div>
                              <small>√Çm b√°o h·∫øt NGH·ªà NG·∫ÆN</small>
                              <label title="√Çm b√°o h·∫øt NGH·ªà NG·∫ÆN" class="btn small ghost" for="uploadSoundBreak">NGH·ªà NG·∫ÆN</label>
                              <input type="file" id="uploadSoundBreak" accept="audio/*" class="hidden" />
                          </div>
                          <div>
                              <small>√Çm b√°o h·∫øt NGH·ªà D√ÄI</small>
                              <label title="√Çm b√°o h·∫øt NGH·ªà D√ÄI" class="btn small ghost" for="uploadSoundLong">NGH·ªà D√ÄI</label>
                              <input type="file" id="uploadSoundLong" accept="audio/*" class="hidden" />
                          </div>
                      </div>
                      </div>
                      
                  </div>
              </div>
              <div id="settings-integrations" class="tab-content" style="flex-direction: column; gap: 20px;">
                  <div>
                      <h4>T√≠ch h·ª£p AI</h4>
                      <label>Gemini API Key
                          <input type="password" id="set_apiKey" placeholder="D√°n API Key c·ªßa b·∫°n v√†o ƒë√¢y..." />
                      </label>
                      <div class="tiny">C·∫ßn c√≥ ƒë·ªÉ s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng AI. L·∫•y key mi·ªÖn ph√≠ t·∫°i <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>.</div>
                  </div>
                  <div>
                      <h4>üéµ Nh·∫°c n·ªÅn YouTube</h4>
                      <div class="row" style="gap:8px; align-items:center;">
                          <input type="text" id="set_youtubeUrl" placeholder="D√°n link YouTube v√†o ƒë√¢y..." style="flex:1;">
                          </div>
                      <div id="ytUrlFeedback" class="tiny" style="min-height: 1.2em; padding: 4px 0;"></div>
                      <div class="row" style="margin-top: 4px;">
                          <label style="flex: 0 1 auto; display: flex; align-items: center; gap: 8px; font-size: 14px;">
                              <input type="checkbox" id="set_ytThumbAsBg">
                              <span>D√πng ·∫£nh b√¨a video l√†m n·ªÅn</span>
                          </label>
                      </div>
                      <div class="row" style="margin-top: 8px;">
                          <button id="btnToggleYtSound" class="btn small" style="flex:0 1 auto;" title="D·ª´ng s·∫Ω kh√¥ng t·ª± ph√°t l·∫°i cho ƒë·∫øn khi b·∫°n b·∫•m ‚ñ∂Ô∏è">‚ñ∂Ô∏è</button>
                          <input type="range" id="ytSoundVolume" min="0" max="100" step="1" value="80" style="flex:1;">
                      </div>
                      <div class="tiny" style="text-align:center; margin-top:4px;">√Çm l∆∞·ª£ng</div>
                  </div>
                  <div>
                      <h4>üõ°Ô∏è C√†i ƒë·∫∑t sao l∆∞u</h4>
                      <div class="row">
                          <label>S·ªë ng√†y sao l∆∞u c·∫ßn gi·ªØ l·∫°i
                               <input type="number" id="set_backupDays" min="1" max="30" />
                          </label>
                      </div>
                  </div>
                  <div>
                      <h4>üõ°Ô∏è Ph·ª•c h·ªìi d·ªØ li·ªáu</h4>
                      <p class="tiny">Ph·ª•c h·ªìi d·ªØ li·ªáu t·ª´ m·ªôt b·∫£n sao l∆∞u t·ª± ƒë·ªông h√†ng ng√†y. H√†nh ƒë·ªông n√†y s·∫Ω ghi ƒë√® l√™n d·ªØ li·ªáu hi·ªán t·∫°i c·ªßa b·∫°n.</p>
                      <div class="row">
                          <select id="backupList" style="flex: 3;"></select>
                          <button id="btnRestoreBackup" class="btn warn small" style="flex: 1;">Ph·ª•c h·ªìi</button>
                      </div>
                  </div>
              </div>
          </div>
          <div class="row" style="margin-top:16px; justify-content:flex-end">
              <button class="btn ghost" id="btnDefaults">M·∫∑c ƒë·ªãnh</button>
              <button class="btn acc" id="btnSaveSettings">L∆∞u</button>
              <button class="btn" id="btnCloseSettings">ƒê√≥ng</button>
          </div>
      </div>
  </div>

  <div class="modal" id="modalNote" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="modal-card">
      <h3 id="noteTitle">üìù Ghi ch√∫ cho phi√™n v·ª´a ho√†n th√†nh</h3>
      <div class="row"><textarea id="noteText" placeholder="B·∫°n h·ªçc ƒë∆∞·ª£c g√¨? Kh√≥ khƒÉn? Next steps?"></textarea></div>
      <div class="row" style="justify-content:flex-end; margin-top:8px; gap: 12px;">
        <button class="btn" id="btnSummarizeNote">‚ú® T√≥m t·∫Øt & G·ª£i √Ω</button>
        <button class="btn" id="btnSkipNote">B·ªè qua</button>
        <button class="btn acc" id="btnSaveNote">L∆∞u ghi ch√∫</button>
      </div>
    </div>
  </div>

  <div class="modal" id="modalGeneric" role="dialog" aria-modal="true" aria-labelledby="genericTitle">
      <div class="modal-card" style="width: min(450px, 94vw);">
          <h3 id="genericTitle">Ti√™u ƒë·ªÅ</h3>
          <p id="genericMessage" class="hidden"></p>
          <input type="text" id="genericInput" class="hidden" />
          <div class="row" style="justify-content:flex-end; margin-top:12px">
              <button class="btn" id="btnGenericCancel">H·ªßy</button>
              <button class="btn acc" id="btnGenericOk">OK</button>
          </div>
      </div>
  </div>
  
  <div class="modal" id="modalDashboard" role="dialog" aria-modal="true" aria-labelledby="dashboardTitle">
    <div class="modal-card" style="width: min(800px, 95vw);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 id="dashboardTitle">üìä T·ªïng quan</h3>
            <button class="btn ghost small" id="btnCloseDashboard">ƒê√≥ng</button>
        </div>
        <p class="tiny">T·ªïng h·ª£p th·ªùi gian v√† s·ªë phi√™n ƒë√£ ho√†n th√†nh tr√™n t·∫•t c·∫£ c√°c ch·ªß ƒë·ªÅ.</p>
        <div id="dashboardContent" style="max-height: 60vh; overflow-y: auto;"></div>
    </div>
  </div>

  <div class="modal" id="modalMethodEditor" role="dialog" aria-modal="true">
    <div class="modal-card" style="width: min(800px, 95vw);">
      <h3 id="methodEditorTitle">Ch·ªânh-s·ª≠a Ph∆∞∆°ng-ph√°p</h3>
      
      <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 12px;">
        <input type="hidden" id="methodEditorId">
        <label>Ti√™u-ƒë·ªÅ<input type="text" id="methodEditorTitleInput"></label>
        
        <label>N·ªôi-dung</label>
        <div class="editor-toolbar">
          <button id="toolH4" class="btn small ghost" title="Ti√™u-ƒë·ªÅ nh·ªè">H</button>
          <button id="toolBold" class="btn small ghost" title="In ƒë·∫≠m">B</button>
          <button id="toolItalic" class="btn small ghost" title="In nghi√™ng">I</button>
          <button id="toolList" class="btn small ghost" title="Danh-s√°ch">1.</button>
          <button id="toolBullet" class="btn small ghost" title="Danh s√°ch ch·∫•m tr√≤n">‚Ä¢</button>

          <div class="color-picker-wrapper">
            <button id="toolColor" class="btn small ghost" title="M√†u ch·ªØ">A</button>
            <div class="color-palette hidden">
              <button class="color-swatch" style="background-color: var(--text);" data-color="var(--text)" title="M√†u ch·ªØ m·∫∑c ƒë·ªãnh"></button>
              <button class="color-swatch" style="background-color: var(--acc);" data-color="var(--acc)" title="M√†u nh·∫•n m·∫°nh"></button>
              <button class="color-swatch" style="background-color: var(--acc-2);" data-color="var(--acc-2)" title="M√†u t√≠ch c·ª±c"></button>
              <button class="color-swatch" style="background-color: var(--warn);" data-color="var(--warn)" title="M√†u c·∫£nh b√°o"></button>
              <button class="color-swatch" style="background-color: var(--danger);" data-color="var(--danger)" title="M√†u nguy hi·ªÉm"></button>
              <button class="color-swatch" style="background-color: var(--purple);" data-color="var(--purple)" title="M√†u t√≠m"></button>
            </div>
          </div>
        </div>

        <div class="editor-container">
            <div id="methodEditorContentInput" class="editable-content" contenteditable="true"></div>
        </div>

      </div>

      <div class="row" style="justify-content:space-between; margin-top:16px">
        <button id="btnAutoFormat" class="btn small" disabled title="T√≠nh nƒÉng n√†y y√™u c·∫ßu Gemini API Key">‚ú® T·ª± ƒë·ªông ƒë·ªãnh d·∫°ng</button>
        <div>
          <button class="btn" id="btnCancelMethodEditor">H·ªßy</button>
          <button class="btn acc" id="btnSaveMethod">L∆∞u</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>
  <audio id="audioWorkEnd"></audio>
  <audio id="audioBreakEnd"></audio>
  <audio id="audioLongEnd"></audio>
  <div id="youtube-player-container"></div>

  <div id="draggableTimer" class="draggable-timer">00:00</div>

  <div id="soundPermissionBar" class="sound-permission-bar" role="alert" aria-live="polite">
    <span class="msg">Nh·∫•n "B·∫≠t √¢m thanh" ƒë·ªÉ cho ph√©p ph√°t nh·∫°c n·ªÅn.</span>
    <button id="btnEnableSound" class="btn small acc">B·∫≠t √¢m thanh</button>
  </div>
<!-- YouTube Iframe API is loaded dynamically when needed -->
<!-- === START: Inline Minimal Sortable (Offline-Safe) === -->
<script>
// Minimal Sortable shim for offline single-file usage.
// Supports: draggable selector, cross-list via same group, onEnd callback.
(function(){
  if (window.Sortable) return; // Respect existing if loaded
  const DND = { src: null, from: null, selector: null, group: null };
  function makeDraggable(container, selector){
    Array.from(container.querySelectorAll(selector)).forEach(el => {
      try { el.setAttribute('draggable','true'); } catch(_) {}
    });
  }
  function closestItem(e, selector){
    const t = e.target && e.target.closest ? e.target.closest(selector) : null;
    return t || null;
  }
  function Sortable(container, opts){
    this.el = container;
    this.options = opts || {};
    const selector = this.options.draggable || '*';
    const group = this.options.group || null;
    makeDraggable(container, selector);
    const handleDragStart = (e) => {
      const item = closestItem(e, selector);
      if (!item) return;
      DND.src = item; DND.from = container; DND.selector = selector; DND.group = group;
      e.dataTransfer.effectAllowed = 'move';
      try { e.dataTransfer.setData('text/plain', ''); } catch(_) {}
    };
    const handleDragOver = (e) => {
      if (!DND.src) return;
      // Only allow drop if same selector and group matches (or no group)
      const sameGroup = (!group && !DND.group) || (group && DND.group && group === DND.group);
      if (!sameGroup) return;
      const target = closestItem(e, selector);
      if (!target) return;
      e.preventDefault();
    };
    const handleDrop = (e) => {
      if (!DND.src) return;
      const sameGroup = (!group && !DND.group) || (group && DND.group && group === DND.group);
      if (!sameGroup) return;
      const target = closestItem(e, selector);
      if (!target) return;
      e.preventDefault();
      const from = DND.from;
      const to = container;
      const children = Array.from(from.querySelectorAll(DND.selector));
      const oldIndex = children.indexOf(DND.src);
      if (target && DND.src && target !== DND.src) {
        to.insertBefore(DND.src, target);
      }
      const newChildren = Array.from(to.querySelectorAll(DND.selector));
      const newIndex = newChildren.indexOf(DND.src);
      if (typeof this.options.onEnd === 'function') {
        try { this.options.onEnd({ oldIndex, newIndex, from, to, item: DND.src }); } catch(_) {}
      }
      DND.src = null; DND.from = null; DND.selector = null; DND.group = null;
    };
    this._listeners = { handleDragStart, handleDragOver, handleDrop };
    container.addEventListener('dragstart', handleDragStart);
    container.addEventListener('dragover', handleDragOver);
    container.addEventListener('drop', handleDrop);
    this.destroy = () => {
      container.removeEventListener('dragstart', handleDragStart);
      container.removeEventListener('dragover', handleDragOver);
      container.removeEventListener('drop', handleDrop);
    };
  }
  window.Sortable = Sortable;
})();
</script>
<!-- === END: Inline Minimal Sortable === -->
  <script>
    const _0x1318bc=_0x2a57;(function(_0x5ca828,_0x37eb00){const _0x46b4f2=_0x2a57,_0x171b07=_0x5ca828();while(!![]){try{const _0x2ed4ba=-parseInt(_0x46b4f2(0x25e))/0x1*(-parseInt(_0x46b4f2(0x1a5))/0x2)+-parseInt(_0x46b4f2(0x433))/0x3+-parseInt(_0x46b4f2(0x31f))/0x4+-parseInt(_0x46b4f2(0x41b))/0x5*(parseInt(_0x46b4f2(0x25c))/0x6)+-parseInt(_0x46b4f2(0x1d5))/0x7*(parseInt(_0x46b4f2(0x255))/0x8)+parseInt(_0x46b4f2(0x1b1))/0x9+parseInt(_0x46b4f2(0x305))/0xa;if(_0x2ed4ba===_0x37eb00)break;else _0x171b07['push'](_0x171b07['shift']());}catch(_0x57ed20){_0x171b07['push'](_0x171b07['shift']());}}}(_0x293e,0x60f2d),window[_0x1318bc(0x2b2)](_0x1318bc(0x499),()=>{try{updateFullscreenButton();}catch(_0x31be40){}}));const IS_FILE_PROTOCOL=window['location'][_0x1318bc(0x28e)]===_0x1318bc(0x3ec);function startYtApiWatchdog(){const _0x5e9c1e=_0x1318bc,_0xa64c52=document['getElementById'](_0x5e9c1e(0x296));if(!_0xa64c52)return;const _0x5f279b=setTimeout(()=>{const _0xfa6e99=_0x5e9c1e;try{(!window['YT']||!window['YT'][_0xfa6e99(0x3a3)])&&(_0xa64c52[_0xfa6e99(0x1ee)]=_0xfa6e99(0x359),_0xa64c52['style'][_0xfa6e99(0x2fe)]='var(--sub)');}catch(_0x4b175c){}},0x5dc),_0x392571=setTimeout(()=>{const _0xfb15c0=_0x5e9c1e;try{(!window['YT']||!window['YT'][_0xfb15c0(0x3a3)])&&(_0xa64c52['textContent']='Kh√¥ng\x20t·∫£i\x20ƒë∆∞·ª£c\x20API\x20YouTube.\x20Ki·ªÉm\x20tra\x20m·∫°ng\x20ho·∫∑c\x20t·∫£i\x20l·∫°i\x20trang.',_0xa64c52['style']['color']=_0xfb15c0(0x22e));}catch(_0x5a6feb){}},0x1b58);window[_0x5e9c1e(0x21c)]={'cancel'(){clearTimeout(_0x5f279b),clearTimeout(_0x392571);}};}(function(){const _0x1b0519=_0x1318bc,_0x44f67b={'timer.cycleInfo':({current:current=0x0,target:target=0x0}={})=>_0x1b0519(0x30e)+current+'/'+target,'timer.selectSubtopicPrompt':_0x1b0519(0x33d)};window['t']=function _0x231d5d(_0x33ca41,_0x5d2629){const _0xb0352c=_0x1b0519;try{const _0x5c1b78=_0x44f67b[_0x33ca41];if(typeof _0x5c1b78===_0xb0352c(0x3a9))return _0x5c1b78(_0x5d2629||{});if(typeof _0x5c1b78===_0xb0352c(0x31b))return _0x5c1b78;}catch(_0x16803f){}return _0x33ca41;},window[_0x1b0519(0x44d)]=function _0x9361f9(_0x3a306a){const _0x19c446=_0x1b0519;try{localStorage[_0x19c446(0x2be)](_0x19c446(0x2e1),_0x3a306a||'vi');}catch(_0xccab8){}return Promise[_0x19c446(0x40e)]();};}());function ensureYouTubeAPI(){const _0x50c75d=_0x1318bc;if(IS_FILE_PROTOCOL)return Promise[_0x50c75d(0x40e)](![]);try{if(window['YT']&&window['YT'][_0x50c75d(0x3a3)])return Promise[_0x50c75d(0x40e)](!![]);}catch(_0x1d1a3b){}if(window['__ytApiPromise'])return window[_0x50c75d(0x270)];return startYtApiWatchdog(),window[_0x50c75d(0x270)]=new Promise((_0x9dd775,_0x38020c)=>{const _0x365f44=_0x50c75d;try{const _0x111c88=document['createElement'](_0x365f44(0x450));_0x111c88[_0x365f44(0x2d4)]='https://www.youtube.com/iframe_api',_0x111c88[_0x365f44(0x423)]=!![],_0x111c88[_0x365f44(0x431)]=!![],_0x111c88[_0x365f44(0x432)]=()=>_0x9dd775(!![]),_0x111c88[_0x365f44(0x384)]=()=>_0x38020c(new Error(_0x365f44(0x221))),document[_0x365f44(0x1e0)][_0x365f44(0x27e)](_0x111c88);}catch(_0x433c30){_0x38020c(_0x433c30);}}),window[_0x50c75d(0x270)];}const storageManager={'DB_NAME':'PomodoroAppDB','DB_VERSION':0x1,'db':null,async 'initDB'(){return new Promise((_0x37e0aa,_0x557e36)=>{const _0x30f212=_0x2a57;if(this['db'])return _0x37e0aa(this['db']);const _0x130e84=indexedDB[_0x30f212(0x353)](this[_0x30f212(0x29f)],this['DB_VERSION']);_0x130e84[_0x30f212(0x24a)]=_0x181002=>{const _0x4f82dd=_0x30f212,_0x548f82=_0x181002[_0x4f82dd(0x31c)][_0x4f82dd(0x3d1)];!_0x548f82['objectStoreNames'][_0x4f82dd(0x326)](_0x4f82dd(0x218))&&_0x548f82['createObjectStore']('settings');!_0x548f82[_0x4f82dd(0x389)]['contains'](_0x4f82dd(0x295))&&_0x548f82[_0x4f82dd(0x3ce)](_0x4f82dd(0x295),{'keyPath':'id'});if(!_0x548f82[_0x4f82dd(0x389)][_0x4f82dd(0x326)](_0x4f82dd(0x2ea))){const _0x80f3bb=_0x548f82[_0x4f82dd(0x3ce)](_0x4f82dd(0x2ea),{'keyPath':'id'});_0x80f3bb[_0x4f82dd(0x42b)](_0x4f82dd(0x247),'topicId');}!_0x548f82['objectStoreNames']['contains'](_0x4f82dd(0x39f))&&_0x548f82[_0x4f82dd(0x3ce)]('backups',{'keyPath':_0x4f82dd(0x480)});},_0x130e84['onsuccess']=_0x21f333=>{const _0x23eee1=_0x30f212;this['db']=_0x21f333[_0x23eee1(0x31c)][_0x23eee1(0x3d1)],console[_0x23eee1(0x45c)](_0x23eee1(0x44c)),_0x37e0aa(this['db']);},_0x130e84[_0x30f212(0x384)]=_0x210502=>{const _0x27c2db=_0x30f212;console[_0x27c2db(0x40f)](_0x27c2db(0x413),_0x210502['target'][_0x27c2db(0x1c8)]),_0x557e36(_0x210502[_0x27c2db(0x31c)][_0x27c2db(0x40f)]);};});},async '_getStore'(_0x27a446,_0x3a60e3=_0x1318bc(0x345)){const _0x20b37e=_0x1318bc;await this[_0x20b37e(0x2bb)]();const _0x484cba=this['db']['transaction']([_0x27a446],_0x3a60e3);return _0x484cba[_0x20b37e(0x25b)](_0x27a446);},async 'getSettings'(){const _0x421cd4=_0x1318bc,_0x73ff07=await this[_0x421cd4(0x271)](_0x421cd4(0x218));return new Promise((_0x517cf4,_0x1c06d0)=>{const _0x38e3f2=_0x421cd4,_0x400d99=_0x73ff07['get'](_0x38e3f2(0x3e1));_0x400d99[_0x38e3f2(0x440)]=()=>_0x517cf4(_0x400d99['result']),_0x400d99[_0x38e3f2(0x384)]=()=>_0x1c06d0(_0x400d99[_0x38e3f2(0x40f)]);});},async 'updateSettings'(_0x4dc817){const _0x1c5f7c=_0x1318bc,_0x491c57=await this[_0x1c5f7c(0x271)](_0x1c5f7c(0x218),'readwrite');return new Promise((_0x1b791b,_0x17c4ff)=>{const _0x432b54=_0x1c5f7c,_0x538790=_0x491c57['put'](_0x4dc817,'main_settings');_0x538790['onsuccess']=()=>_0x1b791b(_0x538790['result']),_0x538790[_0x432b54(0x384)]=()=>_0x17c4ff(_0x538790[_0x432b54(0x40f)]);});},async 'getAll'(_0x5a196a){const _0x50e7d3=_0x1318bc,_0x3b24cf=await this[_0x50e7d3(0x271)](_0x5a196a);return new Promise((_0x3c1653,_0x379dcc)=>{const _0x568053=_0x50e7d3,_0x9d425f=_0x3b24cf[_0x568053(0x24f)]();_0x9d425f[_0x568053(0x440)]=()=>_0x3c1653(_0x9d425f[_0x568053(0x3d1)]),_0x9d425f[_0x568053(0x384)]=()=>_0x379dcc(_0x9d425f['error']);});},async 'update'(_0x3432cf,_0x11541b){const _0x169ebc=_0x1318bc,_0x2c6726=await this[_0x169ebc(0x271)](_0x3432cf,_0x169ebc(0x474));return new Promise((_0x1dbc06,_0x389067)=>{const _0x1014cc=_0x169ebc,_0xc8f5df=_0x2c6726[_0x1014cc(0x2a5)](_0x11541b);_0xc8f5df[_0x1014cc(0x440)]=()=>_0x1dbc06(_0xc8f5df[_0x1014cc(0x3d1)]),_0xc8f5df[_0x1014cc(0x384)]=()=>_0x389067(_0xc8f5df[_0x1014cc(0x40f)]);});},async 'add'(_0x16e5fe,_0x5b5a8a){const _0x42046c=_0x1318bc,_0x2c46c9=await this[_0x42046c(0x271)](_0x16e5fe,'readwrite');return new Promise((_0x593d98,_0x1831be)=>{const _0x29d030=_0x42046c,_0x24cd65=_0x2c46c9[_0x29d030(0x28c)](_0x5b5a8a);_0x24cd65[_0x29d030(0x440)]=()=>_0x593d98(_0x24cd65[_0x29d030(0x3d1)]),_0x24cd65[_0x29d030(0x384)]=()=>_0x1831be(_0x24cd65['error']);});},async 'delete'(_0x15595f,_0x1ae560){const _0xe9f4db=_0x1318bc,_0x428bcb=await this[_0xe9f4db(0x271)](_0x15595f,_0xe9f4db(0x474));return new Promise((_0x5bb9ff,_0x348f)=>{const _0x365ce3=_0xe9f4db,_0x2aaea8=_0x428bcb[_0x365ce3(0x25a)](_0x1ae560);_0x2aaea8[_0x365ce3(0x440)]=()=>_0x5bb9ff(_0x2aaea8[_0x365ce3(0x3d1)]),_0x2aaea8[_0x365ce3(0x384)]=()=>_0x348f(_0x2aaea8['error']);});},async 'save'(_0x1b761b){return await this['initDB'](),new Promise((_0x6db48f,_0x156bce)=>{const _0x524e33=_0x2a57,_0x1fdb61=this['db'][_0x524e33(0x22b)]([_0x524e33(0x218),'topics','subtopics'],_0x524e33(0x474)),_0xa83ada=_0x1fdb61[_0x524e33(0x25b)](_0x524e33(0x218)),_0x378441=_0x1fdb61[_0x524e33(0x25b)](_0x524e33(0x295)),_0x3679b=_0x1fdb61[_0x524e33(0x25b)](_0x524e33(0x2ea));_0xa83ada[_0x524e33(0x2a5)](_0x1b761b[_0x524e33(0x218)],_0x524e33(0x3e1)),_0x378441[_0x524e33(0x2b4)](),_0x3679b[_0x524e33(0x2b4)](),_0x1b761b['topics']['forEach'](_0x3eb7bd=>{const _0x447ee6=_0x524e33,{subtopics:_0x2c3b1c,..._0x58b666}=_0x3eb7bd;_0x378441['put'](_0x58b666),(_0x2c3b1c||[])[_0x447ee6(0x395)](_0x298635=>_0x3679b[_0x447ee6(0x2a5)](_0x298635));}),_0x1fdb61[_0x524e33(0x2f5)]=()=>_0x6db48f(),_0x1fdb61['onerror']=_0x4e6aa5=>_0x156bce(_0x4e6aa5[_0x524e33(0x31c)][_0x524e33(0x40f)]);});},async 'autoBackup'(_0x56dbaf){const _0x596356=_0x1318bc;await this[_0x596356(0x2bb)]();const _0x59ee6c=new Date()[_0x596356(0x3e5)]()[_0x596356(0x449)](0x0,0xa),_0x1633fa=localStorage[_0x596356(0x26e)](_0x596356(0x3a0));if(_0x59ee6c!==_0x1633fa){console[_0x596356(0x45c)](_0x596356(0x2d8)+_0x59ee6c+'...');const _0x45a10e={'date':_0x59ee6c,'data':JSON[_0x596356(0x323)](JSON[_0x596356(0x484)](_0x56dbaf))},_0x1b9045=this['db']['transaction']([_0x596356(0x39f)],_0x596356(0x474)),_0x13c633=_0x1b9045['objectStore']('backups'),_0x2817be=_0x13c633[_0x596356(0x2a5)](_0x45a10e);_0x2817be[_0x596356(0x440)]=()=>{const _0x5d9852=_0x596356;localStorage[_0x5d9852(0x2be)](_0x5d9852(0x3a0),_0x59ee6c),console[_0x5d9852(0x45c)]('Daily\x20backup\x20successful.'),this[_0x5d9852(0x397)](_0x56dbaf?.['settings']?.[_0x5d9852(0x329)]||0x7);},_0x2817be['onerror']=_0x2f3868=>{const _0x1c8166=_0x596356;console[_0x1c8166(0x40f)](_0x1c8166(0x2ab),_0x2f3868[_0x1c8166(0x31c)][_0x1c8166(0x40f)]);};}},async 'cleanupOldBackups'(_0x410870){const _0x47d400=_0x1318bc;await this[_0x47d400(0x2bb)]();const _0x56f2e9=this['db'][_0x47d400(0x22b)](['backups'],'readwrite'),_0x58b509=_0x56f2e9[_0x47d400(0x25b)](_0x47d400(0x39f)),_0x34f238=_0x58b509['getAllKeys']();_0x34f238[_0x47d400(0x440)]=()=>{const _0x4b4e32=_0x47d400,_0x5463f5=_0x34f238['result']['sort']()[_0x4b4e32(0x36d)]();if(_0x5463f5[_0x4b4e32(0x469)]>_0x410870){const _0x1aa872=_0x5463f5['slice'](_0x410870);_0x1aa872[_0x4b4e32(0x395)](_0x4d95e1=>{const _0x40db52=_0x4b4e32;_0x58b509[_0x40db52(0x25a)](_0x4d95e1),console['log'](_0x40db52(0x46f)+_0x4d95e1);});}};},async 'getBackupList'(){return await this['initDB'](),new Promise((_0xc20909,_0x349cf0)=>{const _0x239099=_0x2a57,_0x1ad532=this['db'][_0x239099(0x22b)]([_0x239099(0x39f)],'readonly'),_0x18c7f5=_0x1ad532[_0x239099(0x25b)](_0x239099(0x39f)),_0x16839c=_0x18c7f5[_0x239099(0x24f)]();_0x16839c[_0x239099(0x440)]=()=>_0xc20909(_0x16839c[_0x239099(0x3d1)][_0x239099(0x3ba)]((_0x5d4ea7,_0x5a0bad)=>_0x5a0bad['date'][_0x239099(0x453)](_0x5d4ea7[_0x239099(0x480)]))),_0x16839c[_0x239099(0x384)]=_0x2a2994=>_0x349cf0(_0x2a2994[_0x239099(0x31c)][_0x239099(0x40f)]);});},async 'restoreBackup'(_0x4b8836){const _0xf235c=_0x1318bc;return await this[_0xf235c(0x2bb)](),new Promise((_0x510474,_0x366479)=>{const _0x291f5b=_0xf235c,_0x219df2=this['db']['transaction']([_0x291f5b(0x39f)],_0x291f5b(0x345)),_0x30edc1=_0x219df2[_0x291f5b(0x25b)](_0x291f5b(0x39f)),_0x182a12=_0x30edc1['get'](_0x4b8836);_0x182a12[_0x291f5b(0x440)]=()=>{const _0x58bc0c=_0x291f5b;_0x182a12['result']&&_0x182a12[_0x58bc0c(0x3d1)][_0x58bc0c(0x3b1)]?(localStorage[_0x58bc0c(0x2be)](_0x58bc0c(0x1ec),JSON['stringify'](_0x182a12['result'][_0x58bc0c(0x3b1)])),_0x510474(_0x182a12['result'][_0x58bc0c(0x3b1)])):_0x366479(new Error('Kh√¥ng\x20t√¨m\x20th·∫•y\x20b·∫£n\x20sao\x20l∆∞u.'));},_0x182a12[_0x291f5b(0x384)]=_0x479f35=>_0x366479(_0x479f35[_0x291f5b(0x31c)][_0x291f5b(0x40f)]);});},'exportData'(_0x37dfec){const _0xf17235=_0x1318bc;let _0x1b86c2={};try{_0x1b86c2=JSON['parse'](JSON[_0xf17235(0x484)](_0x37dfec||{}));}catch(_0x55185a){_0x1b86c2=_0x37dfec;}try{if(_0x1b86c2&&_0x1b86c2['settings'])_0x1b86c2[_0xf17235(0x218)][_0xf17235(0x1ed)]='';}catch(_0xafecfc){}const _0x580d1c=new Blob([JSON[_0xf17235(0x484)](_0x1b86c2,null,0x2)],{'type':_0xf17235(0x287)}),_0xb0340c=document[_0xf17235(0x334)]('a'),_0x43d419=new Date(),_0x56f965=_0x4f5504=>(''+_0x4f5504)['padStart'](0x2,'0');_0xb0340c[_0xf17235(0x1b6)]=URL[_0xf17235(0x445)](_0x580d1c),_0xb0340c[_0xf17235(0x2f7)]=_0xf17235(0x1ff)+_0x43d419[_0xf17235(0x37c)]()+_0x56f965(_0x43d419['getMonth']()+0x1)+_0x56f965(_0x43d419[_0xf17235(0x45a)]())+_0xf17235(0x41d),_0xb0340c[_0xf17235(0x21b)](),URL[_0xf17235(0x291)](_0xb0340c[_0xf17235(0x1b6)]);},async 'importData'(_0x13de45){const _0x53df4c=_0x1318bc,_0x50860f=await _0x13de45[_0x53df4c(0x1bb)](),_0x28a8ff=JSON[_0x53df4c(0x323)](_0x50860f);if(!_0x28a8ff[_0x53df4c(0x274)]||!_0x28a8ff[_0x53df4c(0x218)]||!Array[_0x53df4c(0x366)](_0x28a8ff[_0x53df4c(0x295)]))throw new Error(_0x53df4c(0x217));try{const _0x33b26c=window[_0x53df4c(0x3b1)]&&window[_0x53df4c(0x3b1)]['settings']&&window[_0x53df4c(0x3b1)][_0x53df4c(0x218)][_0x53df4c(0x1ed)]||'';(!('apiKey'in _0x28a8ff[_0x53df4c(0x218)])||_0x28a8ff[_0x53df4c(0x218)][_0x53df4c(0x1ed)]==='')&&(_0x28a8ff[_0x53df4c(0x218)][_0x53df4c(0x1ed)]=_0x33b26c);}catch(_0xc68739){}return localStorage[_0x53df4c(0x2be)]('pomodoroData_v11',JSON[_0x53df4c(0x484)](_0x28a8ff)),_0x28a8ff;}},$=(_0x44524e,_0x3a387c=document)=>_0x3a387c['querySelector'](_0x44524e),breakSuggestions=['H√£y\x20ƒë·ª©ng\x20d·∫≠y\x20v∆∞∆°n\x20vai\x20v√†\x20du·ªói\x20ng∆∞·ªùi.',_0x1318bc(0x2de),_0x1318bc(0x350),_0x1318bc(0x292),_0x1318bc(0x383),_0x1318bc(0x277),_0x1318bc(0x285),_0x1318bc(0x1e1),'L·∫Øc\x20nh·∫π\x20c·ªï\x20tay\x20v√†\x20vai\x20trong\x2030\x20gi√¢y.',_0x1318bc(0x257),_0x1318bc(0x47a),_0x1318bc(0x2f9),_0x1318bc(0x341),_0x1318bc(0x1cc),_0x1318bc(0x328),_0x1318bc(0x3aa),_0x1318bc(0x3d6),_0x1318bc(0x372),_0x1318bc(0x2c9),'Ch√∫\x20√Ω\x20ƒë·∫øn\x20c·∫£m\x20gi√°c\x20nhi·ªát\x20ƒë·ªô,\x20√°nh\x20s√°ng\x20trong\x20ph√≤ng.','ƒê·∫øm\x20ch·∫≠m\x20t·ª´ng\x20nh·ªãp\x20th·ªü\x20ƒë·∫øn\x20s·ªë\x2010.','L√†m\x20ƒë·ªông\x20t√°c\x20‚Äúth·ªü\x20d√†i‚Äù\x20s√¢u\x20m·ªôt\x20l·∫ßn,\x20th·∫£\x20l·ªèng\x20vai.',_0x1318bc(0x1d2),'Nh·ªõ\x20u·ªëng\x20m·ªôt\x20ng·ª•m\x20n∆∞·ªõc\x20nh√©!',_0x1318bc(0x1eb),_0x1318bc(0x294),_0x1318bc(0x34b),_0x1318bc(0x26c),'N·∫°p\x20nƒÉng\x20l∆∞·ª£ng\x20b·∫±ng\x20m·ªôt\x20m√≥n\x20ƒÉn\x20nh·∫π\x20l√†nh\x20m·∫°nh.',_0x1318bc(0x2fd),_0x1318bc(0x2c0),'T·ª±\x20nh·∫Øc:\x20Ngh·ªâ\x20ng∆°i\x20ƒë√∫ng\x20c√°ch\x20l√†\x20ƒë·ªÉ\x20l√†m\x20vi·ªác\x20t·ªët\x20h∆°n!'],$$=(_0x2d8d34,_0x21c81f=document)=>Array[_0x1318bc(0x30f)](_0x21c81f[_0x1318bc(0x32c)](_0x2d8d34));function on(_0x28fd7e,_0x57e184,_0x2331cc){const _0x444366=_0x1318bc;if(!_0x28fd7e){console[_0x444366(0x1ef)](_0x444366(0x49f),_0x57e184);return;}_0x28fd7e[_0x444366(0x2b2)](_0x57e184,_0x2331cc);}const formatMMSS=_0x1bf4ca=>{const _0x18a601=_0x1318bc,_0x54861f=Math[_0x18a601(0x208)](_0x1bf4ca/0x3c)[_0x18a601(0x22a)]()[_0x18a601(0x2b6)](0x2,'0'),_0x301e6c=Math[_0x18a601(0x208)](_0x1bf4ca%0x3c)['toString']()[_0x18a601(0x2b6)](0x2,'0');return _0x54861f+':'+_0x301e6c;},uid=(_0x2f9668='id')=>_0x2f9668+'_'+Date[_0x1318bc(0x429)]()+'_'+Math['random']()[_0x1318bc(0x22a)](0x24)[_0x1318bc(0x449)](0x2,0x9);let __releaseFocusTrap=null;function trapFocus(_0xa3180d){const _0x5e988a=_0x1318bc;try{const _0x58f386=_0xa3180d[_0x5e988a(0x32c)](_0x5e988a(0x207));if(!_0x58f386['length'])return;const _0x365c78=_0x58f386[0x0],_0x1d2e14=_0x58f386[_0x58f386[_0x5e988a(0x469)]-0x1],_0xa5e983=_0x540064=>{const _0x1c71a8=_0x5e988a;if(_0x540064[_0x1c71a8(0x1c9)]==='Tab'){if(_0x540064[_0x1c71a8(0x2e3)]&&document[_0x1c71a8(0x21d)]===_0x365c78)_0x540064[_0x1c71a8(0x494)](),_0x1d2e14[_0x1c71a8(0x425)]();else!_0x540064[_0x1c71a8(0x2e3)]&&document[_0x1c71a8(0x21d)]===_0x1d2e14&&(_0x540064['preventDefault'](),_0x365c78['focus']());}};_0xa3180d[_0x5e988a(0x2b2)](_0x5e988a(0x3af),_0xa5e983),_0x365c78[_0x5e988a(0x425)](),__releaseFocusTrap=()=>{const _0x5c3cc1=_0x5e988a;try{_0xa3180d[_0x5c3cc1(0x415)]('keydown',_0xa5e983);}catch(_0x22d1c9){}};}catch(_0x1ff0bb){}}function releaseFocus(){if(__releaseFocusTrap){try{__releaseFocusTrap();}catch(_0x3bd4fb){}__releaseFocusTrap=null;}}const todayISO=()=>new Date()[_0x1318bc(0x3e5)]();function toast(_0x5433af,_0x143fe6=0xa28){const _0x59882d=_0x1318bc,_0x25d803=$(_0x59882d(0x1ad)),_0x1bd4e9=document[_0x59882d(0x334)](_0x59882d(0x250));_0x1bd4e9[_0x59882d(0x205)]=_0x59882d(0x293),_0x1bd4e9['textContent']=_0x5433af,_0x25d803[_0x59882d(0x27e)](_0x1bd4e9),setTimeout(()=>{const _0xd8966d=_0x59882d;_0x1bd4e9['style'][_0xd8966d(0x360)]='0';},_0x143fe6-0x12c),setTimeout(()=>_0x25d803[_0x59882d(0x224)](_0x1bd4e9),_0x143fe6);}function escapeHTML(_0x4441bc){const _0x140693=_0x1318bc;return _0x4441bc['replace'](/[&<>"']/g,_0x729a01=>({'&':_0x140693(0x4af),'<':_0x140693(0x35b),'>':_0x140693(0x29c),'\x22':_0x140693(0x30c),'\x27':'&#39;'}[_0x729a01]));}function formatDaysHoursMinutes(_0x4349a0){const _0x4bd622=_0x1318bc;if(!_0x4349a0||_0x4349a0<0x1)return _0x4bd622(0x4a2);const _0x128e17=Math[_0x4bd622(0x208)](_0x4349a0/0x3c),_0x3d6d04=_0x4349a0%0x3c,_0x1d9903=_0x3d6d04['toString']()[_0x4bd622(0x2b6)](0x2,'0');return _0x128e17+_0x4bd622(0x417)+_0x1d9903+_0x4bd622(0x3c2);}function formatGeminiResponse(_0x1c4fa6){return _0x1c4fa6['replace'](/(\*\*|__|\*|_|#+\s*)/g,'');}function parseSimpleMarkdown(_0x4c2a13){const _0x3d91b0=_0x1318bc,_0xa9ce4e=(_0x4c2a13||'')['split']('\x0a');let _0xc094be='',_0x255b27=null;const _0x4c64c8=()=>{const _0x1ce4da=_0x2a57;_0x255b27&&(_0xc094be+=_0x255b27==='ol'?_0x1ce4da(0x347):'</ul>',_0x255b27=null);};for(let _0x5d6085 of _0xa9ce4e){let _0x4611d7=(_0x5d6085||'')[_0x3d91b0(0x3f0)]();if(!_0x4611d7){_0x4c64c8();continue;}if(_0x4611d7[_0x3d91b0(0x1f3)](_0x3d91b0(0x41c)))_0x4c64c8(),_0xc094be+=_0x3d91b0(0x43f)+escapeHTML(_0x4611d7[_0x3d91b0(0x2ca)](0x5))+'</h4>';else{if(/^\d+\.\s/[_0x3d91b0(0x2f2)](_0x4611d7)){_0x255b27!=='ol'&&(_0x4c64c8(),_0xc094be+=_0x3d91b0(0x369),_0x255b27='ol');const _0x20c73e=_0x4611d7[_0x3d91b0(0x2ca)](_0x4611d7[_0x3d91b0(0x1bd)]('\x20')+0x1);_0xc094be+='<li>'+escapeHTML(_0x20c73e)+_0x3d91b0(0x4ab);}else _0x4611d7['startsWith']('-\x20')?(_0x255b27!=='ul'&&(_0x4c64c8(),_0xc094be+=_0x3d91b0(0x3b3),_0x255b27='ul'),_0xc094be+=_0x3d91b0(0x220)+escapeHTML(_0x4611d7[_0x3d91b0(0x2ca)](0x2))+_0x3d91b0(0x4ab)):(_0x4c64c8(),_0x4611d7=escapeHTML(_0x4611d7)[_0x3d91b0(0x4b4)](/\*\*(.*?)\*\*/g,_0x3d91b0(0x31a))[_0x3d91b0(0x4b4)](/_(.*?)_/g,_0x3d91b0(0x34c)),_0xc094be+=_0x3d91b0(0x26a)+_0x4611d7+'</p>');}}return _0x4c64c8(),_0xc094be;}function wrapTextInMarkdown(_0x7bb71c,_0x49a2bf,_0x694f10=''){const _0x1f6b07=_0x1318bc;if(!_0x7bb71c)return;const _0x203d1d=_0x7bb71c['selectionStart']||0x0,_0x354033=_0x7bb71c[_0x1f6b07(0x2fc)]||0x0,_0x35b9b5=_0x7bb71c[_0x1f6b07(0x470)][_0x1f6b07(0x2ca)](_0x203d1d,_0x354033),_0x502b91=_0x49a2bf+_0x35b9b5+(_0x694f10||_0x49a2bf);_0x7bb71c[_0x1f6b07(0x36e)](_0x502b91,_0x203d1d,_0x354033,'end'),_0x7bb71c[_0x1f6b07(0x425)]();}function updateEditorPreview(){const _0x330568=_0x1318bc,_0x5cb3d1=$(_0x330568(0x197)),_0x2e411d=$(_0x330568(0x444));if(!_0x5cb3d1||!_0x2e411d)return;const _0x494040=_0x5cb3d1[_0x330568(0x470)]||'';_0x2e411d['innerHTML']=parseSimpleMarkdown(_0x494040);}function normalizeDataStructure(_0x3860fb){const _0x1e052c=_0x1318bc;if(!_0x3860fb||typeof _0x3860fb!==_0x1e052c(0x2cf))return;const _0x4dc68e=_0x3860fb[_0x1e052c(0x218)]||{},_0xa8701b={...defaults[_0x1e052c(0x218)],..._0x4dc68e,'durations':{...defaults[_0x1e052c(0x218)]['durations'],..._0x4dc68e[_0x1e052c(0x25d)]||{}}};if(!Array[_0x1e052c(0x366)](_0xa8701b[_0x1e052c(0x23f)]))_0xa8701b['achievedMilestones']=[];_0x3860fb[_0x1e052c(0x218)]=_0xa8701b,_0x3860fb[_0x1e052c(0x295)]=Array['isArray'](_0x3860fb['topics'])?_0x3860fb[_0x1e052c(0x295)]:[],_0x3860fb['topics'][_0x1e052c(0x395)](_0x4e3a99=>{const _0x18215c=_0x1e052c;_0x4e3a99[_0x18215c(0x2ea)]=Array['isArray'](_0x4e3a99[_0x18215c(0x2ea)])?_0x4e3a99[_0x18215c(0x2ea)]:[],_0x4e3a99['subtopics'][_0x18215c(0x395)](_0x20ae34=>{const _0x544364=_0x18215c;_0x20ae34[_0x544364(0x1f7)]=_0x20ae34[_0x544364(0x1f7)]||[],_0x20ae34[_0x544364(0x281)]=_0x20ae34[_0x544364(0x281)]||[],_0x20ae34['summaries']=_0x20ae34[_0x544364(0x3f8)]||[],_0x20ae34[_0x544364(0x456)]=_0x20ae34['chatHistory']||[],_0x20ae34[_0x544364(0x49b)]=_0x20ae34[_0x544364(0x49b)]||{'totalMinutes':0x0,'sessionsCompleted':0x0,'tasksCompleted':0x0},_0x20ae34[_0x544364(0x23e)]=_0x20ae34['sessions']||[],_0x20ae34['timerState']=_0x20ae34['timerState']||{'state':_0x544364(0x1d7),'prevState':null,'remaining':0x0,'segmentTotal':0x0,'cycleIndex':0x0};});});}function extractYouTubeID(_0x49216a){const _0x2b53aa=_0x1318bc;if(!_0x49216a)return null;const _0x21604a=/^.*(?:youtu.be\/|shorts\/|live\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([A-Za-z0-9_-]{11}).*/,_0x19afcd=_0x49216a[_0x2b53aa(0x40d)](_0x21604a);return _0x19afcd?_0x19afcd[0x1]:null;}let sessionYoutubeUrl='';function getActiveYoutubeUrl(){const _0x593501=_0x1318bc;try{if(sessionYoutubeUrl)return sessionYoutubeUrl;const _0x3a336f=document[_0x593501(0x3e7)](_0x593501(0x47c)),_0x467f65=(_0x3a336f&&_0x3a336f[_0x593501(0x470)]?_0x3a336f[_0x593501(0x470)]:'')[_0x593501(0x3f0)]();return _0x467f65;}catch(_0x213300){return'';}}function getActiveVideoId(){return extractYouTubeID(getActiveYoutubeUrl());}function handleYoutubeUrlInput(){const _0x2e1e96=_0x1318bc,_0x138dc8=$(_0x2e1e96(0x20f)),_0x2e5518=$('#ytUrlFeedback'),_0x4d0c17=$(_0x2e1e96(0x20c)),_0x121f7c=_0x138dc8[_0x2e1e96(0x470)][_0x2e1e96(0x3f0)](),_0x3a414b=extractYouTubeID(_0x121f7c);if(_0x3a414b){_0x2e5518[_0x2e1e96(0x1ee)]=_0x2e1e96(0x400),_0x2e5518[_0x2e1e96(0x2f6)][_0x2e1e96(0x2fe)]=_0x2e1e96(0x375),_0x4d0c17['disabled']=![],sessionYoutubeUrl=_0x121f7c;try{ytUserPaused=![];}catch(_0x4650d9){}try{const _0x2b6b44=_0x2e1e96(0x286)+_0x3a414b+_0x2e1e96(0x486),_0x1919c0=new Image();_0x1919c0[_0x2e1e96(0x432)]=async()=>{const _0x4c65fb=_0x2e1e96;data[_0x4c65fb(0x218)][_0x4c65fb(0x468)]=_0x2b6b44;try{await saveData();}catch(_0x5299c0){}applyCustomBg();},_0x1919c0[_0x2e1e96(0x384)]=async()=>{const _0x56f13f=_0x2e1e96,_0x48aef2=_0x56f13f(0x286)+_0x3a414b+'/hqdefault.jpg';data[_0x56f13f(0x218)][_0x56f13f(0x468)]=_0x48aef2;try{await saveData();}catch(_0x17cafe){}applyCustomBg();},_0x1919c0[_0x2e1e96(0x2d4)]=_0x2b6b44;}catch(_0x5c04c6){}try{if(IS_FILE_PROTOCOL){const _0x289748=_ytUnlocked?0x0:0x1;fallbackLoadVideo(_0x3a414b,{'autoplay':0x1,'mute':_0x289748});try{setTimeout(()=>{const _0x4fe99b=_0x2e1e96;try{fallbackPostMessage(_0x4fe99b(0x4a3));}catch(_0x5f173a){}},0xfa);}catch(_0x496cd8){}!_ytUnlocked&&showSoundPermission();try{setTimeout(()=>{const _0x394e77=_0x2e1e96,_0x2d0b97=document[_0x394e77(0x3e7)](_0x394e77(0x296));if(_0x2d0b97)_0x2d0b97[_0x394e77(0x1ee)]='ƒêang\x20ph√°t';},0x1f4);}catch(_0x155bd1){}}else ensureYouTubeAPI()[_0x2e1e96(0x495)](()=>{const _0x58e993=_0x2e1e96;updateYouTubePlayer();try{if(_ytUnlocked)ytFadeInPlay();else ytPlayer&&ytPlayer[_0x58e993(0x3e9)]&&ytPlayer[_0x58e993(0x4a3)]&&(ytPlayer['mute'](),ytPlayer[_0x58e993(0x4a3)](),_ytPrimed=!![],showSoundPermission());}catch(_0x495eb1){}})['catch'](()=>{});}catch(_0x3a1e73){}}else{if(_0x121f7c===''){_0x2e5518[_0x2e1e96(0x1ee)]='',_0x4d0c17['disabled']=!![];if(IS_FILE_PROTOCOL)try{fallbackStop();}catch(_0x401492){}else ytPlayer&&ytPlayer['stopVideo']&&ytPlayer[_0x2e1e96(0x39c)]();}else _0x2e5518[_0x2e1e96(0x1ee)]=_0x2e1e96(0x3eb),_0x2e5518['style'][_0x2e1e96(0x2fe)]=_0x2e1e96(0x22e),_0x4d0c17[_0x2e1e96(0x36f)]=!![];}}function applyTheme(_0x34b311){const _0x2beb3=_0x1318bc,_0x153cf7=_0x34b311||data['settings'][_0x2beb3(0x373)]||_0x2beb3(0x26f);document[_0x2beb3(0x2bf)][_0x2beb3(0x3db)][_0x2beb3(0x373)]=_0x153cf7;const _0xe8ae3c=['lofi',_0x2beb3(0x485)]['includes'](_0x153cf7),_0x47cca8=_0x153cf7===_0x2beb3(0x1c0)||_0x153cf7===_0x2beb3(0x1d4),_0x3925ae=data[_0x2beb3(0x218)][_0x2beb3(0x468)],_0x5310ba=()=>{const _0x54cad0=_0x2beb3;try{document[_0x54cad0(0x2bf)][_0x54cad0(0x2f6)][_0x54cad0(0x238)]='';}catch(_0x3e25f0){}};if(_0x3925ae&&!data[_0x2beb3(0x218)][_0x2beb3(0x33f)])document[_0x2beb3(0x2bf)][_0x2beb3(0x2f6)][_0x2beb3(0x2b7)]('--bg-image',_0x2beb3(0x32d)+_0x3925ae+')'),_0x5310ba();else{if(_0x3925ae&&data[_0x2beb3(0x218)][_0x2beb3(0x33f)])document['body'][_0x2beb3(0x2f6)][_0x2beb3(0x2b7)](_0x2beb3(0x2a1),_0x2beb3(0x32d)+_0x3925ae+')'),_0x5310ba();else{if(_0xe8ae3c)document[_0x2beb3(0x2bf)][_0x2beb3(0x2f6)]['removeProperty'](_0x2beb3(0x2a1)),_0x5310ba();else _0x47cca8?(document[_0x2beb3(0x2bf)][_0x2beb3(0x2f6)][_0x2beb3(0x2b7)]('--bg-image',_0x2beb3(0x24b)),_0x5310ba()):(document['body']['style'][_0x2beb3(0x2b7)](_0x2beb3(0x2a1),''),document['body'][_0x2beb3(0x2f6)][_0x2beb3(0x238)]=_0x2beb3(0x422));}}}const defaults={'version':0x1,'settings':{'apiKey':'','currentView':_0x1318bc(0x226),'preset':'A','autoStartNext':!![],'soundOn':!![],'volume':0.8,'soundTheme':_0x1318bc(0x1ce),'theme':_0x1318bc(0x26f),'cyclesA':0x4,'longBreakIntervalA':0x4,'cyclesB':0x4,'longBreakIntervalB':0x4,'flowtimeBreakRatio':0x5,'enableWinddown':!![],'enableSessionNotes':!![],'durations':{'A_work':0x19,'A_short':0x5,'A_long':0xf,'A_winddown':0x2,'B_work':0x32,'B_short':0xa,'B_long':0x1e,'B_winddown':0x5},'selectedTopicId':'','selectedSubtopicId':'','collapsedTopics':{},'customBg':'','customSounds':{'work_end':'','break_end':'','long_end':''},'youtubeUrl':'','youtubeVolume':0x50,'useYtThumbnailAsBg':!![],'panelOpacity':0.85,'panelBlur':0xa,'backgroundMode':_0x1318bc(0x3f5),'backupDaysToKeep':0x7,'achievedMilestones':[],'methods':[{'id':uid('m'),'title':_0x1318bc(0x306),'content':_0x1318bc(0x3d9)},{'id':uid('m'),'title':_0x1318bc(0x1b2),'content':_0x1318bc(0x2af)},{'id':uid('m'),'title':_0x1318bc(0x249),'content':_0x1318bc(0x439)},{'id':uid('m'),'title':_0x1318bc(0x41a),'content':_0x1318bc(0x1f6)},{'id':uid('m'),'title':_0x1318bc(0x1d3),'content':'<p>N·∫øu\x20G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20l√†\x20v·ªÅ\x20c√°ch\x20h·ªçc,\x20th√¨\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20l√†\x20v·ªÅ\x20th·ªùi\x20ƒëi·ªÉm\x20h·ªçc.\x20ƒê√¢y\x20l√†\x20m·ªôt\x20h·ªá\x20th·ªëng\x20l√™n\x20l·ªãch\x20√¥n\x20t·∫≠p\x20ƒë·ªÉ\x20ƒë∆∞a\x20th√¥ng\x20tin\x20v√†o\x20tr√≠\x20nh·ªõ\x20d√†i\x20h·∫°n\x20m·ªôt\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t.</p><h4>Nguy√™n\x20T·∫Øc\x20C·ªët\x20L√µi:\x20Ch·ªëng\x20L·∫°i\x20S·ª±\x20L√£ng\x20Qu√™n\x20üß†</h4><p>Ph∆∞∆°ng\x20ph√°p\x20n√†y\x20d·ª±a\x20tr√™n\x20\x22ƒê∆∞·ªùng\x20cong\x20L√£ng\x20qu√™n\x22,\x20cho\x20th·∫•y\x20ch√∫ng\x20ta\x20qu√™n\x20th√¥ng\x20tin\x20nhanh\x20nh·∫•t\x20ngay\x20sau\x20khi\x20h·ªçc.\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20ho·∫°t\x20ƒë·ªông\x20b·∫±ng\x20c√°ch\x20y√™u\x20c·∫ßu\x20b·∫°n\x20√¥n\x20t·∫≠p\x20l·∫°i\x20m·ªôt\x20th√¥ng\x20tin\x20ngay\x20tr∆∞·ªõc\x20khi\x20b·∫°n\x20s·∫Øp\x20qu√™n\x20n√≥.</p><p>M·ªói\x20l·∫ßn\x20√¥n\x20t·∫≠p\x20th√†nh\x20c√¥ng\x20s·∫Ω\x20l√†m\x20cho\x20kho·∫£ng\x20th·ªùi\x20gian\x20b·∫°n\x20nh·ªõ\x20th√¥ng\x20tin\x20ƒë√≥\x20d√†i\x20ra.\x20L·∫ßn\x20ƒë·∫ßu\x20b·∫°n\x20c√≥\x20th·ªÉ\x20qu√™n\x20sau\x201\x20ng√†y,\x20nh∆∞ng\x20sau\x20khi\x20√¥n\x20t·∫≠p,\x20b·∫°n\x20s·∫Ω\x20nh·ªõ\x20ƒë∆∞·ª£c\x20trong\x203\x20ng√†y,\x20r·ªìi\x201\x20tu·∫ßn,\x201\x20th√°ng,\x20v√†\x20c·ª©\x20th·∫ø\x20xa\x20d·∫ßn.</p><h4>C√¥ng\x20C·ª•\x20Hi·ªáu\x20Qu·∫£\x20Nh·∫•t:\x20Ph·∫ßn\x20M·ªÅm\x20SRS\x20üì±</h4><p>Thay\x20v√¨\x20t·ª±\x20l√™n\x20l·ªãch\x20th·ªß\x20c√¥ng,\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t\x20l√†\x20s·ª≠\x20d·ª•ng\x20c√°c\x20ph·∫ßn\x20m·ªÅm\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20(Spaced\x20Repetition\x20Software\x20-\x20SRS).\x20Anki\x20ƒë∆∞·ª£c\x20xem\x20l√†\x20ti√™u\x20chu·∫©n\x20v√†ng.\x20N√≥\x20t·ª±\x20ƒë·ªông\x20h√≥a\x20ho√†n\x20to√†n\x20vi·ªác\x20l√™n\x20l·ªãch\x20√¥n\x20t·∫≠p\x20cho\x20h√†ng\x20ng√†n\x20th·∫ª\x20ghi\x20nh·ªõ\x20d·ª±a\x20tr√™n\x20ƒë·ªô\x20kh√≥\x20m√†\x20b·∫°n\x20t·ª±\x20ƒë√°nh\x20gi√°,\x20ƒë·∫£m\x20b·∫£o\x20b·∫°n\x20lu√¥n\x20√¥n\x20t·∫≠p\x20v√†o\x20th·ªùi\x20ƒëi·ªÉm\x20t·ªëi\x20∆∞u\x20nh·∫•t.</p><h4>Sai\x20L·∫ßm\x20L·ªõn\x20Nh·∫•t\x20C·∫ßn\x20Tr√°nh\x20‚ùå</h4><p>L√Ω\x20do\x20s·ªë\x20m·ªôt\x20khi·∫øn\x20m·ªçi\x20ng∆∞·ªùi\x20th·∫•t\x20b·∫°i\x20v·ªõi\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20l√†\x20\x22Qu√°\x20t·∫£i\x20L·ªãch\x20√¥n\x20t·∫≠p\x22\x20(Review\x20Overload).\x20ƒêi·ªÅu\x20n√†y\x20x·∫£y\x20ra\x20khi\x20b·∫°n\x20t·∫°o\x20qu√°\x20nhi·ªÅu\x20th·∫ª\x20m·ªõi\x20m·ªói\x20ng√†y\x20ho·∫∑c\x20b·ªè\x20l·ª°\x20v√†i\x20ng√†y\x20√¥n\x20t·∫≠p,\x20d·∫´n\x20ƒë·∫øn\x20m·ªôt\x20l∆∞·ª£ng\x20th·∫ª\x20t·ªìn\x20ƒë·ªçng\x20kh·ªïng\x20l·ªì\x20g√¢y\x20n·∫£n\x20ch√≠.</p><p><strong>Gi·∫£i\x20ph√°p\x20(20%\x20h√†nh\x20ƒë·ªông,\x2080%\x20k·∫øt\x20qu·∫£):</strong>\x20H√£y\x20nh·∫•t\x20qu√°n.\x20ƒê·∫∑t\x20ra\x20gi·ªõi\x20h·∫°n\x20th·ª±c\x20t·∫ø\x20v·ªÅ\x20s·ªë\x20l∆∞·ª£ng\x20th·∫ª\x20m·ªõi\x20m·ªói\x20ng√†y\x20(v√≠\x20d·ª•:\x2010-20\x20th·∫ª)\x20v√†\x20duy\x20tr√¨\x20vi·ªác\x20√¥n\x20t·∫≠p\x20h√†ng\x20ng√†y.\x20Th√†\x20h·ªçc\x20√≠t\x20m√†\x20ƒë·ªÅu\x20c√≤n\x20h∆°n\x20h·ªçc\x20d·ªìn.</p><h4>S·ª±\x20K·∫øt\x20H·ª£p\x20S·ªëng\x20C√≤n:\x20AR\x20+\x20SR</h4><p>L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20(SR)\x20v√†\x20G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20(AR)\x20l√†\x20hai\x20m·∫∑t\x20c·ªßa\x20c√πng\x20m·ªôt\x20ƒë·ªìng\x20xu\x20v√†\x20kh√¥ng\x20th·ªÉ\x20t√°ch\x20r·ªùi.\x20SR\x20cung\x20c·∫•p\x20l·ªãch\x20tr√¨nh\x20KHI\x20N√ÄO\x20n√™n\x20√¥n\x20t·∫≠p.\x20AR\x20l√†\x20h√†nh\x20ƒë·ªông\x20b·∫°n\x20th·ª±c\x20hi·ªán\x20KHI\x20√¥n\x20t·∫≠p.\x20S·ª±\x20k·∫øt\x20h·ª£p\x20n√†y\x20ƒë·∫£m\x20b·∫£o\x20n·ªó\x20l·ª±c\x20g·ª£i\x20nh·ªõ\x20c·ªßa\x20b·∫°n\x20x·∫£y\x20ra\x20v√†o\x20\x22ƒëi·ªÉm\x20ng·ªçt\x22\x20c·ªßa\x20tr√≠\x20nh·ªõ.\x20S·ª≠\x20d·ª•ng\x20Anki\x20ch√≠nh\x20l√†\x20c√°ch\x20tri·ªÉn\x20khai\x20k·ªπ\x20thu·∫≠t\x20k·∫øt\x20h·ª£p\x20n√†y\x20m·ªôt\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t.</p>'}]},'topics':[]};let data,editingPreset='A',AUDIO_CTX=null;function _0x2a57(_0x1d89af,_0x441fb9){const _0x293e0f=_0x293e();return _0x2a57=function(_0x2a57c3,_0x1bbec8){_0x2a57c3=_0x2a57c3-0x194;let _0x414fcb=_0x293e0f[_0x2a57c3];return _0x414fcb;},_0x2a57(_0x1d89af,_0x441fb9);}function ensureAudio(){const _0x1323e2=_0x1318bc;if(!AUDIO_CTX)AUDIO_CTX=new(window[(_0x1323e2(0x2b5))]||window[(_0x1323e2(0x3b9))])();}function tone(_0xb99ceb=0x370,_0x5a2c50=0xc8,_0x423173=0.2,_0x5d355a=_0x1318bc(0x3bb),_0x19cdd7=0x0){const _0x111b7f=_0x1318bc;ensureAudio();const _0x59678e=AUDIO_CTX,_0x28197d=_0x59678e[_0x111b7f(0x231)](),_0x43b9e3=_0x59678e[_0x111b7f(0x30b)]();_0x28197d['type']=_0x5d355a,_0x28197d[_0x111b7f(0x399)]['value']=_0xb99ceb,_0x28197d[_0x111b7f(0x1e3)](_0x43b9e3),_0x43b9e3[_0x111b7f(0x1e3)](_0x59678e['destination']);const _0x2a4f8f=_0x59678e['currentTime']+_0x19cdd7;_0x43b9e3[_0x111b7f(0x1cd)][_0x111b7f(0x3b4)](0x0,_0x2a4f8f),_0x43b9e3['gain'][_0x111b7f(0x2ae)](_0x423173,_0x2a4f8f+0.01),_0x43b9e3['gain'][_0x111b7f(0x209)](0.0001,_0x2a4f8f+_0x5a2c50/0x3e8),_0x28197d[_0x111b7f(0x364)](_0x2a4f8f),_0x28197d[_0x111b7f(0x20d)](_0x2a4f8f+_0x5a2c50/0x3e8+0.05);}function playSound(_0x136110){const _0x909b21=_0x1318bc;if(!data['settings']['soundOn'])return;const _0xd1eb73=Math['max'](0x0,Math['min'](0x1,data[_0x909b21(0x218)][_0x909b21(0x3b8)]??0.8)),_0x5df03a=data[_0x909b21(0x218)][_0x909b21(0x340)]?.[_0x136110];let _0x26aa62;if(_0x136110==='work_end')_0x26aa62=$(_0x909b21(0x2a9));else{if(_0x136110===_0x909b21(0x402))_0x26aa62=$(_0x909b21(0x487));else{if(_0x136110===_0x909b21(0x1b8))_0x26aa62=$(_0x909b21(0x47d));}}if(_0x5df03a&&_0x26aa62){_0x5df03a[_0x909b21(0x1f3)](_0x909b21(0x365))||_0x5df03a[_0x909b21(0x1f3)](_0x909b21(0x2a8))||_0x5df03a[_0x909b21(0x1f3)](_0x909b21(0x22d))?(_0x26aa62[_0x909b21(0x2d4)]=_0x5df03a,_0x26aa62[_0x909b21(0x3b8)]=_0xd1eb73,_0x26aa62[_0x909b21(0x33b)]()[_0x909b21(0x3c6)](_0xf2e60e=>console[_0x909b21(0x40f)](_0x909b21(0x2e9),_0xf2e60e))):getStoredFileUrl(_0x5df03a)[_0x909b21(0x495)](_0x596b9c=>{const _0x3a3105=_0x909b21;_0x596b9c&&(_0x26aa62[_0x3a3105(0x2d4)]=_0x596b9c,_0x26aa62[_0x3a3105(0x3b8)]=_0xd1eb73,_0x26aa62[_0x3a3105(0x33b)]()[_0x3a3105(0x3c6)](_0x3710a6=>console[_0x3a3105(0x40f)](_0x3a3105(0x2e9),_0x3710a6)));});return;}const _0x54b6d5=data[_0x909b21(0x218)]['soundTheme']||_0x909b21(0x1ce);if(_0x54b6d5===_0x909b21(0x1ce)){if(_0x136110==='work_end')tone(0x370,0xfa,_0xd1eb73),tone(0x294,0xb4,_0xd1eb73*0.8,'sine',0.22);else{if(_0x136110===_0x909b21(0x402))tone(0x294,0xdc,_0xd1eb73*0.9);else _0x136110==='long_end'&&(tone(0x208,0xc8,_0xd1eb73),tone(0x30c,0xc8,_0xd1eb73,_0x909b21(0x3bb),0.22),tone(0x410,0xdc,_0xd1eb73,'sine',0.44));}}else{if(_0x136110===_0x909b21(0x4a4))tone(0x4b0,0xa0,_0xd1eb73*0.9,_0x909b21(0x48a)),tone(0x384,0xdc,_0xd1eb73*0.8,'triangle',0.18);else{if(_0x136110===_0x909b21(0x402))tone(0x370,0xf0,_0xd1eb73*0.8,_0x909b21(0x48a));else _0x136110===_0x909b21(0x1b8)&&(tone(0x258,0xdc,_0xd1eb73*0.9,_0x909b21(0x48a)),tone(0x3b6,0xf0,_0xd1eb73*0.9,_0x909b21(0x48a),0.22),tone(0x4b0,0xf0,_0xd1eb73,'triangle',0.44));}}}async function saveData(){const _0x1fa1d1=_0x1318bc;try{await storageManager[_0x1fa1d1(0x223)](data);}catch(_0x373daa){console[_0x1fa1d1(0x40f)](_0x1fa1d1(0x34f),_0x373daa),toast(_0x1fa1d1(0x4ac)+_0x373daa[_0x1fa1d1(0x3b0)]);}}async function ensureValidSelection(){const _0x3fcdc4=_0x1318bc,_0x3e7e22=data[_0x3fcdc4(0x218)];if(!data[_0x3fcdc4(0x295)]||data[_0x3fcdc4(0x295)][_0x3fcdc4(0x469)]===0x0){_0x3e7e22['selectedTopicId']='',_0x3e7e22[_0x3fcdc4(0x446)]='',await saveData();return;}const _0x36f852=data[_0x3fcdc4(0x295)][_0x3fcdc4(0x30d)](_0xa2373a=>_0xa2373a['id']===_0x3e7e22[_0x3fcdc4(0x3b2)]),_0x22ae9a=_0x36f852?.[_0x3fcdc4(0x2ea)][_0x3fcdc4(0x30d)](_0x4fa837=>_0x4fa837['id']===_0x3e7e22[_0x3fcdc4(0x446)]);if(!_0x36f852||!_0x22ae9a){const _0x382dbc=data[_0x3fcdc4(0x295)][0x0],_0x743cda=_0x382dbc?.[_0x3fcdc4(0x2ea)]?.[0x0];_0x3e7e22[_0x3fcdc4(0x3b2)]=_0x382dbc?.['id']||'',_0x3e7e22['selectedSubtopicId']=_0x743cda?.['id']||'',await saveData();}}function showInputModal(_0x528958,_0x4459ab,_0x555ef2=''){const _0xceda40=_0x1318bc;$(_0xceda40(0x2a7))[_0xceda40(0x1ee)]=_0x528958,$('#genericMessage')[_0xceda40(0x322)][_0xceda40(0x28c)](_0xceda40(0x2da));const _0x5f3696=$('#genericInput');_0x5f3696[_0xceda40(0x470)]=_0x555ef2,_0x5f3696[_0xceda40(0x322)]['remove'](_0xceda40(0x2da)),$(_0xceda40(0x3cb))[_0xceda40(0x322)]['add'](_0xceda40(0x393));try{trapFocus($(_0xceda40(0x3cb)));}catch(_0x30c76d){}_0x5f3696['focus'](),_0x5f3696[_0xceda40(0x39b)]();const _0x84d59e=()=>{const _0x297a0f=_0xceda40;_0x4459ab(_0x5f3696[_0x297a0f(0x470)]),_0x59f3d1();},_0x35df0c=()=>_0x59f3d1(),_0x828840=_0x373699=>{const _0x3be722=_0xceda40;if(_0x373699[_0x3be722(0x1c9)]===_0x3be722(0x451))_0x84d59e();if(_0x373699['key']==='Escape')_0x35df0c();};$(_0xceda40(0x36a))['onclick']=_0x84d59e,$(_0xceda40(0x1a4))[_0xceda40(0x2dc)]=_0x35df0c,_0x5f3696[_0xceda40(0x1f0)]=_0x828840;function _0x59f3d1(){const _0x2a5af0=_0xceda40;$(_0x2a5af0(0x3cb))[_0x2a5af0(0x322)][_0x2a5af0(0x330)](_0x2a5af0(0x393)),$(_0x2a5af0(0x36a))[_0x2a5af0(0x2dc)]=null,$(_0x2a5af0(0x1a4))[_0x2a5af0(0x2dc)]=null,_0x5f3696['onkeydown']=null;try{releaseFocus();}catch(_0x2758a8){}}}function showConfirmModal(_0x592997,_0x2a3aa1,_0x103e52){const _0x3152d1=_0x1318bc;$(_0x3152d1(0x2a7))[_0x3152d1(0x1ee)]=_0x592997;const _0x3f0623=$('#genericMessage');_0x3f0623['textContent']=_0x2a3aa1,_0x3f0623[_0x3152d1(0x322)]['remove']('hidden'),$(_0x3152d1(0x467))[_0x3152d1(0x322)]['add'](_0x3152d1(0x2da)),$(_0x3152d1(0x3cb))[_0x3152d1(0x322)][_0x3152d1(0x28c)](_0x3152d1(0x393));try{trapFocus($(_0x3152d1(0x3cb)));}catch(_0x188dd5){}const _0x51f06f=()=>{_0x103e52(!![]),_0x57a3db();},_0x34fbe6=()=>{_0x103e52(![]),_0x57a3db();};$(_0x3152d1(0x36a))[_0x3152d1(0x2dc)]=_0x51f06f,$(_0x3152d1(0x1a4))[_0x3152d1(0x2dc)]=_0x34fbe6;function _0x57a3db(){const _0x71ab2f=_0x3152d1;$(_0x71ab2f(0x3cb))[_0x71ab2f(0x322)]['remove']('show'),$(_0x71ab2f(0x36a))[_0x71ab2f(0x2dc)]=null,$(_0x71ab2f(0x1a4))['onclick']=null;try{releaseFocus();}catch(_0x2349a4){}}}let pendingNoteSessionId=null;function openNoteModal(_0x11db1a){const _0x4a1201=_0x1318bc;pendingNoteSessionId=_0x11db1a||null;const _0x5a74cf=$(_0x4a1201(0x248));if(!_0x5a74cf)return;const _0x165c55=$(_0x4a1201(0x336));if(_0x165c55)try{_0x165c55['value']='';}catch(_0x5e6160){}_0x5a74cf[_0x4a1201(0x322)][_0x4a1201(0x28c)](_0x4a1201(0x393));try{trapFocus(_0x5a74cf);}catch(_0x5e8fd7){}}function closeNoteModal(){const _0x271e50=_0x1318bc,_0x159d1d=$('#modalNote');if(!_0x159d1d)return;_0x159d1d['classList'][_0x271e50(0x330)](_0x271e50(0x393)),pendingNoteSessionId=null;try{releaseFocus();}catch(_0x12b5ae){}}async function switchView(_0x23a341){const _0x457ead=_0x1318bc;$$(_0x457ead(0x2df))[_0x457ead(0x395)](_0x5cb9e3=>_0x5cb9e3['classList'][_0x457ead(0x330)](_0x457ead(0x2ef))),$(_0x457ead(0x318)+_0x23a341)[_0x457ead(0x322)][_0x457ead(0x28c)](_0x457ead(0x2ef)),$$('.nav-btn')['forEach'](_0x39d01e=>_0x39d01e[_0x457ead(0x322)][_0x457ead(0x330)](_0x457ead(0x2ef)));const _0x1ca44f=$(_0x457ead(0x236)+_0x23a341+'\x22]');if(_0x1ca44f)_0x1ca44f[_0x457ead(0x322)]['add'](_0x457ead(0x2ef));data[_0x457ead(0x218)][_0x457ead(0x46c)]=_0x23a341,await saveData(),_0x23a341===_0x457ead(0x49b)&&renderDashboard();}function closeAllMenus(){const _0x32ebd4=_0x1318bc;$$(_0x32ebd4(0x3a1))[_0x32ebd4(0x395)](_0x2122ef=>_0x2122ef[_0x32ebd4(0x322)][_0x32ebd4(0x330)](_0x32ebd4(0x393))),$$('.topic-item.menu-active')[_0x32ebd4(0x395)](_0x1dec3f=>_0x1dec3f['classList'][_0x32ebd4(0x330)](_0x32ebd4(0x3dc)));}function renderTopics(){const _0x12f783=_0x1318bc,_0x297b64=$('#topicsList');if(!_0x297b64)return;_0x297b64[_0x12f783(0x2e8)]='';const _0x39def8=data['settings'][_0x12f783(0x234)]||{};data[_0x12f783(0x295)]['forEach'](_0x3417d4=>{const _0x1cf5e8=_0x12f783,_0x28d6e0=document['createElement'](_0x1cf5e8(0x250));_0x28d6e0['className']=_0x1cf5e8(0x47f),_0x28d6e0[_0x1cf5e8(0x3db)]['tid']=_0x3417d4['id'];const _0x1fc48e=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x250));_0x1fc48e[_0x1cf5e8(0x205)]=_0x1cf5e8(0x3c4);const _0x262bc4=!!_0x39def8[_0x3417d4['id']],_0x5cfc4d=document['createElement']('button');_0x5cfc4d[_0x1cf5e8(0x205)]='chev\x20btn\x20small\x20ghost',_0x5cfc4d[_0x1cf5e8(0x35f)](_0x1cf5e8(0x1dc),String(!_0x262bc4)),_0x5cfc4d[_0x1cf5e8(0x2e8)]=_0x1cf5e8(0x1d6);const _0x58c672=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x250));_0x58c672[_0x1cf5e8(0x205)]=_0x1cf5e8(0x31e),_0x58c672[_0x1cf5e8(0x1ee)]=_0x3417d4[_0x1cf5e8(0x40c)];const _0x33ec5a=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x250));_0x33ec5a['className']='topic-actions';const _0x51bbf1=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x32a));_0x51bbf1[_0x1cf5e8(0x205)]='btn\x20small',_0x51bbf1[_0x1cf5e8(0x2e8)]=_0x1cf5e8(0x253),_0x51bbf1[_0x1cf5e8(0x210)]='Th√™m\x20Ch·ªß\x20ƒë·ªÅ\x20con';const _0x4257fc=document[_0x1cf5e8(0x334)]('div');_0x4257fc[_0x1cf5e8(0x2f6)][_0x1cf5e8(0x316)]=_0x1cf5e8(0x258);const _0x5eeb9f=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x32a));_0x5eeb9f[_0x1cf5e8(0x205)]=_0x1cf5e8(0x2a0),_0x5eeb9f[_0x1cf5e8(0x2e8)]=_0x1cf5e8(0x33c),_0x5eeb9f[_0x1cf5e8(0x210)]=_0x1cf5e8(0x1c1);const _0x19db45=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x250));_0x19db45[_0x1cf5e8(0x205)]=_0x1cf5e8(0x3d0);const _0x20210e=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x32a));_0x20210e[_0x1cf5e8(0x205)]='menu-item',_0x20210e[_0x1cf5e8(0x2e8)]=_0x1cf5e8(0x228);const _0x3c219c=document['createElement'](_0x1cf5e8(0x32a));_0x3c219c[_0x1cf5e8(0x205)]='menu-item\x20danger',_0x3c219c[_0x1cf5e8(0x2e8)]=_0x1cf5e8(0x2c8),_0x19db45[_0x1cf5e8(0x2f4)](_0x20210e,_0x3c219c),_0x4257fc[_0x1cf5e8(0x2f4)](_0x5eeb9f,_0x19db45),_0x33ec5a[_0x1cf5e8(0x2f4)](_0x51bbf1,_0x4257fc),_0x1fc48e[_0x1cf5e8(0x2f4)](_0x5cfc4d,_0x58c672,_0x33ec5a),_0x5cfc4d[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),async _0xaeea12=>{const _0x364922=_0x1cf5e8;_0xaeea12['stopPropagation']();const _0x3278f9=!!_0x39def8[_0x3417d4['id']];_0x3278f9?delete _0x39def8[_0x3417d4['id']]:_0x39def8[_0x3417d4['id']]=!![],data[_0x364922(0x218)][_0x364922(0x234)]=_0x39def8,await storageManager[_0x364922(0x201)](data[_0x364922(0x218)]),renderTopics();});const _0x1b5608=async()=>{const _0x5baa56=_0x1cf5e8,_0x93fb2d=!!_0x39def8[_0x3417d4['id']];_0x93fb2d?delete _0x39def8[_0x3417d4['id']]:_0x39def8[_0x3417d4['id']]=!![],data['settings']['collapsedTopics']=_0x39def8,await storageManager[_0x5baa56(0x201)](data['settings']),renderTopics();};_0x1fc48e[_0x1cf5e8(0x2b2)]('click',async _0x7b5e9=>{const _0x188452=_0x1cf5e8,_0x41f114=_0x7b5e9['target'];if(_0x41f114&&_0x41f114[_0x188452(0x1c2)]){if(_0x41f114[_0x188452(0x1c2)](_0x188452(0x303))||_0x41f114['closest']('.actions-menu-btn')||_0x41f114[_0x188452(0x1c2)](_0x188452(0x32a))||_0x41f114[_0x188452(0x1c2)]('input,select,textarea'))return;}_0x7b5e9[_0x188452(0x44a)](),await _0x1b5608();}),_0x58c672[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),async _0x140113=>{const _0x1e40b1=_0x1cf5e8;_0x140113[_0x1e40b1(0x44a)](),await _0x1b5608();}),_0x28d6e0[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),async _0x1fac3c=>{const _0x1cda01=_0x1cf5e8,_0x39ff2d=_0x1fac3c['target'];if(_0x39ff2d&&_0x39ff2d[_0x1cda01(0x1c2)]){if(_0x39ff2d[_0x1cda01(0x1c2)](_0x1cda01(0x196)))return;if(_0x39ff2d[_0x1cda01(0x1c2)](_0x1cda01(0x303))||_0x39ff2d['closest']('.actions-menu-btn')||_0x39ff2d[_0x1cda01(0x1c2)](_0x1cda01(0x32a))||_0x39ff2d[_0x1cda01(0x1c2)](_0x1cda01(0x47b)))return;}await _0x1b5608();});const _0x574732=document[_0x1cf5e8(0x334)](_0x1cf5e8(0x250));_0x574732[_0x1cf5e8(0x205)]=_0x1cf5e8(0x2ea)+(_0x262bc4?_0x1cf5e8(0x459):''),_0x574732[_0x1cf5e8(0x3db)][_0x1cf5e8(0x406)]=_0x3417d4['id'],_0x3417d4['subtopics'][_0x1cf5e8(0x395)](_0x1de31d=>{const _0x2864c4=_0x1cf5e8,_0x1a4372=document[_0x2864c4(0x334)](_0x2864c4(0x250));_0x1a4372['className']=_0x2864c4(0x405),_0x1a4372['dataset'][_0x2864c4(0x29b)]=_0x1de31d['id'];const _0x1e45e4=document[_0x2864c4(0x334)]('button');_0x1e45e4['className']=_0x2864c4(0x427),_0x1e45e4['textContent']='‚Ä¢\x20'+_0x1de31d[_0x2864c4(0x40c)],_0x1e45e4['dataset'][_0x2864c4(0x29b)]=_0x1de31d['id'],_0x1e45e4[_0x2864c4(0x3db)][_0x2864c4(0x406)]=_0x3417d4['id'];if(data['settings'][_0x2864c4(0x446)]===_0x1de31d['id'])_0x1e45e4[_0x2864c4(0x322)]['add']('active');const _0x56581c=document['createElement'](_0x2864c4(0x250));_0x56581c[_0x2864c4(0x205)]=_0x2864c4(0x44e);const _0x5110d3=document[_0x2864c4(0x334)](_0x2864c4(0x250));_0x5110d3[_0x2864c4(0x2f6)][_0x2864c4(0x316)]=_0x2864c4(0x258);const _0x1a07cc=document[_0x2864c4(0x334)](_0x2864c4(0x32a));_0x1a07cc['className']='btn\x20small\x20ghost\x20actions-menu-btn',_0x1a07cc['innerHTML']=_0x2864c4(0x33c),_0x1a07cc[_0x2864c4(0x210)]=_0x2864c4(0x1c1);const _0x3b5927=document['createElement']('div');_0x3b5927['className']=_0x2864c4(0x3d0);const _0x293420=document['createElement']('button');_0x293420[_0x2864c4(0x205)]=_0x2864c4(0x47e),_0x293420[_0x2864c4(0x2e8)]=_0x2864c4(0x1e5);const _0xd2ee52=document['createElement'](_0x2864c4(0x32a));_0xd2ee52[_0x2864c4(0x205)]=_0x2864c4(0x3f1),_0xd2ee52['innerHTML']=_0x2864c4(0x2b9),_0x3b5927[_0x2864c4(0x2f4)](_0x293420,_0xd2ee52),_0x5110d3[_0x2864c4(0x2f4)](_0x1a07cc,_0x3b5927),_0x56581c[_0x2864c4(0x2f4)](_0x5110d3),_0x1a4372['append'](_0x1e45e4,_0x56581c),_0x574732[_0x2864c4(0x27e)](_0x1a4372),_0x1e45e4[_0x2864c4(0x2b2)](_0x2864c4(0x21b),()=>selectSubtopic(_0x3417d4['id'],_0x1de31d['id'])),_0x1a07cc['addEventListener'](_0x2864c4(0x21b),_0x58ebe1=>{const _0x3e4cfe=_0x2864c4;_0x58ebe1[_0x3e4cfe(0x44a)]();const _0x31b011=_0x3b5927[_0x3e4cfe(0x322)][_0x3e4cfe(0x326)]('show');closeAllMenus(),_0x31b011?_0x28d6e0[_0x3e4cfe(0x322)][_0x3e4cfe(0x330)]('menu-active'):(_0x3b5927[_0x3e4cfe(0x322)][_0x3e4cfe(0x28c)](_0x3e4cfe(0x393)),_0x28d6e0[_0x3e4cfe(0x322)][_0x3e4cfe(0x28c)]('menu-active'));}),_0x293420[_0x2864c4(0x2b2)](_0x2864c4(0x21b),()=>showInputModal(_0x2864c4(0x4a1),async _0x2184f8=>{const _0x1c1b92=_0x2864c4;if(!_0x2184f8)return;_0x1de31d['name']=_0x2184f8,await storageManager[_0x1c1b92(0x428)](_0x1c1b92(0x2ea),_0x1de31d),renderAll();},_0x1de31d['name'])),_0xd2ee52['addEventListener'](_0x2864c4(0x21b),()=>showConfirmModal(_0x2864c4(0x3a8),_0x2864c4(0x367)+_0x1de31d[_0x2864c4(0x40c)]+_0x2864c4(0x268),async _0x529335=>{const _0x316711=_0x2864c4;if(!_0x529335)return;_0x3417d4[_0x316711(0x2ea)]=_0x3417d4['subtopics']['filter'](_0x4f04ad=>_0x4f04ad['id']!==_0x1de31d['id']);const _0x34192d=data[_0x316711(0x218)];_0x34192d[_0x316711(0x446)]===_0x1de31d['id']&&(_0x34192d[_0x316711(0x446)]='',_0x34192d[_0x316711(0x3b2)]='',ensureValidSelection()),await storageManager[_0x316711(0x25a)](_0x316711(0x2ea),_0x1de31d['id']),renderAll();}));}),_0x5eeb9f['addEventListener'](_0x1cf5e8(0x21b),_0x4973ac=>{const _0x4e5290=_0x1cf5e8;_0x4973ac[_0x4e5290(0x44a)]();const _0x4bc1b4=_0x19db45[_0x4e5290(0x322)][_0x4e5290(0x326)](_0x4e5290(0x393));closeAllMenus(),_0x4bc1b4?_0x28d6e0['classList']['remove'](_0x4e5290(0x3dc)):(_0x19db45['classList'][_0x4e5290(0x28c)](_0x4e5290(0x393)),_0x28d6e0[_0x4e5290(0x322)][_0x4e5290(0x28c)](_0x4e5290(0x3dc)));}),_0x51bbf1['addEventListener'](_0x1cf5e8(0x21b),()=>showInputModal('T√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20m·ªõi?',async _0x26e20f=>{const _0x1ecd08=_0x1cf5e8;if(!_0x26e20f)return;const _0x15dd36={'id':uid('s'),'topicId':_0x3417d4['id'],'name':_0x26e20f,'tasks':[],'generalNotes':[],'summaries':[],'chatHistory':[],'stats':{'totalMinutes':0x0,'sessionsCompleted':0x0,'tasksCompleted':0x0},'sessions':[],'timerState':{'state':_0x1ecd08(0x1d7),'prevState':null,'remaining':0x0,'segmentTotal':0x0,'cycleIndex':0x0}};_0x3417d4['subtopics'][_0x1ecd08(0x42e)](_0x15dd36),await storageManager[_0x1ecd08(0x28c)](_0x1ecd08(0x2ea),_0x15dd36),renderTopics();})),_0x20210e[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),()=>showInputModal(_0x1cf5e8(0x463),async _0x92637f=>{const _0x38a4f9=_0x1cf5e8;if(!_0x92637f)return;_0x3417d4[_0x38a4f9(0x40c)]=_0x92637f,await storageManager['update'](_0x38a4f9(0x295),_0x3417d4),renderTopics();},_0x3417d4[_0x1cf5e8(0x40c)])),_0x3c219c[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),()=>showConfirmModal(_0x1cf5e8(0x3a8),_0x1cf5e8(0x2d1)+_0x3417d4[_0x1cf5e8(0x40c)]+_0x1cf5e8(0x1aa),async _0x1bf27f=>{const _0x4b93b7=_0x1cf5e8;if(!_0x1bf27f)return;data['topics']=data['topics'][_0x4b93b7(0x1be)](_0x3bb409=>_0x3bb409['id']!==_0x3417d4['id']),delete _0x39def8[_0x3417d4['id']];data[_0x4b93b7(0x218)][_0x4b93b7(0x3b2)]===_0x3417d4['id']&&(data[_0x4b93b7(0x218)][_0x4b93b7(0x3b2)]='',data[_0x4b93b7(0x218)][_0x4b93b7(0x446)]='',ensureValidSelection());await storageManager['delete'](_0x4b93b7(0x295),_0x3417d4['id']);for(const _0x2f8814 of _0x3417d4['subtopics']){await storageManager['delete'](_0x4b93b7(0x2ea),_0x2f8814['id']);}renderAll();})),_0x51bbf1[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),_0x455193=>_0x455193['stopPropagation']()),_0x20210e[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),_0x5a20e6=>_0x5a20e6['stopPropagation']()),_0x3c219c[_0x1cf5e8(0x2b2)](_0x1cf5e8(0x21b),_0x561b68=>_0x561b68[_0x1cf5e8(0x44a)]()),_0x28d6e0[_0x1cf5e8(0x2f4)](_0x1fc48e,_0x574732),_0x297b64[_0x1cf5e8(0x27e)](_0x28d6e0);});if(window[_0x12f783(0x279)]){const _0x5b076a=document[_0x12f783(0x3e7)](_0x12f783(0x2aa));if(_0x5b076a){if(_0x5b076a[_0x12f783(0x1c4)])try{_0x5b076a[_0x12f783(0x1c4)]['destroy']();}catch(_0x491a03){}_0x5b076a[_0x12f783(0x1c4)]=new Sortable(_0x5b076a,{'animation':0x96,'draggable':'.topic-item','onEnd':async function(_0x285a98){const _0x3b0f04=_0x12f783;if(_0x285a98['oldIndex']===_0x285a98[_0x3b0f04(0x398)])return;const _0x26d31e=data[_0x3b0f04(0x295)]['splice'](_0x285a98[_0x3b0f04(0x3f2)],0x1)[0x0];data[_0x3b0f04(0x295)][_0x3b0f04(0x35c)](_0x285a98[_0x3b0f04(0x398)],0x0,_0x26d31e),await saveData(),renderTopics();}}),_0x5b076a['querySelectorAll']('.subtopics')[_0x12f783(0x395)](_0x25d4e3=>{const _0x1fa656=_0x12f783;new Sortable(_0x25d4e3,{'group':_0x1fa656(0x2e4),'animation':0x96,'draggable':_0x1fa656(0x252),'onEnd':async function(_0x2ae3b1){const _0x2fca81=_0x1fa656,_0x111228=_0x2ae3b1[_0x2fca81(0x30f)]?.[_0x2fca81(0x3db)]?.[_0x2fca81(0x406)]||_0x2ae3b1[_0x2fca81(0x30f)]?.[_0x2fca81(0x1c2)](_0x2fca81(0x1df))?.[_0x2fca81(0x3db)]?.['tid'],_0x11b5ac=_0x2ae3b1['to']?.['dataset']?.[_0x2fca81(0x406)]||_0x2ae3b1['to']?.['closest']('.topic-item')?.[_0x2fca81(0x3db)]?.[_0x2fca81(0x406)],_0x2e837b=data[_0x2fca81(0x295)][_0x2fca81(0x30d)](_0x353778=>_0x353778['id']===_0x111228),_0x2ff14e=data[_0x2fca81(0x295)][_0x2fca81(0x30d)](_0xf8ad20=>_0xf8ad20['id']===_0x11b5ac);if(!_0x2e837b||!_0x2ff14e)return;let _0xd4e8e8=null;const _0x691688=_0x2ae3b1['item']?.[_0x2fca81(0x3db)]?.[_0x2fca81(0x29b)]||_0x2ae3b1[_0x2fca81(0x3da)]?.['querySelector'](_0x2fca81(0x3fe))?.[_0x2fca81(0x3db)]?.[_0x2fca81(0x29b)];if(_0x691688){const _0x1292d0=_0x2e837b[_0x2fca81(0x2ea)][_0x2fca81(0x48f)](_0x5b4f7c=>_0x5b4f7c['id']===_0x691688);if(_0x1292d0>=0x0)_0xd4e8e8=_0x2e837b[_0x2fca81(0x2ea)]['splice'](_0x1292d0,0x1)[0x0];}!_0xd4e8e8&&(_0xd4e8e8=_0x2e837b[_0x2fca81(0x2ea)][_0x2fca81(0x35c)](_0x2ae3b1[_0x2fca81(0x3f2)],0x1)[0x0]);if(!_0xd4e8e8)return;_0xd4e8e8[_0x2fca81(0x22c)]=_0x2ff14e['id'],_0x2ff14e[_0x2fca81(0x2ea)][_0x2fca81(0x35c)](_0x2ae3b1['newIndex'],0x0,_0xd4e8e8),data[_0x2fca81(0x218)]['selectedSubtopicId']===_0xd4e8e8['id']&&(data['settings'][_0x2fca81(0x3b2)]=_0x2ff14e['id']),await saveData(),renderTopics();}});});}}}function selectSubtopic(_0x5c145f,_0x707377){const _0x5956b4=_0x1318bc,_0x17791c=$(_0x5956b4(0x349)),_0x588edb=getCurrentSubtopic();_0x588edb&&timer[_0x5956b4(0x1a3)]!==_0x5956b4(0x1d7)&&(_0x588edb[_0x5956b4(0x3e3)]={'state':timer['state'],'prevState':timer[_0x5956b4(0x2b3)],'remaining':timer['remaining'],'segmentTotal':timer[_0x5956b4(0x385)],'cycleIndex':timer[_0x5956b4(0x2a4)]}),_0x17791c['classList'][_0x5956b4(0x28c)](_0x5956b4(0x414)),setTimeout(async()=>{const _0x50421c=_0x5956b4;data[_0x50421c(0x218)][_0x50421c(0x3b2)]=_0x5c145f,data['settings']['selectedSubtopicId']=_0x707377;const _0x51f4a3=getCurrentSubtopic();_0x51f4a3[_0x50421c(0x3e3)]?(timer['state']=_0x51f4a3[_0x50421c(0x3e3)][_0x50421c(0x1a3)],timer[_0x50421c(0x2b3)]=_0x51f4a3['timerState'][_0x50421c(0x2b3)]||null,timer[_0x50421c(0x32e)]=_0x51f4a3[_0x50421c(0x3e3)]['remaining'],timer[_0x50421c(0x385)]=_0x51f4a3['timerState'][_0x50421c(0x385)],timer[_0x50421c(0x2a4)]=_0x51f4a3[_0x50421c(0x3e3)]['cycleIndex']):timer[_0x50421c(0x435)](),await saveData(),timer['updateUI'](),renderAll(),switchView('timer'),_0x17791c[_0x50421c(0x322)][_0x50421c(0x330)](_0x50421c(0x414));},0xc8);}function getCurrentSubtopic(){const _0x208a69=_0x1318bc,_0xd04e64=data[_0x208a69(0x218)][_0x208a69(0x3b2)],_0x4058ce=data[_0x208a69(0x218)][_0x208a69(0x446)];if(!_0xd04e64||!_0x4058ce)return null;const _0x4c91e0=data[_0x208a69(0x295)][_0x208a69(0x30d)](_0x424681=>_0x424681['id']===_0xd04e64);if(!_0x4c91e0)return null;return _0x4c91e0[_0x208a69(0x2ea)][_0x208a69(0x30d)](_0x2a8425=>_0x2a8425['id']===_0x4058ce)||null;}function renderContextBadge(){const _0xb25ac3=_0x1318bc,_0xedb020=getCurrentSubtopic(),_0x41a8b5=_0xedb020?_0xedb020['name']:'(ch∆∞a\x20ch·ªçn)',_0x4aae1a=$(_0xb25ac3(0x3cc)),_0xe59d98=$('#currentSubtopicName'),_0x1295a7=$('#currentSubtopicNameChat');if(_0x4aae1a)_0x4aae1a[_0xb25ac3(0x1ee)]=_0xedb020?_0xb25ac3(0x2ad)+_0xedb020[_0xb25ac3(0x40c)]:_0xb25ac3(0x1e2);if(_0xe59d98)_0xe59d98[_0xb25ac3(0x1ee)]=_0x41a8b5;if(_0x1295a7)_0x1295a7[_0xb25ac3(0x1ee)]=_0x41a8b5;}function renderSubtopicTasks(){const _0x7356d8=_0x1318bc,_0x1f6b28=getCurrentSubtopic(),_0x327d63=$(_0x7356d8(0x1b5)),_0xa8a518=$(_0x7356d8(0x1f4));if(!_0x327d63||!_0xa8a518)return;const _0x20ed0f=_0xa8a518[_0x7356d8(0x356)];if(!_0x1f6b28){_0x327d63[_0x7356d8(0x2e8)]=_0x7356d8(0x2cb),_0x20ed0f[_0x7356d8(0x322)]['add'](_0x7356d8(0x2da));return;}_0x20ed0f[_0x7356d8(0x322)][_0x7356d8(0x330)]('hidden'),_0x327d63[_0x7356d8(0x2e8)]='';const _0x2a0951=_0x1f6b28[_0x7356d8(0x1f7)]?_0x1f6b28[_0x7356d8(0x1f7)][_0x7356d8(0x1be)](_0x2a743c=>!_0x2a743c[_0x7356d8(0x48c)]):[];_0x2a0951[_0x7356d8(0x469)]===0x0&&(_0x327d63[_0x7356d8(0x2e8)]='<li\x20class=\x22tiny\x22\x20style=\x22opacity:\x200.7;\x22>Tuy·ªát\x20v·ªùi!\x20Kh√¥ng\x20c√≤n\x20task\x20n√†o.</li>'),_0x2a0951[_0x7356d8(0x395)](_0x1eaf43=>{const _0x35fddb=_0x7356d8,_0x1fcd59=document[_0x35fddb(0x334)]('li');_0x1fcd59[_0x35fddb(0x2e8)]=_0x35fddb(0x1d1)+_0x1eaf43['id']+_0x35fddb(0x3f9)+_0x1eaf43['id']+'\x22>'+escapeHTML(_0x1eaf43[_0x35fddb(0x1bb)])+'</label>',_0x1fcd59[_0x35fddb(0x3f3)](_0x35fddb(0x3a5))['addEventListener'](_0x35fddb(0x404),_0x227384=>toggleSubtopicTask(_0x227384[_0x35fddb(0x31c)]['id'],_0x1fcd59)),_0x327d63[_0x35fddb(0x27e)](_0x1fcd59);});}async function addSubtopicTask(){const _0x30d500=_0x1318bc,_0x4a6c06=getCurrentSubtopic();if(!_0x4a6c06){toast(t('timer.selectSubtopicPrompt'));return;}const _0x5857af=$(_0x30d500(0x1f4)),_0x3b3811=_0x5857af[_0x30d500(0x470)][_0x30d500(0x3f0)]();if(_0x3b3811){if(!_0x4a6c06[_0x30d500(0x1f7)])_0x4a6c06[_0x30d500(0x1f7)]=[];_0x4a6c06[_0x30d500(0x1f7)][_0x30d500(0x42e)]({'id':uid(_0x30d500(0x4b0)),'text':_0x3b3811,'isCompleted':![],'createdAt':todayISO()}),await saveData(),renderSubtopicTasks(),_0x5857af['value']='';}_0x5857af[_0x30d500(0x425)]();}async function toggleSubtopicTask(_0x1c7aaf,_0x4f3aa1){const _0x45d4c4=_0x1318bc,_0x8e28ad=getCurrentSubtopic();if(!_0x8e28ad||!_0x8e28ad[_0x45d4c4(0x1f7)])return;const _0x2b7a60=_0x8e28ad[_0x45d4c4(0x1f7)]['find'](_0x489d78=>_0x489d78['id']===_0x1c7aaf);_0x2b7a60&&(_0x2b7a60[_0x45d4c4(0x48c)]=!![],_0x8e28ad[_0x45d4c4(0x49b)][_0x45d4c4(0x3bd)]=(_0x8e28ad[_0x45d4c4(0x49b)][_0x45d4c4(0x3bd)]||0x0)+0x1,await saveData(),_0x4f3aa1[_0x45d4c4(0x322)][_0x45d4c4(0x28c)](_0x45d4c4(0x4a8)),setTimeout(()=>{renderSubtopicTasks(),renderStatsHistory();},0xc8));}const timer={'state':'idle','prevState':null,'tickHandle':null,'endAt':null,'remaining':0x0,'segmentTotal':0x0,'cyclesTarget':0x4,'cycleIndex':0x0,'mode':'A','persistInterval':0x3c*0x3e8,'lastPersist':0x0,async 'setPreset'(_0x53f068,{silent:silent=![]}={}){const _0x38d41d=_0x1318bc,_0x5e3642=data['settings'];this[_0x38d41d(0x3c9)]=_0x53f068,this[_0x38d41d(0x1bf)]=_0x53f068==='A'?_0x5e3642[_0x38d41d(0x309)]:_0x53f068==='B'?_0x5e3642['cyclesB']:0x0,_0x5e3642[_0x38d41d(0x3e0)]=_0x53f068,await saveData(),this[_0x38d41d(0x1a3)]===_0x38d41d(0x1d7)&&this[_0x38d41d(0x435)]();},'currentDurations'(){const _0x5de429=_0x1318bc,_0x59e085=data[_0x5de429(0x218)][_0x5de429(0x25d)];if(this['mode']==='A')return{'work':_0x59e085[_0x5de429(0x2c5)],'short':_0x59e085[_0x5de429(0x1a2)],'long':_0x59e085[_0x5de429(0x235)],'winddown':_0x59e085[_0x5de429(0x337)]??0x0};if(this[_0x5de429(0x3c9)]==='B')return{'work':_0x59e085['B_work'],'short':_0x59e085[_0x5de429(0x412)],'long':_0x59e085[_0x5de429(0x42a)],'winddown':_0x59e085['B_winddown']??0x0};return{'work':0x0,'short':0x0,'long':0x0,'winddown':0x0};},'currentConfig'(){const _0x409a59=_0x1318bc,_0xbc5945=data['settings'];if(this[_0x409a59(0x3c9)]==='A')return{'cycles':_0xbc5945[_0x409a59(0x309)],'interval':_0xbc5945[_0x409a59(0x308)]};if(this[_0x409a59(0x3c9)]==='B')return{'cycles':_0xbc5945[_0x409a59(0x31d)],'interval':_0xbc5945[_0x409a59(0x311)]};return{'cycles':0x0,'interval':0x0};},'updateUI'(){const _0x5cea32=_0x1318bc,_0xec86f2=$(_0x5cea32(0x3f6)),_0x34596a=$(_0x5cea32(0x481)),_0x29e5c6=$(_0x5cea32(0x2ac));if(!_0xec86f2||!_0x34596a||!_0x29e5c6)return;const _0x31838c=this['mode']==='C';$(_0x5cea32(0x242))['classList'][_0x5cea32(0x261)](_0x5cea32(0x2da),this['state']!==_0x5cea32(0x1d7)||_0x31838c&&this[_0x5cea32(0x1a3)]===_0x5cea32(0x3d2)),$(_0x5cea32(0x300))['classList'][_0x5cea32(0x261)](_0x5cea32(0x2da),!(_0x31838c&&this[_0x5cea32(0x1a3)]===_0x5cea32(0x3d2))),$('#btnPause')[_0x5cea32(0x322)]['toggle'](_0x5cea32(0x2da),!['work','break',_0x5cea32(0x2bd)][_0x5cea32(0x2d7)](this['state'])),$('#btnResume')[_0x5cea32(0x322)][_0x5cea32(0x261)]('hidden',this['state']!==_0x5cea32(0x3bf));let _0x47174d=_0x5cea32(0x2b8);if(this['state']===_0x5cea32(0x3d2))_0xec86f2['textContent']=_0x31838c?_0x5cea32(0x379):_0x5cea32(0x2c2),_0xec86f2[_0x5cea32(0x205)]='badge\x20state\x20work',_0x47174d=_0x5cea32(0x3c1);else{if(this[_0x5cea32(0x1a3)]==='break')_0xec86f2['textContent']=_0x5cea32(0x200),_0xec86f2[_0x5cea32(0x205)]=_0x5cea32(0x394),_0x47174d='var(--warn)';else{if(this[_0x5cea32(0x1a3)]===_0x5cea32(0x2bd))_0xec86f2['textContent']='NGH·ªà\x20D√ÄI',_0xec86f2[_0x5cea32(0x205)]=_0x5cea32(0x40a),_0x47174d=_0x5cea32(0x22e);else{if(this['state']==='wind_down'){_0xec86f2[_0x5cea32(0x1ee)]=_0x5cea32(0x2e5),_0xec86f2['className']=_0x5cea32(0x45d),_0x47174d='var(--acc-2)';try{$('#windDownChecklist')[_0x5cea32(0x322)][_0x5cea32(0x330)](_0x5cea32(0x2da)),$(_0x5cea32(0x2d3))[_0x5cea32(0x322)][_0x5cea32(0x330)](_0x5cea32(0x2da));}catch(_0x57a492){}}else this['state']==='paused'?(_0xec86f2[_0x5cea32(0x1ee)]=_0x5cea32(0x489),_0xec86f2['className']=_0x5cea32(0x1e9)):(_0xec86f2[_0x5cea32(0x1ee)]='S·∫¥N\x20S√ÄNG',_0xec86f2[_0x5cea32(0x205)]=_0x5cea32(0x1e9));}}}[_0x5cea32(0x3d2),_0x5cea32(0x21e),_0x5cea32(0x2bd),'wind_down'][_0x5cea32(0x2d7)](this['state'])?_0x29e5c6[_0x5cea32(0x322)][_0x5cea32(0x28c)](_0x5cea32(0x3b6)):_0x29e5c6['classList'][_0x5cea32(0x330)](_0x5cea32(0x3b6));_0x34596a[_0x5cea32(0x2f6)][_0x5cea32(0x27f)]=_0x47174d,_0x29e5c6[_0x5cea32(0x322)]['remove'](_0x5cea32(0x2ec));const _0x9a5a3e=$(_0x5cea32(0x243));if(_0x9a5a3e)_0x9a5a3e[_0x5cea32(0x1ee)]=formatMMSS(this[_0x5cea32(0x32e)]);const _0x3e6e1c=_0x34596a['r'][_0x5cea32(0x351)]['value'],_0x56860a=0x2*Math['PI']*_0x3e6e1c,_0x40d4f8=this[_0x5cea32(0x385)]>0x0?_0x56860a-this[_0x5cea32(0x32e)]/this[_0x5cea32(0x385)]*_0x56860a:_0x56860a;_0x34596a[_0x5cea32(0x2f6)]['strokeDasharray']=_0x56860a,_0x34596a[_0x5cea32(0x2f6)][_0x5cea32(0x38c)]=isNaN(_0x40d4f8)?_0x56860a:_0x40d4f8;const _0x50d907=$(_0x5cea32(0x314));if(_0x50d907){const _0x271365=this['currentConfig']();_0x50d907['textContent']=t(_0x5cea32(0x1e7),{'current':this[_0x5cea32(0x2a4)],'target':_0x271365[_0x5cea32(0x411)]}),_0x50d907['classList'][_0x5cea32(0x261)](_0x5cea32(0x2da),_0x31838c);}const _0xc404e5=$('#breakSuggestionDisplay');_0xc404e5&&_0xc404e5['classList']['toggle'](_0x5cea32(0x2da),_0x31838c&&this[_0x5cea32(0x1a3)]===_0x5cea32(0x3d2));const _0x1db30f=$(_0x5cea32(0x265));if(_0x1db30f)_0x1db30f[_0x5cea32(0x1ee)]=formatMMSS(this[_0x5cea32(0x32e)]);if(this[_0x5cea32(0x1a3)]!==_0x5cea32(0x312))try{$('#windDownChecklist')['classList']['add'](_0x5cea32(0x2da)),$(_0x5cea32(0x2d3))[_0x5cea32(0x322)]['add'](_0x5cea32(0x2da));}catch(_0x2ff170){}},'persistTimerState'(_0x24d26e=![]){const _0x569f83=_0x1318bc;try{const _0x2f47fd=getCurrentSubtopic();if(!_0x2f47fd)return;const _0x4a370f={'state':this[_0x569f83(0x1a3)],'prevState':this[_0x569f83(0x2b3)],'remaining':this['remaining'],'segmentTotal':this[_0x569f83(0x385)],'cycleIndex':this[_0x569f83(0x2a4)]};_0x2f47fd[_0x569f83(0x3e3)]=_0x4a370f;try{localStorage['setItem'](_0x569f83(0x35a)+_0x2f47fd['id'],JSON[_0x569f83(0x484)](_0x4a370f));}catch(_0x38c019){}this['lastPersist']=Date[_0x569f83(0x429)]();}catch(_0x13d248){}},'_startTick'(){const _0x67f0c1=_0x1318bc;if(this[_0x67f0c1(0x38e)])clearInterval(this[_0x67f0c1(0x38e)]);if(this['mode']==='C'&&this[_0x67f0c1(0x1a3)]==='work'){this[_0x67f0c1(0x38e)]=setInterval(()=>{const _0x4755c8=_0x67f0c1;this['remaining']+=0x1,this[_0x4755c8(0x33a)](),this[_0x4755c8(0x1e4)]();},0x3e8);return;}this[_0x67f0c1(0x38e)]=setInterval(()=>{const _0x348fca=_0x67f0c1;this[_0x348fca(0x32e)]>0x0&&(this[_0x348fca(0x32e)]-=0x1,this[_0x348fca(0x33a)](),this[_0x348fca(0x1e4)]()),this[_0x348fca(0x32e)]<=0x0&&(clearInterval(this[_0x348fca(0x38e)]),this[_0x348fca(0x38e)]=null,this['_onFinishSegment']());},0x3e8);},'_onFinishSegment'(){const _0x45e636=_0x1318bc;if(this['state']===_0x45e636(0x3d2)){const _0x50bb6a=getCurrentSubtopic();if(_0x50bb6a){const _0x1ae5f6=this[_0x45e636(0x1f1)]()[_0x45e636(0x3d2)];_0x50bb6a[_0x45e636(0x49b)][_0x45e636(0x4b5)]=(_0x50bb6a['stats'][_0x45e636(0x4b5)]||0x0)+_0x1ae5f6,_0x50bb6a[_0x45e636(0x49b)][_0x45e636(0x211)]=(_0x50bb6a[_0x45e636(0x49b)]['sessionsCompleted']||0x0)+0x1;const _0x52ad90={'id':uid(_0x45e636(0x34e)),'dateISO':todayISO(),'durationMinutes':_0x1ae5f6,'mode':this[_0x45e636(0x3c9)],'note':''};if(!_0x50bb6a['sessions'])_0x50bb6a[_0x45e636(0x23e)]=[];_0x50bb6a[_0x45e636(0x23e)]['unshift'](_0x52ad90);if(data?.[_0x45e636(0x218)]?.[_0x45e636(0x1f8)]!==![])try{openNoteModal(_0x52ad90['id']);}catch(_0x1e3cda){}saveData(),renderStatsHistory(),checkAndShowMilestones();}this[_0x45e636(0x2a4)]++;}if(typeof data!==_0x45e636(0x448)&&data&&data[_0x45e636(0x218)]&&data[_0x45e636(0x218)][_0x45e636(0x28a)]===![]&&this['state']==='work')playSound(_0x45e636(0x4a4));else(this[_0x45e636(0x1a3)]===_0x45e636(0x312)||this[_0x45e636(0x1a3)]===_0x45e636(0x21e)||this[_0x45e636(0x1a3)]==='long_break')&&playSound(_0x45e636(0x402));const _0x67d3b4=$(_0x45e636(0x2ac));if(_0x67d3b4)_0x67d3b4[_0x45e636(0x322)][_0x45e636(0x28c)]('finished');if(data[_0x45e636(0x218)]['autoStartNext']){if(this[_0x45e636(0x1a3)]===_0x45e636(0x3d2))data[_0x45e636(0x218)][_0x45e636(0x28a)]===![]?this[_0x45e636(0x36c)]():this[_0x45e636(0x19c)]();else this['state']==='wind_down'?this['beginBreak']():this[_0x45e636(0x3e4)]();}else this[_0x45e636(0x38e)]&&(clearInterval(this[_0x45e636(0x38e)]),this[_0x45e636(0x38e)]=null),this[_0x45e636(0x1a3)]=_0x45e636(0x1d7),this['prevState']=null,this['updateUI'](),toast(_0x45e636(0x37e));},'beginWindDown'(){const _0x1b1e5c=_0x1318bc;if(data?.['settings']?.[_0x1b1e5c(0x28a)]===![]){this['beginBreak']();return;}this[_0x1b1e5c(0x2b3)]=this['state'],this['state']=_0x1b1e5c(0x312);const _0x4baa0d=(this[_0x1b1e5c(0x1f1)]()[_0x1b1e5c(0x49c)]||0x0)*0x3c;if(_0x4baa0d<=0x0){this[_0x1b1e5c(0x36c)]();return;}this[_0x1b1e5c(0x385)]=_0x4baa0d,this['remaining']=_0x4baa0d;try{playSound(_0x1b1e5c(0x402));}catch(_0x29514a){}try{toast('ƒê·∫øn\x20gi·ªù\x20h·∫°\x20nhi·ªát.\x20H√£y\x20k·∫øt\x20th√∫c\x20c√¥ng\x20vi·ªác\x20v√†\x20chu·∫©n\x20b·ªã\x20ngh·ªâ\x20ng∆°i.');}catch(_0x41c572){}this[_0x1b1e5c(0x22f)](),this[_0x1b1e5c(0x33a)]();},'beginWork'(){const _0x4cbdfd=_0x1318bc;this[_0x4cbdfd(0x2b3)]=this[_0x4cbdfd(0x1a3)],this['state']=_0x4cbdfd(0x3d2);if(this[_0x4cbdfd(0x3c9)]==='C'){this[_0x4cbdfd(0x385)]=0x0;if(this[_0x4cbdfd(0x2b3)]!==_0x4cbdfd(0x3bf))this[_0x4cbdfd(0x32e)]=0x0;}else{const _0x1d5e45=this['currentDurations']()[_0x4cbdfd(0x3d2)]*0x3c;this['segmentTotal']=_0x1d5e45;if(this[_0x4cbdfd(0x2b3)]!=='paused')this[_0x4cbdfd(0x32e)]=_0x1d5e45;}const _0x1513bd=$(_0x4cbdfd(0x376));_0x1513bd&&(_0x1513bd[_0x4cbdfd(0x1ee)]=''),this[_0x4cbdfd(0x22f)](),this[_0x4cbdfd(0x33a)]();},'finishFlowSession'(){const _0x48392f=_0x1318bc;if(this[_0x48392f(0x3c9)]!=='C'||this['state']!==_0x48392f(0x3d2))return;this[_0x48392f(0x38e)]&&(clearInterval(this[_0x48392f(0x38e)]),this[_0x48392f(0x38e)]=null);const _0x5af27f=Math[_0x48392f(0x380)](0x1,parseInt(data[_0x48392f(0x218)][_0x48392f(0x458)]??0x5,0xa)),_0x5982e0=Math[_0x48392f(0x380)](0x0,this['remaining']|0x0),_0x2cc7fd=Math[_0x48392f(0x380)](0x3c,Math[_0x48392f(0x208)](_0x5982e0/_0x5af27f));try{const _0x44ba86=getCurrentSubtopic();if(_0x44ba86){const _0x37a40e=Math['max'](0x1,Math[_0x48392f(0x388)](_0x5982e0/0x3c));_0x44ba86['stats'][_0x48392f(0x4b5)]=(_0x44ba86[_0x48392f(0x49b)][_0x48392f(0x4b5)]||0x0)+_0x37a40e,_0x44ba86['stats'][_0x48392f(0x211)]=(_0x44ba86[_0x48392f(0x49b)][_0x48392f(0x211)]||0x0)+0x1;const _0x3c2b17={'id':uid(_0x48392f(0x34e)),'dateISO':todayISO(),'durationMinutes':_0x37a40e,'mode':this['mode'],'note':''};if(!_0x44ba86['sessions'])_0x44ba86[_0x48392f(0x23e)]=[];_0x44ba86[_0x48392f(0x23e)][_0x48392f(0x455)](_0x3c2b17),saveData(),renderStatsHistory(),data?.[_0x48392f(0x218)]?.[_0x48392f(0x1f8)]!==![]&&openNoteModal(_0x3c2b17['id']);}}catch(_0x3ba9aa){}this['state']=_0x48392f(0x21e),this[_0x48392f(0x385)]=_0x2cc7fd,this[_0x48392f(0x32e)]=_0x2cc7fd,this['_startTick'](),this[_0x48392f(0x33a)](),this['persistTimerState'](!![]);try{toast('Ngh·ªâ\x20'+Math[_0x48392f(0x388)](_0x2cc7fd/0x3c)+_0x48392f(0x454)+_0x5af27f+').');}catch(_0x47c21b){}},'beginBreak'(){const _0x10e9b3=_0x1318bc;this[_0x10e9b3(0x2b3)]=this[_0x10e9b3(0x1a3)];const _0xfb6b7d=this[_0x10e9b3(0x3b7)](),_0x3e8e9e=this['currentDurations']();if(this[_0x10e9b3(0x2a4)]>0x0&&this[_0x10e9b3(0x2a4)]%_0xfb6b7d[_0x10e9b3(0x19e)]===0x0){this[_0x10e9b3(0x1a3)]=_0x10e9b3(0x2bd);const _0x38d0be=_0x3e8e9e[_0x10e9b3(0x447)]*0x3c;this[_0x10e9b3(0x385)]=_0x38d0be;if(this[_0x10e9b3(0x2b3)]!==_0x10e9b3(0x3bf))this[_0x10e9b3(0x32e)]=_0x38d0be;toast('Tuy·ªát\x20v·ªùi!\x20ƒê√£\x20ƒë·∫øn\x20l√∫c\x20ngh·ªâ\x20d√†i.');}else{this['state']=_0x10e9b3(0x21e);const _0xe8ebc6=_0x3e8e9e[_0x10e9b3(0x4a6)]*0x3c;this[_0x10e9b3(0x385)]=_0xe8ebc6;if(this[_0x10e9b3(0x2b3)]!==_0x10e9b3(0x3bf))this[_0x10e9b3(0x32e)]=_0xe8ebc6;}const _0x420b3d=$('#breakSuggestionDisplay');if(_0x420b3d){const _0x189178=Math['floor'](Math[_0x10e9b3(0x40b)]()*breakSuggestions[_0x10e9b3(0x469)]);_0x420b3d[_0x10e9b3(0x1ee)]=_0x10e9b3(0x2c1)+breakSuggestions[_0x189178];}this[_0x10e9b3(0x22f)](),this['updateUI']();},async 'start'(){const _0x3ed1c7=_0x1318bc;if(!getCurrentSubtopic()){toast(_0x3ed1c7(0x19b));return;}ensureAudio();if(this[_0x3ed1c7(0x3c9)]==='C'&&this[_0x3ed1c7(0x1a3)]===_0x3ed1c7(0x1d7))this[_0x3ed1c7(0x1a3)]=_0x3ed1c7(0x3d2),this[_0x3ed1c7(0x32e)]=0x0,this[_0x3ed1c7(0x385)]=0x0,this[_0x3ed1c7(0x2a4)]=0x0,this['_startTick'](),this[_0x3ed1c7(0x33a)]();else{if(this[_0x3ed1c7(0x1a3)]===_0x3ed1c7(0x1d7))this[_0x3ed1c7(0x2a4)]=this[_0x3ed1c7(0x2a4)]||0x0,this[_0x3ed1c7(0x3e4)]();else this[_0x3ed1c7(0x1a3)]===_0x3ed1c7(0x3bf)&&this[_0x3ed1c7(0x363)]();}await this['persistTimerState'](!![]);},async 'pause'(){const _0x47220a=_0x1318bc;this['tickHandle']&&(clearInterval(this[_0x47220a(0x38e)]),this[_0x47220a(0x38e)]=null),this['prevState']=this[_0x47220a(0x1a3)],this['state']=_0x47220a(0x3bf),this[_0x47220a(0x33a)](),await this['persistTimerState'](!![]);},async 'resume'(){const _0x392d2d=_0x1318bc;if(this['state']!==_0x392d2d(0x3bf))return;this[_0x392d2d(0x1a3)]=this[_0x392d2d(0x2b3)]||_0x392d2d(0x3d2),this[_0x392d2d(0x22f)](),this[_0x392d2d(0x33a)](),await this[_0x392d2d(0x1e4)](!![]);},async 'skip'(){const _0x4fc6ac=_0x1318bc;if(this[_0x4fc6ac(0x3c9)]==='C'&&this[_0x4fc6ac(0x1a3)]===_0x4fc6ac(0x3d2)){this[_0x4fc6ac(0x327)](),await this[_0x4fc6ac(0x1e4)](!![]);return;}this[_0x4fc6ac(0x1a3)]===_0x4fc6ac(0x3d2)?(this[_0x4fc6ac(0x38e)]&&(clearInterval(this[_0x4fc6ac(0x38e)]),this[_0x4fc6ac(0x38e)]=null),this['remaining']=0x0,this[_0x4fc6ac(0x332)]()):(this[_0x4fc6ac(0x32e)]=0x0,this[_0x4fc6ac(0x38e)]&&(clearInterval(this[_0x4fc6ac(0x38e)]),this['tickHandle']=null),this['_onFinishSegment']()),await this[_0x4fc6ac(0x1e4)](!![]);},async 'reset'(){const _0x500a34=_0x1318bc;this[_0x500a34(0x38e)]&&(clearInterval(this[_0x500a34(0x38e)]),this['tickHandle']=null);this['state']=_0x500a34(0x1d7),this['prevState']=null,this[_0x500a34(0x32e)]=0x0,this['segmentTotal']=0x0,this[_0x500a34(0x2a4)]=0x0;const _0x1be6b7=$(_0x500a34(0x376));_0x1be6b7&&(_0x1be6b7[_0x500a34(0x1ee)]=''),this[_0x500a34(0x33a)](),await this[_0x500a34(0x1e4)](!![]);}};async function deleteSummary(_0x486630){const _0x12e67c=_0x1318bc;showConfirmModal(_0x12e67c(0x3a8),_0x12e67c(0x2c3),async _0x964845=>{const _0x478f98=_0x12e67c;if(!_0x964845)return;const _0x4b8cd8=getCurrentSubtopic();if(!_0x4b8cd8||!_0x4b8cd8[_0x478f98(0x3f8)])return;const _0x54529d=[..._0x4b8cd8['summaries']];_0x4b8cd8[_0x478f98(0x3f8)]=_0x4b8cd8[_0x478f98(0x3f8)]['filter'](_0x3c1a7d=>_0x3c1a7d['id']!==_0x486630);try{await storageManager[_0x478f98(0x428)](_0x478f98(0x2ea),_0x4b8cd8),renderSummaries(),toast(_0x478f98(0x222));}catch(_0x20edbe){console[_0x478f98(0x40f)]('Failed\x20to\x20delete\x20summary:',_0x20edbe),_0x4b8cd8['summaries']=_0x54529d,toast('Kh√¥ng\x20th·ªÉ\x20l∆∞u\x20thay\x20ƒë·ªïi.');}});}function exportSummary(_0x542ccf){const _0x311b45=_0x1318bc,_0x3d0315=new Blob([_0x542ccf['content']],{'type':'text/plain'}),_0x25d001=document[_0x311b45(0x334)]('a'),_0x3b7d0d=new Date(_0x542ccf['createdAt']),_0x1317f9=_0x59f443=>(''+_0x59f443)[_0x311b45(0x2b6)](0x2,'0');_0x25d001[_0x311b45(0x1b6)]=URL[_0x311b45(0x445)](_0x3d0315),_0x25d001[_0x311b45(0x2f7)]='summary_'+_0x3b7d0d[_0x311b45(0x37c)]()+_0x1317f9(_0x3b7d0d['getMonth']()+0x1)+_0x1317f9(_0x3b7d0d[_0x311b45(0x45a)]())+'.txt',_0x25d001[_0x311b45(0x21b)](),URL[_0x311b45(0x291)](_0x25d001[_0x311b45(0x1b6)]);}function renderStatsHistory(){const _0x43839d=_0x1318bc,_0x22947f=getCurrentSubtopic(),_0x56e7aa=$('#statTotal'),_0x3c389f=$(_0x43839d(0x1b0)),_0x6fc278=$(_0x43839d(0x2c7)),_0x1601dd=$(_0x43839d(0x462));if(!_0x56e7aa||!_0x3c389f||!_0x6fc278||!_0x1601dd)return;if(!_0x22947f){_0x56e7aa[_0x43839d(0x1ee)]=_0x43839d(0x4a2),_0x3c389f[_0x43839d(0x1ee)]='0',_0x6fc278[_0x43839d(0x1ee)]='0',_0x1601dd[_0x43839d(0x2e8)]=_0x43839d(0x282);return;}const _0x46d1bc=_0x22947f[_0x43839d(0x49b)]&&_0x22947f[_0x43839d(0x49b)][_0x43839d(0x4b5)]?_0x22947f[_0x43839d(0x49b)]['totalMinutes']:0x0,_0x645079=_0x22947f[_0x43839d(0x49b)]&&_0x22947f['stats'][_0x43839d(0x211)]?_0x22947f['stats'][_0x43839d(0x211)]:0x0,_0x19cc1d=_0x22947f[_0x43839d(0x1f7)]?_0x22947f[_0x43839d(0x1f7)][_0x43839d(0x1be)](_0x3beb75=>_0x3beb75['isCompleted'])['length']:0x0;_0x56e7aa[_0x43839d(0x1ee)]=formatDaysHoursMinutes(_0x46d1bc),_0x3c389f['textContent']=String(_0x645079),_0x6fc278[_0x43839d(0x1ee)]=String(_0x19cc1d),_0x1601dd[_0x43839d(0x2e8)]='';const _0x1f8f96=Array[_0x43839d(0x366)](_0x22947f['sessions'])?_0x22947f[_0x43839d(0x23e)]:[];if(_0x1f8f96['length']===0x0){_0x1601dd[_0x43839d(0x2e8)]=_0x43839d(0x216);return;}_0x1f8f96['forEach'](_0x4319be=>{const _0x3b77a6=_0x43839d,_0x32c76f=document[_0x3b77a6(0x334)](_0x3b77a6(0x250));_0x32c76f[_0x3b77a6(0x205)]='hist-item';const _0x464b11=document[_0x3b77a6(0x334)](_0x3b77a6(0x250)),_0x1728e3=_0x4319be[_0x3b77a6(0x2fb)]?new Date(_0x4319be[_0x3b77a6(0x2fb)]):new Date(),_0x4b3a6d=_0x4319be['durationMinutes']!=null?_0x4319be['durationMinutes']:_0x4319be[_0x3b77a6(0x213)]||0x0,_0x41a155=_0x3b77a6(0x2e2)+_0x1728e3['toLocaleString']()+_0x3b77a6(0x37a)+_0x4b3a6d+'\x27\x20¬∑\x20Mode\x20'+(_0x4319be[_0x3b77a6(0x3c9)]||'')+'</div>';let _0x4fd4e4='';if(_0x4319be[_0x3b77a6(0x4ad)])_0x4fd4e4=_0x3b77a6(0x471)+escapeHTML(_0x4319be['note'])+'</div>';else data?.[_0x3b77a6(0x218)]?.[_0x3b77a6(0x1f8)]!==![]&&(_0x4fd4e4='<div><span\x20class=\x22tiny\x22>(ch∆∞a\x20c√≥\x20ghi\x20ch√∫)</span></div>');_0x464b11[_0x3b77a6(0x2e8)]=_0x41a155+_0x4fd4e4,_0x32c76f[_0x3b77a6(0x27e)](_0x464b11),_0x1601dd[_0x3b77a6(0x27e)](_0x32c76f);});}function renderGeneralNotes(){const _0x40c6a3=_0x1318bc,_0x49e051=$(_0x40c6a3(0x1fc));if(!_0x49e051)return;const _0x53f584=getCurrentSubtopic();if(!_0x53f584){_0x49e051[_0x40c6a3(0x2e8)]=_0x40c6a3(0x46b);return;}_0x53f584[_0x40c6a3(0x281)]=_0x53f584[_0x40c6a3(0x281)]||[];if(_0x53f584[_0x40c6a3(0x281)][_0x40c6a3(0x469)]===0x0){_0x49e051['innerHTML']=_0x40c6a3(0x488);return;}_0x49e051['innerHTML']='',_0x53f584[_0x40c6a3(0x281)][_0x40c6a3(0x395)](_0x53e1f7=>{const _0x4c37fb=_0x40c6a3,_0xf62301=document[_0x4c37fb(0x334)](_0x4c37fb(0x250));_0xf62301[_0x4c37fb(0x205)]=_0x4c37fb(0x219);const _0x34f41a=document[_0x4c37fb(0x334)]('div');_0x34f41a[_0x4c37fb(0x205)]='note-content',_0x34f41a['textContent']=typeof _0x53e1f7===_0x4c37fb(0x31b)?_0x53e1f7:_0x53e1f7[_0x4c37fb(0x1bb)]||'';const _0x3bb09d=document[_0x4c37fb(0x334)](_0x4c37fb(0x250));_0x3bb09d['className']=_0x4c37fb(0x362),_0x3bb09d['textContent']=_0x53e1f7[_0x4c37fb(0x2d0)]?new Date(_0x53e1f7[_0x4c37fb(0x2d0)])[_0x4c37fb(0x1d9)]():'';const _0x1af121=document[_0x4c37fb(0x334)](_0x4c37fb(0x250)),_0x1adb9d=document['createElement']('button');_0x1adb9d[_0x4c37fb(0x205)]=_0x4c37fb(0x273),_0x1adb9d[_0x4c37fb(0x1ee)]=_0x4c37fb(0x241),_0x1adb9d[_0x4c37fb(0x2dc)]=async _0x1dfe4e=>{const _0x32a959=_0x4c37fb;_0x1dfe4e[_0x32a959(0x44a)]();const _0x2e79c3=getCurrentSubtopic();if(!_0x2e79c3)return;_0x2e79c3['generalNotes']=(_0x2e79c3[_0x32a959(0x281)]||[])['filter'](_0x441bca=>(_0x441bca['id']||_0x441bca)!==(_0x53e1f7['id']||_0x53e1f7)),await saveData(),renderGeneralNotes();},_0x1af121[_0x4c37fb(0x27e)](_0x1adb9d);const _0x3a94b1=document[_0x4c37fb(0x334)]('div');_0x3a94b1[_0x4c37fb(0x205)]='note-content-wrapper',_0x3a94b1['append'](_0x34f41a,_0x3bb09d),_0xf62301[_0x4c37fb(0x2f4)](_0x3a94b1,_0x1af121),_0x49e051['appendChild'](_0xf62301);});}function renderMethods(){const _0xd1236d=_0x1318bc,_0x28616f=document[_0xd1236d(0x3f3)](_0xd1236d(0x390));if(!_0x28616f)return;_0x28616f[_0xd1236d(0x2e8)]='';const _0x5d67b5=data?.[_0xd1236d(0x218)]?.[_0xd1236d(0x307)]||[];if(_0x5d67b5[_0xd1236d(0x469)]===0x0){_0x28616f['innerHTML']=_0xd1236d(0x3d7);return;}_0x5d67b5['forEach'](_0xe197d1=>{const _0x2e6968=_0xd1236d,_0x56a355=document[_0x2e6968(0x334)](_0x2e6968(0x2e6));_0x56a355[_0x2e6968(0x205)]='method-item',_0x56a355[_0x2e6968(0x3db)][_0x2e6968(0x29d)]=_0xe197d1['id'];const _0x45c2d3=document[_0x2e6968(0x334)]('summary'),_0x10ef48=document[_0x2e6968(0x334)](_0x2e6968(0x254));_0x10ef48['className']=_0x2e6968(0x352),_0x10ef48[_0x2e6968(0x1ee)]=_0xe197d1['title']||_0x2e6968(0x43d),_0x10ef48[_0x2e6968(0x2b2)](_0x2e6968(0x21b),_0x425e55=>{const _0x40ae8c=_0x2e6968;_0x425e55[_0x40ae8c(0x494)](),_0x425e55[_0x40ae8c(0x44a)](),_0x56a355[_0x40ae8c(0x353)]=!_0x56a355[_0x40ae8c(0x353)];});const _0x26675c=document['createElement'](_0x2e6968(0x250));_0x26675c[_0x2e6968(0x205)]='topic-actions';const _0x4f0eb9=document['createElement'](_0x2e6968(0x32a));_0x4f0eb9[_0x2e6968(0x205)]='btn\x20small\x20ghost\x20method-edit',_0x4f0eb9[_0x2e6968(0x1ee)]=_0x2e6968(0x2d6),_0x4f0eb9[_0x2e6968(0x3db)]['id']=_0xe197d1['id'];const _0x180b1c=document['createElement'](_0x2e6968(0x32a));_0x180b1c[_0x2e6968(0x205)]='btn\x20small\x20danger\x20method-delete',_0x180b1c['textContent']=_0x2e6968(0x241),_0x180b1c[_0x2e6968(0x3db)]['id']=_0xe197d1['id'],_0x26675c[_0x2e6968(0x2f4)](_0x4f0eb9,_0x180b1c),_0x45c2d3['append'](_0x10ef48,_0x26675c);const _0x4ac8d9=document[_0x2e6968(0x334)](_0x2e6968(0x250));_0x4ac8d9['className']=_0x2e6968(0x1ba),_0x4ac8d9['innerHTML']=_0xe197d1['content']||'',_0x56a355[_0x2e6968(0x2f4)](_0x45c2d3,_0x4ac8d9),_0x28616f[_0x2e6968(0x27e)](_0x56a355),_0x56a355['addEventListener'](_0x2e6968(0x21b),_0x226ba5=>{const _0x427e3a=_0x2e6968,_0x1677eb=_0x226ba5['target'];if(!_0x1677eb)return;if(_0x1677eb[_0x427e3a(0x1c2)](_0x427e3a(0x32a))||_0x1677eb['closest']('a')||_0x1677eb['closest'](_0x427e3a(0x3c3))||_0x1677eb[_0x427e3a(0x1c2)](_0x427e3a(0x4b2)))return;if(!_0x56a355['open'])_0x56a355[_0x427e3a(0x353)]=!![];});});const _0x148beb=_0x28616f[_0xd1236d(0x32c)]('.method-item');_0x148beb[_0xd1236d(0x395)](_0x205865=>{const _0x2ea142=_0xd1236d;_0x205865['addEventListener'](_0x2ea142(0x261),()=>{const _0x50660b=_0x2ea142;_0x205865[_0x50660b(0x353)]&&_0x148beb[_0x50660b(0x395)](_0xfe56e5=>{const _0x19248a=_0x50660b;if(_0xfe56e5!==_0x205865)_0xfe56e5[_0x19248a(0x353)]=![];});});});}function addGeneralNote(){const _0x5e7dd3=_0x1318bc;showInputModal(_0x5e7dd3(0x284),async _0x188bb2=>{const _0x173f8b=_0x5e7dd3;if(!_0x188bb2)return;const _0x22bc01=getCurrentSubtopic();if(!_0x22bc01){toast(_0x173f8b(0x466));return;}_0x22bc01[_0x173f8b(0x281)]=_0x22bc01[_0x173f8b(0x281)]||[],_0x22bc01[_0x173f8b(0x281)][_0x173f8b(0x455)]({'id':uid('gn'),'text':_0x188bb2,'createdAt':todayISO()}),await saveData(),renderGeneralNotes();},'');}async function summarizeNotes(){const _0x18c68d=_0x1318bc,_0x5e7ca2=getCurrentSubtopic();if(!_0x5e7ca2){toast(_0x18c68d(0x43c));return;}const _0x42f255=(_0x5e7ca2[_0x18c68d(0x281)]||[])[_0x18c68d(0x43e)](_0xbc92a5=>typeof _0xbc92a5===_0x18c68d(0x31b)?_0xbc92a5:_0xbc92a5[_0x18c68d(0x1bb)]||'')[_0x18c68d(0x1be)](Boolean);if(_0x42f255[_0x18c68d(0x469)]===0x0){toast(_0x18c68d(0x426));return;}const _0x3d0ad9=$('#btnSummarize');_0x3d0ad9&&(_0x3d0ad9[_0x18c68d(0x36f)]=!![],_0x3d0ad9[_0x18c68d(0x2e8)]='<div\x20class=\x22spinner\x22></div>');try{const _0x3e6b4b=_0x18c68d(0x272)+_0x42f255['join'](_0x18c68d(0x4a7)),_0x3f0d45=await callGeminiAPI(_0x3e6b4b);if(!_0x5e7ca2[_0x18c68d(0x3f8)])_0x5e7ca2[_0x18c68d(0x3f8)]=[];_0x5e7ca2[_0x18c68d(0x3f8)]['unshift']({'id':uid(_0x18c68d(0x377)),'content':_0x3f0d45||'(Kh√¥ng\x20t·∫°o\x20ƒë∆∞·ª£c\x20t√≥m\x20t·∫Øt)','createdAt':todayISO()}),await saveData(),renderSummaries();}catch(_0x3fbc12){console[_0x18c68d(0x40f)](_0x3fbc12),toast(_0x18c68d(0x29e));}finally{_0x3d0ad9&&(_0x3d0ad9[_0x18c68d(0x36f)]=![],_0x3d0ad9['textContent']=_0x18c68d(0x358));}}function renderSummaries(){const _0x3f92fb=_0x1318bc,_0x53aee3=$(_0x3f92fb(0x374));if(!_0x53aee3)return;const _0x235a36=getCurrentSubtopic();if(!_0x235a36){_0x53aee3['innerHTML']='<div\x20class=\x22tiny\x22>Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20xem\x20t√≥m\x20t·∫Øt.</div>';return;}_0x53aee3[_0x3f92fb(0x2e8)]='';if(!_0x235a36[_0x3f92fb(0x3f8)]||_0x235a36['summaries'][_0x3f92fb(0x469)]===0x0){_0x53aee3[_0x3f92fb(0x2e8)]=_0x3f92fb(0x2ed);return;}_0x235a36[_0x3f92fb(0x3f8)][_0x3f92fb(0x395)](_0x1daac6=>{const _0x470e62=_0x3f92fb,_0x1230d9=document[_0x470e62(0x334)](_0x470e62(0x250));_0x1230d9['className']=_0x470e62(0x219);const _0x2da917=document[_0x470e62(0x334)](_0x470e62(0x250));_0x2da917[_0x470e62(0x205)]=_0x470e62(0x28f);const _0x17fdcc=document[_0x470e62(0x334)](_0x470e62(0x250));_0x17fdcc['className']=_0x470e62(0x3d3),_0x17fdcc[_0x470e62(0x1ee)]=_0x1daac6['content'];const _0xe75731=document[_0x470e62(0x334)](_0x470e62(0x250));_0xe75731[_0x470e62(0x205)]=_0x470e62(0x362),_0xe75731['textContent']=new Date(_0x1daac6[_0x470e62(0x2d0)])[_0x470e62(0x1d9)](),_0x2da917['append'](_0x17fdcc,_0xe75731);const _0x128b1c=document['createElement'](_0x470e62(0x250)),_0x5bbf06=document[_0x470e62(0x334)]('button');_0x5bbf06[_0x470e62(0x205)]=_0x470e62(0x37d),_0x5bbf06[_0x470e62(0x1ee)]=_0x470e62(0x3fc),_0x5bbf06[_0x470e62(0x2dc)]=_0x4748f2=>{const _0x5944f0=_0x470e62;_0x4748f2[_0x5944f0(0x44a)](),exportSummary(_0x1daac6);};const _0x359d96=document[_0x470e62(0x334)](_0x470e62(0x32a));_0x359d96[_0x470e62(0x205)]=_0x470e62(0x273),_0x359d96['textContent']=_0x470e62(0x241),_0x359d96[_0x470e62(0x2dc)]=_0x2db49e=>{const _0x15baec=_0x470e62;_0x2db49e[_0x15baec(0x44a)](),deleteSummary(_0x1daac6['id']);},_0x128b1c['append'](_0x5bbf06,_0x359d96),_0x1230d9[_0x470e62(0x2f4)](_0x2da917,_0x128b1c),_0x1230d9['addEventListener'](_0x470e62(0x21b),()=>_0x17fdcc['classList']['toggle'](_0x470e62(0x416))),_0x53aee3['appendChild'](_0x1230d9);});}function loadEditingPresetFields(){const _0x10ed37=_0x1318bc,_0x463ca0=data[_0x10ed37(0x218)],_0x377ef1=_0x463ca0[_0x10ed37(0x25d)],_0x34ad0b=$(_0x10ed37(0x1a7)),_0x32bd4d=$(_0x10ed37(0x259));if(_0x34ad0b&&_0x32bd4d){const _0x979bc7=editingPreset==='C';_0x34ad0b['classList'][_0x10ed37(0x261)]('hidden',_0x979bc7),_0x32bd4d[_0x10ed37(0x322)][_0x10ed37(0x261)]('hidden',!_0x979bc7);}if(editingPreset==='A'){$(_0x10ed37(0x419))[_0x10ed37(0x470)]=_0x377ef1['A_work'];if($(_0x10ed37(0x3a7)))$('#set_winddown')['value']=_0x377ef1[_0x10ed37(0x337)]??0x0;$(_0x10ed37(0x42d))[_0x10ed37(0x470)]=_0x377ef1[_0x10ed37(0x1a2)],$(_0x10ed37(0x42f))[_0x10ed37(0x470)]=_0x377ef1['A_long'],$(_0x10ed37(0x4b1))[_0x10ed37(0x470)]=_0x463ca0[_0x10ed37(0x309)],$(_0x10ed37(0x3f7))[_0x10ed37(0x470)]=_0x463ca0[_0x10ed37(0x308)];}else{if(editingPreset==='B'){$(_0x10ed37(0x419))[_0x10ed37(0x470)]=_0x377ef1['B_work'];if($(_0x10ed37(0x3a7)))$(_0x10ed37(0x3a7))[_0x10ed37(0x470)]=_0x377ef1[_0x10ed37(0x1dd)]??0x0;$(_0x10ed37(0x42d))[_0x10ed37(0x470)]=_0x377ef1[_0x10ed37(0x412)],$(_0x10ed37(0x42f))['value']=_0x377ef1[_0x10ed37(0x42a)],$(_0x10ed37(0x4b1))[_0x10ed37(0x470)]=_0x463ca0[_0x10ed37(0x31d)],$(_0x10ed37(0x3f7))[_0x10ed37(0x470)]=_0x463ca0[_0x10ed37(0x311)];}else{if(editingPreset==='C'){const _0x2c0c1c=$(_0x10ed37(0x457));if(_0x2c0c1c)_0x2c0c1c[_0x10ed37(0x470)]=_0x463ca0['flowtimeBreakRatio']??0x5;}}}}function highlightPresetSelector(){const _0x2f9fe0=_0x1318bc;$$(_0x2f9fe0(0x3f4))[_0x2f9fe0(0x395)](_0x5ef730=>{const _0x57c975=_0x2f9fe0,_0x2bb519=_0x5ef730[_0x57c975(0x3db)][_0x57c975(0x410)]===editingPreset;_0x5ef730[_0x57c975(0x322)][_0x57c975(0x261)]('acc',_0x2bb519),_0x5ef730['classList'][_0x57c975(0x261)](_0x57c975(0x1af),!_0x2bb519);});}function openSettings(){const _0x499749=_0x1318bc,_0x17ac56=data['settings'];editingPreset=_0x17ac56[_0x499749(0x3e0)],$(_0x499749(0x256))[_0x499749(0x470)]=_0x17ac56['apiKey']||'',loadEditingPresetFields(),highlightPresetSelector(),$(_0x499749(0x20e))[_0x499749(0x470)]=_0x17ac56[_0x499749(0x3b8)]??0.8,$('#set_theme')[_0x499749(0x470)]=_0x17ac56[_0x499749(0x3ef)]||_0x499749(0x1ce),$(_0x499749(0x298))[_0x499749(0x470)]=_0x17ac56[_0x499749(0x373)]||_0x499749(0x26f);const _0x10663c=getActiveYoutubeUrl();$(_0x499749(0x20f))[_0x499749(0x470)]=_0x10663c||'';const _0x367ea2=extractYouTubeID(_0x10663c);$(_0x499749(0x20c))[_0x499749(0x36f)]=!_0x367ea2;$('#ytUrlFeedback')&&($(_0x499749(0x2a3))['textContent']='');$(_0x499749(0x262))[_0x499749(0x470)]=_0x17ac56['youtubeVolume']||0x50,$(_0x499749(0x1f2))[_0x499749(0x46a)]=!!_0x17ac56['useYtThumbnailAsBg'],$(_0x499749(0x1fb))['value']=_0x17ac56[_0x499749(0x2bc)]||0.85;$(_0x499749(0x304))&&($(_0x499749(0x304))[_0x499749(0x470)]=_0x17ac56['backgroundMode']||_0x499749(0x3f5));$(_0x499749(0x204))&&($(_0x499749(0x204))[_0x499749(0x46a)]=!!_0x17ac56[_0x499749(0x19a)]);$(_0x499749(0x38d))&&($('#set_enableWinddown')[_0x499749(0x46a)]=_0x17ac56[_0x499749(0x28a)]!==![]);$('#set_enableSessionNotes')&&($(_0x499749(0x280))[_0x499749(0x46a)]=_0x17ac56[_0x499749(0x1f8)]!==![]);$(_0x499749(0x1e6))&&($(_0x499749(0x1e6))[_0x499749(0x470)]=_0x17ac56['backupDaysToKeep']||0x7);const _0x4ed53b=$(_0x499749(0x1c7));_0x4ed53b&&storageManager[_0x499749(0x1c5)]()['then'](_0x490df1=>{const _0x1930cf=_0x499749;_0x4ed53b[_0x1930cf(0x2e8)]=_0x1930cf(0x46d),_0x490df1&&_0x490df1[_0x1930cf(0x469)]>0x0?_0x490df1[_0x1930cf(0x395)](_0x48658d=>{const _0x2b408d=_0x1930cf,_0x3d685e=document[_0x2b408d(0x334)](_0x2b408d(0x32f));_0x3d685e[_0x2b408d(0x470)]=_0x48658d[_0x2b408d(0x480)],_0x3d685e['textContent']=_0x2b408d(0x27d)+new Date(_0x48658d[_0x2b408d(0x480)])[_0x2b408d(0x1c6)](_0x2b408d(0x2b1)),_0x4ed53b[_0x2b408d(0x27e)](_0x3d685e);}):_0x4ed53b[_0x1930cf(0x2e8)]=_0x1930cf(0x19d);});$(_0x499749(0x479))[_0x499749(0x322)]['add'](_0x499749(0x393));try{trapFocus($(_0x499749(0x479)));}catch(_0x4f4a7c){}}function closeSettings(){const _0x48525a=_0x1318bc;$('#modalSettings')[_0x48525a(0x322)][_0x48525a(0x330)](_0x48525a(0x393));try{releaseFocus();}catch(_0x2e001f){}}async function setDefaults(){const _0x44f649=_0x1318bc;data[_0x44f649(0x218)][_0x44f649(0x25d)]={'A_work':0x19,'A_short':0x5,'A_long':0xf,'A_winddown':0x2,'B_work':0x32,'B_short':0xa,'B_long':0x1e,'B_winddown':0x5},data[_0x44f649(0x218)][_0x44f649(0x309)]=0x4,data['settings'][_0x44f649(0x308)]=0x4,data[_0x44f649(0x218)][_0x44f649(0x31d)]=0x4,data[_0x44f649(0x218)][_0x44f649(0x311)]=0x4,data[_0x44f649(0x218)][_0x44f649(0x458)]=0x5,data['settings'][_0x44f649(0x3e0)]='A',data[_0x44f649(0x218)][_0x44f649(0x3b8)]=0.8,data[_0x44f649(0x218)][_0x44f649(0x3ef)]='beep',await saveData(),openSettings(),toast(_0x44f649(0x381));}function _0x293e(){const _0xae765=['files','#view-','#btnAddMethod','<strong>$1</strong>','string','target','cyclesB','topic-title','1820300YBvoph','#methodEditorTitle','Kh√¥ng\x20nh·∫≠n\x20ƒë∆∞·ª£c\x20n·ªôi\x20dung\x20h·ª£p\x20l·ªá\x20t·ª´\x20AI.','classList','parse','width','H√£y\x20b·∫Øt\x20ƒë·∫ßu\x20b·∫±ng\x20c√°ch\x20ch·ªçn\x20m·ªôt\x20<strong>Ch·ªß\x20ƒë·ªÅ\x20con</strong>\x20ho·∫∑c\x20t·∫°o\x20Ch·ªß\x20ƒë·ªÅ.','contains','finishFlowSession','ƒê·∫øm\x20ng∆∞·ª£c\x20t·ª´\x2020\x20ƒë·∫øn\x200\x20th·∫≠t\x20ch·∫≠m\x20r√£i.','backupDaysToKeep','button','.nav-btn[data-view]','querySelectorAll','url(','remaining','option','remove','insertOrderedList','_onFinishSegment','X√°c\x20nh·∫≠n\x20ph·ª•c\x20h·ªìi','createElement','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M2\x2012s3-7\x2010-7\x2010\x207\x2010\x207-3\x207-10\x207-10-7-10-7Z\x22/><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x223\x22/></svg>','#noteText','A_winddown','exitFullscreen','\x22\x0a-\x20Ghi\x20ch√∫\x20c·ªßa\x20ng∆∞·ªùi\x20d√πng\x20sau\x20m·ªôt\x20phi√™n\x20l√†m\x20vi·ªác:\x20\x22','updateUI','play','...','Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc\x20khi\x20th·ª±c\x20hi·ªán\x20thao\x20t√°c.','\x20(B)','useYtThumbnailAsBg','customSounds','Massage\x20nh·∫π\x20hai\x20b√™n\x20th√°i\x20d∆∞∆°ng.','L·ªói\x20kh·ªüi\x20t·∫°o:\x20','getSettings','toLowerCase','readonly','autoplay;\x20encrypted-media;\x20picture-in-picture','</ol>','C·∫ßn\x20c√≥\x20n·ªôi\x20dung\x20ƒë·ªÉ\x20AI\x20ƒë·ªãnh\x20d·∫°ng.','.app-content','ArrowUp','R·ª≠a\x20m·∫∑t\x20ho·∫∑c\x20v·ªó\x20nh·∫π\x20l√™n\x20m·∫∑t\x20ƒë·ªÉ\x20t·ªânh\x20t√°o\x20h∆°n.','<i>$1</i>','Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20b·∫£n\x20sao\x20l∆∞u.','sess','Failed\x20to\x20save\x20data:','Nh√¨n\x20ra\x20xa\x20qua\x20c·ª≠a\x20s·ªï\x20trong\x2020\x20gi√¢y.','baseVal','method-title','open','5.000\x20gi·ªù\x20t·∫≠p\x20trung\x20c√≥\x20ch·ªß\x20ƒë√≠ch.\x20ƒê√¢y\x20l√†\x20m·ªôt\x20th√†nh\x20t·ª±u\x20m√†\x20r·∫•t\x20√≠t\x20ng∆∞·ªùi\x20ƒë·∫°t\x20ƒë∆∞·ª£c.\x0a\x0aT·∫°i\x20c·ªôt\x20m·ªëc\x20n√†y,\x20c√¢u\x20h·ªèi\x20kh√¥ng\x20c√≤n\x20l√†\x20\x27L√†m\x20th·∫ø\x20n√†o\x20ƒë·ªÉ\x20t·∫≠p\x20trung?\x27,\x20m√†\x20l√†\x20\x27S·ª±\x20t·∫≠p\x20trung\x20n√†y\x20s·∫Ω\x20ƒë∆∞·ª£c\x20d√πng\x20ƒë·ªÉ\x20t·∫°o\x20ra\x20gi√°\x20tr·ªã\x20g√¨?\x27.\x20B·∫°n\x20kh√¥ng\x20ch·ªâ\x20l√†m\x20vi·ªác,\x20b·∫°n\x20ƒëang\x20t·∫°o\x20ra\x20di\x20s·∫£n.','#btnSummarizeNote','parentElement','flex','T√≥m\x20t·∫Øt','ƒêang\x20t·∫£i\x20API\x20YouTube...','timerState_','&lt;','splice','.\x20Vui\x20l√≤ng\x20th·ª≠\x20l·∫°i\x20v·ªõi\x20n·ªôi\x20dung\x20kh√°c.','exportData','setAttribute','opacity','subtopic','note-meta','resume','start','data:','isArray','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20\x22','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20tin\x20nh·∫Øn\x20n√†o.</div>','<ol>','#btnGenericOk','#btnDefaults','beginBreak','reverse','setRangeText','disabled','absolute','https://www.youtube.com','Nh·∫π\x20nh√†ng\x20nh·∫Øm\x20m·∫Øt\x20v√†\x20m·ªâm\x20c∆∞·ªùi\x20v·ªõi\x20ch√≠nh\x20m√¨nh.','theme','#summariesList','var(--acc-2)','#breakSuggestionDisplay','sum','#btnEnableSound','L√ÄM\x20VI·ªÜC\x20(FLOW)','\x20¬∑\x20','contentWindow','getFullYear','btn\x20small','Phi√™n\x20ƒë√£\x20ho√†n\x20th√†nh!\x20Nh·∫•n\x20B·∫Øt\x20ƒë·∫ßu\x20ƒë·ªÉ\x20b·∫Øt\x20ƒë·∫ßu\x20phi√™n\x20ti·∫øp\x20theo.','scrollTop','max','ƒê√£\x20kh√¥i\x20ph·ª•c\x20m·∫∑c\x20ƒë·ªãnh','#btnSettings','Th·ª±c\x20hi·ªán\x20v√†i\x20ƒë·ªông\x20t√°c\x20h√≠t\x20th·ªü\x20s√¢u.','onerror','segmentTotal','G·ª≠i\x20b·∫°n,\x20100\x20gi·ªù\x20c·ªëng\x20hi·∫øn\x20(Cam\x20k·∫øt)','getVolume','round','objectStoreNames','#btnClearBg','pointerdown','strokeDashoffset','#set_enableWinddown','tickHandle','offsetWidth','#view-methods\x20.methods-container','#methodEditorId','postMessage','show','badge\x20state\x20break','forEach','abs','cleanupOldBackups','newIndex','frequency','skip','select','stopVideo','#btnSkip','clientY','backups','lastBackupDate','.actions-menu.show','ArrowRight','Player','right','input','bg-view-mode','#set_winddown','X√°c\x20nh·∫≠n\x20x√≥a','function','T·ª±\x20h·ªèi\x20b·∫£n\x20th√¢n:\x20‚ÄúM√¨nh\x20c·∫£m\x20th·∫•y\x20th·∫ø\x20n√†o\x20l√∫c\x20n√†y?‚Äù','auto','tagName','</td><td>','iframe','keydown','message','data','selectedTopicId','<ul>','setValueAtTime','Ch√†o\x20m·ª´ng\x20ƒë·∫øn\x20C√¢u\x20l·∫°c\x20b·ªô\x201000\x20gi·ªù.\x0a\x0aCon\x20s·ªë\x20n√†y\x20kh√¥ng\x20ch·ªâ\x20ƒëo\x20l∆∞·ªùng\x20th·ªùi\x20gian,\x20n√≥\x20ƒë·∫°i\x20di·ªán\x20cho\x20s·ª±\x20chuy·ªÉn\x20h√≥a.\x20S·ª±\x20t·∫≠p\x20trung\x20ƒë√£\x20tr·ªü\x20th√†nh\x20m·ªôt\x20ph·∫ßn\x20con\x20ng∆∞·ªùi\x20b·∫°n,\x20m·ªôt\x20\x27si√™u\x20nƒÉng\x20l·ª±c\x27\x20b·∫°n\x20c√≥\x20th·ªÉ\x20tri·ªáu\x20h·ªìi.\x20H√†nh\x20tr√¨nh\x20c·ªßa\x20b·∫°n\x20th·ª±c\x20s·ª±\x20truy·ªÅn\x20c·∫£m\x20h·ª©ng.','breathing','currentConfig','volume','webkitAudioContext','sort','sine','promptFeedback','tasksCompleted','T√™n\x20Ch·ªß\x20ƒë·ªÅ\x20m·ªõi?','paused','\x22\x0a\x0aH√£y\x20t·∫°o\x20m·ªôt\x20b·∫£n\x20t√≥m\x20t·∫Øt\x20ng·∫Øn\x20g·ªçn\x20v·ªÅ\x20nh·ªØng\x20g√¨\x20ƒë√£\x20l√†m\x20v√†\x20ƒë·ªÅ\x20xu·∫•t\x20m·ªôt\x20b∆∞·ªõc\x20h·ª£p\x20l√Ω\x20ti·∫øp\x20theo.\x20ƒê·ªãnh\x20d·∫°ng\x20c√¢u\x20tr·∫£\x20l·ªùi\x20nh∆∞\x20sau:\x0a\x0a---\x0a**‚ú®\x20T√≥m\x20t·∫Øt\x20AI:**\x0a[T√≥m\x20t·∫Øt\x20·ªü\x20ƒë√¢y]\x0a\x0a**üöÄ\x20G·ª£i\x20√Ω\x20ti·∫øp\x20theo:**\x0a[G·ª£i\x20√Ω\x20·ªü\x20ƒë√¢y]','var(--acc)','\x20ph√∫t','.color-picker-wrapper','topic-header','status','catch','img.youtube.com/vi/','offsetHeight','mode','<div\x20class=\x22spinner\x22></div>','#modalGeneric','#selectedContext','#toolItalic','createObjectStore','PlayerState','actions-menu','result','work','note-content','Nh·∫≠p\x20th·∫•t\x20b·∫°i:\x20','foreColor','Ki·ªÉm\x20tra\x20v√†\x20ch·ªânh\x20l·∫°i\x20t∆∞\x20th·∫ø\x20ng·ªìi\x20cho\x20ƒë√∫ng.','<p\x20class=\x22tiny\x22\x20style=\x22opacity:0.7;\x22>Ch∆∞a\x20c√≥\x20tri\x20th·ª©c\x20n√†o\x20ƒë∆∞·ª£c\x20th√™m\x20v√†o.</p>','ƒê√£\x20chuy·ªÉn\x20sang\x20Ki·ªÉu\x20','<p>Nguy√™n\x20t·∫Øc\x20c·ªët\x20l√µi\x20c·ªßa\x20k·ªπ\x20thu·∫≠t\x20n√†y\x20d·ª±a\x20tr√™n\x20m·ªôt\x20√Ω\x20t∆∞·ªüng\x20duy\x20nh·∫•t:\x20\x22N·∫øu\x20b·∫°n\x20kh√¥ng\x20th·ªÉ\x20gi·∫£i\x20th√≠ch\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20m·ªôt\x20c√°ch\x20ƒë∆°n\x20gi·∫£n,\x20b·∫°n\x20ch∆∞a\x20th·ª±c\x20s·ª±\x20hi·ªÉu\x20n√≥.\x22\x20M·ª•c\x20ti√™u\x20l√†\x20bi·∫øn\x20ki·∫øn\x20th·ª©c\x20ph·ª©c\x20t·∫°p\x20th√†nh\x20l·ªùi\x20gi·∫£i\x20th√≠ch\x20ƒë∆°n\x20gi·∫£n\x20ƒë·∫øn\x20m·ª©c\x20m·ªôt\x20ƒë·ª©a\x20tr·∫ª\x20c≈©ng\x20c√≥\x20th·ªÉ\x20hi·ªÉu.</p><h4>Quy\x20Tr√¨nh\x204\x20B∆∞·ªõc\x20Tinh\x20G·ªçn</h4><ol><li><strong>H·ªçc:</strong>\x20Ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20v√†\x20vi·∫øt\x20ra\x20t·∫•t\x20c·∫£\x20nh·ªØng\x20g√¨\x20b·∫°n\x20bi·∫øt\x20v·ªÅ\x20n√≥.</li><li><strong>D·∫°y:</strong>\x20Gi·∫£\x20v·ªù\x20d·∫°y\x20l·∫°i\x20ch·ªß\x20ƒë·ªÅ\x20n√†y\x20b·∫±ng\x20ng√¥n\x20ng·ªØ\x20ƒë∆°n\x20gi·∫£n\x20nh·∫•t\x20c√≥\x20th·ªÉ.\x20Vi·∫øt\x20ho·∫∑c\x20n√≥i\x20to\x20ra.</li><li><strong>T√¨m\x20&\x20S·ª≠a\x20L·ªói:</strong>\x20B·∫•t\x20c·ª©\x20khi\x20n√†o\x20b·∫°n\x20b·ªã\x20\x22k·∫πt\x22,\x20ph·∫£i\x20d√πng\x20thu·∫≠t\x20ng·ªØ\x20ph·ª©c\x20t·∫°p,\x20ho·∫∑c\x20kh√¥ng\x20th·ªÉ\x20gi·∫£i\x20th√≠ch\x20tr√¥i\x20ch·∫£y,\x20b·∫°n\x20ƒë√£\x20t√¨m\x20th·∫•y\x20l·ªó\x20h·ªïng\x20ki·∫øn\x20th·ª©c\x20c·ªßa\x20m√¨nh.\x20H√£y\x20quay\x20l·∫°i\x20t√†i\x20li·ªáu\x20g·ªëc\x20ƒë·ªÉ\x20h·ªçc\x20l·∫°i\x20cho\x20ƒë·∫øn\x20khi\x20l·∫•p\x20ƒë∆∞·ª£c\x20l·ªó\x20h·ªïng\x20ƒë√≥.</li><li><strong>ƒê∆°n\x20Gi·∫£n\x20H√≥a:</strong>\x20S·∫Øp\x20x·∫øp\x20l·∫°i\x20l·ªùi\x20gi·∫£i\x20th√≠ch\x20cu·ªëi\x20c√πng,\x20s·ª≠\x20d·ª•ng\x20c√°c\x20v√≠\x20d·ª•\x20ho·∫∑c\x20ph√©p\x20v√≠\x20von\x20ƒë∆°n\x20gi·∫£n\x20ƒë·ªÉ\x20n√≥\x20tr·ªü\x20n√™n\x20m·∫°ch\x20l·∫°c\x20v√†\x20d·ªÖ\x20hi·ªÉu\x20nh·∫•t.</li></ol><h4>C·ªët\x20L√µi</h4><p>K·ªπ\x20thu·∫≠t\x20Feynman\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20chuy·ªÉn\x20t·ª´\x20vi·ªác\x20ti·∫øp\x20thu\x20th·ª•\x20ƒë·ªông\x20(ƒë·ªçc,\x20nghe)\x20sang\x20ch·ªß\x20ƒë·ªông\x20x·ª≠\x20l√Ω\x20th√¥ng\x20tin.\x20Qu√°\x20tr√¨nh\x20\x22b·ªã\x20k·∫πt\x22\x20khi\x20gi·∫£i\x20th√≠ch\x20ch√≠nh\x20l√†\x20c√¥ng\x20c·ª•\x20ch·∫©n\x20ƒëo√°n\x20m·∫°nh\x20m·∫Ω\x20nh·∫•t,\x20n√≥\x20ch·ªâ\x20ra\x20ch√≠nh\x20x√°c\x20ƒëi·ªÉm\x20b·∫°n\x20c√≤n\x20y·∫øu.</p><p><i>C√°ch\x20nhanh\x20nh·∫•t\x20ƒë·ªÉ\x20ki·ªÉm\x20tra\x20v√†\x20c·ªßng\x20c·ªë\x20s·ª±\x20hi·ªÉu\x20bi·∫øt\x20c·ªßa\x20b·∫°n\x20l√†\x20th·ª≠\x20d·∫°y\x20l·∫°i\x20n√≥\x20cho\x20ng∆∞·ªùi\x20kh√°c\x20m·ªôt\x20c√°ch\x20ƒë∆°n\x20gi·∫£n.</i></p>','item','dataset','menu-active','documentElement','youtube-player-container','#btnPause','preset','main_settings','ENDED','timerState','beginWork','toISOString','100\x20gi·ªù!\x20ƒê√¢y\x20kh√¥ng\x20c√≤n\x20l√†\x20m·ªôt\x20th·ª≠\x20nghi·ªám\x20n·ªØa,\x20m√†\x20l√†\x20m·ªôt\x20s·ª±\x20ƒë·∫ßu\x20t∆∞\x20nghi√™m\x20t√∫c\x20cho\x20m·ª•c\x20ti√™u\x20c·ªßa\x20b·∫°n.\x0a\x0aH√£y\x20d√†nh\x20m·ªôt\x20ch√∫t\x20th·ªùi\x20gian\x20ƒë·ªÉ\x20nh√¨n\x20l·∫°i:\x20100\x20gi·ªù\x20t·∫≠p\x20trung\x20n√†y\x20ƒë√£\x20gi√∫p\x20b·∫°n\x20ti·∫øn\x20xa\x20ƒë·∫øn\x20ƒë√¢u?\x20NƒÉng\x20l∆∞·ª£ng\x20b·∫°n\x20b·ªè\x20ra\x20ƒëang\x20ƒë·ªãnh\x20h√¨nh\x20n√™n\x20k·∫øt\x20qu·∫£.','getElementById','textarea','mute','250\x20gi·ªù\x20l√†\x20minh\x20ch·ª©ng\x20cho\x20s·ª±\x20b·ªÅn\x20b·ªâ\x20ƒë√°ng\x20kinh\x20ng·∫°c.\x20B·∫°n\x20ƒë√£\x20ƒë·ªëi\x20m·∫∑t\x20v·ªõi\x20nh·ªØng\x20ng√†y\x20kh√≥\x20khƒÉn,\x20nh·ªØng\x20l√∫c\x20m·∫•t\x20t·∫≠p\x20trung,\x20nh∆∞ng\x20b·∫°n\x20v·∫´n\x20quay\x20tr·ªü\x20l·∫°i.\x20S·ª©c\x20m·∫°nh\x20th·ª±c\x20s·ª±\x20n·∫±m\x20·ªü\x20ch√≠nh\x20s·ª±\x20ki√™n\x20tr√¨\x20n√†y.','‚ùå\x20Link\x20kh√¥ng\x20h·ª£p\x20l·ªá\x20ho·∫∑c\x20kh√¥ng\x20ƒë∆∞·ª£c\x20h·ªó\x20tr·ª£.','file:','#btnToggleCustomSounds','Gemini\x20API\x20Error:','soundTheme','trim','menu-item\x20danger','oldIndex','querySelector','#timerPresetSelector\x20button','cover','#stateBadge','#set_interval','summaries','\x22\x20title=\x22Ho√†n\x20th√†nh\x20task\x22>\x20<label\x20for=\x22','#btnExport','ƒê√£\x20t·∫Øt\x20n·ªÅn\x20YouTube\x20ƒë·ªÉ\x20h·ª£p\x20v·ªõi\x20theme\x20s√°ng.','Xu·∫•t','BUFFERING','.subtopic-btn','#toolBold','OK.\x20Link\x20h·ª£p\x20l·ªá.\x20ƒêang\x20chu·∫©n\x20b·ªã\x20ph√°t...','#uploadSoundWork','break_end','POST','change','sub-row','tid','timer.selectSubtopicPrompt','#uploadSoundLong','soundPermissionBar','badge\x20state\x20long','random','name','match','resolve','error','presetTarget','cycles','B_short','IndexedDB\x20error:','reloading','removeEventListener','expanded','\x20ti·∫øng\x20','content','#set_work','G·ª£i\x20Nh·ªõ\x20Ch·ªß\x20ƒê·ªông\x20(Active\x20Recall):\x20Nguy√™n\x20T·∫Øc\x20C·ªët\x20L√µi\x20ƒê·ªÉ\x20H·ªçc\x20S√¢u','1368410MwiWZF','####\x20','.json','.method-delete','location','B_work','http:','radial-gradient(1200px\x20800px\x20at\x2010%\x20-10%,\x20#20285b\x200%,\x20#0f1222\x2050%,\x20#0b0e1a\x20100%)','async','onYouTubeIframeAPIReady','focus','Ch∆∞a\x20c√≥\x20ghi\x20ch√∫\x20ƒë·ªÉ\x20t√≥m\x20t·∫Øt.','btn\x20subtopic-btn','update','now','B_long','createIndex','L·ªói\x20khi\x20g·ªçi\x20Gemini\x20API:','#set_short','push','#set_long','mousemove','defer','onload','410898dMsyPv','#uploadBg','reset','btnToggleYtSound','Space','#btnCancelMethodEditor','<p>ƒê·ªÉ\x20kh√¥ng\x20b·ªã\x20cho√°ng\x20ng·ª£p\x20khi\x20h·ªçc\x20m·ªôt\x20lƒ©nh\x20v·ª±c\x20m·ªõi,\x20h√£y\x20t·∫≠p\x20trung\x20v√†o\x2020%\x20ki·∫øn\x20th·ª©c\x20c·ªët\x20l√µi\x20mang\x20l·∫°i\x2080%\x20k·∫øt\x20qu·∫£\x20(Li·ªÅu\x20l∆∞·ª£ng\x20Hi·ªáu\x20qu·∫£\x20T·ªëi\x20thi·ªÉu).</p><h4>20%\x20c·ªët\x20l√µi:\x20√Åp\x20d·ª•ng\x20Khung\x20Ph√¢n\x20t√≠ch\x205\x20B∆∞·ªõc\x20ƒë·ªÉ\x20x√°c\x20ƒë·ªãnh\x2020%\x20quan\x20tr·ªçng\x20nh·∫•t:</h4><ol><li><strong>X√°c\x20ƒë·ªãnh\x20K·∫øt\x20qu·∫£:</strong>\x20M·ª•c\x20ti√™u\x20cu·ªëi\x20c√πng\x20c·ªßa\x20b·∫°n\x20l√†\x20g√¨?\x20(v√≠\x20d·ª•:\x20x√¢y\x20d·ª±ng\x20ƒë∆∞·ª£c\x20m·ªôt\x20trang\x20web).</li><li><strong>Ph√¢n\x20t√≠ch\x20N·ªÅn\x20t·∫£ng:</strong>\x20T√¨m\x203-5\x20nguy√™n\x20l√Ω\x20b·∫•t\x20bi·∫øn\x20c·ªßa\x20ng√†nh.</li><li><strong>Nh·∫≠n\x20di·ªán\x20L·ªói\x20sai\x20Ph·ªï\x20bi·∫øn:</strong>\x20H·ªçc\x20c√°ch\x20tr√°nh\x20nh·ªØng\x20l·ªói\x20m√†\x20ng∆∞·ªùi\x20m·ªõi\x20hay\x20m·∫Øc\x20ph·∫£i.</li><li><strong>T√¨m\x20\x22Y·∫øu\x20t·ªë\x20Nh√¢n\x22:</strong>\x20K·ªπ\x20nƒÉng\x20n√†o\x20s·∫Ω\x20gi√∫p\x20h·ªçc\x20m·ªçi\x20th·ª©\x20kh√°c\x20d·ªÖ\x20d√†ng\x20h∆°n?\x20(v√≠\x20d·ª•:\x20nh·∫°c\x20l√Ω\x20trong\x20√¢m\x20nh·∫°c).</li><li><strong>L·∫≠p\x20b·∫£n\x20ƒë·ªì\x20·ª®ng\x20d·ª•ng\x20Th·ª±c\x20ti·ªÖn:</strong>\x20T·∫≠p\x20trung\x20v√†o\x2020%\x20c√¥ng\x20vi·ªác\x20chi·∫øm\x2080%\x20th·ªùi\x20gian\x20th·ª±c\x20t·∫ø\x20c·ªßa\x20ng√†nh.</li></ol>','transition','setVolume','Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.','Ch∆∞a\x20c√≥\x20ti√™u\x20ƒë·ªÅ','map','<h4>','onsuccess','#btnFullscreen','command','?\x20Thao\x20t√°c\x20n√†y\x20s·∫Ω\x20d·ª´ng\x20v√†\x20ƒë·∫∑t\x20l·∫°i\x20phi√™n\x20l√†m\x20vi·ªác\x20hi·ªán\x20t·∫°i.','#editorPreview','createObjectURL','selectedSubtopicId','long','undefined','slice','stopPropagation','ƒêang\x20ph√°t\x20nh·∫°c\x20n·ªÅn...','IndexedDB\x20initialized\x20successfully.','loadLanguage','actions','ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20NGH·ªà\x20NG·∫ÆN.','script','Enter','#chatMessages','localeCompare','\x20ph√∫t\x20theo\x20Flowtime\x20(','unshift','chatHistory','#set_flowRatio','flowtimeBreakRatio','\x20hidden','getDate','fullscreenElement','log','badge\x20state\x20work','Ch·ªânh-s·ª≠a\x20Tri\x20th·ª©c','block','ƒê√£\x20x√≥a\x20h√¨nh\x20n·ªÅn\x20t√πy\x20ch·ªânh.','allow','#historyList','ƒê·ªïi\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ','ƒê√£\x20d·ª´ng\x20nh·∫°c\x20n·ªÅn.','Th√™m\x20Tri\x20th·ª©c\x20m·ªõi','Ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.','#genericInput','customBg','length','checked','<div\x20class=\x22tiny\x22>Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con.</div>','currentView','<option\x20value=\x22\x22>--\x20Ch·ªçn\x20ng√†y\x20ƒë·ªÉ\x20ph·ª•c\x20h·ªìi\x20--</option>','Tho√°t\x20to√†n\x20m√†n\x20h√¨nh','Deleted\x20old\x20backup:\x20','value','<div>','Vui\x20l√≤ng\x20nh·∫≠p\x20Gemini\x20API\x20Key\x20trong\x20ph·∫ßn\x20C√†i\x20ƒë·∫∑t.','.color-swatch','readwrite','Vui\x20l√≤ng\x20nh·∫≠p\x20ghi\x20ch√∫\x20tr∆∞·ªõc\x20khi\x20t√≥m\x20t·∫Øt.','altKey','<tr><td>','G·ª≠i\x20b·∫°n,\x20500\x20gi·ªù\x20(Chuy√™n\x20t√¢m)','#modalSettings','ƒê·∫∑t\x20tay\x20l√™n\x20ng·ª±c,\x20c·∫£m\x20nh·∫≠n\x20nh·ªãp\x20tim\x20c·ªßa\x20m√¨nh.','input,select,textarea','set_youtubeUrl','#audioLongEnd','menu-item','topic-item','date','.timer-circle-progress','NƒÉm\x20gi·ªù\x20t·∫≠p\x20trung!\x20B·∫°n\x20ƒë√£\x20v∆∞·ª£t\x20qua\x20r√†o\x20c·∫£n\x20l·ªõn\x20nh·∫•t:\x20s·ª±\x20tr√¨\x20ho√£n.\x20M·ªói\x20ph√∫t\x20b·∫°n\x20d√†nh\x20ra\x20ƒë·ªÅu\x20l√†\x20m·ªôt\x20l·ªùi\x20kh·∫≥ng\x20ƒë·ªãnh\x20cho\x20m·ª•c\x20ti√™u\x20c·ªßa\x20m√¨nh.\x20H√£y\x20gi·ªØ\x20v·ªØng\x20ng·ªçn\x20l·ª≠a\x20n√†y!','tab','stringify','space','/maxresdefault.jpg','#audioBreakEnd','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20ghi\x20ch√∫.</div>','T·∫†M\x20D·ª™NG','triangle','autoBackup','isCompleted','setPreset','beforeunload','findIndex','#toolColor','AI\x20ƒë√£\x20ƒë·ªãnh\x20d·∫°ng\x20xong!','backgroundRepeat','</tbody></table>','preventDefault','then','statusText','To√†n\x20m√†n\x20h√¨nh','N·ªôi\x20dung\x20b·ªã\x20ch·∫∑n\x20v√¨:\x20','load','L·ªói:\x20ƒê√£\x20v∆∞·ª£t\x20qu√°\x20h·∫°n\x20m·ª©c\x20y√™u\x20c·∫ßu\x20t·ªõi\x20Gemini.\x20Vui\x20l√≤ng\x20th·ª≠\x20l·∫°i\x20sau\x20√≠t\x20ph√∫t.','stats','winddown','.aux-panel,\x20.modal-card','pauseVideo','Missing\x20element','all','ƒê·ªïi\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con','0\x20ph√∫t','playVideo','work_end','lofi','short','\x0a-\x20','removing','.modal','getPlayerState','</li>','L·ªói\x20l∆∞u\x20d·ªØ\x20li·ªáu:\x20','note','user','&amp;','task','#set_cycles','.color-palette','youtubeVolume','replace','totalMinutes','#view-timer','D√πng\x20AI\x20ƒë·ªÉ\x20t·ª±\x20ƒë·ªông\x20ƒë·ªãnh\x20d·∫°ng\x20vƒÉn\x20b·∫£n','.subtopics','#methodEditorContentInput','requestFullscreen','#toolH4','autoStartNext','H√£y\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc\x20khi\x20b·∫Øt\x20ƒë·∫ßu','beginWindDown','<option\x20value=\x22\x22>Kh√¥ng\x20c√≥\x20b·∫£n\x20sao\x20l∆∞u\x20n√†o</option>','interval','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M9.88\x209.88a3\x203\x200\x201\x200\x204.24\x204.24\x22/><path\x20d=\x22M10.73\x205.08A10.43\x2010.43\x200\x200\x201\x2012\x205c7\x200\x2010\x207\x2010\x207a13.16\x2013.16\x200\x200\x201-1.67\x202.68\x22/><path\x20d=\x22M6.61\x206.61A13.526\x2013.526\x200\x200\x200\x202\x2012s3\x207\x2010\x207a9.74\x209.74\x200\x200\x200\x205.39-1.61\x22/><line\x20x1=\x222\x22\x20y1=\x222\x22\x20x2=\x2222\x22\x20y2=\x2222\x22/></svg>','about:blank','#btnSkipNote','A_short','state','#btnGenericCancel','1177430hsWWHf','no-repeat','#settings-pomodoro','-9999px','model','\x22?\x20M·ªçi\x20ch·ªß\x20ƒë·ªÅ\x20con\x20v√†\x20d·ªØ\x20li·ªáu\x20li√™n\x20quan\x20s·∫Ω\x20b·ªã\x20m·∫•t.','#btnSendMessage','styleWithCSS','#toasts','#btnSaveSettings','ghost','#statSessions','79011tFKsDt','Ph∆∞∆°ng\x20Ph√°p\x20Vi·∫øt\x20c·ªßa\x20Benjamin\x20Franklin:\x20H·ªçc\x20Vi·∫øt\x20B·∫±ng\x20C√°ch\x20T√°i\x20T·∫°o','min','values','#subtopicTasksList','href','Initialization\x20error:','long_end','#btnAutoFormat','method-content','text','no-subtopic-selected','indexOf','filter','cyclesTarget','light','Th√™m\x20t√πy\x20ch·ªçn','closest','AI\x20kh√¥ng\x20th·ªÉ\x20ƒë·ªãnh\x20d·∫°ng\x20l√∫c\x20n√†y.','_sortable','getBackupList','toLocaleDateString','#backupList','errorCode','key','role','L·ªói\x20HTTP:\x20','Xem\x20m·ªôt\x20t·∫•m\x20·∫£nh\x20d·ªÖ\x20th∆∞∆°ng\x20ho·∫∑c\x20l√†m\x20b·∫°n\x20vui.','gain','beep','#modalDashboard','italic','<input\x20type=\x22checkbox\x22\x20id=\x22','L·∫Øng\x20nghe\x20h∆°i\x20th·ªü\x20ra\x20v√†o\x20qua\x20m≈©i.','L·∫∑p\x20L·∫°i\x20Ng·∫Øt\x20Qu√£ng\x20(Spaced\x20Repetition):\x20H·ªçc\x20ƒê√∫ng\x20Th·ªùi\x20ƒêi·ªÉm','pastel','5450228lopIik','<span\x20class=\x22ico\x22>‚ñæ</span>','idle','backgroundMode','toLocaleString','getIframe','hours','aria-expanded','B_winddown','#customSoundsContainer','.topic-item','head','Nh·∫Øm\x20m·∫Øt\x20v√†\x20th∆∞\x20gi√£n\x20trong\x20m·ªôt\x20ph√∫t.','Ch∆∞a\x20ch·ªçn\x20Ch·ªß\x20ƒë·ªÅ\x20con','connect','persistTimerState','S·ª≠a\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con','#set_backupDays','timer.cycleInfo','#modalMethodEditor','badge','G·ª≠i\x20b·∫°n,\x205\x20gi·ªù\x20ƒë·∫ßu\x20ti√™n\x20(Kh·ªüi\x20ƒë·ªông)','ƒê·ª©ng\x20l√™n\x20v√†\x20ƒëi\x20l·∫°i\x20v√†i\x20b∆∞·ªõc\x20ƒë·ªÉ\x20m√°u\x20l∆∞u\x20th√¥ng.','pomodoroData_v11','apiKey','textContent','warn','onkeydown','currentDurations','#set_ytThumbAsBg','startsWith','#newSubtopicTaskInput','#set_theme','<p>G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20l√†\x20h√†nh\x20ƒë·ªông\x20n·ªó\x20l·ª±c\x20truy\x20xu·∫•t\x20th√¥ng\x20tin\x20t·ª´\x20n√£o\x20b·ªô\x20m√†\x20kh√¥ng\x20nh√¨n\x20v√†o\x20t√†i\x20li·ªáu.\x20ƒê√¢y\x20l√†\x20ph∆∞∆°ng\x20ph√°p\x20h·ªçc\x20hi·ªáu\x20qu·∫£\x20v∆∞·ª£t\x20tr·ªôi\x20so\x20v·ªõi\x20vi·ªác\x20ƒë·ªçc\x20l·∫°i,\x20highlight\x20hay\x20t√≥m\x20t·∫Øt\x20m·ªôt\x20c√°ch\x20th·ª•\x20ƒë·ªông.</p><h4>Nguy√™n\x20T·∫Øc\x2020/80</h4><p><strong>20%\x20C·ªët\x20l√µi:</strong>\x20H√†nh\x20ƒë·ªông\x20\x22v·∫Øt\x20√≥c\x22\x20ƒë·ªÉ\x20nh·ªõ\x20l·∫°i\x20th√¥ng\x20tin\x20s·∫Ω\x20c·ªßng\x20c·ªë\x20c√°c\x20li√™n\x20k·∫øt\x20th·∫ßn\x20kinh,\x20gi√∫p\x20chuy·ªÉn\x20ki·∫øn\x20th·ª©c\x20v√†o\x20b·ªô\x20nh·ªõ\x20d√†i\x20h·∫°n.\x20C·∫£m\x20gi√°c\x20kh√≥\x20khƒÉn\x20khi\x20c·ªë\x20g·∫Øng\x20nh·ªõ\x20ch√≠nh\x20l√†\x20d·∫•u\x20hi·ªáu\x20c·ªßa\x20vi·ªác\x20h·ªçc\x20t·∫≠p\x20hi·ªáu\x20qu·∫£\x20ƒëang\x20di·ªÖn\x20ra.</p><p><strong>80%\x20K·∫øt\x20qu·∫£:</strong>\x20B·∫°n\x20s·∫Ω\x20ghi\x20nh·ªõ\x20ki·∫øn\x20th·ª©c\x20s√¢u\x20v√†\x20l√¢u\x20h∆°n,\x20ƒë·ªìng\x20th·ªùi\x20bi·∫øt\x20ch√≠nh\x20x√°c\x20m√¨nh\x20ƒëang\x20y·∫øu\x20·ªü\x20ƒë√¢u.</p><h4>C√°c\x20Ph∆∞∆°ng\x20Ph√°p\x20Quan\x20Tr·ªçng\x20Nh·∫•t</h4><ul><li><strong>T·ª±\x20Ki·ªÉm\x20Tra\x20(Self-testing):</strong>\x20Thay\x20v√¨\x20ƒë·ªçc\x20l·∫°i\x20ghi\x20ch√∫,\x20h√£y\x20che\x20ch√∫ng\x20ƒëi\x20v√†\x20t·ª±\x20ƒë·∫∑t\x20c√¢u\x20h·ªèi\x20cho\x20m√¨nh.\x20V√≠\x20d·ª•:\x20D√πng\x20flashcards\x20(th·∫ª\x20ghi\x20nh·ªõ)\x20v√†\x20lu√¥n\x20tr·∫£\x20l·ªùi\x20tr∆∞·ªõc\x20khi\x20l·∫≠t\x20xem\x20ƒë√°p\x20√°n.</li><li><strong>K·ªπ\x20thu·∫≠t\x20\x22Blurting\x22:</strong>\x20Sau\x20khi\x20h·ªçc\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ,\x20h√£y\x20ƒë√≥ng\x20s√°ch\x20l·∫°i\x20v√†\x20vi·∫øt\x20ra\x20gi·∫•y\x20m·ªçi\x20th·ª©\x20b·∫°n\x20c√≥\x20th·ªÉ\x20nh·ªõ.\x20Sau\x20ƒë√≥,\x20so\x20s√°nh\x20v·ªõi\x20t√†i\x20li·ªáu\x20g·ªëc\x20ƒë·ªÉ\x20l·∫•p\x20ƒë·∫ßy\x20nh·ªØng\x20l·ªó\x20h·ªïng\x20ki·∫øn\x20th·ª©c.</li><li><strong>D·∫°y\x20l·∫°i\x20cho\x20ng∆∞·ªùi\x20kh√°c:</strong>\x20Gi·∫£i\x20th√≠ch\x20m·ªôt\x20kh√°i\x20ni·ªám\x20cho\x20ng∆∞·ªùi\x20kh√°c\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20truy\x20xu·∫•t,\x20ƒë∆°n\x20gi·∫£n\x20h√≥a\x20v√†\x20s·∫Øp\x20x·∫øp\x20l·∫°i\x20th√¥ng\x20tin\x20m·ªôt\x20c√°ch\x20m·∫°ch\x20l·∫°c.</li></ul><p><i>T√≥m\x20l·∫°i:\x20ƒê·ª´ng\x20ch·ªâ\x20ƒë·ªçc\x20l·∫°i.\x20H√£y\x20d·ª´ng\x20l·∫°i,\x20che\x20t√†i\x20li·ªáu\x20ƒëi,\x20v√†\x20t·ª±\x20h·ªèi:\x20\x22M√¨nh\x20th·ª±c\x20s·ª±\x20nh·ªõ\x20ƒë∆∞·ª£c\x20g√¨?\x22</i></p>','tasks','enableSessionNotes','pause','#btnAddSubtopicTask','#set_panelOpacity','#generalNotesList','#chatInput','Ch∆∞a\x20c√≥\x20link\x20h·ª£p\x20l·ªá.\x20D√°n\x20link\x20r·ªìi\x20b·∫•m\x20‚ñ∂Ô∏è.','pomodoro_backup_','NGH·ªà\x20NG·∫ÆN','updateSettings','removeProperty','\x20|\x20<strong>T·ªïng\x20nhi·ªám\x20v·ª•:</strong>\x20','#set_autoStartNext','className','innerHeight','button,\x20[href],\x20input,\x20select,\x20textarea,\x20[tabindex]:not([tabindex=\x22-1\x22])','floor','exponentialRampToValueAtTime','‚ú®\x20T·ª±\x20ƒë·ªông\x20ƒë·ªãnh\x20d·∫°ng','#methodEditorTitleInput','#btnToggleYtSound','stop','#set_volume','#set_youtubeUrl','title','sessionsCompleted','display','workMinutes','#aiPromptSuggestions\x20button','G·ª≠i\x20b·∫°n,\x201.000\x20gi·ªù\x20(Chuy·ªÉn\x20h√≥a)','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20phi√™n\x20n√†o</div>','T·ªáp\x20kh√¥ng\x20ƒë√∫ng\x20ƒë·ªãnh\x20d·∫°ng','settings','note-item','Ch√∫c\x20m·ª´ng\x20b·∫°n\x20ƒë√£\x20l√†m\x20ƒë∆∞·ª£c\x20ƒëi·ªÅu\x20kh√≥\x20nh·∫•t:\x20B·∫Øt\x20ƒë·∫ßu\x20v√†\x20duy\x20tr√¨.\x0a\x0a20\x20gi·ªù\x20kh√¥ng\x20ch·ªâ\x20l√†\x20th·ªùi\x20gian,\x20ƒë√≥\x20l√†\x2020\x20gi·ªù\x20b·∫°n\x20ƒë√£\x20chi·∫øn\x20th·∫Øng\x20s·ª±\x20xao\x20nh√£ng.\x20B·∫°n\x20ƒëang\x20x√¢y\x20d·ª±ng\x20m·ªôt\x20n·ªÅn\x20t·∫£ng\x20v·ªØng\x20ch·∫Øc\x20cho\x20s·ª±\x20k·ª∑\x20lu·∫≠t.\x20H√£y\x20t·ª±\x20h√†o\x20v·ªÅ\x20kh·ªüi\x20ƒë·∫ßu\x20n√†y.','click','__ytApiWatchdog','activeElement','break','#milestoneTitle','<li>','Failed\x20to\x20load\x20YouTube\x20API','ƒê√£\x20x√≥a\x20t√≥m\x20t·∫Øt.','save','removeChild','isNaN','timer','#btnHelpCreateTopic','S·ª≠a\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ','bottom','toString','transaction','topicId','blob:','var(--danger)','_startTick','left','createOscillator','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=','insertUnorderedList','collapsedTopics','A_long','.nav-btn[data-view=\x22','aria-pressed','backgroundImage','blockReason','#btnCloseDashboard','cueVideoById','ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20NGH·ªà\x20D√ÄI.','#uploadSoundBreak','sessions','achievedMilestones','L·ªói\x20t·ª´\x20Gemini:\x20','X√≥a','#btnStart','#timeDisplay','L·ªói:\x20Kh√¥ng\x20th·ªÉ\x20b·∫≠t\x20ch·∫ø\x20ƒë·ªô\x20to√†n\x20m√†n\x20h√¨nh:\x20','pomodoro_files','get','by_topic','#modalNote','Nguy√™n\x20T·∫Øc\x2080/20\x20ƒê·ªÉ\x20Chinh\x20Ph·ª•c\x20Lƒ©nh\x20V·ª±c\x20M·ªõi','onupgradeneeded','none','ƒê√£\x20l∆∞u\x20ghi\x20ch√∫','API\x20response\x20structure\x20is\x20unexpected:','#btnSaveNote','getAll','div','height','.sub-row','Ôºã\x20Th√™m','span','8QopRPf','#set_apiKey','Th·∫£\x20l·ªèng\x20to√†n\x20th√¢n,\x20c·∫£m\x20nh·∫≠n\x20h∆°i\x20th·ªü.','relative','#settings-flowtime','delete','objectStore','6UEgiVI','durations','1EfOWdt','.tab-btn','\x20(A)','toggle','#ytSoundVolume','kh√¥ng\x20r√µ','ArrowLeft','#draggableTimer','reload','json','\x22?\x20M·ªçi\x20d·ªØ\x20li·ªáu\x20li√™n\x20quan\x20s·∫Ω\x20b·ªã\x20m·∫•t.','fullscreenchange','<p>','top','N·∫Øn\x20nh·∫π\x20c√°c\x20kh·ªõp\x20ng√≥n\x20tay\x20sau\x20khi\x20g√µ\x20ph√≠m.','#dashboardContent','getItem','default','__ytApiPromise','_getStore','T√≥m\x20t·∫Øt\x20c√°c\x20ghi\x20ch√∫\x20sau\x20theo\x20g·∫°ch\x20ƒë·∫ßu\x20d√≤ng,\x20ng·∫Øn\x20g·ªçn,\x20r√µ\x20r√†ng:\x0a\x0a','btn\x20small\x20danger','version','#modalMilestone','code','S·∫Øp\x20x·∫øp\x20l·∫°i\x20kh√¥ng\x20gian\x20l√†m\x20vi·ªác\x20c·ªßa\x20b·∫°n.','chime','Sortable','cancel','G·ª≠i\x20b·∫°n,\x2050\x20gi·ªù\x20(ƒê·ªông\x20l·ª±c)','#btnResume','B·∫£n\x20sao\x20l∆∞u\x20ng√†y:\x20','appendChild','stroke','#set_enableSessionNotes','generalNotes','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20d·ªØ\x20li·ªáu</div>','sound_unlocked','Th√™m\x20ghi\x20ch√∫','Nghe\x20m·ªôt\x20b·∫£n\x20nh·∫°c\x20y√™u\x20th√≠ch.','https://img.youtube.com/vi/','application/json','getBoundingClientRect','#btnMilestoneClose','enableWinddown','restoreBackup','add','scrollHeight','protocol','note-content-wrapper','parts','revokeObjectURL','ƒêi\x20d·∫°o\x20m·ªôt\x20v√≤ng\x20ng·∫Øn\x20quanh\x20ph√≤ng.','toast','Ch·ªõp\x20m·∫Øt\x20li√™n\x20t·ª•c\x2010\x20l·∫ßn\x20ƒë·ªÉ\x20tr√°nh\x20kh√¥\x20m·∫Øt.','topics','ytUrlFeedback','view','#set_theme_color','flatMap','#welcomePanel','sid','&gt;','methodId','T√≥m\x20t·∫Øt\x20th·∫•t\x20b·∫°i.','DB_NAME','btn\x20small\x20ghost\x20actions-menu-btn','--bg-image','AutoBackup\x20error:','#ytUrlFeedback','cycleIndex','put','G·ª≠i\x20b·∫°n,\x2020\x20gi·ªù\x20(N·ªÅn\x20t·∫£ng)','#genericTitle','http','#audioWorkEnd','topicsList','Backup\x20failed:','.timer-circle-container','Ch·ªß\x20ƒë·ªÅ\x20con:\x20','linearRampToValueAtTime','<p>Benjamin\x20Franklin\x20ƒë√£\x20t·ª±\x20r√®n\x20luy·ªán\x20k·ªπ\x20nƒÉng\x20vi·∫øt\x20t·ª´\x20k√©m\x20c·ªèi\x20tr·ªü\x20n√™n\x20b·∫≠c\x20th·∫ßy\x20b·∫±ng\x20m·ªôt\x20ph∆∞∆°ng\x20ph√°p\x20ch·ªß\x20ƒë·ªông,\x20thay\x20v√¨\x20ch·ªâ\x20ƒë·ªçc\x20m·ªôt\x20c√°ch\x20th·ª•\x20ƒë·ªông.\x20C·ªët\x20l√µi\x20c·ªßa\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20l√†\x20ph√¢n\x20t√≠ch,\x20t√°i\x20t·∫°o,\x20v√†\x20so\x20s√°nh\x20v·ªõi\x20m·ªôt\x20b√†i\x20vi·∫øt\x20ch·∫•t\x20l∆∞·ª£ng\x20cao.</p><p>ƒê√¢y\x20l√†\x20m·ªôt\x20v√≠\x20d·ª•\x20kinh\x20ƒëi·ªÉn\x20c·ªßa\x20\x22Luy·ªán\x20t·∫≠p\x20c√≥\x20Ch·ªß\x20ƒë√≠ch\x22:\x20t·∫≠p\x20trung\x20v√†o\x20ƒëi·ªÉm\x20y·∫øu,\x20c√≥\x20m·ª•c\x20ti√™u\x20r√µ\x20r√†ng\x20v√†\x20nh·∫≠n\x20ph·∫£n\x20h·ªìi\x20ngay\x20l·∫≠p\x20t·ª©c.</p><h4>Quy\x20Tr√¨nh\x203\x20B∆∞·ªõc\x20C·ªët\x20L√µi</h4><ol><li><strong>Ph√¢n\x20T√≠ch\x20(Deconstruct):</strong>\x20ƒê·ªçc\x20m·ªôt\x20b√†i\x20vi·∫øt\x20m·∫´u\x20xu·∫•t\x20s·∫Øc.\x20Sau\x20ƒë√≥,\x20ch·ªâ\x20ghi\x20l·∫°i\x20nh·ªØng\x20√Ω\x20ch√≠nh\x20c·ªßa\x20t·ª´ng\x20ƒëo·∫°n\x20ho·∫∑c\x20t·ª´ng\x20c√¢u\x20ra\x20m·ªôt\x20t·ªù\x20gi·∫•y\x20ri√™ng.</li><li><strong>T√°i\x20T·∫°o\x20(Reconstruct):</strong>\x20V√†i\x20ng√†y\x20sau,\x20khi\x20ƒë√£\x20qu√™n\x20ƒëi\x20vƒÉn\x20phong\x20c·ªßa\x20b·∫£n\x20g·ªëc,\x20h√£y\x20d√πng\x20nh·ªØng\x20ghi\x20ch√∫\x20√Ω\x20ch√≠nh\x20ƒë√≥\x20ƒë·ªÉ\x20vi·∫øt\x20l·∫°i\x20to√†n\x20b·ªô\x20b√†i\x20vi·∫øt\x20b·∫±ng\x20ng√¥n\x20ng·ªØ\x20v√†\x20c√°ch\x20di·ªÖn\x20ƒë·∫°t\x20c·ªßa\x20ch√≠nh\x20b·∫°n.</li><li><strong>So\x20S√°nh\x20&\x20S·ª≠a\x20L·ªói\x20(Compare\x20&\x20Correct):</strong>\x20ƒê·ªëi\x20chi·∫øu\x20tr·ª±c\x20ti·∫øp\x20b√†i\x20vi·∫øt\x20c·ªßa\x20b·∫°n\x20v·ªõi\x20b·∫£n\x20g·ªëc.\x20ƒê√¢y\x20l√†\x20b∆∞·ªõc\x20quan\x20tr·ªçng\x20nh·∫•t.\x20N√≥\x20gi√∫p\x20b·∫°n\x20ph√°t\x20hi·ªán\x20ngay\x20l·∫≠p\x20t·ª©c\x20nh·ªØng\x20l·ªói\x20sai\x20v·ªÅ\x20t·ª´\x20v·ª±ng,\x20c·∫•u\x20tr√∫c\x20c√¢u,\x20v√†\x20c√°ch\x20s·∫Øp\x20x·∫øp\x20√Ω\x20t∆∞·ªüng\x20ƒë·ªÉ\x20s·ª≠a\x20ch·ªØa.</li></ol><p>Franklin\x20c√≤n\x20th·ª±c\x20h√†nh\x20c√°c\x20bi·∫øn\x20th·ªÉ\x20n√¢ng\x20cao\x20nh∆∞\x20x√°o\x20tr·ªôn\x20th·ª©\x20t·ª±\x20c√°c\x20√Ω\x20ch√≠nh\x20ƒë·ªÉ\x20r√®n\x20luy·ªán\x20t∆∞\x20duy\x20logic,\x20ho·∫∑c\x20chuy·ªÉn\x20vƒÉn\x20xu√¥i\x20th√†nh\x20th∆°\x20ƒë·ªÉ\x20l√†m\x20gi√†u\x20v·ªën\x20t·ª´.</p><h4>Nguy√™n\x20T·∫Øc\x20V√†ng</h4><p>Th√†nh\x20c√¥ng\x20c·ªßa\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20kh√¥ng\x20ƒë·∫øn\x20t·ª´\x20vi·ªác\x20l·∫∑p\x20l·∫°i\x20v√¥\x20th·ª©c,\x20m√†\x20ƒë·∫øn\x20t·ª´\x20v√≤ng\x20l·∫∑p\x20ph·∫£n\x20h·ªìi\x20tr·ª±c\x20ti·∫øp.\x20Vi·ªác\x20so\x20s√°nh\x20v·ªõi\x20b·∫£n\x20g·ªëc\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20ƒë·ªëi\x20m·∫∑t\x20v√†\x20s·ª≠a\x20ch·ªØa\x20nh·ªØng\x20ƒëi·ªÉm\x20y·∫øu\x20c·ª•\x20th·ªÉ\x20c·ªßa\x20m√¨nh,\x20bi·∫øn\x20vi·ªác\x20h·ªçc\x20t·ª´\x20m·ªôt\x20qu√°\x20tr√¨nh\x20m∆°\x20h·ªì\x20th√†nh\x20m·ªôt\x20b√†i\x20t·∫≠p\x20c√≥\x20th·ªÉ\x20ƒëo\x20l∆∞·ªùng\x20ƒë∆∞·ª£c.</p><p><i>ƒê·ªÉ\x20vi·∫øt\x20gi·ªèi\x20h∆°n,\x20ƒë·ª´ng\x20ch·ªâ\x20ƒë·ªçc.\x20H√£y\x20ch·ªçn\x20m·ªôt\x20b√†i\x20vi·∫øt\x20hay,\x20ph√¢n\x20t√≠ch\x20n√≥,\x20c·ªë\x20g·∫Øng\x20vi·∫øt\x20l·∫°i,\x20v√†\x20so\x20s√°nh\x20ƒë·ªÉ\x20t√¨m\x20ra\x20l·ªói\x20sai.</i></p>','#view-methods\x20.method-item','vi-VN','addEventListener','prevState','clear','AudioContext','padStart','setProperty','var(--muted)','X√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20con','Hi·ªán\x20giao\x20di·ªán','initDB','panelOpacity','long_break','setItem','body','Ki·ªÉm\x20tra\x20nh·ªãp\x20th·ªü\x20‚Äì\x20n·∫øu\x20g·∫•p\x20g√°p,\x20h√£y\x20l√†m\x20ch·∫≠m\x20l·∫°i.','üí°\x20G·ª£i\x20√Ω:\x20','L√ÄM\x20VI·ªÜC','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20t√≥m\x20t·∫Øt\x20n√†y?','#btnDashboard','A_work','#btnSaveMethod','#statTasks','X√≥a\x20Ch·ªß\x20ƒë·ªÅ','Th·∫£\x20l·ªèng\x20hai\x20ch√¢n,\x20l·∫Øc\x20nh·∫π\x20c·ªï\x20ch√¢n\x20d∆∞·ªõi\x20b√†n.','substring','<li\x20class=\x22tiny\x22\x20style=\x22opacity:\x200.7;\x22>Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20xem\x20to-do\x20list.</li>','unMute','prompt','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22dashboard-table\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead><tr><th>Ch·ªß\x20ƒë·ªÅ</th><th>Ch·ªß\x20ƒë·ªÅ\x20con</th><th>Th·ªùi\x20gian</th><th>Phi√™n</th><th>Nhi·ªám\x20v·ª•</th></tr></thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','object','createdAt','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20\x22','ƒê√£\x20c·∫≠p\x20nh·∫≠t\x20h√¨nh\x20n·ªÅn.','#btnBreakEarly','src','origin','S·ª≠a','includes','Creating\x20backup\x20for\x20','G·ª≠i\x20b·∫°n,\x205.000+\x20gi·ªù\x20(Di\x20s·∫£n)','hidden','--panel-opacity','onclick','</td></tr>','U·ªëng\x20m·ªôt\x20ly\x20n∆∞·ªõc\x20ƒë·ªÉ\x20gi·ªØ\x20ƒë·ªß\x20n∆∞·ªõc.','.view','.actions-menu-btn','lang','<div\x20class=\x22hist-meta\x22>','shiftKey','subtopics-group','H·∫†\x20NHI·ªÜT','details','reduce','innerHTML','L·ªói\x20ph√°t\x20√¢m\x20thanh:','subtopics','execCommand','finished','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20t√≥m\x20t·∫Øt\x20n√†o.</div>','bold','active','#btnTestSound','candidates','test','#btnClearChat','append','oncomplete','style','download','L·ªói:\x20','M·ªü\x20c·ª≠a\x20s·ªï\x20cho\x20kh√¥ng\x20kh√≠\x20m·ªõi\x20v√†o\x20ph√≤ng.','\x20|\x20<strong>T·ªïng\x20phi√™n:</strong>\x20','dateISO','selectionEnd','B∆∞·ªõc\x20ra\x20ban\x20c√¥ng,\x20t·∫≠n\x20h∆∞·ªüng\x20√°nh\x20s√°ng\x20t·ª±\x20nhi√™n.','color','#btnReset','#btnFinishFlow','PLAYING','üåä\x20Flow','.actions-menu','#set_backgroundMode','14439340NLRfhU','K·ªπ\x20Thu·∫≠t\x20Feynman:\x20Hi·ªÉu\x20S√¢u\x20B·∫±ng\x20C√°ch\x20Gi·∫£i\x20Th√≠ch\x20ƒê∆°n\x20Gi·∫£n','methods','longBreakIntervalA','cyclesA','#btnToggleBg','createGain','&quot;','find','Chu\x20k·ª≥\x20','from','Escape','longBreakIntervalB','wind_down','mouseup','#cycleInfo','?\x20D·ªØ\x20li·ªáu\x20hi·ªán\x20t·∫°i\x20s·∫Ω\x20b·ªã\x20ghi\x20ƒë√®.','position'];_0x293e=function(){return _0xae765;};return _0x293e();}async function saveSettings(){const _0x22125f=_0x1318bc,_0x3822b8=data[_0x22125f(0x218)];_0x3822b8[_0x22125f(0x1ed)]=$(_0x22125f(0x256))['value'][_0x22125f(0x3f0)]();const _0x54040c=_0x3822b8[_0x22125f(0x25d)];if(editingPreset==='A')_0x54040c['A_work']=clampInt($('#set_work')['value'],0x1,0x3e7),_0x54040c[_0x22125f(0x337)]=clampInt($(_0x22125f(0x3a7))[_0x22125f(0x470)],0x0,0x3e7),_0x54040c[_0x22125f(0x1a2)]=clampInt($(_0x22125f(0x42d))[_0x22125f(0x470)],0x1,0x3e7),_0x54040c['A_long']=clampInt($(_0x22125f(0x42f))[_0x22125f(0x470)],0x1,0x3e7),_0x3822b8['cyclesA']=clampInt($('#set_cycles')['value'],0x1,0xc),_0x3822b8[_0x22125f(0x308)]=clampInt($('#set_interval')[_0x22125f(0x470)],0x2,0xc);else{if(editingPreset==='B')_0x54040c[_0x22125f(0x420)]=clampInt($(_0x22125f(0x419))[_0x22125f(0x470)],0x1,0x3e7),_0x54040c[_0x22125f(0x1dd)]=clampInt($(_0x22125f(0x3a7))[_0x22125f(0x470)],0x0,0x3e7),_0x54040c[_0x22125f(0x412)]=clampInt($(_0x22125f(0x42d))[_0x22125f(0x470)],0x1,0x3e7),_0x54040c['B_long']=clampInt($('#set_long')[_0x22125f(0x470)],0x1,0x3e7),_0x3822b8[_0x22125f(0x31d)]=clampInt($(_0x22125f(0x4b1))['value'],0x1,0xc),_0x3822b8[_0x22125f(0x311)]=clampInt($(_0x22125f(0x3f7))['value'],0x2,0xc);else{if(editingPreset==='C'){const _0x3871d7=$(_0x22125f(0x457));if(_0x3871d7)_0x3822b8[_0x22125f(0x458)]=clampInt(_0x3871d7[_0x22125f(0x470)],0x1,0x14);}}}_0x3822b8[_0x22125f(0x3b8)]=clampFloat($(_0x22125f(0x20e))[_0x22125f(0x470)],0x0,0x1,0.8),_0x3822b8['soundTheme']=$(_0x22125f(0x1f5))['value']==='chime'?_0x22125f(0x278):_0x22125f(0x1ce),_0x3822b8[_0x22125f(0x373)]=$(_0x22125f(0x298))['value'],_0x3822b8[_0x22125f(0x2bc)]=parseFloat($('#set_panelOpacity')[_0x22125f(0x470)])||0.85;$(_0x22125f(0x304))&&(_0x3822b8[_0x22125f(0x1d8)]=$(_0x22125f(0x304))['value']);_0x3822b8[_0x22125f(0x19a)]=!!($(_0x22125f(0x204))&&$(_0x22125f(0x204))[_0x22125f(0x46a)]),_0x3822b8[_0x22125f(0x28a)]=!!($('#set_enableWinddown')&&$(_0x22125f(0x38d))[_0x22125f(0x46a)]),_0x3822b8[_0x22125f(0x1f8)]=!!($(_0x22125f(0x280))&&$(_0x22125f(0x280))[_0x22125f(0x46a)]);$('#set_backupDays')&&(_0x3822b8[_0x22125f(0x329)]=clampInt($(_0x22125f(0x1e6))[_0x22125f(0x470)],0x1,0x1e));_0x3822b8[_0x22125f(0x373)]==='light'||_0x3822b8[_0x22125f(0x373)]===_0x22125f(0x1d4)?(_0x3822b8[_0x22125f(0x33f)]=![],typeof _0x3822b8[_0x22125f(0x468)]===_0x22125f(0x31b)&&_0x3822b8[_0x22125f(0x468)][_0x22125f(0x2d7)](_0x22125f(0x3c7))&&(_0x3822b8[_0x22125f(0x468)]='')):_0x3822b8[_0x22125f(0x33f)]=!![];const _0x69ea9f=$(_0x22125f(0x20f))[_0x22125f(0x470)][_0x22125f(0x3f0)]();_0x3822b8[_0x22125f(0x33f)]=$('#set_ytThumbAsBg')[_0x22125f(0x46a)],_0x3822b8[_0x22125f(0x4b3)]=parseInt($(_0x22125f(0x262))[_0x22125f(0x470)],0xa),sessionYoutubeUrl=_0x69ea9f;try{if(!IS_FILE_PROTOCOL){if(ytPlayer&&ytPlayer[_0x22125f(0x43b)])ytPlayer[_0x22125f(0x43b)](_0x3822b8[_0x22125f(0x4b3)]);}else try{fallbackPostMessage(_0x22125f(0x43b),[_0x3822b8['youtubeVolume']]);}catch(_0x48cfb7){}}catch(_0x551eaa){}await saveData(),applyTheme(),applyCustomBg(),applyPanelOpacity(),updatePresetButtonsText(),timer[_0x22125f(0x48d)](_0x3822b8[_0x22125f(0x3e0)],{'silent':!![]}),closeSettings(),toast('ƒê√£\x20l∆∞u\x20c√†i\x20ƒë·∫∑t');}function clampInt(_0x736b3b,_0x78ef18,_0x4ef2c3){const _0x3a0117=_0x1318bc;_0x736b3b=parseInt(_0x736b3b||0x0,0xa);if(isNaN(_0x736b3b))_0x736b3b=_0x78ef18;return Math[_0x3a0117(0x380)](_0x78ef18,Math[_0x3a0117(0x1b3)](_0x4ef2c3,_0x736b3b));}function clampFloat(_0x421918,_0x597d14,_0x348f39,_0x280f44){const _0x3d1573=_0x1318bc;_0x421918=parseFloat(_0x421918);if(Number[_0x3d1573(0x225)](_0x421918))_0x421918=_0x280f44;return Math[_0x3d1573(0x380)](_0x597d14,Math[_0x3d1573(0x1b3)](_0x348f39,_0x421918));}const dbPromise=new Promise((_0x41ab3e,_0x3709a1)=>{const _0x4b8417=_0x1318bc,_0x35b54e=indexedDB[_0x4b8417(0x353)](_0x4b8417(0x245),0x1);_0x35b54e[_0x4b8417(0x24a)]=_0x32a092=>_0x32a092['target'][_0x4b8417(0x3d1)][_0x4b8417(0x3ce)]('files'),_0x35b54e[_0x4b8417(0x440)]=_0x1c6bd5=>_0x41ab3e(_0x1c6bd5[_0x4b8417(0x31c)][_0x4b8417(0x3d1)]),_0x35b54e[_0x4b8417(0x384)]=_0x53a47a=>_0x3709a1(_0x53a47a);}),fileCache={};function handleFileUpload(_0x4cacc4,_0x2cd261){const _0x34b6c4=_0x1318bc;if(!_0x4cacc4)return;dbPromise[_0x34b6c4(0x495)](_0x34f2ee=>{const _0x4a3924=_0x34b6c4,_0x1899c3=uid('file'),_0xbdccac=_0x34f2ee['transaction'](_0x4a3924(0x317),_0x4a3924(0x474));_0xbdccac[_0x4a3924(0x25b)](_0x4a3924(0x317))[_0x4a3924(0x2a5)](_0x4cacc4,_0x1899c3),_0xbdccac[_0x4a3924(0x2f5)]=()=>_0x2cd261(_0x1899c3),_0xbdccac['onerror']=()=>toast('L·ªói\x20l∆∞u\x20file.');});}function getStoredFileUrl(_0x52f300){const _0x1bc92f=_0x1318bc;if(!_0x52f300)return Promise[_0x1bc92f(0x40e)]('');if(fileCache[_0x52f300])return Promise['resolve'](fileCache[_0x52f300]);return dbPromise['then'](_0x4f50e4=>new Promise(_0x1aa6ac=>{const _0x1dbd6d=_0x1bc92f,_0x9a0938=_0x4f50e4[_0x1dbd6d(0x22b)](_0x1dbd6d(0x317),_0x1dbd6d(0x345)),_0x315f37=_0x9a0938['objectStore']('files')[_0x1dbd6d(0x246)](_0x52f300);_0x315f37['onsuccess']=_0x4a93cd=>{const _0x1dacf6=_0x1dbd6d,_0x3fd2b7=_0x4a93cd[_0x1dacf6(0x31c)][_0x1dacf6(0x3d1)];if(_0x3fd2b7){const _0x1cb515=URL['createObjectURL'](_0x3fd2b7);fileCache[_0x52f300]=_0x1cb515,_0x1aa6ac(_0x1cb515);}else _0x1aa6ac('');},_0x315f37[_0x1dbd6d(0x384)]=()=>_0x1aa6ac('');}));}function applyCustomBg(){const _0x56e883=_0x1318bc,_0x232081=data[_0x56e883(0x218)],_0x545a1c=_0x232081[_0x56e883(0x468)],_0x25d20a=_0x232081[_0x56e883(0x373)],_0x27aa2b=[_0x56e883(0x4a5),_0x56e883(0x485)]['includes'](_0x25d20a),_0x461a7b=_0x25d20a===_0x56e883(0x1c0)||_0x25d20a===_0x56e883(0x1d4),_0x5e5ff3=_0x232081['backgroundMode']||_0x56e883(0x3f5);document[_0x56e883(0x2bf)][_0x56e883(0x2f6)]['backgroundSize']=_0x5e5ff3,document[_0x56e883(0x2bf)]['style'][_0x56e883(0x492)]=_0x5e5ff3===_0x56e883(0x3ab)?'repeat':_0x56e883(0x1a6);const _0xa3aa81=()=>{const _0x48cc76=_0x56e883;try{document[_0x48cc76(0x2bf)][_0x48cc76(0x2f6)][_0x48cc76(0x238)]='';}catch(_0x2dff79){}};if(_0x545a1c){const _0x3c13a6=_0x545a1c[_0x56e883(0x1f3)](_0x56e883(0x365))||_0x545a1c[_0x56e883(0x1f3)](_0x56e883(0x2a8))||_0x545a1c[_0x56e883(0x1f3)](_0x56e883(0x22d))?Promise[_0x56e883(0x40e)](_0x545a1c):getStoredFileUrl(_0x545a1c);_0x3c13a6[_0x56e883(0x495)](_0x344202=>{const _0x2eb50e=_0x56e883;_0x344202?document[_0x2eb50e(0x2bf)][_0x2eb50e(0x2f6)][_0x2eb50e(0x2b7)](_0x2eb50e(0x2a1),_0x2eb50e(0x32d)+_0x344202+')'):document['body'][_0x2eb50e(0x2f6)][_0x2eb50e(0x2b7)](_0x2eb50e(0x2a1),_0x461a7b?_0x2eb50e(0x24b):''),_0xa3aa81();});}else!_0x27aa2b?_0x461a7b?(document[_0x56e883(0x2bf)][_0x56e883(0x2f6)]['setProperty'](_0x56e883(0x2a1),_0x56e883(0x24b)),_0xa3aa81()):document[_0x56e883(0x2bf)][_0x56e883(0x2f6)]['setProperty'](_0x56e883(0x2a1),_0x56e883(0x422)):(document[_0x56e883(0x2bf)][_0x56e883(0x2f6)][_0x56e883(0x202)]('--bg-image'),_0xa3aa81());}function applyPanelOpacity(){const _0x4174aa=_0x1318bc;document[_0x4174aa(0x3dd)][_0x4174aa(0x2f6)][_0x4174aa(0x2b7)](_0x4174aa(0x2db),data[_0x4174aa(0x218)][_0x4174aa(0x2bc)]);}function renderDashboard(){const _0x455cef=_0x1318bc,_0x2c7c3d=data[_0x455cef(0x295)][_0x455cef(0x299)](_0x215449=>_0x215449['subtopics'][_0x455cef(0x43e)](_0x30ffe1=>({'topic':_0x215449[_0x455cef(0x40c)],'subtopic':_0x30ffe1[_0x455cef(0x40c)],'m':_0x30ffe1[_0x455cef(0x49b)]['totalMinutes']||0x0,'c':_0x30ffe1[_0x455cef(0x49b)][_0x455cef(0x211)]||0x0,'t':_0x30ffe1[_0x455cef(0x49b)][_0x455cef(0x3bd)]||0x0}))),_0x77c1d2=_0x2c7c3d[_0x455cef(0x2e7)]((_0x2fdb85,_0x47aa56)=>_0x2fdb85+_0x47aa56['m'],0x0),_0x51741f=_0x2c7c3d[_0x455cef(0x2e7)]((_0xa76737,_0x216029)=>_0xa76737+_0x216029['c'],0x0),_0x3f1106=_0x2c7c3d[_0x455cef(0x2e7)]((_0x1c9a6d,_0x2ec1e0)=>_0x1c9a6d+_0x2ec1e0['t'],0x0);let _0x3ab579='<p\x20class=\x22tiny\x22><strong>T·ªïng\x20th·ªùi\x20gian:</strong>\x20'+formatDaysHoursMinutes(_0x77c1d2)+_0x455cef(0x2fa)+_0x51741f+_0x455cef(0x203)+_0x3f1106+_0x455cef(0x2ce);_0x2c7c3d[_0x455cef(0x395)](_0x35cd3f=>{const _0x202520=_0x455cef;_0x3ab579+=_0x202520(0x477)+escapeHTML(_0x35cd3f['topic'])+_0x202520(0x3ad)+escapeHTML(_0x35cd3f[_0x202520(0x361)])+_0x202520(0x3ad)+formatDaysHoursMinutes(_0x35cd3f['m'])+_0x202520(0x3ad)+_0x35cd3f['c']+_0x202520(0x3ad)+_0x35cd3f['t']+_0x202520(0x2dd);}),_0x3ab579+=_0x455cef(0x493);const _0x5ad297=$(_0x455cef(0x26d));if(_0x5ad297)_0x5ad297['innerHTML']=_0x3ab579;}function getMilestones(){const _0x5392d2=_0x1318bc;return[{'hours':0x5,'title':_0x5392d2(0x1ea),'message':_0x5392d2(0x482)},{'hours':0x14,'title':_0x5392d2(0x2a6),'message':_0x5392d2(0x21a)},{'hours':0x32,'title':_0x5392d2(0x27b),'message':'50\x20gi·ªù\x20t·∫≠p\x20trung!\x20Th√≥i\x20quen\x20c·ªßa\x20b·∫°n\x20ƒëang\x20t·∫°o\x20ra\x20ƒë·ªông\x20l·ª±c.\x20S·ª±\x20nh·∫•t\x20qu√°n\x20nh·ªè\x20b√©\x20m·ªói\x20ng√†y\x20ƒëang\x20c·ªông\x20h∆∞·ªüng\x20th√†nh\x20nh·ªØng\x20b∆∞·ªõc\x20ti·∫øn\x20l·ªõn.\x20B·∫°n\x20ƒëang\x20ƒëi\x20ƒë√∫ng\x20h∆∞·ªõng,\x20h√£y\x20ti·∫øp\x20t·ª•c\x20ph√°t\x20huy.'},{'hours':0x64,'title':_0x5392d2(0x386),'message':_0x5392d2(0x3e6)},{'hours':0xfa,'title':'G·ª≠i\x20b·∫°n,\x20250\x20gi·ªù\x20(B·ªÅn\x20b·ªâ)','message':_0x5392d2(0x3ea)},{'hours':0x1f4,'title':_0x5392d2(0x478),'message':'N·ª≠a\x20ngh√¨n\x20gi·ªù\x20t·∫≠p\x20trung.\x20B·∫°n\x20ƒë√£\x20d√†nh\x20m·ªôt\x20kho·∫£ng\x20th·ªùi\x20gian\x20ƒë√°ng\x20k·ªÉ\x20ƒë·ªÉ\x20theo\x20ƒëu·ªïi\x20ƒëi·ªÅu\x20quan\x20tr·ªçng\x20v·ªõi\x20m√¨nh.\x20M·ª©c\x20ƒë·ªô\x20chuy√™n\x20t√¢m\x20n√†y\x20ch·∫Øc\x20ch·∫Øn\x20ƒëang\x20t·∫°o\x20ra\x20nh·ªØng\x20k·∫øt\x20qu·∫£\x20s√¢u\x20s·∫Øc\x20v√†\x20kh√°c\x20bi·ªát.\x20Th·∫≠t\x20ƒë√°ng\x20ng∆∞·ª°ng\x20m·ªô.'},{'hours':0x3e8,'title':_0x5392d2(0x215),'message':_0x5392d2(0x3b5)},{'hours':0x1388,'title':_0x5392d2(0x2d9),'message':_0x5392d2(0x354)}][_0x5392d2(0x3ba)]((_0x4f5f16,_0x348259)=>_0x348259[_0x5392d2(0x1db)]-_0x4f5f16['hours']);}async function checkAndShowMilestones(){const _0x2aca3e=_0x1318bc;if(!data||!data[_0x2aca3e(0x218)])return;if(!Array['isArray'](data['settings'][_0x2aca3e(0x23f)]))data[_0x2aca3e(0x218)]['achievedMilestones']=[];const _0x2049ef=data[_0x2aca3e(0x295)][_0x2aca3e(0x2e7)]((_0x8809dc,_0x3d5336)=>{const _0x5531ad=_0x2aca3e;return _0x8809dc+_0x3d5336['subtopics'][_0x5531ad(0x2e7)]((_0x24e033,_0x1f4988)=>{const _0x222ea4=_0x5531ad;return _0x24e033+(_0x1f4988['stats'][_0x222ea4(0x4b5)]||0x0);},0x0);},0x0),_0x48668=_0x2049ef/0x3c,_0x3c119b=getMilestones(),_0x11101b=Array[_0x2aca3e(0x366)](data[_0x2aca3e(0x218)]['achievedMilestones'])?data[_0x2aca3e(0x218)][_0x2aca3e(0x23f)]:[],_0x4738f3=_0x3c119b[_0x2aca3e(0x1be)](_0x5a408a=>_0x48668>=_0x5a408a[_0x2aca3e(0x1db)]&&!_0x11101b[_0x2aca3e(0x2d7)](_0x5a408a[_0x2aca3e(0x1db)]));if(_0x4738f3[_0x2aca3e(0x469)]===0x0)return![];const _0x4b6dc8=_0x4738f3[_0x2aca3e(0x2e7)]((_0x5c4b99,_0x2f57bf)=>_0x5c4b99&&_0x5c4b99[_0x2aca3e(0x1db)]>_0x2f57bf[_0x2aca3e(0x1db)]?_0x5c4b99:_0x2f57bf,null);if(!_0x4b6dc8)return![];$(_0x2aca3e(0x21f))[_0x2aca3e(0x1ee)]=_0x4b6dc8[_0x2aca3e(0x210)],$('#milestoneMessage')['textContent']=_0x4b6dc8['message'],$(_0x2aca3e(0x275))['classList'][_0x2aca3e(0x28c)](_0x2aca3e(0x393));try{trapFocus($(_0x2aca3e(0x275)));}catch(_0x1fef0b){}return data[_0x2aca3e(0x218)]['achievedMilestones'][_0x2aca3e(0x42e)](_0x4b6dc8[_0x2aca3e(0x1db)]),await saveData(),!![];}async function seedAchievedMilestones(){const _0x1d8bd6=_0x1318bc;if(!data||!data[_0x1d8bd6(0x218)])return;!Array[_0x1d8bd6(0x366)](data['settings'][_0x1d8bd6(0x23f)])&&(data[_0x1d8bd6(0x218)][_0x1d8bd6(0x23f)]=[],await saveData());}async function handleSendMessage(){const _0x5865fc=_0x1318bc,_0x460417=$(_0x5865fc(0x1ab)),_0x5dc222=$(_0x5865fc(0x1fd)),_0x49f0a0=_0x5dc222['value'][_0x5865fc(0x3f0)](),_0x3b2a2f=getCurrentSubtopic();if(!_0x49f0a0)return;if(!_0x3b2a2f){toast(t('timer.selectSubtopicPrompt'));return;}_0x5dc222[_0x5865fc(0x470)]='',_0x460417['disabled']=!![],_0x460417[_0x5865fc(0x2e8)]=_0x5865fc(0x3ca),_0x3b2a2f[_0x5865fc(0x456)][_0x5865fc(0x42e)]({'role':_0x5865fc(0x4ae),'text':_0x49f0a0}),renderChat();const _0x4b9605=await callGeminiAPI(_0x49f0a0);_0x4b9605&&(_0x3b2a2f[_0x5865fc(0x456)][_0x5865fc(0x42e)]({'role':_0x5865fc(0x1a9),'text':_0x4b9605}),await saveData(),renderChat()),_0x460417['disabled']=![],_0x460417['innerHTML']='G·ª≠i';}function renderChat(){const _0x1e60ae=_0x1318bc,_0x15e817=getCurrentSubtopic(),_0x5d2228=$(_0x1e60ae(0x452)),_0x1981bf=$(_0x1e60ae(0x1fd)),_0x139004=$(_0x1e60ae(0x1ab));if(!_0x5d2228||!_0x1981bf||!_0x139004)return;if(!_0x15e817){_0x5d2228[_0x1e60ae(0x2e8)]='<div\x20class=\x22tiny\x22>Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20b·∫Øt\x20ƒë·∫ßu\x20chat.</div>',_0x1981bf[_0x1e60ae(0x36f)]=!![],_0x139004[_0x1e60ae(0x36f)]=!![];return;}_0x1981bf['disabled']=![],_0x139004[_0x1e60ae(0x36f)]=![],_0x5d2228[_0x1e60ae(0x2e8)]='';if(!_0x15e817[_0x1e60ae(0x456)]||_0x15e817[_0x1e60ae(0x456)][_0x1e60ae(0x469)]===0x0){_0x5d2228[_0x1e60ae(0x2e8)]=_0x1e60ae(0x368);return;}_0x15e817[_0x1e60ae(0x456)][_0x1e60ae(0x395)](_0x39bcb0=>{const _0x4375c6=_0x1e60ae,_0x8004c5=document['createElement'](_0x4375c6(0x250));_0x8004c5['className']='chat-msg\x20'+_0x39bcb0[_0x4375c6(0x1ca)],_0x8004c5[_0x4375c6(0x1ee)]=_0x39bcb0[_0x4375c6(0x1bb)],_0x5d2228['appendChild'](_0x8004c5);}),_0x5d2228[_0x1e60ae(0x37f)]=_0x5d2228[_0x1e60ae(0x28d)];}async function handleSummarizeNote(){const _0x5cbd9e=_0x1318bc,_0x4f4a22=$(_0x5cbd9e(0x355)),_0x26bb10=$(_0x5cbd9e(0x336)),_0x59b133=_0x26bb10[_0x5cbd9e(0x470)][_0x5cbd9e(0x3f0)](),_0x34e628=getCurrentSubtopic();if(!_0x59b133){toast(_0x5cbd9e(0x475));return;}const _0x881fd1=_0x4f4a22[_0x5cbd9e(0x2e8)];_0x4f4a22[_0x5cbd9e(0x2e8)]=_0x5cbd9e(0x3ca),_0x4f4a22[_0x5cbd9e(0x36f)]=!![];const _0x345bc9='D·ª±a\x20v√†o\x20th√¥ng\x20tin\x20sau:\x0a-\x20Ch·ªß\x20ƒë·ªÅ:\x20\x22'+(_0x34e628?.['name']||_0x5cbd9e(0x263))+_0x5cbd9e(0x339)+_0x59b133+_0x5cbd9e(0x3c0),_0x1033c0=await callGeminiAPI(_0x345bc9);_0x1033c0&&(_0x26bb10[_0x5cbd9e(0x470)]+='\x0a\x0a'+_0x1033c0),_0x4f4a22[_0x5cbd9e(0x2e8)]=_0x881fd1,_0x4f4a22[_0x5cbd9e(0x36f)]=![];}function clearChat(){const _0x2e6222=_0x1318bc,_0x30d439=getCurrentSubtopic();if(!_0x30d439){toast(t(_0x2e6222(0x407)));return;}showConfirmModal('X√°c\x20nh·∫≠n\x20x√≥a','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20to√†n\x20b·ªô\x20l·ªãch\x20s·ª≠\x20chat\x20c·ªßa\x20ch·ªß\x20ƒë·ªÅ\x20con\x20n√†y?',async _0x8023f2=>{const _0x1e63e5=_0x2e6222;_0x8023f2&&(_0x30d439[_0x1e63e5(0x456)]=[],await saveData(),renderChat(),toast('ƒê√£\x20x√≥a\x20l·ªãch\x20s·ª≠\x20chat.'));});}let ytPlayer,ytUserPaused=![],ytFallbackFrame=null,ytFallbackIsPlaying=![];function buildFallbackSrc(_0x347255,{autoplay:autoplay=0x1,mute:mute=0x1}={}){const _0x2e1d53=_0x1318bc,_0x11f19c=new URLSearchParams({'autoplay':String(autoplay),'mute':String(mute),'controls':'0','playsinline':'1','loop':'1','playlist':_0x347255,'enablejsapi':'1','origin':'https://www.youtube.com'})[_0x2e1d53(0x22a)]();return'https://www.youtube.com/embed/'+_0x347255+'?'+_0x11f19c;}function ensureFallbackFrame(){const _0x8df928=_0x1318bc,_0x49a625=document[_0x8df928(0x3e7)]('youtube-player-container');if(!_0x49a625)return null;if(ytFallbackFrame&&ytFallbackFrame['isConnected'])return ytFallbackFrame;const _0x1de16f=document[_0x8df928(0x334)](_0x8df928(0x3ae));return _0x1de16f['id']='yt-fallback',_0x1de16f[_0x8df928(0x324)]='1',_0x1de16f[_0x8df928(0x251)]='1',_0x1de16f[_0x8df928(0x2f6)]['position']=_0x8df928(0x370),_0x1de16f[_0x8df928(0x2f6)][_0x8df928(0x26b)]=_0x8df928(0x1a8),_0x1de16f[_0x8df928(0x2f6)]['left']=_0x8df928(0x1a8),_0x1de16f['allow']=_0x8df928(0x346),_0x49a625[_0x8df928(0x2e8)]='',_0x49a625['appendChild'](_0x1de16f),ytFallbackFrame=_0x1de16f,_0x1de16f;}function fallbackLoadVideo(_0x3c3629,{autoplay:autoplay=0x1,mute:mute=0x1}={}){const _0xd31a50=_0x1318bc,_0x599a79=document[_0xd31a50(0x3e7)](_0xd31a50(0x3de));if(!_0x599a79)return;_0x599a79['innerHTML']='';const _0x32f017=document[_0xd31a50(0x334)](_0xd31a50(0x3ae));_0x32f017['id']='yt-fallback',_0x32f017['width']='1',_0x32f017[_0xd31a50(0x251)]='1',_0x32f017['style'][_0xd31a50(0x316)]=_0xd31a50(0x370),_0x32f017[_0xd31a50(0x2f6)][_0xd31a50(0x26b)]=_0xd31a50(0x1a8),_0x32f017[_0xd31a50(0x2f6)][_0xd31a50(0x230)]='-9999px',_0x32f017[_0xd31a50(0x461)]=_0xd31a50(0x346),_0x32f017[_0xd31a50(0x2d4)]=buildFallbackSrc(_0x3c3629,{'autoplay':autoplay,'mute':mute}),_0x599a79[_0xd31a50(0x27e)](_0x32f017),ytFallbackFrame=_0x32f017,ytFallbackIsPlaying=!!autoplay;try{const _0x1dcc71=document[_0xd31a50(0x3e7)](_0xd31a50(0x436));if(_0x1dcc71)_0x1dcc71['textContent']=ytFallbackIsPlaying?'‚è∏Ô∏è':'‚ñ∂Ô∏è';}catch(_0x59bb89){}}function fallbackPostMessage(_0x37f517,_0x2fbc95=[]){const _0xf65e30=_0x1318bc;try{if(!ytFallbackFrame||!ytFallbackFrame[_0xf65e30(0x37b)])return;ytFallbackFrame['contentWindow'][_0xf65e30(0x392)](JSON[_0xf65e30(0x484)]({'event':_0xf65e30(0x442),'func':_0x37f517,'args':_0x2fbc95}),'https://www.youtube.com');}catch(_0x123f95){}}function fallbackPlay(){const _0x1d3505=_0x1318bc;fallbackPostMessage(_0x1d3505(0x4a3));}function fallbackStop(){const _0x4498e0=_0x1318bc;try{ytFallbackFrame&&(ytFallbackFrame[_0x4498e0(0x2d4)]=_0x4498e0(0x1a0),ytFallbackIsPlaying=![]);}catch(_0x4f8149){}}function fallbackPause(){fallbackStop();}function fallbackUnMute(){const _0x39a4ff=_0x1318bc;fallbackPostMessage(_0x39a4ff(0x2cc));}function fallbackMute(){const _0x102c9c=_0x1318bc;fallbackPostMessage(_0x102c9c(0x3e9));}window[_0x1318bc(0x424)]=function(){const _0x5e042a=_0x1318bc;if(IS_FILE_PROTOCOL){try{window[_0x5e042a(0x21c)]&&window[_0x5e042a(0x21c)][_0x5e042a(0x27a)]();}catch(_0x53e1af){}return;}const _0x3c72fe={'height':'1','width':'1','playerVars':{'autoplay':0x0,'controls':0x0,'playsinline':0x1},'events':{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange},'host':_0x5e042a(0x371)};(window['location'][_0x5e042a(0x28e)]===_0x5e042a(0x421)||window[_0x5e042a(0x41f)][_0x5e042a(0x28e)]==='https:')&&(_0x3c72fe[_0x5e042a(0x2d5)]=window['location']['origin']);ytPlayer=new YT[(_0x5e042a(0x3a3))](_0x5e042a(0x3de),_0x3c72fe);try{window[_0x5e042a(0x21c)]&&window[_0x5e042a(0x21c)][_0x5e042a(0x27a)]();const _0x205d41=document['getElementById'](_0x5e042a(0x296));_0x205d41&&(_0x205d41[_0x5e042a(0x1ee)]='');}catch(_0xea6aea){}};let _ytPrimed=![],_ytUnlocked=![];try{_ytUnlocked=localStorage[_0x1318bc(0x26e)](_0x1318bc(0x283))==='1';}catch(_0x225dba){}function showSoundPermission(){const _0x2ea8e2=_0x1318bc,_0x2c39ff=document[_0x2ea8e2(0x3e7)](_0x2ea8e2(0x409));if(!_0x2c39ff)return;if(_ytUnlocked){_0x2c39ff[_0x2ea8e2(0x322)][_0x2ea8e2(0x330)](_0x2ea8e2(0x393));return;}_0x2c39ff[_0x2ea8e2(0x322)][_0x2ea8e2(0x28c)](_0x2ea8e2(0x393));}function hideSoundPermission(){const _0x4f32d4=_0x1318bc,_0x21db81=document['getElementById'](_0x4f32d4(0x409));if(!_0x21db81)return;_0x21db81[_0x4f32d4(0x322)][_0x4f32d4(0x330)]('show');}function unlockAudioChain(){const _0x48b3e9=_0x1318bc;try{if(AUDIO_CTX&&typeof AUDIO_CTX[_0x48b3e9(0x363)]===_0x48b3e9(0x3a9))AUDIO_CTX['resume']();}catch(_0x58a710){}try{if(IS_FILE_PROTOCOL)fallbackUnMute(),fallbackPlay();else ytPlayer&&ytPlayer['unMute']&&(ytPlayer['unMute'](),ytPlayer[_0x48b3e9(0x4a3)]());}catch(_0x1159d8){}_ytUnlocked=!![];try{localStorage[_0x48b3e9(0x2be)](_0x48b3e9(0x283),'1');}catch(_0x2a9571){}hideSoundPermission(),toast('√Çm\x20thanh\x20ƒë√£\x20ƒë∆∞·ª£c\x20b·∫≠t!');}function onPlayerReady(_0x3028fc){const _0x481fc1=_0x1318bc;try{const _0x302eb8=ytPlayer&&ytPlayer[_0x481fc1(0x1da)]?ytPlayer[_0x481fc1(0x1da)]():null;_0x302eb8&&_0x302eb8[_0x481fc1(0x35f)](_0x481fc1(0x461),_0x481fc1(0x346));}catch(_0x347ab5){}try{if(ytPlayer&&ytPlayer['setVolume'])ytPlayer[_0x481fc1(0x43b)](data&&data[_0x481fc1(0x218)]&&data[_0x481fc1(0x218)]['youtubeVolume']||0x50);}catch(_0x2be9e8){}try{const _0x2eecbf=getActiveVideoId&&getActiveVideoId();if(_0x2eecbf&&ytPlayer&&ytPlayer[_0x481fc1(0x3e9)]&&ytPlayer[_0x481fc1(0x4a3)]){ytPlayer[_0x481fc1(0x3e9)](),ytPlayer[_0x481fc1(0x4a3)](),_ytPrimed=!![];const _0x1153f8=()=>{const _0x177b1d=_0x481fc1;if(_ytUnlocked)return;try{unlockAudioChain();}catch(_0x1a4f70){}window['removeEventListener'](_0x177b1d(0x38b),_0x1153f8,!![]),window[_0x177b1d(0x415)](_0x177b1d(0x3af),_0x1153f8,!![]);};window['addEventListener'](_0x481fc1(0x38b),_0x1153f8,!![]),window['addEventListener'](_0x481fc1(0x3af),_0x1153f8,!![]),showSoundPermission();}}catch(_0x262b04){}updateYouTubePlayer();}function onPlayerStateChange(_0x5ce175){const _0x43749e=_0x1318bc,_0x5d4a62=$(_0x43749e(0x20c));_0x5ce175['data']==YT[_0x43749e(0x3cf)][_0x43749e(0x301)]?(_0x5d4a62[_0x43749e(0x1ee)]='‚è∏Ô∏è',hideSoundPermission()):_0x5d4a62[_0x43749e(0x1ee)]='‚ñ∂Ô∏è';if(_0x5ce175['data']===YT[_0x43749e(0x3cf)][_0x43749e(0x3e2)]){if(!ytUserPaused)ytPlayer[_0x43749e(0x4a3)]();}}async function ytFadeTo(_0x412e81,_0x5e1dda=0xfa){const _0x4aeb6a=_0x1318bc;try{if(!ytPlayer||!ytPlayer[_0x4aeb6a(0x387)]||!ytPlayer[_0x4aeb6a(0x43b)])return;ytPlayer[_0x4aeb6a(0x2cc)]();const _0x20fd33=ytPlayer['getVolume'](),_0x1cdd0f=_0x412e81-_0x20fd33;if(Math[_0x4aeb6a(0x396)](_0x1cdd0f)<0x1||_0x5e1dda<=0x0){ytPlayer[_0x4aeb6a(0x43b)](_0x412e81);return;}const _0x7359b=performance[_0x4aeb6a(0x429)]();await new Promise(_0x5c38cd=>{const _0x1a2b3b=_0x41e00d=>{const _0x4ee83d=_0x2a57,_0x5b74bb=Math[_0x4ee83d(0x1b3)](0x1,(_0x41e00d-_0x7359b)/_0x5e1dda),_0x37f97d=Math[_0x4ee83d(0x388)](_0x20fd33+_0x1cdd0f*_0x5b74bb);ytPlayer[_0x4ee83d(0x43b)](_0x37f97d);if(_0x5b74bb<0x1)requestAnimationFrame(_0x1a2b3b);else _0x5c38cd();};requestAnimationFrame(_0x1a2b3b);});}catch(_0x2fe827){}}async function ytFadeInPlay(_0x4cce94=0xdc){const _0x34e40b=_0x1318bc;try{const _0x6e3f61=Math['max'](0x0,Math[_0x34e40b(0x1b3)](0x64,data&&data['settings']&&data['settings']['youtubeVolume']||0x50));if(!IS_FILE_PROTOCOL){if(!ytPlayer)return;ytPlayer['unMute'](),ytPlayer[_0x34e40b(0x4a3)]();try{ytPlayer['setVolume'](0x0);}catch(_0x3a4b3c){}await ytFadeTo(_0x6e3f61,_0x4cce94);}else{const _0x590b74=getActiveVideoId();_0x590b74&&fallbackLoadVideo(_0x590b74,{'autoplay':0x1,'mute':0x0});}}catch(_0x5f0a2f){}}async function ytFadeOutPause(_0x57f04e=0xb4){const _0x33c95e=_0x1318bc;try{const _0x247f44=Math[_0x33c95e(0x380)](0x0,Math[_0x33c95e(0x1b3)](0x64,data&&data[_0x33c95e(0x218)]&&data[_0x33c95e(0x218)][_0x33c95e(0x4b3)]||0x50));if(!IS_FILE_PROTOCOL){if(!ytPlayer)return;await ytFadeTo(0x0,_0x57f04e);try{ytPlayer[_0x33c95e(0x49e)](),ytPlayer[_0x33c95e(0x43b)](_0x247f44);}catch(_0x380b2e){}}else try{fallbackPause();}catch(_0x33f25f){}}catch(_0x30d3a2){}}async function updateYouTubePlayer(){const _0x16cf64=_0x1318bc,_0x2574b1=getActiveVideoId();if(data['settings']['useYtThumbnailAsBg']&&_0x2574b1){const _0x4d7f6c=_0x16cf64(0x286)+_0x2574b1+_0x16cf64(0x486),_0x501ff5=new Image();_0x501ff5[_0x16cf64(0x432)]=async()=>{const _0x4c2ba2=_0x16cf64;data['settings'][_0x4c2ba2(0x468)]=_0x4d7f6c,await saveData(),applyCustomBg();},_0x501ff5[_0x16cf64(0x384)]=async()=>{const _0x2cf9b9=_0x16cf64,_0x2322fa=_0x2cf9b9(0x286)+_0x2574b1+'/hqdefault.jpg';data[_0x2cf9b9(0x218)][_0x2cf9b9(0x468)]=_0x2322fa,await saveData(),applyCustomBg();},_0x501ff5['src']=_0x4d7f6c;}else!_0x2574b1&&(data[_0x16cf64(0x218)][_0x16cf64(0x468)]='',await saveData(),applyCustomBg());if(IS_FILE_PROTOCOL){if(!_0x2574b1){fallbackStop(),hideSoundPermission();return;}const _0x406497=_ytUnlocked?0x0:0x1;fallbackLoadVideo(_0x2574b1,{'autoplay':0x1,'mute':_0x406497});!_ytUnlocked&&showSoundPermission();return;}if(!ytPlayer||!ytPlayer[_0x16cf64(0x23b)]){try{ensureYouTubeAPI();}catch(_0x599798){}return;}if(!_0x2574b1){if(ytPlayer[_0x16cf64(0x39c)])ytPlayer[_0x16cf64(0x39c)]();hideSoundPermission();return;}ytPlayer[_0x16cf64(0x23b)](_0x2574b1),ytPlayer[_0x16cf64(0x43b)](data[_0x16cf64(0x218)][_0x16cf64(0x4b3)]);}function toggleYtSound(){const _0x586b09=_0x1318bc;if(!_ytUnlocked){try{ensureAudio();}catch(_0x1cd488){}try{unlockAudioChain();}catch(_0x54fb3c){}return;}if(IS_FILE_PROTOCOL){const _0x44e769=getActiveVideoId();if(!ytFallbackFrame||!ytFallbackFrame['isConnected']){if(!_0x44e769){toast(_0x586b09(0x1fe));return;}fallbackLoadVideo(_0x44e769,{'autoplay':0x1,'mute':0x0}),ytFallbackIsPlaying=!![];try{const _0x122fda=document['getElementById'](_0x586b09(0x436));if(_0x122fda)_0x122fda[_0x586b09(0x1ee)]='‚è∏Ô∏è';}catch(_0x4f1eaa){}toast(_0x586b09(0x44b));return;}if(ytFallbackIsPlaying)fallbackPostMessage(_0x586b09(0x49e)),ytFallbackIsPlaying=![],toast(_0x586b09(0x464));else{if(!_0x44e769){toast('Ch∆∞a\x20c√≥\x20link\x20h·ª£p\x20l·ªá.\x20D√°n\x20link\x20r·ªìi\x20b·∫•m\x20‚ñ∂Ô∏è.');return;}fallbackPostMessage('playVideo'),ytFallbackIsPlaying=!![],toast(_0x586b09(0x44b));}try{const _0x3c427f=document[_0x586b09(0x3e7)](_0x586b09(0x436));if(_0x3c427f)_0x3c427f[_0x586b09(0x1ee)]=ytFallbackIsPlaying?'‚è∏Ô∏è':'‚ñ∂Ô∏è';}catch(_0xf07e55){}return;}if(!ytPlayer||typeof ytPlayer[_0x586b09(0x4aa)]!==_0x586b09(0x3a9)){try{ensureYouTubeAPI();}catch(_0x4d0080){}return;}const _0xb67e55=ytPlayer['getPlayerState']();_0xb67e55===YT[_0x586b09(0x3cf)][_0x586b09(0x301)]||_0xb67e55===YT[_0x586b09(0x3cf)][_0x586b09(0x3fd)]?(ytFadeOutPause(),ytUserPaused=!![],toast(_0x586b09(0x464))):(ytFadeInPlay(),ytUserPaused=![],toast(_0x586b09(0x44b)));}function bindEvents(){const _0x5e374f=_0x1318bc;try{const _0x41ffb7=document[_0x5e374f(0x3f3)]('#welcomePanel\x20p');_0x41ffb7&&(_0x41ffb7['innerHTML']=_0x5e374f(0x325));}catch(_0xe133e9){}on($(_0x5e374f(0x30a)),_0x5e374f(0x21b),toggleBackgroundView),on($(_0x5e374f(0x289)),_0x5e374f(0x21b),()=>{const _0x964e54=_0x5e374f;$(_0x964e54(0x275))['classList']['remove'](_0x964e54(0x393));try{releaseFocus();}catch(_0x347c25){}}),on($('#btnAddTopic'),'click',()=>showInputModal(_0x5e374f(0x3be),async _0x2b155f=>{const _0x3c2614=_0x5e374f;if(!_0x2b155f)return;data['topics'][_0x3c2614(0x42e)]({'id':uid('t'),'name':_0x2b155f,'subtopics':[]}),await saveData(),renderTopics();})),on($(_0x5e374f(0x3fa)),_0x5e374f(0x21b),()=>storageManager[_0x5e374f(0x35e)](data)),on($('#importFile'),_0x5e374f(0x404),_0x4c3203=>{const _0x401447=_0x5e374f,_0x9e3fd8=_0x4c3203[_0x401447(0x31c)]['files'][0x0];if(!_0x9e3fd8)return;storageManager['importData'](_0x9e3fd8)[_0x401447(0x495)](async _0x43c782=>{data=_0x43c782,normalizeDataStructure(data),await ensureValidSelection(),await seedAchievedMilestones(),toast('ƒê√£\x20nh·∫≠p\x20d·ªØ\x20li·ªáu\x20th√†nh\x20c√¥ng!'),renderAll();})[_0x401447(0x3c6)](_0x4e69f4=>toast(_0x401447(0x3d4)+_0x4e69f4[_0x401447(0x3b0)])),_0x4c3203[_0x401447(0x31c)][_0x401447(0x470)]=null;}),on($('#btnRestoreBackup'),_0x5e374f(0x21b),()=>{const _0x3eab49=_0x5e374f,_0x266510=$(_0x3eab49(0x1c7)),_0x3fd071=_0x266510?_0x266510['value']:'';if(!_0x3fd071){toast(_0x3eab49(0x34d));return;}showConfirmModal(_0x3eab49(0x333),'B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20ph·ª•c\x20h·ªìi\x20d·ªØ\x20li·ªáu\x20t·ª´\x20ng√†y\x20'+new Date(_0x3fd071)[_0x3eab49(0x1c6)]()+_0x3eab49(0x315),_0x59d39e=>{const _0x3a68fb=_0x3eab49;_0x59d39e&&storageManager[_0x3a68fb(0x28b)](_0x3fd071)[_0x3a68fb(0x495)](_0x33ccff=>{const _0x316a53=_0x3a68fb;data=_0x33ccff,toast('Ph·ª•c\x20h·ªìi\x20d·ªØ\x20li·ªáu\x20th√†nh\x20c√¥ng!\x20T·∫£i\x20l·∫°i\x20trang...'),setTimeout(()=>window['location'][_0x316a53(0x266)](),0x5dc);})[_0x3a68fb(0x3c6)](_0x625ea8=>{const _0x54f104=_0x3a68fb;toast(_0x54f104(0x2f8)+_0x625ea8[_0x54f104(0x3b0)]);});});}),on($('#set_theme_color'),_0x5e374f(0x3a5),_0x56f852=>{const _0x5c56ae=_0x5e374f,_0x357017=_0x56f852['target'][_0x5c56ae(0x470)];applyTheme(_0x357017);if(_0x357017==='light'||_0x357017===_0x5c56ae(0x1d4)){const _0x3db068=$('#set_ytThumbAsBg');_0x3db068&&(_0x3db068['checked']=![],toast(_0x5c56ae(0x3fb),0x7d0));try{document[_0x5c56ae(0x2bf)][_0x5c56ae(0x2f6)][_0x5c56ae(0x2b7)](_0x5c56ae(0x2a1),_0x5c56ae(0x24b));}catch(_0x35b951){}}else{const _0x24037a=$(_0x5c56ae(0x1f2));_0x24037a&&(_0x24037a['checked']=!![]);try{updateYouTubePlayer();}catch(_0x5605a6){}}}),on($(_0x5e374f(0x382)),'click',openSettings),on($(_0x5e374f(0x227)),'click',()=>{const _0x565ee3=_0x5e374f;switchView(_0x565ee3(0x295)),$('#btnAddTopic')[_0x565ee3(0x21b)]();}),on($(_0x5e374f(0x2c4)),_0x5e374f(0x21b),()=>{const _0xf2a5d9=_0x5e374f;renderDashboard(),$('#modalDashboard')[_0xf2a5d9(0x322)]['add'](_0xf2a5d9(0x393));}),on($(_0x5e374f(0x23a)),_0x5e374f(0x21b),()=>{const _0x5f5061=_0x5e374f;$(_0x5f5061(0x1cf))[_0x5f5061(0x322)]['remove']('show');}),on($('#btnCloseSettings'),'click',closeSettings),on($(_0x5e374f(0x1ae)),'click',saveSettings),on($(_0x5e374f(0x36b)),_0x5e374f(0x21b),setDefaults),on($(_0x5e374f(0x2f0)),'click',()=>{const _0xd6ee45=_0x5e374f;ensureAudio(),playSound(_0xd6ee45(0x4a4));}),on($(_0x5e374f(0x3ed)),_0x5e374f(0x21b),_0x559be6=>{const _0x380980=_0x5e374f;_0x559be6[_0x380980(0x494)]();const _0xdb313=$(_0x380980(0x1de));if(_0xdb313)_0xdb313[_0x380980(0x322)][_0x380980(0x261)](_0x380980(0x2da));}),on($(_0x5e374f(0x24e)),_0x5e374f(0x21b),async()=>{const _0x25b062=_0x5e374f,_0x105e83=getCurrentSubtopic();if(!_0x105e83)return;const _0x2adf0d=pendingNoteSessionId,_0x11486b=_0x105e83[_0x25b062(0x23e)][_0x25b062(0x30d)](_0x568409=>_0x568409['id']===_0x2adf0d);_0x11486b&&(_0x11486b[_0x25b062(0x4ad)]=$('#noteText')[_0x25b062(0x470)][_0x25b062(0x3f0)](),await saveData(),renderStatsHistory(),toast(_0x25b062(0x24c))),closeNoteModal();}),on($(_0x5e374f(0x1a1)),_0x5e374f(0x21b),()=>closeNoteModal()),on($('#btnAddGeneralNote'),_0x5e374f(0x21b),addGeneralNote),on($(_0x5e374f(0x355)),_0x5e374f(0x21b),handleSummarizeNote),on($('#btnSendMessage'),_0x5e374f(0x21b),handleSendMessage),on($(_0x5e374f(0x1fd)),'keydown',_0x1740ae=>{const _0x419226=_0x5e374f;if(_0x1740ae[_0x419226(0x1c9)]===_0x419226(0x451))handleSendMessage();}),$$(_0x5e374f(0x214))[_0x5e374f(0x395)](_0x1515e1=>{on(_0x1515e1,'click',()=>{const _0x229c21=_0x2a57,_0x172653=_0x1515e1['dataset'][_0x229c21(0x2cd)];$(_0x229c21(0x1fd))[_0x229c21(0x470)]=_0x172653,$(_0x229c21(0x1fd))['focus']();});}),on($(_0x5e374f(0x2f3)),_0x5e374f(0x21b),clearChat),on($(_0x5e374f(0x1fa)),_0x5e374f(0x21b),addSubtopicTask),on($(_0x5e374f(0x1f4)),_0x5e374f(0x3af),_0x108e97=>{const _0x328e99=_0x5e374f;if(_0x108e97[_0x328e99(0x1c9)]==='Enter')addSubtopicTask();}),on($(_0x5e374f(0x20c)),_0x5e374f(0x21b),toggleYtSound),on($(_0x5e374f(0x378)),'click',()=>{ensureAudio(),unlockAudioChain();}),on($('#ytSoundVolume'),_0x5e374f(0x3a5),_0x4de707=>{const _0x5b4bd8=_0x5e374f,_0x6dcbbd=parseInt(_0x4de707['target'][_0x5b4bd8(0x470)],0xa);ytPlayer&&ytPlayer['setVolume']&&ytPlayer[_0x5b4bd8(0x43b)](_0x6dcbbd);}),on($('#set_youtubeUrl'),'input',handleYoutubeUrlInput),$$(_0x5e374f(0x32b))['forEach'](_0x30a242=>{const _0x37bbd3=_0x5e374f;_0x30a242[_0x37bbd3(0x2b2)](_0x37bbd3(0x21b),()=>{const _0x558dc1=_0x37bbd3,_0x5610d1=_0x30a242[_0x558dc1(0x3db)][_0x558dc1(0x297)],_0xb5b42e=data?.[_0x558dc1(0x218)]?.['currentView']||_0x558dc1(0x226);if(_0xb5b42e===_0x5610d1&&_0x5610d1!==_0x558dc1(0x226))switchView(_0x558dc1(0x226));else switchView(_0x5610d1);});}),$$('.tab-btn')['forEach'](_0x587531=>{const _0x1f471d=_0x5e374f;_0x587531[_0x1f471d(0x2b2)](_0x1f471d(0x21b),()=>{const _0x29f20a=_0x1f471d,_0x402fcd=_0x587531[_0x29f20a(0x3db)][_0x29f20a(0x483)],_0x26abcf=_0x587531['closest'](_0x29f20a(0x49d));if(!_0x26abcf)return;_0x26abcf[_0x29f20a(0x32c)](_0x29f20a(0x25f))['forEach'](_0x186a43=>_0x186a43['classList']['remove']('active')),_0x587531['classList'][_0x29f20a(0x28c)](_0x29f20a(0x2ef)),_0x26abcf['querySelectorAll']('.tab-content')['forEach'](_0x10e7be=>{const _0x160d6c=_0x29f20a;_0x10e7be[_0x160d6c(0x322)]['remove']('active'),_0x10e7be[_0x160d6c(0x2f6)][_0x160d6c(0x212)]=_0x160d6c(0x24b);});const _0x29a051=_0x26abcf[_0x29f20a(0x3f3)]('#'+_0x402fcd);_0x29a051&&(_0x29a051[_0x29f20a(0x322)][_0x29f20a(0x28c)]('active'),_0x29a051[_0x29f20a(0x2f6)][_0x29f20a(0x212)]=_0x29f20a(0x45f),_0x26abcf[_0x29f20a(0x1c2)](_0x29f20a(0x479))&&(_0x29a051[_0x29f20a(0x2f6)][_0x29f20a(0x212)]=_0x29f20a(0x357)));});});const _0x3a9e04=$('#methodEditorContentInput');function _0x449760(_0x5e36d7,_0x491fb9=null){const _0x5a4b26=_0x5e374f;try{document[_0x5a4b26(0x2eb)](_0x5a4b26(0x1ac),![],!![]);}catch(_0x2c86f2){}try{document['execCommand'](_0x5e36d7,![],_0x491fb9);}catch(_0x256ad5){}if(_0x3a9e04)_0x3a9e04[_0x5a4b26(0x425)]();}on($(_0x5e374f(0x3ff)),'click',()=>_0x449760(_0x5e374f(0x2ee))),on($(_0x5e374f(0x3cd)),_0x5e374f(0x21b),()=>_0x449760(_0x5e374f(0x1d0))),on($(_0x5e374f(0x199)),_0x5e374f(0x21b),()=>_0x449760('formatBlock',_0x5e374f(0x43f))),on($('#toolList'),_0x5e374f(0x21b),()=>_0x449760(_0x5e374f(0x331))),on($('#toolBullet'),'click',()=>_0x449760(_0x5e374f(0x233)));const _0x69b267=$(_0x5e374f(0x3c3)),_0x4b562f=$(_0x5e374f(0x4b2));on($(_0x5e374f(0x490)),_0x5e374f(0x21b),_0xd0b1ef=>{const _0x233c6e=_0x5e374f;if(!_0x4b562f)return;_0xd0b1ef[_0x233c6e(0x44a)](),_0x4b562f[_0x233c6e(0x322)][_0x233c6e(0x261)](_0x233c6e(0x2da));}),$$(_0x5e374f(0x473))[_0x5e374f(0x395)](_0x5e7db8=>{const _0x17f3fe=_0x5e374f;on(_0x5e7db8,_0x17f3fe(0x21b),_0x338839=>{const _0x24e810=_0x17f3fe;_0x338839[_0x24e810(0x494)]();const _0x4071e1=_0x5e7db8[_0x24e810(0x3db)]['color']||'';let _0x499036=_0x4071e1;try{const _0x5db507=_0x4071e1[_0x24e810(0x40d)](/--[a-zA-Z0-9_-]+/);if(_0x5db507)_0x499036=getComputedStyle(document[_0x24e810(0x2bf)])['getPropertyValue'](_0x5db507[0x0])[_0x24e810(0x3f0)]();}catch(_0x595d22){}_0x449760(_0x24e810(0x3d5),_0x499036);if(_0x4b562f)_0x4b562f[_0x24e810(0x322)][_0x24e810(0x28c)]('hidden');});}),on(document,'click',_0x28a036=>{const _0x49b0c=_0x5e374f;if(!_0x69b267||!_0x4b562f)return;!_0x69b267[_0x49b0c(0x326)](_0x28a036[_0x49b0c(0x31c)])&&!_0x4b562f[_0x49b0c(0x322)][_0x49b0c(0x326)](_0x49b0c(0x2da))&&_0x4b562f['classList'][_0x49b0c(0x28c)](_0x49b0c(0x2da));});function _0x40b700(_0x418ab6){const _0x45925d=_0x5e374f,_0x26fda3=data?.['settings']?.[_0x45925d(0x307)]||[],_0x5a0660=_0x418ab6?_0x26fda3[_0x45925d(0x30d)](_0x105770=>_0x105770['id']===_0x418ab6):null;$(_0x45925d(0x391))[_0x45925d(0x470)]=_0x5a0660&&_0x5a0660['id']||'',$(_0x45925d(0x320))[_0x45925d(0x1ee)]=_0x5a0660?_0x45925d(0x45e):_0x45925d(0x465),$(_0x45925d(0x20b))[_0x45925d(0x470)]=_0x5a0660&&_0x5a0660[_0x45925d(0x210)]||'';const _0x55e799=$(_0x45925d(0x197));if(_0x55e799)_0x55e799[_0x45925d(0x2e8)]=_0x5a0660&&_0x5a0660['content']||'';$(_0x45925d(0x1e8))[_0x45925d(0x322)][_0x45925d(0x28c)](_0x45925d(0x393));try{trapFocus($('#modalMethodEditor'));}catch(_0x159577){}try{const _0x21cbcb=$(_0x45925d(0x1b9));if(_0x21cbcb){const _0x181ecc=!!(data?.[_0x45925d(0x218)]?.[_0x45925d(0x1ed)]&&data[_0x45925d(0x218)][_0x45925d(0x1ed)][_0x45925d(0x3f0)]());_0x21cbcb['disabled']=!_0x181ecc,_0x21cbcb[_0x45925d(0x210)]=_0x181ecc?_0x45925d(0x195):'Vui\x20l√≤ng\x20th√™m\x20Gemini\x20API\x20Key\x20trong\x20C√†i\x20ƒë·∫∑t\x20ƒë·ªÉ\x20s·ª≠\x20d·ª•ng\x20t√≠nh\x20nƒÉng\x20n√†y.';}}catch(_0x24c6cf){}}on($(_0x5e374f(0x438)),'click',()=>{const _0x1f7ff6=_0x5e374f;$(_0x1f7ff6(0x1e8))[_0x1f7ff6(0x322)][_0x1f7ff6(0x330)](_0x1f7ff6(0x393));try{releaseFocus();}catch(_0x5ec726){}}),on($(_0x5e374f(0x2c6)),'click',async()=>{const _0x530e78=_0x5e374f,_0x59fd5d=$('#methodEditorId')[_0x530e78(0x470)]||uid('m'),_0x288644=($('#methodEditorTitleInput')[_0x530e78(0x470)]||'')[_0x530e78(0x3f0)](),_0xbc5a9b=$(_0x530e78(0x197)),_0x21926a=_0xbc5a9b?_0xbc5a9b[_0x530e78(0x2e8)]||'':'';if(!Array[_0x530e78(0x366)](data[_0x530e78(0x218)][_0x530e78(0x307)]))data['settings'][_0x530e78(0x307)]=[];const _0x1acff7=data[_0x530e78(0x218)][_0x530e78(0x307)][_0x530e78(0x48f)](_0x1f9086=>_0x1f9086['id']===_0x59fd5d),_0xfa554d={'id':_0x59fd5d,'title':_0x288644,'content':_0x21926a};if(_0x1acff7>=0x0)data[_0x530e78(0x218)][_0x530e78(0x307)][_0x1acff7]=_0xfa554d;else data[_0x530e78(0x218)][_0x530e78(0x307)][_0x530e78(0x455)](_0xfa554d);await storageManager['updateSettings'](data['settings']),renderMethods(),$('#modalMethodEditor')['classList'][_0x530e78(0x330)](_0x530e78(0x393));try{releaseFocus();}catch(_0x1f6ec8){}}),on($('#btnAutoFormat'),_0x5e374f(0x21b),async()=>{const _0xa2c728=_0x5e374f,_0x3c3c0d=$('#methodEditorContentInput');if(!_0x3c3c0d)return;const _0x4d9e73=(_0x3c3c0d[_0xa2c728(0x1ee)]||'')[_0xa2c728(0x3f0)]();if(!_0x4d9e73||_0x4d9e73[_0xa2c728(0x469)]<0x14){toast(_0xa2c728(0x348));return;}const _0x2ff9b4=$(_0xa2c728(0x1b9));_0x2ff9b4&&(_0x2ff9b4[_0xa2c728(0x36f)]=!![],_0x2ff9b4[_0xa2c728(0x2e8)]='<div\x20class=\x22spinner\x22></div>');const _0x538f4f='Ph√¢n\x20t√≠ch\x20v√†\x20ƒë·ªãnh\x20d·∫°ng\x20l·∫°i\x20ƒëo·∫°n\x20vƒÉn\x20b·∫£n\x20sau\x20ƒë√¢y\x20th√†nh\x20m√£\x20HTML\x20s·∫°ch.\x20S·ª≠\x20d·ª•ng\x20c√°c\x20th·∫ª\x20sau:\x0a-\x20D√πng\x20<h4>\x20cho\x20c√°c\x20ti√™u\x20ƒë·ªÅ\x20ch√≠nh.\x0a-\x20D√πng\x20<strong>\x20ƒë·ªÉ\x20nh·∫•n\x20m·∫°nh\x20c√°c\x20thu·∫≠t\x20ng·ªØ\x20ho·∫∑c\x20√Ω\x20t∆∞·ªüng\x20quan\x20tr·ªçng.\x0a-\x20D√πng\x20<i>\x20cho\x20c√°c\x20c√¢u\x20ghi\x20ch√∫\x20ho·∫∑c\x20tr√≠ch\x20d·∫´n.\x0a-\x20D√πng\x20<ol>\x20v√†\x20<li>\x20cho\x20c√°c\x20danh\x20s√°ch\x20c√≥\x20th·ª©\x20t·ª±.\x0a-\x20D√πng\x20<ul>\x20v√†\x20<li>\x20cho\x20c√°c\x20danh\x20s√°ch\x20kh√¥ng\x20c√≥\x20th·ª©\x20t·ª±.\x0a-\x20B·ªçc\x20c√°c\x20ƒëo·∫°n\x20vƒÉn\x20th√¥ng\x20th∆∞·ªùng\x20trong\x20th·∫ª\x20<p>.\x0aVƒÉn\x20b·∫£n\x20c·∫ßn\x20ƒë·ªãnh\x20d·∫°ng:\x0a\x0a\x22'+_0x4d9e73+'\x22',_0x57cefb=await callGeminiAPI(_0x538f4f);_0x57cefb?(_0x3c3c0d[_0xa2c728(0x2e8)]=_0x57cefb,toast(_0xa2c728(0x491))):toast(_0xa2c728(0x1c3)),_0x2ff9b4&&(_0x2ff9b4[_0xa2c728(0x36f)]=![],_0x2ff9b4['innerHTML']=_0xa2c728(0x20a));}),on($(_0x5e374f(0x319)),_0x5e374f(0x21b),()=>_0x40b700());const _0x57af29=document[_0x5e374f(0x3f3)]('#view-methods');_0x57af29&&_0x57af29['addEventListener'](_0x5e374f(0x21b),_0xfcd2bb=>{const _0x5b4a38=_0x5e374f,_0x3dc766=_0xfcd2bb[_0x5b4a38(0x31c)][_0x5b4a38(0x1c2)]&&_0xfcd2bb[_0x5b4a38(0x31c)][_0x5b4a38(0x1c2)]('.method-edit'),_0x174242=!_0x3dc766&&_0xfcd2bb[_0x5b4a38(0x31c)][_0x5b4a38(0x1c2)]&&_0xfcd2bb[_0x5b4a38(0x31c)]['closest'](_0x5b4a38(0x41e));if(_0x3dc766){_0xfcd2bb[_0x5b4a38(0x494)](),_0xfcd2bb[_0x5b4a38(0x44a)]();const _0x39ec1e=_0x3dc766[_0x5b4a38(0x3db)]['id'];if(_0x39ec1e)_0x40b700(_0x39ec1e);return;}if(_0x174242){_0xfcd2bb['preventDefault'](),_0xfcd2bb['stopPropagation']();const _0x598e2e=_0x174242['dataset']['id'];if(!_0x598e2e)return;const _0x335ef0=data?.[_0x5b4a38(0x218)]?.['methods']||[],_0x376eaf=_0x335ef0['find'](_0x459b08=>_0x459b08['id']===_0x598e2e);if(!_0x376eaf)return;showConfirmModal(_0x5b4a38(0x3a8),'X√≥a\x20tri\x20th·ª©c\x20\x22'+(_0x376eaf[_0x5b4a38(0x210)]||'')+'\x22?',async _0x454ac2=>{const _0x47a4=_0x5b4a38;if(!_0x454ac2)return;data[_0x47a4(0x218)][_0x47a4(0x307)]=_0x335ef0[_0x47a4(0x1be)](_0x5d4e60=>_0x5d4e60['id']!==_0x598e2e),await storageManager[_0x47a4(0x201)](data[_0x47a4(0x218)]),renderMethods();});}});$$('#timerPresetSelector\x20button')['forEach'](_0x5346ec=>{const _0x518dd1=_0x5e374f;_0x5346ec[_0x518dd1(0x2b2)](_0x518dd1(0x21b),()=>{const _0x37399a=_0x518dd1;editingPreset=_0x5346ec[_0x37399a(0x3db)][_0x37399a(0x410)],highlightPresetSelector(),loadEditingPresetFields();});}),$$('.presets\x20button')['forEach'](_0x142fb8=>{const _0xfb066=_0x5e374f;_0x142fb8[_0xfb066(0x2b2)](_0xfb066(0x21b),_0x2e66eb=>{const _0x56e528=_0xfb066,_0x49c5da=_0x2e66eb['target'][_0x56e528(0x3db)][_0x56e528(0x3e0)],_0x3bc979=data[_0x56e528(0x218)][_0x56e528(0x3e0)];if(_0x49c5da===_0x3bc979)return;timer[_0x56e528(0x1a3)]!==_0x56e528(0x1d7)?showConfirmModal('X√°c\x20nh·∫≠n\x20chuy·ªÉn\x20ƒë·ªïi','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20chuy·ªÉn\x20sang\x20Ki·ªÉu\x20'+_0x49c5da+_0x56e528(0x443),_0x575997=>{const _0x445f4a=_0x56e528;_0x575997&&(timer[_0x445f4a(0x435)](),timer[_0x445f4a(0x48d)](_0x49c5da),renderAll(),toast(_0x445f4a(0x3d8)+_0x49c5da+'.'));}):(timer['setPreset'](_0x49c5da),renderAll(),toast('ƒê√£\x20chuy·ªÉn\x20sang\x20Ki·ªÉu\x20'+_0x49c5da+'.'));});}),on($(_0x5e374f(0x242)),_0x5e374f(0x21b),()=>timer[_0x5e374f(0x364)]()),on($(_0x5e374f(0x300)),_0x5e374f(0x21b),()=>timer['finishFlowSession']()),on($(_0x5e374f(0x3df)),'click',()=>timer['pause']()),on($(_0x5e374f(0x27c)),'click',()=>timer[_0x5e374f(0x363)]()),on($(_0x5e374f(0x39d)),_0x5e374f(0x21b),()=>timer[_0x5e374f(0x39a)]()),on($(_0x5e374f(0x2ff)),_0x5e374f(0x21b),()=>timer['reset']()),on($(_0x5e374f(0x2d3)),'click',()=>timer[_0x5e374f(0x36c)]()),on($(_0x5e374f(0x434)),_0x5e374f(0x404),_0xb13ab2=>{const _0x3c4e71=_0x5e374f;handleFileUpload(_0xb13ab2[_0x3c4e71(0x31c)][_0x3c4e71(0x317)][0x0],async _0x30922e=>{const _0x560cb8=_0x3c4e71;data[_0x560cb8(0x218)][_0x560cb8(0x468)]=_0x30922e,await saveData(),applyCustomBg(),toast(_0x560cb8(0x2d2));}),_0xb13ab2[_0x3c4e71(0x31c)][_0x3c4e71(0x470)]=null;}),on($(_0x5e374f(0x38a)),_0x5e374f(0x21b),async()=>{const _0x2b3e43=_0x5e374f;data[_0x2b3e43(0x218)][_0x2b3e43(0x468)]='',data['settings']['useYtThumbnailAsBg']=![],await saveData(),applyCustomBg(),toast(_0x2b3e43(0x460)),$(_0x2b3e43(0x479))['classList'][_0x2b3e43(0x326)](_0x2b3e43(0x393))&&openSettings();}),on($(_0x5e374f(0x401)),_0x5e374f(0x404),_0x48fa22=>{const _0x4f392c=_0x5e374f;handleFileUpload(_0x48fa22[_0x4f392c(0x31c)][_0x4f392c(0x317)][0x0],async _0x54cf6e=>{data['settings']['customSounds']['work_end']=_0x54cf6e,await saveData(),toast('ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20L√ÄM\x20VI·ªÜC.');}),_0x48fa22[_0x4f392c(0x31c)][_0x4f392c(0x470)]=null;}),on($(_0x5e374f(0x23d)),_0x5e374f(0x404),_0x3fd15d=>{const _0x431e09=_0x5e374f;handleFileUpload(_0x3fd15d['target']['files'][0x0],async _0x2dfc6f=>{const _0x5d2b6e=_0x2a57;data[_0x5d2b6e(0x218)][_0x5d2b6e(0x340)]['break_end']=_0x2dfc6f,await saveData(),toast(_0x5d2b6e(0x44f));}),_0x3fd15d[_0x431e09(0x31c)][_0x431e09(0x470)]=null;}),on($(_0x5e374f(0x408)),_0x5e374f(0x404),_0x628e97=>{const _0x44c313=_0x5e374f;handleFileUpload(_0x628e97[_0x44c313(0x31c)][_0x44c313(0x317)][0x0],async _0x447389=>{const _0x1218ba=_0x44c313;data[_0x1218ba(0x218)][_0x1218ba(0x340)]['long_end']=_0x447389,await saveData(),toast(_0x1218ba(0x23c));}),_0x628e97[_0x44c313(0x31c)][_0x44c313(0x470)]=null;}),on($(_0x5e374f(0x441)),_0x5e374f(0x21b),toggleFullScreen),document['addEventListener'](_0x5e374f(0x269),updateFullscreenButton),window['addEventListener'](_0x5e374f(0x3af),_0x3a1ea3=>{const _0x477848=_0x5e374f,_0x3dbe7d=(_0x3a1ea3[_0x477848(0x31c)][_0x477848(0x3ac)]||'')[_0x477848(0x344)](),_0x495fa9=[_0x477848(0x3a5),_0x477848(0x3e8),_0x477848(0x39b)]['includes'](_0x3dbe7d);if(_0x3a1ea3[_0x477848(0x276)]===_0x477848(0x437)&&!_0x495fa9){_0x3a1ea3[_0x477848(0x494)]();if(timer[_0x477848(0x1a3)]===_0x477848(0x1d7)||timer[_0x477848(0x1a3)]===_0x477848(0x3bf))timer[_0x477848(0x364)]();else timer[_0x477848(0x1f9)]();}(_0x3a1ea3[_0x477848(0x1c9)]==='n'||_0x3a1ea3[_0x477848(0x1c9)]==='N')&&(!_0x495fa9&&(_0x3a1ea3[_0x477848(0x494)](),timer[_0x477848(0x39a)]()));if(_0x3a1ea3['key']===_0x477848(0x310)){$$(_0x477848(0x4a9))[_0x477848(0x395)](_0x497cb1=>_0x497cb1['classList']['remove']('show'));try{releaseFocus();}catch(_0x1711c9){}}if(_0x3a1ea3[_0x477848(0x476)]&&!_0x495fa9){if(_0x3a1ea3[_0x477848(0x1c9)]===_0x477848(0x34a))_0x3a1ea3['preventDefault'](),_0x53a5d0(0x0,-0xa);else{if(_0x3a1ea3[_0x477848(0x1c9)]==='ArrowDown')_0x3a1ea3[_0x477848(0x494)](),_0x53a5d0(0x0,0xa);else{if(_0x3a1ea3['key']===_0x477848(0x264))_0x3a1ea3[_0x477848(0x494)](),_0x53a5d0(-0xa,0x0);else _0x3a1ea3[_0x477848(0x1c9)]===_0x477848(0x3a2)&&(_0x3a1ea3[_0x477848(0x494)](),_0x53a5d0(0xa,0x0));}}}}),$$(_0x5e374f(0x4a9))[_0x5e374f(0x395)](_0xf0da02=>_0xf0da02[_0x5e374f(0x2b2)](_0x5e374f(0x21b),_0x40e738=>{const _0x308de7=_0x5e374f;if(_0x40e738&&_0x40e738[_0x308de7(0x31c)]&&_0x40e738['target']['id']==='modalMethodEditor')return;if(_0x40e738[_0x308de7(0x31c)]===_0xf0da02){_0xf0da02[_0x308de7(0x322)][_0x308de7(0x330)](_0x308de7(0x393));try{releaseFocus();}catch(_0x408082){}}})),window[_0x5e374f(0x2b2)](_0x5e374f(0x21b),_0x408415=>{const _0x40e386=_0x5e374f;!_0x408415['target'][_0x40e386(0x1c2)](_0x40e386(0x2e0))&&!_0x408415[_0x40e386(0x31c)][_0x40e386(0x1c2)](_0x40e386(0x303))&&closeAllMenus();});try{const _0x4bb20d=document[_0x5e374f(0x3f3)]('.app-content');if(_0x4bb20d)_0x4bb20d['addEventListener']('scroll',closeAllMenus);}catch(_0x3ff393){}try{window[_0x5e374f(0x2b2)]('scroll',closeAllMenus,!![]);}catch(_0x268b3a){}window[_0x5e374f(0x2b2)](_0x5e374f(0x48e),()=>timer[_0x5e374f(0x1e4)](!![]));try{const _0x4ecae4=Array['from'](document['querySelectorAll'](_0x5e374f(0x2b0)));_0x4ecae4[_0x5e374f(0x469)]&&_0x4ecae4[_0x5e374f(0x395)](_0xa425d=>{const _0x54885f=_0x5e374f;_0xa425d[_0x54885f(0x2b2)](_0x54885f(0x261),()=>{const _0x32f7f5=_0x54885f;_0xa425d['open']&&_0x4ecae4[_0x32f7f5(0x395)](_0x3d3e6f=>{const _0x32a643=_0x32f7f5;if(_0x3d3e6f!==_0xa425d)_0x3d3e6f[_0x32a643(0x353)]=![];});});});}catch(_0x31a356){}const _0x3f48c5=$(_0x5e374f(0x265));let _0x30f06a=![],_0x3c88ea,_0x57a614;_0x3f48c5&&(_0x3f48c5[_0x5e374f(0x2b2)]('mousedown',_0x57a865=>{const _0x469c02=_0x5e374f;_0x30f06a=!![];const _0x5cb82d=_0x3f48c5[_0x469c02(0x288)]();_0x3c88ea=_0x57a865['clientX']-_0x5cb82d[_0x469c02(0x230)],_0x57a614=_0x57a865['clientY']-_0x5cb82d['top'],_0x3f48c5[_0x469c02(0x2f6)][_0x469c02(0x43a)]='none';}),document['addEventListener'](_0x5e374f(0x430),_0x272724=>{const _0x2d4b5a=_0x5e374f;if(!_0x30f06a)return;let _0x14eba5=_0x272724['clientX']-_0x3c88ea,_0x582b6f=_0x272724[_0x2d4b5a(0x39e)]-_0x57a614;const _0xc43d59=window['innerWidth']-_0x3f48c5[_0x2d4b5a(0x38f)],_0x214d4a=window[_0x2d4b5a(0x206)]-_0x3f48c5[_0x2d4b5a(0x3c8)];_0x14eba5=Math['max'](0x0,Math[_0x2d4b5a(0x1b3)](_0x14eba5,_0xc43d59)),_0x582b6f=Math[_0x2d4b5a(0x380)](0x0,Math[_0x2d4b5a(0x1b3)](_0x582b6f,_0x214d4a)),_0x3f48c5['style']['left']=_0x14eba5+'px',_0x3f48c5[_0x2d4b5a(0x2f6)][_0x2d4b5a(0x26b)]=_0x582b6f+'px',_0x3f48c5['style'][_0x2d4b5a(0x229)]=_0x2d4b5a(0x3ab),_0x3f48c5['style'][_0x2d4b5a(0x3a4)]='auto';}),document[_0x5e374f(0x2b2)](_0x5e374f(0x313),()=>{const _0x22a500=_0x5e374f;if(!_0x30f06a)return;_0x30f06a=![],_0x3f48c5[_0x22a500(0x2f6)]['transition']='';}));function _0x5d23fd(_0x6c4c79){const _0x1a21ee=_0x5e374f,_0xdb535e=$(_0x1a21ee(0x265));if(!_0xdb535e)return;_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x316)]='fixed',_0xdb535e['style'][_0x1a21ee(0x43a)]='',_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x230)]=_0x1a21ee(0x3ab),_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x26b)]=_0x1a21ee(0x3ab),_0xdb535e['style'][_0x1a21ee(0x3a4)]=_0x1a21ee(0x3ab),_0xdb535e['style'][_0x1a21ee(0x229)]=_0x1a21ee(0x3ab);const _0x46c931=0x10;_0x6c4c79==='tl'&&(_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x230)]=_0x46c931+'px',_0xdb535e['style']['top']=_0x46c931+'px'),_0x6c4c79==='tr'&&(_0xdb535e['style'][_0x1a21ee(0x3a4)]=_0x46c931+'px',_0xdb535e[_0x1a21ee(0x2f6)]['top']=_0x46c931+'px'),_0x6c4c79==='bl'&&(_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x230)]=_0x46c931+'px',_0xdb535e['style'][_0x1a21ee(0x229)]=_0x46c931+'px'),_0x6c4c79==='br'&&(_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x3a4)]=_0x46c931+'px',_0xdb535e[_0x1a21ee(0x2f6)][_0x1a21ee(0x229)]=_0x46c931+'px');}function _0x53a5d0(_0x37b32f,_0x8f6584){const _0x3fe864=_0x5e374f,_0x513992=$('#draggableTimer');if(!_0x513992)return;const _0x486486=_0x513992[_0x3fe864(0x288)](),_0x29800e=Math['max'](0x0,Math[_0x3fe864(0x1b3)](_0x486486[_0x3fe864(0x230)]+_0x37b32f,window['innerWidth']-_0x513992[_0x3fe864(0x38f)])),_0x6286ec=Math[_0x3fe864(0x380)](0x0,Math['min'](_0x486486[_0x3fe864(0x26b)]+_0x8f6584,window[_0x3fe864(0x206)]-_0x513992[_0x3fe864(0x3c8)]));_0x513992[_0x3fe864(0x2f6)]['left']=_0x29800e+'px',_0x513992[_0x3fe864(0x2f6)][_0x3fe864(0x26b)]=_0x6286ec+'px',_0x513992[_0x3fe864(0x2f6)][_0x3fe864(0x3a4)]=_0x3fe864(0x3ab),_0x513992[_0x3fe864(0x2f6)][_0x3fe864(0x229)]=_0x3fe864(0x3ab);}}function toggleBackgroundView(){const _0x419187=_0x1318bc,_0x4435b9=document[_0x419187(0x2bf)];_0x4435b9[_0x419187(0x322)][_0x419187(0x261)](_0x419187(0x3a6));const _0x159a9c=_0x4435b9[_0x419187(0x322)][_0x419187(0x326)](_0x419187(0x3a6)),_0x4f377e=$(_0x419187(0x30a));if(!_0x4f377e)return;_0x159a9c?(_0x4f377e['title']=_0x419187(0x2ba),_0x4f377e[_0x419187(0x2e8)]=_0x419187(0x19f)):(_0x4f377e['title']='·∫®n\x20giao\x20di·ªán',_0x4f377e[_0x419187(0x2e8)]=_0x419187(0x335));}function updateMainViewVisibility(){const _0x39c452=_0x1318bc,_0x331284=!!getCurrentSubtopic(),_0xed31ad=$(_0x39c452(0x194)),_0x2ef628=$(_0x39c452(0x29a));_0x2ef628&&_0x2ef628[_0x39c452(0x322)][_0x39c452(0x261)]('hidden',_0x331284),_0xed31ad&&(_0x331284?_0xed31ad['classList'][_0x39c452(0x330)](_0x39c452(0x1bc)):_0xed31ad[_0x39c452(0x322)]['add'](_0x39c452(0x1bc)));}function updatePresetButtonsText(){const _0x19bd2f=_0x1318bc,_0x1b2379=data[_0x19bd2f(0x218)],_0x283676=_0x1b2379['cyclesA'],_0x33536a=_0x1b2379[_0x19bd2f(0x31d)],_0x3ef501=_0x1b2379[_0x19bd2f(0x25d)]['A_work'],_0x258255=_0x1b2379['durations'][_0x19bd2f(0x420)],_0x194447=$('#btnPresetA'),_0x42c9a5=$('#btnPresetB'),_0x4eaff8=$('#btnPresetC');_0x194447&&(_0x194447['textContent']=_0x283676+'√ó'+_0x3ef501+_0x19bd2f(0x260)),_0x42c9a5&&(_0x42c9a5['textContent']=_0x33536a+'√ó'+_0x258255+_0x19bd2f(0x33e)),_0x4eaff8&&(_0x4eaff8['textContent']=_0x19bd2f(0x302));}function renderAll(){const _0x2edecb=_0x1318bc;updatePresetButtonsText();const _0x2b4b5a=data[_0x2edecb(0x218)]['preset'];$$('.presets\x20button')[_0x2edecb(0x395)](_0x58bc51=>{const _0x1c4b3a=_0x2edecb,_0xffcbb0=_0x58bc51[_0x1c4b3a(0x3db)][_0x1c4b3a(0x3e0)]===_0x2b4b5a;_0x58bc51['classList']['toggle']('acc',_0xffcbb0),_0x58bc51[_0x1c4b3a(0x322)][_0x1c4b3a(0x261)](_0x1c4b3a(0x1af),!_0xffcbb0),_0x58bc51[_0x1c4b3a(0x35f)](_0x1c4b3a(0x237),_0xffcbb0);}),updateMainViewVisibility(),timer[_0x2edecb(0x48d)](data[_0x2edecb(0x218)][_0x2edecb(0x3e0)],{'silent':!![]}),renderTopics(),renderContextBadge(),renderStatsHistory(),renderGeneralNotes(),renderMethods(),renderChat(),applyCustomBg(),applyPanelOpacity(),renderSubtopicTasks(),updateFullscreenButton(),switchView(data['settings'][_0x2edecb(0x46c)]);}function toggleFullScreen(){const _0x2e540c=_0x1318bc;!document[_0x2e540c(0x45b)]?document[_0x2e540c(0x3dd)][_0x2e540c(0x198)]()[_0x2e540c(0x3c6)](_0x1f68d5=>{const _0x2110a6=_0x2e540c;toast(_0x2110a6(0x244)+_0x1f68d5[_0x2110a6(0x3b0)]);}):document['exitFullscreen']&&document[_0x2e540c(0x338)]();}function updateFullscreenButton(){const _0x5f5063=_0x1318bc,_0x29e49a=$('#btnFullscreen');document[_0x5f5063(0x45b)]?(_0x29e49a['innerHTML']='‚ÜôÔ∏è',_0x29e49a[_0x5f5063(0x210)]=_0x5f5063(0x46e)):(_0x29e49a[_0x5f5063(0x2e8)]='‚ÜóÔ∏è',_0x29e49a[_0x5f5063(0x210)]=_0x5f5063(0x497));}async function initializeApp(){const _0x42b051=_0x1318bc;try{await storageManager[_0x42b051(0x2bb)]();const [_0x4c1f87,_0x22fb82,_0x4c22e9]=await Promise[_0x42b051(0x4a0)]([storageManager[_0x42b051(0x343)](),storageManager[_0x42b051(0x24f)]('topics'),storageManager[_0x42b051(0x24f)](_0x42b051(0x2ea))]);let _0x43404c;if(!_0x4c1f87){const _0x735433=JSON[_0x42b051(0x323)](JSON[_0x42b051(0x484)](defaults));await storageManager[_0x42b051(0x201)](_0x735433[_0x42b051(0x218)]);for(const _0x95bcef of _0x735433['topics']){const {subtopics:_0x1e1e10,..._0xe2889a}=_0x95bcef;await storageManager[_0x42b051(0x28c)](_0x42b051(0x295),_0xe2889a);for(const _0x276364 of _0x1e1e10){await storageManager[_0x42b051(0x28c)]('subtopics',{..._0x276364,'topicId':_0x95bcef['id']});}}_0x43404c=_0x735433;}else{const _0x3e4108={};for(const _0x1868b0 of _0x22fb82)_0x3e4108[_0x1868b0['id']]={..._0x1868b0,'subtopics':[]};for(const _0x4f67ce of _0x4c22e9)_0x3e4108[_0x4f67ce[_0x42b051(0x22c)]]?.[_0x42b051(0x2ea)][_0x42b051(0x42e)](_0x4f67ce);_0x43404c={'version':defaults[_0x42b051(0x274)],'settings':_0x4c1f87,'topics':Object[_0x42b051(0x1b4)](_0x3e4108)};}data=window[_0x42b051(0x3b1)]=_0x43404c,normalizeDataStructure(data),await ensureValidSelection(),await seedAchievedMilestones(),renderAll();try{storageManager[_0x42b051(0x48b)](data);}catch(_0x203375){console['warn'](_0x42b051(0x2a2),_0x203375);}bindEvents(),applyTheme();}catch(_0x2bfa30){console[_0x42b051(0x40f)](_0x42b051(0x1b7),_0x2bfa30),toast(_0x42b051(0x342)+_0x2bfa30[_0x42b051(0x3b0)]);}}callGeminiAPI=async function(_0x1a2526,_0x226bff=0x3,_0x2ae585=0x3e8){const _0x4c04c5=_0x1318bc,_0x382695=data?.[_0x4c04c5(0x218)]?.['apiKey']||'';if(!_0x382695)return toast(_0x4c04c5(0x472)),null;const _0x517e02=_0x4c04c5(0x232)+_0x382695,_0x595e35={'contents':[{'role':'user','parts':[{'text':_0x1a2526}]}]};try{const _0x28fd9c=await fetch(_0x517e02,{'method':_0x4c04c5(0x403),'headers':{'Content-Type':_0x4c04c5(0x287)},'body':JSON[_0x4c04c5(0x484)](_0x595e35)});if(!_0x28fd9c['ok']){if(_0x28fd9c[_0x4c04c5(0x3c5)]===0x1ad&&_0x226bff>0x0)return await new Promise(_0x25be82=>setTimeout(_0x25be82,_0x2ae585)),callGeminiAPI(_0x1a2526,_0x226bff-0x1,_0x2ae585*0x2);let _0x19441f=null;try{_0x19441f=await _0x28fd9c['json']();}catch(_0x55366c){}let _0x42fac6=_0x4c04c5(0x1cb)+_0x28fd9c[_0x4c04c5(0x3c5)];if(_0x28fd9c['status']===0x190)_0x42fac6='L·ªói:\x20Gemini\x20API\x20Key\x20kh√¥ng\x20h·ª£p\x20l·ªá\x20ho·∫∑c\x20ƒë√£\x20b·ªã\x20thay\x20ƒë·ªïi.\x20Vui\x20l√≤ng\x20ki·ªÉm\x20tra\x20l·∫°i\x20trong\x20C√†i\x20ƒë·∫∑t.';else{if(_0x28fd9c[_0x4c04c5(0x3c5)]===0x1ad)_0x42fac6=_0x4c04c5(0x49a);else _0x19441f?.[_0x4c04c5(0x40f)]?.[_0x4c04c5(0x3b0)]&&(_0x42fac6=_0x4c04c5(0x240)+_0x19441f[_0x4c04c5(0x40f)][_0x4c04c5(0x3b0)]);}return toast(_0x42fac6,0xfa0),console[_0x4c04c5(0x40f)](_0x4c04c5(0x3ee),_0x19441f||_0x28fd9c[_0x4c04c5(0x496)]),null;}const _0x49de13=await _0x28fd9c[_0x4c04c5(0x267)]();if(_0x49de13[_0x4c04c5(0x2f1)]&&_0x49de13[_0x4c04c5(0x2f1)][0x0]?.[_0x4c04c5(0x418)]?.[_0x4c04c5(0x290)]?.[0x0]?.['text'])return formatGeminiResponse(_0x49de13['candidates'][0x0][_0x4c04c5(0x418)]['parts'][0x0]['text']);else{console['error'](_0x4c04c5(0x24d),_0x49de13);if(_0x49de13[_0x4c04c5(0x3bc)]?.[_0x4c04c5(0x239)])return _0x4c04c5(0x498)+_0x49de13[_0x4c04c5(0x3bc)]['blockReason']+_0x4c04c5(0x35d);return _0x4c04c5(0x321);}}catch(_0x2a01fe){return console[_0x4c04c5(0x40f)](_0x4c04c5(0x42c),_0x2a01fe),toast('L·ªói\x20m·∫°ng\x20khi\x20k·∫øt\x20n·ªëi\x20ƒë·∫øn\x20Gemini.\x20Vui\x20l√≤ng\x20ki·ªÉm\x20tra\x20k·∫øt\x20n·ªëi\x20internet.',0xfa0),null;}},loadLanguage(localStorage[_0x1318bc(0x26e)](_0x1318bc(0x2e1))||'vi')[_0x1318bc(0x495)](initializeApp);
    </script>
</body>
</html>

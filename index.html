<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="·ª®ng d·ª•ng Pomodoro h·ªó tr·ª£ h·ªçc t·∫≠p v·ªõi t√≠ch h·ª£p Gemini AI v√† giao di·ªán hi·ªán ƒë·∫°i." />
    <title>Pomodoro Study App ‚Äî T√≠ch h·ª£p Gemini AI (Giao di·ªán m·ªõi)</title>
    <style>
    /*
    =============================================
    POMODORO STUDY APP ‚Äî PHI√äN B·∫¢N GIAO DI·ªÜN T·∫¨P TRUNG (v1.0)
    =============================================
    */

    :root {
      /* Theme Dark (M·∫∑c ƒë·ªãnh) - C·∫≠p nh·∫≠t t·ª´ file 2 */
      --bg: #0f1222;
      --panel: #171a2e;
      --panel-rgb: 23, 26, 46; /* Th√™m bi·∫øn RGB cho panel */
      --muted: #212646;
      --text: #f4f6ff;
      --sub: #b7c1ff;
      --acc: #6c8cff;
      --acc-rgb: 108, 140, 255;
      --acc-2: #27d3a2;
      --purple: #a78bfa;
      --warn: #ffb020;
      --danger: #ff5c7a;
      --shadow: 0px 1.8px 2.2px rgba(0, 0, 0, 0.054), 0px 4.3px 5.3px rgba(0, 0, 0, 0.077), 0px 8.1px 10px rgba(0, 0, 0, 0.095), 0px 14.5px 17.9px rgba(0, 0, 0, 0.113), 0px 27.2px 33.4px rgba(0, 0, 0, 0.136), 0px 65px 80px rgba(0, 0, 0, 0.19);
      --radius: 16px;
      --panel-opacity: 0.85;
      --gradient-border: linear-gradient(135deg, var(--acc), var(--acc-2));
    }
    
    /* === START: TH√äM C√ÅC THEME M·ªöI === */
    [data-theme='light'] {
      --bg: #f5f0e8; --panel: #ffffff; --panel-rgb: 255, 255, 255; --muted: #eaddcf; --text: #4a4a4a; --sub: #8a817c; --acc: #d4a373; --acc-rgb: 212, 163, 115; --acc-2: #a3b18a; --warn: #e76f51; --danger: #d00000;
      --shadow: 0px 1.8px 2.2px rgba(0, 0, 0, 0.024), 0px 4.3px 5.3px rgba(0, 0, 0, 0.037), 0px 8.1px 10px rgba(0, 0, 0, 0.045), 0px 14.5px 17.9px rgba(0, 0, 0, 0.053), 0px 27.2px 33.4px rgba(0, 0, 0, 0.066), 0px 65px 80px rgba(0, 0, 0, 0.09);
      --panel-opacity: 0.9;
      /* NgƒÉn n·ªÅn t·ªëi m·∫∑c ƒë·ªãnh khi kh√¥ng c√≥ ·∫£nh */
      --bg-image: none;
    }

    [data-theme='pastel'] {
      --bg: #fde2e4; --panel: #fff1f2; --panel-rgb: 255, 241, 242; --muted: #fad2e1; --text: #595260; --sub: #8c7a8a; --acc: #c78283; --acc-rgb: 199, 130, 131; --acc-2: #7ec4cf; --warn: #f9bf45; --danger: #d7263d;
      --shadow: 0 5px 20px rgba(200,150,150,0.2);
      --panel-opacity: 0.9;
      /* NgƒÉn n·ªÅn t·ªëi m·∫∑c ƒë·ªãnh khi kh√¥ng c√≥ ·∫£nh */
      --bg-image: none;
    }
    
    [data-theme='lofi'] {
      --bg: #2a2a3e; --panel: #3c3c52; --panel-rgb: 60, 60, 82; --muted: #4d4d66; --text: #e0e0ff; --sub: #a0a0c0; --acc: #ff8c69; --acc-rgb: 255, 140, 105; --acc-2: #69c6ff; --warn: #ffd700; --danger: #ff6961;
      /* === Replaced external GIF with inline data URI (offline-safe) === */
      --bg-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4MDAnIGhlaWdodD0nNjAwJz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz48c3RvcCBvZmZzZXQ9JzAlJyBzdG9wLWNvbG9yPScjMmEyYTNlJy8+PHN0b3Agb2Zmc2V0PScxMDAlJyBzdG9wLWNvbG9yPScjM2MzYzUyJy8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9JzEwMCUnIGhlaWdodD0nMTAwJScgZmlsbD0ndXJsKCNnKScvPjwvc3ZnPg==');
      --panel-opacity: 0.8;
    }
    
    [data-theme='space'] {
        --bg: #000000; --panel: #1a1a2e; --panel-rgb: 26, 26, 46; --muted: #2a2a4e; --text: #e0e0ff; --sub: #b0b0e0; --acc: #00aaff; --acc-rgb: 0, 170, 255; --acc-2: #aaff00; --warn: #ffaa00; --danger: #ff0055;
        /* === Replaced external GIF with inline data URI (offline-safe) === */
        --bg-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4MDAnIGhlaWdodD0nNjAwJz48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9J2cnIGN4PSc1MCUnIGN5PSc0MCUnIHI9JzcwJSc+PHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzBiMGIxYScvPjxzdG9wIG9mZnNldD0nMTAwJScgc3RvcC1jb2xvcj0nIzAwMDAwMCcvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPScxMDAlJyBoZWlnaHQ9JzEwMCUnIGZpbGw9J3VybCgjZyknLz48L3N2Zz4=');
        --panel-opacity: 0.75;
    }
    /* === END: TH√äM C√ÅC THEME M·ªöI === */

    *:focus-visible {
      outline: 2px solid var(--acc); outline-offset: 2px; border-radius: 4px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body {
      margin:0; 
      font-family: system-ui, -apple-system, 'Segoe UI Variable', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Inter', sans-serif; 
      
      background-color: var(--bg);
      background-image: var(--bg-image, radial-gradient(1200px 800px at 10% -10%, #20285b 0%, #0f1222 50%, #0b0e1a 100%));
      
      background-size: cover; 
      background-position: center; 
      color:var(--text); 
      transition: background 0.5s ease, color 0.5s ease, filter 0.5s ease;
      text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    a{color:var(--acc)}

    .app{display:flex; min-height:100vh}
    
    .app-nav {
        width: 60px;
        padding: 16px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
        z-index: 100;
    }
    .nav-btn {
        background: transparent;
        border: none;
        color: var(--sub);
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all .2s ease;
        position: relative;
    }
    .nav-btn:hover { background: var(--muted); color: var(--text); }
    .nav-btn.active { background: var(--acc); color: white; }
    .nav-btn svg { width: 24px; height: 24px; }
    .nav-btn .tooltip {
        position: absolute;
        left: 110%;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text);
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 12px;
        box-shadow: var(--shadow);
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: opacity .2s ease, visibility .2s ease;
        pointer-events: none;
        z-index: 200;
    }
    .nav-btn:hover .tooltip { opacity: 1; visibility: visible; }

    .app-content {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
        max-height: 100vh;
    }

    .view { display: none; }
    .view.active { display: grid; gap: 24px; animation: fadeIn .3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .main.reloading { opacity: 0; transition: opacity 0.2s ease-out; }

    .panel-bg{
        background: rgba(23, 26, 46, var(--panel-opacity));
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border:1px solid rgba(255,255,255,.08);
    }
    /* Th√™m c√°c quy t·∫Øc border cho theme light/pastel */
    [data-theme='light'] .panel-bg, [data-theme='pastel'] .panel-bg { border:1px solid rgba(0,0,0,0.05); }
    [data-theme='lofi'] .panel-bg { border:1px solid rgba(255,255,255,0.1); }
    [data-theme='space'] .panel-bg { border:1px solid rgba(255,255,255,0.12); }


header.app-header{display:flex; align-items:center; justify-content:space-between; padding:10px 14px; border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom: 24px; position: relative; z-index: 2000;}
    header .actions{display:flex; gap:8px; align-items:center}
    
    .btn {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text);
      border: none; /* S·ª≠a ƒë·ªïi: b·ªè border m·∫∑c ƒë·ªãnh */
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.08);
      font-weight: 600;
      transition: all .15s ease;
      position: relative;
      overflow: hidden;
    }
    .btn::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        border: 2px solid transparent; border-radius: 12px; background: var(--gradient-border) border-box;
        -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: destination-out; mask-composite: exclude; opacity: 0; transition: opacity 0.3s ease;
    }
    .btn:hover::before { opacity: 1; }
    .btn:hover { background: rgba(255, 255, 255, 0.12); }
    .btn:active { transform: translateY(1px) scale(0.98); filter: brightness(1); }
    .btn:disabled { cursor: not-allowed; filter: brightness(0.8) saturate(0.5); }
    .btn.ghost { background: transparent; border: 1px solid rgba(255, 255, 255, 0.2); }
    .btn.ghost:hover { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.3); }
    .btn.acc { background: var(--acc); color: white; }
    .btn.warn { background: var(--warn); color: white; }
    .btn.danger { background: var(--danger); color: white; }
    .btn.small { padding: 6px 10px; font-size: 14px; border-radius: 9px; }
    .btn.small::before { border-radius: 9px; }
    .btn > svg { width: 16px; height: 16px; stroke-width: 2.5px; }

    /* === START: C·∫¨P NH·∫¨T GIAO DI·ªÜN QU·∫¢N L√ù CH·ª¶ ƒê·ªÄ === */
    #view-topics { grid-template-columns: 1fr; }
    .topic-item { background:rgba(255,255,255,.04); border:1px solid var(--muted); border-radius:12px; padding:8px; margin-bottom:8px; } /* S·ª≠a ƒë·ªïi */
    .topic-header, .sub-row { display:flex; align-items:center; gap:8px; position: relative; }
    .topic-header { cursor: pointer; }
    .topic-header .topic-actions { cursor: default; }
    .topic-header .topic-actions * { cursor: pointer; }
    .topic-item { cursor: pointer; }
    .topic-item .topic-actions { cursor: default; }
    .topic-item .topic-actions * { cursor: pointer; }
    .topic-title { flex:1; font-weight:600; cursor: pointer; }
    .chev { width:28px; height:28px; border-radius:8px; display:inline-flex; align-items:center; justify-content:center; flex-shrink: 0; cursor: pointer; }
    .chev .ico { display:inline-block; transition: transform .18s ease; }
    .chev[aria-expanded="false"] .ico { transform: rotate(-90deg); }
    .subtopics { margin-top:8px; display:flex; flex-direction:column; gap:6px; }
    .subtopics.hidden { display:none; }
    
    .topic-actions, .sub-row .actions {
        opacity: 0;
        visibility: hidden;
        transition: opacity .2s ease, visibility .2s ease;
        display: flex;
        gap: 6px;
        align-items: center;
    }
    .topic-item:hover .topic-actions, .topic-item:focus-within .topic-actions,
    .sub-row:hover .actions, .sub-row:focus-within .actions {
      opacity: 1;
      visibility: visible;
    }
    .actions-menu-btn {
        padding: 0;
        width: 28px;
        height: 28px;
        font-size: 1.2em;
        line-height: 1;
    }
    .actions-menu {
        position: absolute;
        top: 100%;
        right: 0;
        border-radius: 8px;
        padding: 6px;
        box-shadow: var(--shadow);
        z-index: 10;
        min-width: 150px;
        display: none;
        flex-direction: column;
        gap: 4px;
    }
    /* N√¢ng kh·ªëi ƒëang m·ªü menu l√™n tr√™n c√°c kh·ªëi kh√°c */
    .topic-item.menu-active { position: relative; z-index: 20; }
    
    .actions-menu.show { display: flex; }
    .menu-item {
        background: transparent; border: none; color: var(--text);
        padding: 8px 10px; border-radius: 6px; text-align: left;
        width: 100%; cursor: pointer; transition: background .2s ease;
        display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 500;
    }
    .menu-item:hover { background: var(--acc); color: white; }
    .menu-item.danger:hover { background: var(--danger); }
    /* === END: C·∫¨P NH·∫¨T GIAO DI·ªÜN QU·∫¢N L√ù CH·ª¶ ƒê·ªÄ === */

    .subtopic-btn{
        flex:1; 
        text-align:left;
        background-color: rgba(0,0,0,0.02); /* S·ª≠a ƒë·ªïi */
    }
    .subtopic-btn:hover {
        background-color: transparent; /* Hover transparent to avoid blue background */
    }
    .subtopic-btn.active{
        outline:2px solid var(--acc); 
    }
    .subtopic-btn.active:hover {
        background: transparent; /* Gi·ªØ n·ªÅn trong su·ªët khi di chu·ªôt qua */
    }
    
    .panel{border-radius:var(--radius); padding:24px; box-shadow:var(--shadow)}

    .timer-header { display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap; }
    .timer{display:grid; gap:16px; grid-template-columns: 1fr; align-items:center; text-align:center}
    .big-time{font-size: clamp(60px, 12vw, 96px); letter-spacing:1px; font-weight:700; color: var(--text)}
    .state{font-weight:700; letter-spacing:.6px}
    .state.work{color:var(--acc-2)} /* S·ª≠a ƒë·ªïi m√†u */
    .state.break{color:var(--warn)}
    .state.long{color:var(--danger)} /* S·ª≠a ƒë·ªïi m√†u */
    .controls{display:flex; flex-wrap:wrap; gap:12px; justify-content:center}    
    #btnStart { padding: 14px 28px; font-size: 1.2em; }
    #btnPause, #btnResume { padding: 12px 24px; font-size: 1.1em; }

    /* === START: T√ôY CH·ªàNH D·∫¢I PH√ÇN C√ÅCH M·ªÄM M·∫†I H∆†N === */
    #view-timer .panel-bg hr {
        border: none; /* B·ªè ƒë∆∞·ªùng vi·ªÅn m·∫∑c ƒë·ªãnh */
        height: 1px;  /* ƒê·∫∑t chi·ªÅu cao cho ƒë∆∞·ªùng k·∫ª */
        background-color: var(--muted); /* S·ª≠ d·ª•ng m√†u ph·ª• c·ªßa theme */
        opacity: 0.3; /* L√†m cho n√≥ m·ªù ƒëi, h√≤a v√†o n·ªÅn */
        margin-top: 0; /* ƒêi·ªÅu ch·ªânh l·∫°i kho·∫£ng c√°ch */
    }
    /* === END: T√ôY CH·ªàNH D·∫¢I PH√ÇN C√ÅCH M·ªÄM M·∫†I H∆†N === */

    .stats-grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:12px}
    .stat-card{background:rgba(255,255,255,0.04); border:1px solid var(--muted); border-radius:14px; padding:12px; text-align:center} /* S·ª≠a ƒë·ªïi */
    .stat-card h4{margin:4px 0 8px; color:var(--sub); font-weight:600; font-size: 14px;}
    .stat-value{font-size: 20px; font-weight: 600;}
    .tiny{font-size:12px; color:var(--sub)}
    .history{display:grid; gap:8px; max-height:300px; overflow:auto; padding-right:6px}
    .hist-item{display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:start; background:rgba(255,255,255,0.04); border:1px solid var(--muted); border-radius:10px; padding:10px} /* S·ª≠a ƒë·ªïi */

    .row{display:flex; gap:8px; align-items:center}
    .row > * {flex:1}
    input[type="text"], input[type="password"], input[type="number"], select, textarea{width:100%; background:rgba(255,255,255,0.04); color:var(--text); border:1px solid var(--muted); border-radius:10px; padding:10px; outline:none}
    textarea{min-height:80px; resize: vertical;}

    .toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:9999}
    .toast{
        background: var(--panel); /* S·ª≠a ƒë·ªïi */
        border:1px solid var(--muted);
        color:var(--text);
        padding:10px 12px; border-radius:12px; box-shadow:var(--shadow);
        animation: toast-in .3s ease; transform-origin: bottom right;
    }
    @keyframes toast-in { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,var(--panel-opacity)); z-index:10000; backdrop-filter: blur(5px);} /* N√¢ng z-index ƒë·ªÉ n·∫±m tr√™n header */
    .modal.show{display:flex}
    .modal-card{
        position: relative;
        z-index: 10001;
        width:min(720px, 94vw);
        border-radius:16px;
        padding:16px;
        box-shadow:var(--shadow);
        animation: modal-in .25s ease-out;
        max-height: 90vh;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
    }
    body.modal-open { overflow: hidden; }
    @keyframes modal-in { from { opacity: 0; transform: scale(0.92) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    .modal-card h3{margin-top:0}
    .dashboard-table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    .dashboard-table th, .dashboard-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid var(--muted); }
    .dashboard-table th { color: var(--sub); }

    .footer-note{font-size:12px; color:var(--sub)}
    .hidden{display:none !important}

    .notes-list { display: flex; flex-direction: column; gap: 8px; max-height: 250px; overflow-y: auto; padding-right: 6px; }
    .note-item { background: rgba(255,255,255,0.04); border-radius: 10px; padding: 10px; display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; cursor: pointer; } /* S·ª≠a ƒë·ªïi */
    .note-content-wrapper { flex: 1; min-width: 0; }
    .note-content { white-space: pre-wrap; word-break: break-word; max-height: 60px; overflow: hidden; position: relative; transition: max-height 0.35s ease-in-out; }
    .note-content:not(.expanded)::after {
        content: ''; position: absolute; bottom: 0; right: 0; width: 100%; height: 20px; background: linear-gradient(to top, var(--panel) 20%, transparent);
    }
    .note-content.expanded { max-height: 500px; }
    .note-meta { font-size: 11px; color: var(--sub); margin-top: 4px; }
    
    .spinner { border: 2px solid var(--muted); border-top-color: var(--text); border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; } /* S·ª≠a ƒë·ªïi */
    @keyframes spin { to { transform: rotate(360deg); } }

    .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .panel-header h3 { margin: 0; }
    .panel-header .actions { display: flex; gap: 8px; }
    
    .aux-panel { margin-top: 24px; }
    .tab-nav { display: flex; gap: 4px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 16px; }
    .tab-btn { background: transparent; border: none; color: var(--sub); padding: 8px 16px; cursor: pointer; border-bottom: 2px solid transparent; transition: all .2s ease; font-weight: 600; }
    .tab-btn:hover { color: var(--text); }
    .tab-btn.active { color: var(--acc); border-bottom-color: var(--acc); }
    .tab-content {
      display: none;
      padding-top: 8px;
    }
    .tab-content.active {
      animation: fadeIn 0.25s ease-out;
    }
    #tasks.tab-content.active,
    #notes.tab-content.active,
    #ai.tab-content.active {
        display: block;
    }

    #settings-timer.tab-content.active,
    #settings-ui.tab-content.active,
    #settings-integrations.tab-content.active {
        display: flex;
    }

    .settings-row-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }
    .settings-row-toggle span {
      flex: 1;
      cursor: pointer;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 24px;
      flex-shrink: 0;
    }
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-switch .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--muted);
      transition: .3s;
      border-radius: 24px;
    }
    .toggle-switch .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
    }
    .toggle-switch input:checked + .slider {
      background-color: var(--acc-2);
    }
    .toggle-switch input:checked + .slider:before {
      transform: translateX(20px);
    }
    
    .chat-messages { max-height: 250px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; padding: 4px; }
    .chat-msg { padding: 8px 12px; border-radius: 12px; max-width: 85%; word-break: break-word; }
    .chat-msg.user { background: var(--acc); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
    .chat-msg.model { background: var(--muted); align-self: flex-start; border-bottom-left-radius: 4px; }
    .chat-input-area { display: flex; gap: 8px; }

    .methods-list { list-style: none; padding: 0; }
    .method-item { align-items: flex-start; padding: 12px; display: flex; gap: 10px; border-radius: 8px; }
    .method-item:hover { background: rgba(0,0,0,0.03); } /* S·ª≠a ƒë·ªïi */
    .method-item input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; flex-shrink: 0;}
    .method-item label { flex: 1; }
    .method-item label.completed { text-decoration: line-through; color: var(--sub); }
    .method-item .content-wrapper { flex: 1; cursor: pointer; }
    .method-item .concept { font-size: 14px; color: var(--sub); margin-top: 8px; border-left: 2px solid var(--muted); padding-left: 12px; white-space: pre-wrap; word-break: break-word; }
    /* Highlight section titles and bold text inside method content */
    .method-content h4 {
        color: var(--acc-2);
        font-size: 1.1em;
        margin-top: 1.5em;
        margin-bottom: 0.5em;
    }
    .method-content strong {
        color: var(--acc);
        font-weight: 600;
    }
    /* Apply the same highlight to the Guide view */
    #view-guide h4 { color: var(--acc-2); }
    #view-guide strong { color: var(--acc-2); }
    /* Show hand cursor to indicate clickability */
    .method-item, .method-item summary { cursor: pointer; }
    .subtopic-todo-list { list-style: none; padding: 0; margin: 0; max-height: 100px; overflow-y: auto; text-align: left; }
    .subtopic-todo-list li { display: flex; align-items: center; gap: 8px; padding: 4px; transition: all 0.2s ease-out; }
    .subtopic-todo-list li.removing { transform: translateX(100%); opacity: 0; }
    .subtopic-todo-list label { flex: 1; }

    #youtube-player-container { position: absolute; top: -9999px; left: -9999px; width: 1px; height: 1px; overflow: hidden; }

    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1); border-radius: 10px; } /* S·ª≠a ƒë·ªïi */
    ::-webkit-scrollbar-thumb { background: var(--muted); border-radius: 10px; border: 2px solid transparent; background-clip: content-box; }
    ::-webkit-scrollbar-thumb:hover { background: var(--sub); background-clip: content-box; }
    
    .timer-circle-container {
        position: relative; width: clamp(250px, 40vw, 320px); height: clamp(250px, 40vw, 320px); margin: 24px auto; display: flex; align-items: center; justify-content: center;
    }
    .timer-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: rotate(-90deg); }
    .timer-circle-bg, .timer-circle-progress { fill: none; stroke-width: 8; }
    .timer-circle-bg { stroke: var(--muted); } /* S·ª≠a ƒë·ªïi */
    .timer-circle-progress { stroke: var(--acc); stroke-linecap: round; transition: stroke-dashoffset 0.3s linear, stroke 0.5s ease; }
    @keyframes flash { 0%, 100% { box-shadow: 0 0 10px 2px transparent; } 50% { box-shadow: 0 0 20px 8px currentColor; } }
    .timer-circle-container.finished { color: var(--acc-2); animation: flash 1s ease-out; }
    @keyframes breathing-effect { 0% { transform: scale(1); } 50% { transform: scale(1.03); } 100% { transform: scale(1); } }
    .timer-circle-container.breathing { animation: breathing-effect 3s ease-in-out infinite; }
    
    
    
    @media (max-width: 1024px) {
      .app-content { padding: 20px; }
      .panel { padding: 20px; }
      .timer-circle-container { width: clamp(220px, 50vw, 300px); height: clamp(220px, 50vw, 300px); }
    }

    @media (max-width: 768px) {
      .app { flex-direction: column; }
      .app-nav { width: 100%; height: 60px; flex-direction: row; justify-content: center; border-right: none; border-top: 1px solid rgba(255,255,255,.08); order: 2; padding: 0 16px; }
      .app-content { padding: 16px; order: 1; }
      .panel { padding: 16px; }
      .modal-card .tab-nav { overflow-x: auto; }
    }

    @media (max-width: 480px) {
      .app-nav { height: 50px; }
      .nav-btn { flex: 1; }
      header.app-header { flex-direction: column; align-items: stretch; gap: 8px; }
      .btn { padding: 8px 12px; }
      .timer-circle-container { width: clamp(180px, 80vw, 220px); height: clamp(180px, 80vw, 220px); margin: 16px auto; }
      .panel { padding: 12px; }
      .app-content { padding: 12px; }
    }

    #view-timer.no-subtopic-selected > .panel-bg:not(:first-child) { display: none; }
    #view-timer.no-subtopic-selected .timer-header > .presets { display: none; }
    #view-timer.no-subtopic-selected .timer { display: none; }

    header.app-header .actions #btnFullscreen { background: transparent; border: none; box-shadow: none; }
    header.app-header .actions #btnFullscreen:hover { background: var(--muted); filter: none; }
    header.app-header .actions #btnFullscreen:hover::before { opacity: 0; }

    input[type="text"], input[type="password"], input[type="number"], select, textarea {
        background: rgba(255,255,255,0.04) !important; /* S·ª≠a ƒë·ªïi: chuy·ªÉn sang n·ªÅn tr·∫Øng trong su·ªët */
        color: var(--text);
        border: 1px solid rgba(255, 255, 255, 0.1); /* Vi·ªÅn tr·∫Øng m·ªù */
        transition: background .2s ease, border-color .2s ease;
    }
    input[type="text"]:focus, input[type="password"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
        background: rgba(255,255,255,0.06) !important; /* Tinh ch·ªânh: s√°t m·∫´u h∆°n */
        border-color: var(--acc);
    }
    /* === START: S·ª¨A L·ªñI N·ªÄN INPUT/SELECT TR√äN THEME S√ÅNG === */
    [data-theme='light'] input, [data-theme='light'] select, [data-theme='light'] textarea,
    [data-theme='pastel'] input, [data-theme='pastel'] select, [data-theme='pastel'] textarea {
        background: rgba(0, 0, 0, 0.05) !important; /* D√πng n·ªÅn ƒëen m·ªù thay v√¨ tr·∫Øng m·ªù */
        border-color: rgba(0, 0, 0, 0.1); /* Vi·ªÅn ƒëen m·ªù tr√™n theme s√°ng */
    }

    [data-theme='light'] input:focus, [data-theme='light'] select:focus, [data-theme='light'] textarea:focus,
    [data-theme='pastel'] input:focus, [data-theme='pastel'] select:focus, [data-theme='pastel'] textarea:focus {
        background: rgba(0, 0, 0, 0.07) !important; /* TƒÉng ƒë·ªô ƒë·∫≠m khi focus */
    }
    /* === END: S·ª¨A L·ªñI N·ªÄN INPUT/SELECT TR√äN THEME S√ÅNG === */

    /* C·∫£i thi·ªán n·ªÅn v√† m√†u ch·ªØ cho option trong select theo theme hi·ªán t·∫°i */
    select option {
        background: var(--panel);
        color: var(--text);
    }
    
    ::placeholder { color: var(--sub); opacity: 0.7; } /* S·ª≠a ƒë·ªïi */
    ::-ms-input-placeholder { color: var(--sub); }
    :-ms-input-placeholder { color: var(--sub); }

    
    
    .draggable-timer {
        position: fixed;
        bottom: 20px;
        right: 20px;
        color: var(--text);
        padding: 8px 16px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        font-size: 2em;
        font-weight: 600;
        cursor: move;
        user-select: none;
        z-index: 9998;
        opacity: 0;
        transform: scale(0.9);
        pointer-events: none;
        transition: opacity 0.35s ease, transform 0.35s ease;
    }
    body.bg-view-mode .draggable-timer {
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
    }
    .app-nav, .panel-bg, .app-header .actions > *, .app-header > .row {
        transition: opacity 0.35s ease, transform 0.35s ease, background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;
    }
    body.bg-view-mode .app-nav,
    body.bg-view-mode .view.active > .panel-bg {
        opacity: 0;
        pointer-events: none;
        transform: scale(0.98);
    }
    body.bg-view-mode .app-header {
        background: transparent !important;
        border-color: transparent !important;
        box-shadow: none !important;
    }
    body.bg-view-mode .app-header .actions > *:not(#btnToggleBg),
    body.bg-view-mode .app-header > .row {
        opacity: 0;
        pointer-events: none;
    }
    body.bg-view-mode #btnToggleBg {
        opacity: 1;
        pointer-events: auto;
    }
    .sound-permission-bar {
      position: fixed; left: 50%; transform: translateX(-50%);
      bottom: 48px; z-index: 9999;
      border-radius: 12px; padding: 10px 14px;
      display: none; align-items: center; gap: 10px;
      box-shadow: var(--shadow);
    }
    .sound-permission-bar.show { display: flex; }
    .sound-permission-bar .msg { font-size: 14px; color: var(--text); }
    .draggable-timer { text-shadow: 0px 0px 8px rgba(0, 0, 0, 0.9); }

    /* Gi·∫£m/lo·∫°i b·ªè b√≥ng ch·ªØ cho theme s√°ng ƒë·ªÉ tr√°nh nh√≤e/l√≥a */
    body[data-theme='light'],
    body[data-theme='pastel'] { text-shadow: none; }
    body[data-theme='light'] .draggable-timer,
    body[data-theme='pastel'] .draggable-timer { text-shadow: none; }

    /* ============================================= */
/* ========================================================= */
/* START: THI?T L?P PANEL KI?U M?  ?C (FROSTED GLASS)        */
/* ========================================================= */

/* --- 1.  p d?ng hi?u ?ng n?n m? chung cho t?t c? c c panel --- */
.app-nav,
.panel-bg,
.modal-card,
.actions-menu,
.nav-btn .tooltip,
.draggable-timer, 
.sound-permission-bar,
.toast,
.topic-item,
.stat-card,
.hist-item,
.method-item {
    background: rgba(var(--panel-rgb), var(--panel-opacity));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

/* --- 2.  ?nh nghia vi?n cho t?ng lo?i panel --- */
.app-nav {
    border-right: 1px solid rgba(255, 255, 255, 0.1);
}
.panel-bg,
.modal-card,
.actions-menu,
.nav-btn .tooltip,
.draggable-timer, 
.sound-permission-bar,
.toast,
.topic-item,
.stat-card,
.hist-item,
.method-item {
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* --- 3. Tinh ch?nh vi?n cho c c theme S NG (Light/Pastel) --- */
[data-theme='light'] .app-nav,
[data-theme='light'] .panel-bg,
[data-theme='light'] .modal-card,
[data-theme='light'] .actions-menu,
[data-theme='light'] .nav-btn .tooltip,
[data-theme='light'] .draggable-timer,
[data-theme='light'] .sound-permission-bar,
[data-theme='light'] .toast,
[data-theme='light'] .topic-item,
[data-theme='light'] .stat-card,
[data-theme='light'] .hist-item,
[data-theme='light'] .method-item,
[data-theme='pastel'] .app-nav,
[data-theme='pastel'] .panel-bg,
[data-theme='pastel'] .modal-card,
[data-theme='pastel'] .actions-menu,
[data-theme='pastel'] .nav-btn .tooltip,
[data-theme='pastel'] .draggable-timer,
[data-theme='pastel'] .sound-permission-bar,
[data-theme='pastel'] .toast,
[data-theme='pastel'] .topic-item,
[data-theme='pastel'] .stat-card,
[data-theme='pastel'] .hist-item,
[data-theme='pastel'] .method-item {
    border-color: rgba(0, 0, 0, 0.1);
}

/* --- 4. S?a l?i hi?u ?ng fade-out c?a ghi ch  cho ph  h?p --- */
.note-content:not(.expanded)::after {
    background: linear-gradient(to top, rgba(var(--panel-rgb), 1) 20%, transparent);
}

/* --- C c quy t?c c n l?i gi? nguy n t? file g?c --- */
[data-theme='light'] .tab-nav,
[data-theme='pastel'] .tab-nav {
    border-bottom-color: rgba(0, 0, 0, 0.1);
}
.subtopic-btn {
    background-color: transparent;
}
.subtopic-btn:hover {
    background-color: transparent; /* Hover transparent to avoid blue background */
}
.method-item[open] summary {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
    [data-theme='light'] .method-item[open] summary,
    [data-theme='pastel'] .method-item[open] summary {
        border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    /* Editor container (single pane, Rich Text) */
    .editor-container { height: 350px; }
    .editable-content { height: 100%; border: 1px solid var(--muted); border-radius: 10px; padding: 10px; overflow-y: auto; background: var(--bg); }
    .editable-content:focus-within { border-color: var(--acc); outline: none; }
    .editable-content h4 { color: var(--acc-2); font-size: 1.1em; margin-top: 1.5em; margin-bottom: 0.5em; }
    .editable-content strong, .editable-content b { color: var(--acc); font-weight: 600; }
    .editable-content ol, .editable-content ul { padding-left: 20px; }

    /* Editor toolbar for Methods modal */
    .editor-toolbar { display: flex; gap: 6px; margin-bottom: 6px; padding: 4px; background: var(--muted); border-radius: 8px; }
    .editor-toolbar button { font-weight: bold; width: 32px; height: 32px; padding: 0; }
    .editor-toolbar .btn.ghost:hover { background-color: rgba(var(--acc-rgb, 108, 140, 255), 0.15); }
    .editor-toolbar .btn.ghost.active { background-color: rgba(var(--acc-rgb, 108, 140, 255), 0.25); }
    .color-picker-wrapper { position: relative; }
    .color-palette { position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; padding: 6px; border-radius: 8px; border: 1px solid var(--muted); background: var(--panel); box-shadow: var(--shadow); z-index: 10; }
    .color-swatch { width: 24px; height: 24px; border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.5); cursor: pointer; transition: transform 0.15s ease; }
    .color-swatch:hover { transform: scale(1.15); }

    /* Method actions inline with summary and show on hover */
    .method-item summary { display: flex; align-items: center; justify-content: space-between; }
    .method-item summary > span { flex: 1; }
    .method-item summary .topic-actions { margin-left: 8px; }
    .method-title { cursor: pointer; }
    .method-item:hover .topic-actions, .method-item:focus-within .topic-actions { opacity: 1; visibility: visible; }

    </style>
</head>
<body data-theme="default"> <div class="app" id="app">
    <nav class="app-nav">
        <button class="nav-btn active" id="navBtnTimer" data-view="timer" aria-label="ƒê·ªìng h·ªì">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span class="tooltip">ƒê·ªìng h·ªì</span>
        </button>
        <button class="nav-btn" id="navBtnTopics" data-view="topics" aria-label="Ch·ªß ƒë·ªÅ">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
            <span class="tooltip">Ch·ªß ƒë·ªÅ</span>
        </button>
        <button class="nav-btn" id="navBtnStats" data-view="stats" aria-label="Th·ªëng k√™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"></path><path d="m19 9-5 5-4-4-3 3"></path></svg>
            <span class="tooltip">Th·ªëng k√™</span>
        </button>
        <button class="nav-btn" id="navBtnMethods" data-view="methods" aria-label="Kho Tri Th·ª©c">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15.042 21.672L13.684 16.6s.408-1.947 1.25-3.25c.842-1.303 2.002-2.5 3.5-3.5s3.25-1.25 3.25-1.25l5.072 1.358c.27.072.358.42.128.628l-3.35 3.35a.499.499 0 0 1-.594.052l-2.07-1.486c-.44-.314-.82-.53-1.11-.665-.29-.135-.55-.22-.78-.245s-.45.045-.63.155c-.18.11-.3.29-.36.5-.06.21.02.48.18.78.16.3.385.68.665 1.11l1.486 2.07a.499.499 0 0 1-.052.594l-3.35 3.35c-.208.23-.556.142-.628-.128z"/><path d="M12 15l-3-3 3-3 3 3-3 3z"/><path d="M9.01 11.99l-3.005 3.004a.997.997 0 0 1-1.41-1.41l3.004-3.005-3.004-3.005a.997.997 0 0 1 1.41-1.41l3.005 3.004z"/><path d="M5.01 11.99l-3.005 3.004a.997.997 0 0 1-1.41-1.41l3.004-3.005-3.004-3.005a.997.997 0 0 1 1.41-1.41l3.005 3.004z"/></svg>
            <span class="tooltip">Kho Tri Th·ª©c</span>
        </button>
        <button class="nav-btn" id="btnSettings" style="margin-top: auto;" aria-label="C√†i ƒë·∫∑t">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            <span class="tooltip">C√†i ƒë·∫∑t</span>
        </button>
        <button class="nav-btn" id="navBtnGuide" data-view="guide" aria-label="H∆∞·ªõng d·∫´n">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 1 1 5.82 1c0 2-3 2-3 4"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <span class="tooltip">H∆∞·ªõng d·∫´n</span>
        </button>
    </nav>

    <main class="app-content">
      <header class="app-header panel-bg">
        <div class="row" style="gap:12px; align-items:center; flex:0 1 auto">
          <strong>üìö Pomodoro Study App</strong>
          <span class="badge" id="selectedContext">Ch∆∞a ch·ªçn Ch·ªß ƒë·ªÅ con</span>
        </div>
        <div class="actions">
          <button class="btn ghost small" id="btnDashboard" title="Dashboard T·ªïng quan">üìä T·ªïng Quan </button>
          <a href="https://forms.gle/EfFqBJFTbFtDo5H4A" target="_blank" rel="noopener noreferrer" class="btn ghost small" title="G·ª≠i ph·∫£n h·ªìi c·ªßa b·∫°n">üí¨ Ph·∫£n H·ªìi</a>
          <button class="btn ghost small" id="btnExport" title="Xu·∫•t JSON">‚¨áÔ∏è Xu·∫•t File</button>
          <label class="btn ghost small" for="importFile" title="Nh·∫≠p JSON">‚¨ÜÔ∏è Nh·∫≠p File</label>
          <input type="file" id="importFile" accept="application/json" style="display:none" />
          <button class="btn small" id="btnToggleBg" title="·∫®n/Hi·ªán giao di·ªán">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
          </button>
          <button class="btn small" id="btnFullscreen" title="To√†n m√†n h√¨nh">‚ÜóÔ∏è</button>
        </div>
      </header>
      

      <div id="view-timer" class="view active">
        <section class="panel panel-bg">
          <div class="timer-header">
            <div id="welcomePanel" class="hidden panel-bg" style="text-align:center; padding: 20px; border-radius: var(--radius); width: 100%;">
                <h3>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Pomodoro Study App!</h3>
                <p>H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch ch·ªçn m·ªôt <strong>Ch·ªß ƒë·ªÅ con</strong> ho·∫∑c t·∫°o Ch·ªß ƒë·ªÅ/Ch·ªß ƒë·ªÅ con m·ªõi.</p>
                <button class="btn acc" id="btnHelpCreateTopic">Ôºã T·∫°o Ch·ªß ƒë·ªÅ M·ªõi</button>
            </div>
            <div class="presets" role="group" aria-label="Ch·ªçn ch·∫ø ƒë·ªô preset">
                <button id="btnPresetA" class="btn small ghost" data-preset="A"></button>
                <button id="btnPresetB" class="btn small ghost" data-preset="B"></button>
                <button id="btnPresetC" class="btn small ghost" data-preset="C">üåä Flow</button>
            </div>
          </div>
          <hr />
          <div class="timer" aria-live="polite">
            <div class="badge" id="stateBadge">TR·∫†NG TH√ÅI</div>
            
            <div class="timer-circle-container">
              <svg class="timer-svg" viewBox="0 0 100 100">
                  <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                  <circle class="timer-circle-progress" cx="50" cy="50" r="45"></circle>
              </svg>
              <div id="timeDisplay" class="big-time">00:00</div>
            </div>

            <div class="tiny" id="cycleInfo"></div>

            <div class="tiny" id="breakSuggestionDisplay" style="min-height: 1.5em; font-style: italic; opacity: 0.8; transition: opacity 0.3s ease;"></div>

            <div id="windDownChecklist" class="hidden" style="text-align: left; max-width: 300px; margin: 0 auto; padding: 0 10px;">
              <h4 style="margin: 8px 0 4px; color: var(--acc); text-align: center;">Checklist H·∫° nhi·ªát</h4>
              <ul style="list-style: '‚úì '; margin: 0; padding-left: 20px; color: var(--sub);">
                <li>L∆∞u c√¥ng vi·ªác ƒëang l√†m (Save/Commit).</li>
                <li>Ghi ch√∫ nhanh "Next step".</li>
                <li>D·ªçn d·∫πp kh√¥ng gian l√†m vi·ªác.</li>
              </ul>
            </div>
            
            <div class="controls">
              <button class="btn acc" id="btnStart" aria-label="B·∫Øt ƒë·∫ßu (Space)">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu</button>
              <button class="btn warn hidden" id="btnFinishFlow" aria-label="K·∫øt th√∫c phi√™n l√†m vi·ªác">üßò B·∫Øt ƒë·∫ßu ngh·ªâ</button>
              <button class="btn" id="btnPause" aria-label="T·∫°m d·ª´ng (Space)">‚è∏Ô∏è T·∫°m d·ª´ng</button>
              <button class="btn" id="btnResume" aria-label="Ti·∫øp t·ª•c (Space)">‚èµ Ti·∫øp t·ª•c</button>
              <button class="btn warn" id="btnSkip" aria-label="B·ªè qua (N)">‚è≠Ô∏è B·ªè qua</button>
              <button class="btn danger" id="btnReset">‚Ü∫ ƒê·∫∑t l·∫°i</button>
              <button class="btn acc small hidden" id="btnBreakEarly">üßò Ngh·ªâ s·ªõm</button>
            </div>
            <div class="tiny">Ph√≠m t·∫Øt: <strong>Space</strong> = B·∫Øt ƒë·∫ßu/T·∫°m d·ª´ng/Ti·∫øp t·ª•c, <strong>N</strong> = Ti·∫øp theo/B·ªè qua</div>
          </div>
        </section>

        <section class="panel panel-bg aux-panel">
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="tasks">Nhi·ªám v·ª•</button>
                <button class="tab-btn" data-tab="notes">Ghi ch√∫</button>
                <button class="tab-btn" data-tab="ai">Gemini AI</button>
            </nav>
            <div id="tasks" class="tab-content active">
                <h4 style="margin: 0 0 8px; color: var(--sub);">To-do cho ch·ªß ƒë·ªÅ con n√†y:</h4>
                <ul id="subtopicTasksList" class="subtopic-todo-list"></ul>
                <div class="row" style="gap:8px; margin-top: 8px;">
                    <input type="text" id="newSubtopicTaskInput" placeholder="Th√™m m·ªôt task m·ªõi..." />
                    <button id="btnAddSubtopicTask" class="btn small" style="flex: 0 1 auto;">Th√™m</button>
                </div>
            </div>
            <div id="notes" class="tab-content">
                <div id="generalNotesList" class="notes-list"></div>
                <div class="add-note-area" style="margin-top: 12px;">
                    <textarea id="newGeneralNoteText" placeholder="Th√™m ghi ch√∫ m·ªõi..."></textarea>
                    <div style="text-align: right; margin-top: 8px;">
                        <button class="btn acc small" id="btnAddGeneralNote">Ôºã Th√™m ghi ch√∫</button>
                    </div>
                </div>
            </div>
            <div id="ai" class="tab-content">
                <div class="panel-header" style="margin-bottom: 8px; padding: 0;">
                    <h4 style="margin:0;">Gemini cho: <span id="currentSubtopicNameChat">(ch∆∞a ch·ªçn)</span></h4>
                    <div class="actions">
                        <button id="btnClearChat" class="btn small danger" title="X√≥a l·ªãch s·ª≠">üóëÔ∏è</button>
                    </div>
                </div>
                <div id="chatMessages" class="chat-messages"></div>
                <div id="aiPromptSuggestions" style="display: flex; gap: 6px; margin: 8px 0; flex-wrap: wrap;">
                  <button class="btn small ghost" data-prompt="Gi·∫£i th√≠ch kh√°i ni·ªám ch√≠nh c·ªßa ch·ªß ƒë·ªÅ n√†y">Gi·∫£i th√≠ch kh√°i ni·ªám</button>
                  <button class="btn small ghost" data-prompt="T·∫°o m·ªôt d√†n √Ω chi ti·∫øt cho ch·ªß ƒë·ªÅ n√†y">T·∫°o d√†n √Ω</button>
                  <button class="btn small ghost" data-prompt="Li·ªát k√™ 5 c√¢u h·ªèi √¥n t·∫≠p quan tr·ªçng v·ªÅ ch·ªß ƒë·ªÅ n√†y">T·∫°o c√¢u h·ªèi √¥n t·∫≠p</button>
                </div>
                <div class="chat-input-area">
                  <input type="text" id="chatInput" placeholder="H·ªèi Gemini ƒëi·ªÅu g√¨ ƒë√≥..." />
                  <button id="btnSendMessage" class="btn acc">G·ª≠i</button>
                </div>
            </div>
        </section>
      </div>

      <div id="view-topics" class="view">
        <div class="panel panel-bg">
            <div class="row" style="gap:8px; align-items: center; margin-bottom: 12px;">
                <h3 style="margin: 0;">Qu·∫£n l√Ω Ch·ªß ƒë·ªÅ</h3>
                <button class="btn small acc" id="btnAddTopic" style="margin-left: auto;">Ôºã Th√™m Ch·ªß ƒë·ªÅ</button>
            </div>
            <div id="topicsList"></div>
            <div class="footer-note">Nh·∫•p m≈©i t√™n ƒë·ªÉ m·ªü/ƒë√≥ng danh s√°ch ch·ªß ƒë·ªÅ con.</div>
        </div>
      </div>
      
      <div id="view-stats" class="view">
      <script>
        window.addEventListener('DOMContentLoaded', () => {
          try {
            const topicsView = document.querySelector('#view-topics');
            if (!topicsView) return;
            const header = topicsView.querySelector('.row h3');
            if (header) header.textContent = 'Qu·∫£n l√Ω Ch·ªß ƒë·ªÅ';
            const addBtn = topicsView.querySelector('#btnAddTopic');
            if (addBtn) addBtn.textContent = '+ Th√™m Ch·ªß ƒë·ªÅ';
            const note = topicsView.querySelector('.footer-note');
            if (note) note.textContent = 'Nh·∫•p m≈©i t√™n ƒë·ªÉ m·ªü/ƒë√≥ng danh s√°ch ch·ªß ƒë·ªÅ con.';
          } catch (e) {}
        });
      </script>
        <section class="panel panel-bg">
            <h3 style="margin:0 0 12px 0;">Th·ªëng k√™ & L·ªãch s·ª≠ ‚Äî <span id="currentSubtopicName">(ch∆∞a ch·ªçn)</span></h3>
            <div class="stats-grid">
              <div class="stat-card"><h4>T·ªïng th·ªùi gian</h4><div class="stat-value" id="statTotal">0 ph√∫t</div></div>
              <div class="stat-card"><h4>Phi√™n</h4><div class="stat-value" id="statSessions">0</div></div>
              <div class="stat-card"><h4>Nhi·ªám v·ª• Ho√†n th√†nh</h4><div class="stat-value" id="statTasks">0</div></div>
            </div>
            <div style="margin-top:12px">
              <h4 style="margin:4px 0 8px; color:var(--sub)">L·ªãch s·ª≠ (L√ÄM VI·ªÜC)</h4>
              <div class="history" id="historyList"></div>
            </div>
        </section>
      </div>
      
      <div id="view-methods" class="view">
        <div class="panel panel-bg">
            <div class="row" style="gap:8px; align-items: center; margin-bottom: 12px;">
                <h3 style="margin:0;">üí° Kho Tri Th·ª©c C√° Nh√¢n H√≥a</h3>
                <button class="btn small acc" id="btnAddMethod" style="margin-left: auto;">Ôºã Th√™m tri th·ª©c</button>
            </div>
            <p class="tiny" style="margin-top: -8px; margin-bottom: 20px;">Nh·∫•p v√†o t·ª´ng m·ª•c ƒë·ªÉ xem chi ti·∫øt.</p>
            <div class="methods-container"></div>
        </div>
      </div>

      <div id="view-guide" class="view">
          <div class="panel panel-bg">
              <h3 style="margin-top: 0;">üìñ Kh√°m Ph√° Pomodoro Study App</h3>
              <p>
                  Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi kh√¥ng gian h·ªçc t·∫≠p ƒë∆∞·ª£c thi·∫øt k·∫ø d√†nh ri√™ng cho s·ª± t·∫≠p trung v√† hi·ªáu qu·∫£. H√£y c√πng kh√°m ph√° nh·ªØng t√≠nh nƒÉng s·∫Ω ƒë·ªìng h√†nh c√πng b·∫°n tr√™n h√†nh tr√¨nh chinh ph·ª•c tri th·ª©c.
              </p>

              <h4>üöÄ Kh·ªüi ƒê·∫ßu Nhanh Ch·ªâ Trong 4 B∆∞·ªõc</h4>
              <p>ƒê·ªÉ h√†nh tr√¨nh c·ªßa b·∫°n lu√¥n m·∫°ch l·∫°c, m·ªçi th·ª© trong ·ª©ng d·ª•ng ƒë∆∞·ª£c s·∫Øp x·∫øp theo c·∫•u tr√∫c <strong>Ch·ªß ƒë·ªÅ L·ªõn ‚Üí Ch·ªß ƒë·ªÅ con</strong>.</p>
              <ol>
                  <li>M·ªü m·ª•c <strong>üìö Ch·ªß ƒë·ªÅ</strong> t·ª´ thanh ƒëi·ªÅu h∆∞·ªõng b√™n c·∫°nh.</li>
                  <li>Nh·∫•n <strong>Ôºã Th√™m Ch·ªß ƒë·ªÅ</strong> ƒë·ªÉ t·∫°o m·ªôt lƒ©nh v·ª±c l·ªõn (v√≠ d·ª•: "Ti·∫øng Anh Giao Ti·∫øp").</li>
                  <li>B√™n c·∫°nh ch·ªß ƒë·ªÅ v·ª´a t·∫°o, nh·∫•n <strong>Ôºã Th√™m</strong> ƒë·ªÉ t·∫°o m·ªôt ch·ªß ƒë·ªÅ con, chi ti·∫øt h∆°n (v√≠ d·ª•: "B√†i 1: Luy·ªán ph√°t √¢m IPA").</li>
                  <li>Ch·ªçn ch·ªß ƒë·ªÅ con ƒë√≥. Gi·ªù ƒë√¢y, b·∫°n ƒë√£ s·∫µn s√†ng ƒë·ªÉ b·∫Øt ƒë·∫ßu phi√™n h·ªçc ƒë·∫ßu ti√™n c·ªßa m√¨nh!</li>
              </ol>

              <hr />
              <h4>‚ú® Nh·ªØng T√≠nh NƒÉng ƒê√°ng Ch√∫ √ù</h4>

              <h4>C√°c Ch·∫ø ƒê·ªô ƒê·ªìng H·ªì Linh Ho·∫°t ‚è±Ô∏è</h4>
              <p>·ª®ng d·ª•ng kh√¥ng ch·ªâ c√≥ Pomodoro. H√£y ch·ªçn ph∆∞∆°ng ph√°p ph√π h·ª£p v·ªõi c√¥ng vi·ªác c·ªßa b·∫°n:</p>
              <ul>
                  <li><strong>Pomodoro C·ªï ƒêi·ªÉn (Ki·ªÉu A/B):</strong> L√†m vi·ªác t·∫≠p trung trong c√°c phi√™n ƒë·ªãnh s·∫µn (v√≠ d·ª•: 25 ph√∫t l√†m, 5 ph√∫t ngh·ªâ) ƒë·ªÉ x√¢y d·ª±ng k·ª∑ lu·∫≠t v√† nh·ªãp ƒë·ªô.</li>
                  <li><strong>Ch·∫ø ƒë·ªô Flowtime (Ki·ªÉu üåä Flow):</strong> D√†nh cho c√¥ng vi·ªác c·∫ßn d√≤ng ch·∫£y s√¢u. ƒê·ªìng h·ªì s·∫Ω ƒë·∫øm l√™n, cho ph√©p b·∫°n l√†m vi·ªác ƒë·∫øn khi t·ª± c·∫£m th·∫•y c·∫ßn ngh·ªâ. Th·ªùi gian ngh·ªâ s·∫Ω ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t d·ª±a tr√™n th·ªùi gian b·∫°n ƒë√£ l√†m vi·ªác.</li>
                  <li><strong>ƒê·ªám "H·∫° nhi·ªát" (Wind-down):</strong> M·ªôt kho·∫£ng ƒë·ªám t√πy ch·ªânh gi·ªØa l√∫c l√†m v√† l√∫c ngh·ªâ, gi√∫p b·∫°n k·∫øt th√∫c c√¥ng vi·ªác ƒëang d·ªü, ghi ch√∫ l·∫°i "b∆∞·ªõc ti·∫øp theo" v√† chuy·ªÉn tr·∫°ng th√°i m·ªôt c√°ch m∆∞·ª£t m√†, kh√¥ng b·ªã c·∫Øt ngang ƒë·ªôt ng·ªôt.</li>
              </ul> 
              <h4>Kho Tri Th·ª©c Theo T·ª´ng Ch·ªß ƒê·ªÅ Con üí°</h4>
<p>
    M·ªói m·ªôt <strong>Ch·ªß ƒë·ªÅ con</strong> gi·ªù ƒë√¢y s·∫Ω c√≥ m·ªôt "Kho Tri Th·ª©c" ho√†n to√†n ri√™ng bi·ªát. T√≠nh nƒÉng n√†y cho ph√©p b·∫°n x√¢y d·ª±ng m·ªôt th∆∞ vi·ªán ki·∫øn th·ª©c chuy√™n s√¢u, ch·ªâ li√™n quan ƒë·∫øn lƒ©nh v·ª±c b·∫°n ƒëang h·ªçc.
</p>
<p>
    V√≠ d·ª•, c√°c ghi ch√∫ v√† ph∆∞∆°ng ph√°p h·ªçc "Ti·∫øng Anh Giao Ti·∫øp" s·∫Ω ch·ªâ xu·∫•t hi·ªán khi b·∫°n ch·ªçn ch·ªß ƒë·ªÅ con ƒë√≥, v√† s·∫Ω kh√¥ng b·ªã l·∫´n v·ªõi c√°c c√¥ng th·ª©c trong ch·ªß ƒë·ªÅ con "Gi·∫£i t√≠ch To√°n h·ªçc".
</p>
<p>
    V·ªõi tr√¨nh so·∫°n th·∫£o m·∫°nh m·∫Ω, b·∫°n v·∫´n c√≥ th·ªÉ d·ªÖ d√†ng ƒë·ªãnh d·∫°ng ti√™u ƒë·ªÅ, in ƒë·∫≠m, t·∫°o danh s√°ch v√† l√†m n·ªïi b·∫≠t nh·ªØng th√¥ng tin quan tr·ªçng nh·∫•t cho t·ª´ng m√¥n h·ªçc c·ªßa m√¨nh.
</p>

              <h4>Qu·∫£n L√Ω Ch·ªß ƒê·ªÅ Tr·ª±c Quan</h4>
              <p>D·ªÖ d√†ng s·∫Øp x·∫øp c√°c m·ª•c ti√™u h·ªçc t·∫≠p c·ªßa b·∫°n. S·ª≠ d·ª•ng thao t√°c <strong>k√©o v√† th·∫£</strong> ƒë·ªÉ s·∫Øp x·∫øp l·∫°i th·ª© t·ª± c√°c Ch·ªß ƒë·ªÅ ho·∫∑c di chuy·ªÉn m·ªôt Ch·ªß ƒë·ªÅ con sang m·ªôt lƒ©nh v·ª±c kh√°c m·ªôt c√°ch tr·ª±c quan.</p>

              <h4>Nhi·ªám V·ª• & Ghi Ch√∫ T√≠ch H·ª£p üìù</h4>
              <p>Ngay trong m√†n h√¨nh ƒë·ªìng h·ªì, b·∫°n c√≥ th·ªÉ t·∫°o danh s√°ch vi·ªác c·∫ßn l√†m (to-do) cho t·ª´ng ch·ªß ƒë·ªÅ con ho·∫∑c ghi l·∫°i nh·ªØng √Ω t∆∞·ªüng ch·ª£t n·∫£y ra m√† kh√¥ng l√†m gi√°n ƒëo·∫°n d√≤ng ch·∫£y c√¥ng vi·ªác.</p>

              <h4>Ch·∫ø ƒê·ªô Zen üßò</h4>
              <p>Khi c·∫ßn t·∫≠p trung tuy·ªát ƒë·ªëi, h√£y nh·∫•n v√†o bi·ªÉu t∆∞·ª£ng con m·∫Øt (üëÅÔ∏è). Giao di·ªán s·∫Ω ·∫©n ƒëi, ch·ªâ ƒë·ªÉ l·∫°i h√¨nh n·ªÅn v√† chi·∫øc ƒë·ªìng h·ªì. Trong ch·∫ø ƒë·ªô n√†y, b·∫°n c√≥ th·ªÉ <strong>k√©o th·∫£ ƒë·ªìng h·ªì</strong> ƒë·∫øn b·∫•t k·ª≥ v·ªã tr√≠ n√†o tr√™n m√†n h√¨nh ƒë·ªÉ c√≥ m·ªôt kh√¥ng gian l√†m vi·ªác g·ªçn g√†ng nh·∫•t.</p>

              <h4>Th·ªëng K√™ & C·ªôt M·ªëc üèÜ</h4>
              <p>Theo d√µi h√†nh tr√¨nh c·ªßa b·∫°n qua nh·ªØng con s·ªë bi·∫øt n√≥i. ·ª®ng d·ª•ng s·∫Ω t·ª± ƒë·ªông ghi nh·∫≠n v√† ch√∫c m·ª´ng khi b·∫°n ƒë·∫°t ƒë∆∞·ª£c nh·ªØng c·ªôt m·ªëc quan tr·ªçng v·ªÅ th·ªùi gian t·∫≠p trung, bi·∫øn m·ªói n·ªó l·ª±c th√†nh m·ªôt th√†nh t·ª±u ƒë√°ng t·ª± h√†o.</p>

              <hr />
              <h4>‚å®Ô∏è Ph√≠m T·∫Øt Th√¥ng Minh</h4>
              <ul>
                  <li><kbd>Space</kbd>: B·∫Øt ƒë·∫ßu / T·∫°m d·ª´ng / Ti·∫øp t·ª•c phi√™n h·ªçc.</li>
                  <li><kbd>N</kbd>: B·ªè qua phi√™n l√†m vi·ªác ho·∫∑c ngh·ªâ hi·ªán t·∫°i.</li>
                  <li><kbd>Esc</kbd>: ƒê√≥ng c√°c c·ª≠a s·ªï ƒëang m·ªü (nh∆∞ C√†i ƒë·∫∑t).</li>
              </ul>

              <hr />
              <h4>üõ†Ô∏è C√†i ƒê·∫∑t N√¢ng Cao & T√≠ch H·ª£p</h4>

              <h4>Tr·ª£ L√Ω Gemini AI üß†</h4>
              <p>Bi·∫øn ·ª©ng d·ª•ng th√†nh m·ªôt ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh th√¥ng minh. Ngo√†i vi·ªác h·ªèi ƒë√°p, b·∫°n c√≤n c√≥ th·ªÉ:</p>
              <ul>
                  <li><strong>T·ª± ƒë·ªông ƒê·ªãnh d·∫°ng Th√¥ng minh:</strong> Khi so·∫°n th·∫£o trong m·ª•c "Ph∆∞∆°ng ph√°p", h√£y ƒë·ªÉ AI t·ª± ƒë·ªông ph√¢n t√≠ch v√† ƒë·ªãnh d·∫°ng vƒÉn b·∫£n th√¥ c·ªßa b·∫°n‚Äît·ª± nh·∫≠n di·ªán ti√™u ƒë·ªÅ, c√°c √Ω ch√≠nh c·∫ßn in ƒë·∫≠m v√† danh s√°ch.</li>
                  <li><strong>Thi·∫øt l·∫≠p:</strong> Truy c·∫≠p Google AI Studio ƒë·ªÉ t·∫°o API Key mi·ªÖn ph√≠ v√† d√°n v√†o √¥ "Gemini API Key" trong C√†i ƒë·∫∑t c·ªßa ·ª©ng d·ª•ng.</li>
              </ul>

              <h4>T√πy Bi·∫øn Giao Di·ªán & √Çm Thanh üé®</h4>
              <p>Bi·∫øn kh√¥ng gian h·ªçc t·∫≠p th√†nh c·ªßa ri√™ng b·∫°n:</p>
              <ul>
                  <li><strong>Nhi·ªÅu Theme & H√¨nh n·ªÅn:</strong> L·ª±a ch·ªçn gi·ªØa c√°c theme c√≥ s·∫µn (S√°ng, T·ªëi, Pastel...) ho·∫∑c <strong>t·∫£i l√™n h√¨nh n·ªÅn c·ªßa ri√™ng b·∫°n</strong> ƒë·ªÉ t·∫°o c·∫£m h·ª©ng.</li>
                  <li><strong>√Çm b√°o T√πy ch·ªânh:</strong> B·∫°n c√≥ th·ªÉ <strong>t·∫£i l√™n c√°c file √¢m thanh (.mp3, .wav...) c·ªßa ri√™ng m√¨nh</strong> ƒë·ªÉ s·ª≠ d·ª•ng l√†m chu√¥ng b√°o cho c√°c phi√™n l√†m vi·ªác v√† ngh·ªâ ng∆°i.</li>
              </ul>

              <h4>Nh·∫°c N·ªÅn YouTube üé∂</h4>
              <p>T·∫°o kh√¥ng gian h·ªçc t·∫≠p ho√†n h·∫£o b·∫±ng c√°ch ph√°t m·ªôt video ho·∫∑c danh s√°ch ph√°t YouTube l√†m nh·∫°c n·ªÅn. D√°n ƒë∆∞·ªùng d·∫´n (URL) v√†o √¥ "Nh·∫°c n·ªÅn YouTube" trong C√†i ƒë·∫∑t.</p>

              <h4>An To√†n D·ªØ Li·ªáu: Sao L∆∞u & Ph·ª•c H·ªìi üõ°Ô∏è</h4>
              <p>·ª®ng d·ª•ng t·ª± ƒë·ªông sao l∆∞u ti·∫øn tr√¨nh c·ªßa b·∫°n m·ªói ng√†y. B·∫°n c√≥ th·ªÉ t√πy ch·ªânh s·ªë ng√†y l∆∞u gi·ªØ b·∫£n sao l∆∞u v√† ph·ª•c h·ªìi d·ªØ li·ªáu t·ª´ m·ªôt ng√†y trong qu√° kh·ª© n·∫øu c·∫ßn. ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> Ph·ª•c h·ªìi s·∫Ω ghi ƒë√® to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i.</p>
          </div>
      </div>
    </main>
  </div>

  <div class="modal" id="modalMilestone" role="dialog" aria-modal="true" aria-labelledby="milestoneTitle">
    <div class="modal-card" style="width: min(600px, 94vw);">
        <h3 id="milestoneTitle">üéâ Ch√∫c m·ª´ng B·∫°n!</h3>
        <p id="milestoneMessage" style="white-space: pre-wrap; line-height: 1.6;"></p>
        <div class="row" style="justify-content:flex-end; margin-top:12px">
            <button class="btn acc" id="btnMilestoneClose">Ti·∫øp t·ª•c h√†nh tr√¨nh!</button>
        </div>
    </div>
  </div>
  <div class="modal" id="modalSettings" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal-card">
          <h3 id="settingsTitle">‚öôÔ∏è C√†i ƒë·∫∑t</h3>
          <nav class="tab-nav">
              <button class="tab-btn active" data-tab="settings-timer">ƒê·ªìng h·ªì</button>
              <button class="tab-btn" data-tab="settings-ui">Giao di·ªán & √Çm thanh</button>
              <button class="tab-btn" data-tab="settings-integrations">T√≠ch h·ª£p</button>
          </nav>
          <div class="settings-content">
              <div id="settings-timer" class="tab-content active" style="flex-direction:column; gap:20px;">
                  <div class="row" id="timerPresetSelector" style="margin-bottom:16px;">
                      <button class="btn acc" data-preset-target="A"> Ki·ªÉu A </button>
                      <button class="btn ghost" data-preset-target="B"> Ki·ªÉu B </button>
                      <button class="btn ghost" data-preset-target="C"> Ki·ªÉu C (Flow) </button>
                  </div>
                  <div id="settings-pomodoro">
                      <h4>Th·ªùi l∆∞·ª£ng Pomodoro</h4>
                      <div class="row">
                          <label>L√ÄM VI·ªÜC (ph√∫t)<input type="number" id="set_work" min="1" /></label>
                          <label>H·∫† NHI·ªÜT (ph√∫t)<input type="number" id="set_winddown" min="0" /></label>
                          <label>NGH·ªà NG·∫ÆN (ph√∫t)<input type="number" id="set_short" min="1" /></label>
                          <label>NGH·ªà D√ÄI (ph√∫t)<input type="number" id="set_long" min="1" /></label>
                      </div>
                      <div class="row">
                          <label>Chu k·ª≥ Pomodoro<input type="number" id="set_cycles" min="1" /></label>
                          <label>Chu k·ª≥ ngh·ªâ d√†i<input type="number" id="set_interval" min="2" /></label>
                      </div>
                  </div>
                  <div id="settings-flowtime" class="hidden">
                      <h4>Flowtime</h4>
                      <div class="row">
                          <label>T·ª∑ l·ªá ngh·ªâ (L√†m vi·ªác / X)
                              <input type="number" id="set_flowRatio" min="1" max="20" />
                          </label>
                      </div>
                      <p class="tiny" style="margin-top: 4px;">G·ª£i √Ω: Th·ªùi gian ngh·ªâ = t·ªïng th·ªùi gian l√†m vi·ªác / X. M·∫∑c ƒë·ªãnh l√† 5.</p>
                  </div>
                  <div class="settings-row-toggle">
                          <label for="set_autoStartNext">T·ª± ƒë·ªông b·∫Øt ƒë·∫ßu phi√™n ti·∫øp theo</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_autoStartNext">
                              <span class="slider"></span>
                          </label>
                      </div>
                  <div class="settings-row-toggle">
                          <label for="set_enableWinddown">B·∫≠t H·∫° nhi·ªát sau phi√™n l√†m</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_enableWinddown">
                              <span class="slider"></span>
                          </label>
                      </div>
                  <div class="settings-row-toggle">
                          <label for="set_enableSessionNotes">Nh·∫Øc ghi ch√∫ sau m·ªói phi√™n</label>
                          <label class="toggle-switch">
                              <input type="checkbox" id="set_enableSessionNotes">
                              <span class="slider"></span>
                          </label>
                      </div>
              </div>
              <div id="settings-ui" class="tab-content" style="flex-direction: column; gap: 20px;">
                  <div>
                      <h4>Giao di·ªán</h4>
                      <div class="row">
                          <label>Theme Giao Di·ªán
                                <select id="set_theme_color">
                                    <option value="default">M·∫∑c ƒë·ªãnh (Dark Blue)</option>
                                    <option value="light">Light - Tr√† S·ªØa</option>
                                    <option value="pastel">Pastel - D·ªÖ th∆∞∆°ng</option>
                                    <option value="lofi">Lofi Study Room</option>
                                    <option value="space">Space Station</option>
                                </select>
                          </label>
                      </div>
                      <div class="row" style="margin-top: 12px;">
                          <label>Ch·∫ø ƒë·ªô hi·ªÉn th·ªã n·ªÅn
                              <select id="set_backgroundMode">
                                  <option value="cover">L·∫•p ƒë·∫ßy (M·∫∑c ƒë·ªãnh)</option>
                                  <option value="contain">V·ª´a v·∫∑n (S·∫Øc n√©t)</option>
                                  <option value="auto">K√≠ch th∆∞·ªõc g·ªëc (L·∫∑p l·∫°i)</option>
                              </select>
                          </label>
                      </div>
                      <div class="row">
                          <label>H√¨nh n·ªÅn
                              <label class="btn small ghost" for="uploadBg">T·∫£i ·∫£nh m·ªõi</label>
                              <input type="file" id="uploadBg" accept="image/*" class="hidden" />
                          </label>
                          <button class="btn small danger" id="btnClearBg">X√≥a n·ªÅn</button>
                      </div>
                      <div class="row">
                          <label style="flex: 1;">ƒê·ªô trong su·ªët c·ªßa n·ªÅn</label>
                          <input type="range" id="set_panelOpacity" min="0.1" max="1" step="0.05" style="flex: 2;">
                      </div>
                      
                      
                   </div>
                  
                   <div>
                      <h4>√Çm thanh</h4>
                      <div class="row">
                          <label>√Çm l∆∞·ª£ng (0‚Äì1)<input type="number" id="set_volume" step="0.05" min="0" max="1"/></label>
                          <label>Ki·ªÉu √¢m b√°o
                              <select id="set_theme">
                                  <option value="beep">Beep</option>
                                  <option value="chime">Chime</option>
                              </select>
                          </label>
                           <button class="btn" id="btnTestSound" style="flex: 0 1 auto; align-self: center;">Test</button>
                      </div>
                      <div style="text-align: right; margin-top: 12px;">
                          <button class="btn ghost small" id="btnToggleCustomSounds">T√πy ch·ªânh √¢m b√°o</button>
                      </div>

                      <div id="customSoundsContainer" class="hidden" style="margin-top: 8px;">
                      <div class="row" style="display: flex; gap: 8px; justify-content: flex-end;">
                          <div>
                              <small>√Çm b√°o h·∫øt L√ÄM VI·ªÜC</small>
                              <label title="√Çm b√°o h·∫øt L√ÄM VI·ªÜC" class="btn small ghost" for="uploadSoundWork">L√ÄM VI·ªÜC</label>
                              <input type="file" id="uploadSoundWork" accept="audio/*" class="hidden" />
                          </div>
                          <div>
                              <small>√Çm b√°o h·∫øt NGH·ªà NG·∫ÆN</small>
                              <label title="√Çm b√°o h·∫øt NGH·ªà NG·∫ÆN" class="btn small ghost" for="uploadSoundBreak">NGH·ªà NG·∫ÆN</label>
                              <input type="file" id="uploadSoundBreak" accept="audio/*" class="hidden" />
                          </div>
                          <div>
                              <small>√Çm b√°o h·∫øt NGH·ªà D√ÄI</small>
                              <label title="√Çm b√°o h·∫øt NGH·ªà D√ÄI" class="btn small ghost" for="uploadSoundLong">NGH·ªà D√ÄI</label>
                              <input type="file" id="uploadSoundLong" accept="audio/*" class="hidden" />
                          </div>
                      </div>
                      </div>
                      
                  </div>
              </div>
              <div id="settings-integrations" class="tab-content" style="flex-direction: column; gap: 20px;">
                  <div>
                      <h4>T√≠ch h·ª£p AI</h4>
                      <label>Gemini API Key
                          <input type="password" id="set_apiKey" placeholder="D√°n API Key c·ªßa b·∫°n v√†o ƒë√¢y..." />
                      </label>
                      <div class="tiny">C·∫ßn c√≥ ƒë·ªÉ s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng AI. L·∫•y key mi·ªÖn ph√≠ t·∫°i <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>.</div>
                  </div>
                  <div>
                      <h4>üéµ Nh·∫°c n·ªÅn YouTube</h4>
                      <div class="row" style="gap:8px; align-items:center;">
                          <input type="text" id="set_youtubeUrl" placeholder="D√°n link YouTube v√†o ƒë√¢y..." style="flex:1;">
                          </div>
                      <div id="ytUrlFeedback" class="tiny" style="min-height: 1.2em; padding: 4px 0;"></div>
                      <div class="row" style="margin-top: 4px;">
                          <label style="flex: 0 1 auto; display: flex; align-items: center; gap: 8px; font-size: 14px;">
                              <input type="checkbox" id="set_ytThumbAsBg">
                              <span>D√πng ·∫£nh b√¨a video l√†m n·ªÅn</span>
                          </label>
                      </div>
                      <div class="row" style="margin-top: 8px;">
                          <button id="btnToggleYtSound" class="btn small" style="flex:0 1 auto;" title="D·ª´ng s·∫Ω kh√¥ng t·ª± ph√°t l·∫°i cho ƒë·∫øn khi b·∫°n b·∫•m ‚ñ∂Ô∏è">‚ñ∂Ô∏è</button>
                          <input type="range" id="ytSoundVolume" min="0" max="100" step="1" value="80" style="flex:1;">
                      </div>
                      <div class="tiny" style="text-align:center; margin-top:4px;">√Çm l∆∞·ª£ng</div>
                  </div>
                  <div>
                      <h4>üõ°Ô∏è C√†i ƒë·∫∑t sao l∆∞u</h4>
                      <div class="row">
                          <label>S·ªë ng√†y sao l∆∞u c·∫ßn gi·ªØ l·∫°i
                               <input type="number" id="set_backupDays" min="1" max="30" />
                          </label>
                      </div>
                  </div>
                  <div>
                      <h4>üõ°Ô∏è Ph·ª•c h·ªìi d·ªØ li·ªáu</h4>
                      <p class="tiny">Ph·ª•c h·ªìi d·ªØ li·ªáu t·ª´ m·ªôt b·∫£n sao l∆∞u t·ª± ƒë·ªông h√†ng ng√†y. H√†nh ƒë·ªông n√†y s·∫Ω ghi ƒë√® l√™n d·ªØ li·ªáu hi·ªán t·∫°i c·ªßa b·∫°n.</p>
                      <div class="row">
                          <select id="backupList" style="flex: 3;"></select>
                          <button id="btnRestoreBackup" class="btn warn small" style="flex: 1;">Ph·ª•c h·ªìi</button>
                      </div>
                  </div>
              </div>
          </div>
          <div class="row" style="margin-top:16px; justify-content:flex-end">
              <button class="btn ghost" id="btnDefaults">M·∫∑c ƒë·ªãnh</button>
              <button class="btn acc" id="btnSaveSettings">L∆∞u</button>
              <button class="btn" id="btnCloseSettings">ƒê√≥ng</button>
          </div>
      </div>
  </div>

  <div class="modal" id="modalNote" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="modal-card">
      <h3 id="noteTitle">üìù Ghi ch√∫ cho phi√™n v·ª´a ho√†n th√†nh</h3>
      <div class="row"><textarea id="noteText" placeholder="B·∫°n h·ªçc ƒë∆∞·ª£c g√¨? Kh√≥ khƒÉn? Next steps?"></textarea></div>
      <div class="row" style="justify-content:flex-end; margin-top:8px; gap: 12px;">
        <button class="btn" id="btnSummarizeNote">‚ú® T√≥m t·∫Øt & G·ª£i √Ω</button>
        <button class="btn" id="btnSkipNote">B·ªè qua</button>
        <button class="btn acc" id="btnSaveNote">L∆∞u ghi ch√∫</button>
      </div>
    </div>
  </div>

  <div class="modal" id="modalGeneric" role="dialog" aria-modal="true" aria-labelledby="genericTitle">
      <div class="modal-card" style="width: min(450px, 94vw);">
          <h3 id="genericTitle">Ti√™u ƒë·ªÅ</h3>
          <p id="genericMessage" class="hidden"></p>
          <input type="text" id="genericInput" class="hidden" />
          <div class="row" style="justify-content:flex-end; margin-top:12px">
              <button class="btn" id="btnGenericCancel">H·ªßy</button>
              <button class="btn acc" id="btnGenericOk">OK</button>
          </div>
      </div>
  </div>
  
  <div class="modal" id="modalDashboard" role="dialog" aria-modal="true" aria-labelledby="dashboardTitle">
    <div class="modal-card" style="width: min(800px, 95vw);">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 id="dashboardTitle">üìä T·ªïng quan</h3>
            <button class="btn ghost small" id="btnCloseDashboard">ƒê√≥ng</button>
        </div>
        <p class="tiny">T·ªïng h·ª£p th·ªùi gian v√† s·ªë phi√™n ƒë√£ ho√†n th√†nh tr√™n t·∫•t c·∫£ c√°c ch·ªß ƒë·ªÅ.</p>
        <div id="dashboardContent" style="max-height: 60vh; overflow-y: auto;"></div>
    </div>
  </div>

  <div class="modal" id="modalMethodEditor" role="dialog" aria-modal="true">
    <div class="modal-card" style="width: min(800px, 95vw);">
      <h3 id="methodEditorTitle">Ch·ªânh-s·ª≠a Ph∆∞∆°ng-ph√°p</h3>
      
      <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 12px;">
        <input type="hidden" id="methodEditorId">
        <label>Ti√™u-ƒë·ªÅ<input type="text" id="methodEditorTitleInput"></label>
        
        <label>N·ªôi-dung</label>
        <div class="editor-toolbar">
          <button id="toolH4" class="btn small ghost" title="Ti√™u-ƒë·ªÅ nh·ªè">H</button>
          <button id="toolBold" class="btn small ghost" title="In ƒë·∫≠m">B</button>
          <button id="toolItalic" class="btn small ghost" title="In nghi√™ng">I</button>
          <button id="toolList" class="btn small ghost" title="Danh-s√°ch">1.</button>
          <button id="toolBullet" class="btn small ghost" title="Danh s√°ch ch·∫•m tr√≤n">‚Ä¢</button>

          <div class="color-picker-wrapper">
            <button id="toolColor" class="btn small ghost" title="M√†u ch·ªØ">A</button>
            <div class="color-palette hidden">
              <button class="color-swatch" style="background-color: var(--text);" data-color="var(--text)" title="M√†u ch·ªØ m·∫∑c ƒë·ªãnh"></button>
              <button class="color-swatch" style="background-color: var(--acc);" data-color="var(--acc)" title="M√†u nh·∫•n m·∫°nh"></button>
              <button class="color-swatch" style="background-color: var(--acc-2);" data-color="var(--acc-2)" title="M√†u t√≠ch c·ª±c"></button>
              <button class="color-swatch" style="background-color: var(--warn);" data-color="var(--warn)" title="M√†u c·∫£nh b√°o"></button>
              <button class="color-swatch" style="background-color: var(--danger);" data-color="var(--danger)" title="M√†u nguy hi·ªÉm"></button>
              <button class="color-swatch" style="background-color: var(--purple);" data-color="var(--purple)" title="M√†u t√≠m"></button>
            </div>
          </div>
        </div>

        <div class="editor-container">
            <div id="methodEditorContentInput" class="editable-content" contenteditable="true"></div>
        </div>

      </div>

      <div class="row" style="justify-content:space-between; margin-top:16px">
        <button id="btnAutoFormat" class="btn small" disabled title="T√≠nh nƒÉng n√†y y√™u c·∫ßu Gemini API Key">‚ú® T·ª± ƒë·ªông ƒë·ªãnh d·∫°ng</button>
        <div>
          <button class="btn" id="btnCancelMethodEditor">H·ªßy</button>
          <button class="btn acc" id="btnSaveMethod">L∆∞u</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>
  <audio id="audioWorkEnd"></audio>
  <audio id="audioBreakEnd"></audio>
  <audio id="audioLongEnd"></audio>
  <div id="youtube-player-container"></div>

  <div id="draggableTimer" class="draggable-timer">00:00</div>

  <div id="soundPermissionBar" class="sound-permission-bar" role="alert" aria-live="polite">
    <span class="msg">Nh·∫•n "B·∫≠t √¢m thanh" ƒë·ªÉ cho ph√©p ph√°t nh·∫°c n·ªÅn.</span>
    <button id="btnEnableSound" class="btn small acc">B·∫≠t √¢m thanh</button>
  </div>
<!-- YouTube Iframe API is loaded dynamically when needed -->
<!-- === START: Inline Minimal Sortable (Offline-Safe) === -->
<script>
// Minimal Sortable shim for offline single-file usage.
// Supports: draggable selector, cross-list via same group, onEnd callback.
(function(){
  if (window.Sortable) return; // Respect existing if loaded
  const DND = { src: null, from: null, selector: null, group: null };
  function makeDraggable(container, selector){
    Array.from(container.querySelectorAll(selector)).forEach(el => {
      try { el.setAttribute('draggable','true'); } catch(_) {}
    });
  }
  function closestItem(e, selector){
    const t = e.target && e.target.closest ? e.target.closest(selector) : null;
    return t || null;
  }
  function Sortable(container, opts){
    this.el = container;
    this.options = opts || {};
    const selector = this.options.draggable || '*';
    const group = this.options.group || null;
    makeDraggable(container, selector);
    const handleDragStart = (e) => {
      const item = closestItem(e, selector);
      if (!item) return;
      DND.src = item; DND.from = container; DND.selector = selector; DND.group = group;
      e.dataTransfer.effectAllowed = 'move';
      try { e.dataTransfer.setData('text/plain', ''); } catch(_) {}
    };
    const handleDragOver = (e) => {
      if (!DND.src) return;
      // Only allow drop if same selector and group matches (or no group)
      const sameGroup = (!group && !DND.group) || (group && DND.group && group === DND.group);
      if (!sameGroup) return;
      const target = closestItem(e, selector);
      if (!target) return;
      e.preventDefault();
    };
    const handleDrop = (e) => {
      if (!DND.src) return;
      const sameGroup = (!group && !DND.group) || (group && DND.group && group === DND.group);
      if (!sameGroup) return;
      const target = closestItem(e, selector);
      if (!target) return;
      e.preventDefault();
      const from = DND.from;
      const to = container;
      const children = Array.from(from.querySelectorAll(DND.selector));
      const oldIndex = children.indexOf(DND.src);
      if (target && DND.src && target !== DND.src) {
        to.insertBefore(DND.src, target);
      }
      const newChildren = Array.from(to.querySelectorAll(DND.selector));
      const newIndex = newChildren.indexOf(DND.src);
      if (typeof this.options.onEnd === 'function') {
        try { this.options.onEnd({ oldIndex, newIndex, from, to, item: DND.src }); } catch(_) {}
      }
      DND.src = null; DND.from = null; DND.selector = null; DND.group = null;
    };
    this._listeners = { handleDragStart, handleDragOver, handleDrop };
    container.addEventListener('dragstart', handleDragStart);
    container.addEventListener('dragover', handleDragOver);
    container.addEventListener('drop', handleDrop);
    this.destroy = () => {
      container.removeEventListener('dragstart', handleDragStart);
      container.removeEventListener('dragover', handleDragOver);
      container.removeEventListener('drop', handleDrop);
    };
  }
  window.Sortable = Sortable;
})();
</script>
<!-- === END: Inline Minimal Sortable === -->
  <script>
    const _0x17450c=_0x2dbf;(function(_0x43a0f9,_0x534db4){const _0x89931f=_0x2dbf,_0x386275=_0x43a0f9();while(!![]){try{const _0x4c32f7=-parseInt(_0x89931f(0x4be))/0x1*(parseInt(_0x89931f(0x33c))/0x2)+parseInt(_0x89931f(0x418))/0x3+parseInt(_0x89931f(0x3af))/0x4+parseInt(_0x89931f(0x407))/0x5*(parseInt(_0x89931f(0x202))/0x6)+parseInt(_0x89931f(0x444))/0x7+parseInt(_0x89931f(0x4b9))/0x8*(-parseInt(_0x89931f(0x3b0))/0x9)+-parseInt(_0x89931f(0x3c7))/0xa;if(_0x4c32f7===_0x534db4)break;else _0x386275['push'](_0x386275['shift']());}catch(_0xb0656c){_0x386275['push'](_0x386275['shift']());}}}(_0x526e,0x4a886),window[_0x17450c(0x45b)](_0x17450c(0x49e),()=>{try{updateFullscreenButton();}catch(_0x1c16d8){}}));const IS_FILE_PROTOCOL=window[_0x17450c(0x308)][_0x17450c(0x297)]===_0x17450c(0x4ff);function startYtApiWatchdog(){const _0x44d407=_0x17450c,_0x549e53=document[_0x44d407(0x1f8)](_0x44d407(0x395));if(!_0x549e53)return;const _0x4d5c0f=setTimeout(()=>{const _0x7ba1f0=_0x44d407;try{(!window['YT']||!window['YT'][_0x7ba1f0(0x43f)])&&(_0x549e53['textContent']=_0x7ba1f0(0x2a6),_0x549e53[_0x7ba1f0(0x3a2)]['color']='var(--sub)');}catch(_0x2ccf23){}},0x5dc),_0x15aa29=setTimeout(()=>{const _0x95c8f2=_0x44d407;try{(!window['YT']||!window['YT'][_0x95c8f2(0x43f)])&&(_0x549e53[_0x95c8f2(0x48c)]=_0x95c8f2(0x452),_0x549e53[_0x95c8f2(0x3a2)][_0x95c8f2(0x2d1)]=_0x95c8f2(0x41f));}catch(_0x28f542){}},0x1b58);window['__ytApiWatchdog']={'cancel'(){clearTimeout(_0x4d5c0f),clearTimeout(_0x15aa29);}};}(function(){const _0x47a1cf=_0x17450c,_0x169f33={'timer.cycleInfo':({current:current=0x0,target:target=0x0}={})=>'Chu\x20k·ª≥\x20'+current+'/'+target,'timer.selectSubtopicPrompt':_0x47a1cf(0x211)};window['t']=function _0x26c8d9(_0x2db35a,_0x36e78a){try{const _0x2d1d4c=_0x169f33[_0x2db35a];if(typeof _0x2d1d4c==='function')return _0x2d1d4c(_0x36e78a||{});if(typeof _0x2d1d4c==='string')return _0x2d1d4c;}catch(_0x409c35){}return _0x2db35a;},window[_0x47a1cf(0x3c6)]=function _0x5a081b(_0x1f1d8f){const _0x131706=_0x47a1cf;try{localStorage['setItem'](_0x131706(0x305),_0x1f1d8f||'vi');}catch(_0x473185){}return Promise[_0x131706(0x32f)]();};}());function ensureYouTubeAPI(){const _0x18acbd=_0x17450c;if(IS_FILE_PROTOCOL)return Promise['resolve'](![]);try{if(window['YT']&&window['YT'][_0x18acbd(0x43f)])return Promise[_0x18acbd(0x32f)](!![]);}catch(_0x3cbf38){}if(window['__ytApiPromise'])return window[_0x18acbd(0x44f)];return startYtApiWatchdog(),window[_0x18acbd(0x44f)]=new Promise((_0x5d7f96,_0x2180e9)=>{const _0x43035b=_0x18acbd;try{const _0x522a6f=document['createElement']('script');_0x522a6f[_0x43035b(0x35b)]=_0x43035b(0x1ff),_0x522a6f[_0x43035b(0x301)]=!![],_0x522a6f['defer']=!![],_0x522a6f[_0x43035b(0x4b8)]=()=>_0x5d7f96(!![]),_0x522a6f[_0x43035b(0x233)]=()=>_0x2180e9(new Error(_0x43035b(0x248))),document[_0x43035b(0x317)][_0x43035b(0x2e8)](_0x522a6f);}catch(_0x4a4136){_0x2180e9(_0x4a4136);}}),window[_0x18acbd(0x44f)];}const storageManager={'DB_NAME':_0x17450c(0x340),'DB_VERSION':0x1,'db':null,async 'initDB'(){return new Promise((_0x1ea557,_0x540ffc)=>{const _0xba1bb7=_0x2dbf;if(this['db'])return _0x1ea557(this['db']);const _0x4bb79b=indexedDB[_0xba1bb7(0x326)](this['DB_NAME'],this[_0xba1bb7(0x287)]);_0x4bb79b[_0xba1bb7(0x335)]=_0x16de2e=>{const _0x54fb50=_0xba1bb7,_0x4af789=_0x16de2e[_0x54fb50(0x4a2)]['result'];!_0x4af789[_0x54fb50(0x415)][_0x54fb50(0x4ea)](_0x54fb50(0x4a9))&&_0x4af789[_0x54fb50(0x394)]('settings');!_0x4af789[_0x54fb50(0x415)]['contains'](_0x54fb50(0x3b3))&&_0x4af789[_0x54fb50(0x394)](_0x54fb50(0x3b3),{'keyPath':'id'});if(!_0x4af789[_0x54fb50(0x415)][_0x54fb50(0x4ea)](_0x54fb50(0x206))){const _0xc42ac6=_0x4af789['createObjectStore']('subtopics',{'keyPath':'id'});_0xc42ac6[_0x54fb50(0x49b)](_0x54fb50(0x445),_0x54fb50(0x281));}!_0x4af789[_0x54fb50(0x415)][_0x54fb50(0x4ea)](_0x54fb50(0x3f7))&&_0x4af789[_0x54fb50(0x394)]('backups',{'keyPath':_0x54fb50(0x4f4)});},_0x4bb79b[_0xba1bb7(0x2b2)]=_0x528da0=>{const _0x2d9ef0=_0xba1bb7;this['db']=_0x528da0[_0x2d9ef0(0x4a2)]['result'],console['log'](_0x2d9ef0(0x27c)),_0x1ea557(this['db']);},_0x4bb79b[_0xba1bb7(0x233)]=_0x267d43=>{const _0x59da17=_0xba1bb7;console[_0x59da17(0x30e)](_0x59da17(0x4a1),_0x267d43['target'][_0x59da17(0x263)]),_0x540ffc(_0x267d43[_0x59da17(0x4a2)]['error']);};});},async '_getStore'(_0x321890,_0x4eafaa=_0x17450c(0x26d)){const _0x3e8a9c=_0x17450c;await this[_0x3e8a9c(0x4c7)]();const _0x2b0780=this['db'][_0x3e8a9c(0x327)]([_0x321890],_0x4eafaa);return _0x2b0780[_0x3e8a9c(0x366)](_0x321890);},async 'getSettings'(){const _0x16bddd=_0x17450c,_0x188ce5=await this[_0x16bddd(0x460)](_0x16bddd(0x4a9));return new Promise((_0x30cc91,_0x2c0676)=>{const _0xe42ba9=_0x16bddd,_0x3758bb=_0x188ce5[_0xe42ba9(0x4cf)](_0xe42ba9(0x457));_0x3758bb[_0xe42ba9(0x2b2)]=()=>_0x30cc91(_0x3758bb[_0xe42ba9(0x271)]),_0x3758bb[_0xe42ba9(0x233)]=()=>_0x2c0676(_0x3758bb['error']);});},async 'updateSettings'(_0x5b88eb){const _0xf21b29=_0x17450c,_0x1ba984=await this[_0xf21b29(0x460)]('settings',_0xf21b29(0x30c));return new Promise((_0x5c4751,_0x53dd74)=>{const _0x29dd58=_0xf21b29,_0x486720=_0x1ba984[_0x29dd58(0x275)](_0x5b88eb,_0x29dd58(0x457));_0x486720[_0x29dd58(0x2b2)]=()=>_0x5c4751(_0x486720[_0x29dd58(0x271)]),_0x486720['onerror']=()=>_0x53dd74(_0x486720[_0x29dd58(0x30e)]);});},async 'getAll'(_0x360788){const _0x5177a5=_0x17450c,_0x23f2a3=await this[_0x5177a5(0x460)](_0x360788);return new Promise((_0x328062,_0x20059a)=>{const _0x148d27=_0x5177a5,_0xcbbe5d=_0x23f2a3[_0x148d27(0x27d)]();_0xcbbe5d[_0x148d27(0x2b2)]=()=>_0x328062(_0xcbbe5d['result']),_0xcbbe5d[_0x148d27(0x233)]=()=>_0x20059a(_0xcbbe5d[_0x148d27(0x30e)]);});},async 'update'(_0x1ffeb0,_0x1698b){const _0x657ce8=_0x17450c,_0x1c11de=await this[_0x657ce8(0x460)](_0x1ffeb0,_0x657ce8(0x30c));return new Promise((_0x4759cd,_0x55addb)=>{const _0x2211ae=_0x657ce8,_0x11f808=_0x1c11de[_0x2211ae(0x275)](_0x1698b);_0x11f808[_0x2211ae(0x2b2)]=()=>_0x4759cd(_0x11f808[_0x2211ae(0x271)]),_0x11f808['onerror']=()=>_0x55addb(_0x11f808[_0x2211ae(0x30e)]);});},async 'add'(_0x3d479c,_0x4c1931){const _0x38f2b9=_0x17450c,_0x469a87=await this[_0x38f2b9(0x460)](_0x3d479c,_0x38f2b9(0x30c));return new Promise((_0x13aa1c,_0x9d34d0)=>{const _0x2e133f=_0x38f2b9,_0x231f7f=_0x469a87[_0x2e133f(0x30f)](_0x4c1931);_0x231f7f['onsuccess']=()=>_0x13aa1c(_0x231f7f[_0x2e133f(0x271)]),_0x231f7f[_0x2e133f(0x233)]=()=>_0x9d34d0(_0x231f7f[_0x2e133f(0x30e)]);});},async 'delete'(_0x1798c0,_0x14491c){const _0x3fb048=_0x17450c,_0x3b0e03=await this[_0x3fb048(0x460)](_0x1798c0,_0x3fb048(0x30c));return new Promise((_0x40c132,_0x33ec28)=>{const _0x1d3d1b=_0x3fb048,_0x582d2e=_0x3b0e03['delete'](_0x14491c);_0x582d2e[_0x1d3d1b(0x2b2)]=()=>_0x40c132(_0x582d2e[_0x1d3d1b(0x271)]),_0x582d2e[_0x1d3d1b(0x233)]=()=>_0x33ec28(_0x582d2e[_0x1d3d1b(0x30e)]);});},async 'save'(_0x417342){const _0x21374d=_0x17450c;return await this[_0x21374d(0x4c7)](),new Promise((_0x6e9ff6,_0x28a482)=>{const _0x254d0d=_0x21374d,_0x6382ed=this['db']['transaction'](['settings','topics','subtopics'],'readwrite'),_0x286546=_0x6382ed[_0x254d0d(0x366)](_0x254d0d(0x4a9)),_0x354deb=_0x6382ed['objectStore'](_0x254d0d(0x3b3)),_0x419e50=_0x6382ed[_0x254d0d(0x366)](_0x254d0d(0x206));_0x286546[_0x254d0d(0x275)](_0x417342[_0x254d0d(0x4a9)],_0x254d0d(0x457)),_0x354deb[_0x254d0d(0x325)](),_0x419e50[_0x254d0d(0x325)](),_0x417342[_0x254d0d(0x3b3)][_0x254d0d(0x4a0)](_0x5c4e8d=>{const _0x106b7f=_0x254d0d,{subtopics:_0x129a2c,..._0x533acb}=_0x5c4e8d;_0x354deb['put'](_0x533acb),(_0x129a2c||[])[_0x106b7f(0x4a0)](_0x5bfe24=>_0x419e50[_0x106b7f(0x275)](_0x5bfe24));}),_0x6382ed[_0x254d0d(0x40c)]=()=>_0x6e9ff6(),_0x6382ed['onerror']=_0x26c1bd=>_0x28a482(_0x26c1bd['target'][_0x254d0d(0x30e)]);});},async 'autoBackup'(_0x2ba8f9){const _0xbb6754=_0x17450c;await this[_0xbb6754(0x4c7)]();const _0x24f249=new Date()[_0xbb6754(0x370)]()[_0xbb6754(0x2ba)](0x0,0xa),_0x266cbb=localStorage[_0xbb6754(0x286)](_0xbb6754(0x43a));if(_0x24f249!==_0x266cbb){console['log'](_0xbb6754(0x22e)+_0x24f249+_0xbb6754(0x4dd));const _0x34db03={'date':_0x24f249,'data':JSON[_0xbb6754(0x31b)](JSON[_0xbb6754(0x239)](_0x2ba8f9))},_0x2f1b39=this['db'][_0xbb6754(0x327)](['backups'],'readwrite'),_0x2dde64=_0x2f1b39['objectStore'](_0xbb6754(0x3f7)),_0x33d190=_0x2dde64[_0xbb6754(0x275)](_0x34db03);_0x33d190[_0xbb6754(0x2b2)]=()=>{const _0x432691=_0xbb6754;localStorage[_0x432691(0x25d)](_0x432691(0x43a),_0x24f249),console['log']('Daily\x20backup\x20successful.'),this[_0x432691(0x22d)](_0x2ba8f9?.['settings']?.[_0x432691(0x332)]||0x7);},_0x33d190['onerror']=_0x441fe2=>{const _0x4add0b=_0xbb6754;console[_0x4add0b(0x30e)](_0x4add0b(0x46a),_0x441fe2[_0x4add0b(0x4a2)][_0x4add0b(0x30e)]);};}},async 'cleanupOldBackups'(_0x1032d8){const _0x141b69=_0x17450c;await this[_0x141b69(0x4c7)]();const _0x4d30a0=this['db'][_0x141b69(0x327)](['backups'],'readwrite'),_0x40fbb8=_0x4d30a0[_0x141b69(0x366)](_0x141b69(0x3f7)),_0x1763b1=_0x40fbb8[_0x141b69(0x3b1)]();_0x1763b1[_0x141b69(0x2b2)]=()=>{const _0x43c14b=_0x141b69,_0x991389=_0x1763b1['result'][_0x43c14b(0x236)]()['reverse']();if(_0x991389[_0x43c14b(0x223)]>_0x1032d8){const _0x524bd5=_0x991389[_0x43c14b(0x2ba)](_0x1032d8);_0x524bd5[_0x43c14b(0x4a0)](_0x51b293=>{const _0x5e4f06=_0x43c14b;_0x40fbb8[_0x5e4f06(0x3e3)](_0x51b293),console[_0x5e4f06(0x4b4)](_0x5e4f06(0x462)+_0x51b293);});}};},async 'getBackupList'(){const _0x4dff07=_0x17450c;return await this[_0x4dff07(0x4c7)](),new Promise((_0x1cf143,_0x4605b1)=>{const _0xcbcda7=_0x4dff07,_0x19162f=this['db'][_0xcbcda7(0x327)]([_0xcbcda7(0x3f7)],_0xcbcda7(0x26d)),_0x1a2c96=_0x19162f[_0xcbcda7(0x366)](_0xcbcda7(0x3f7)),_0x5f44fb=_0x1a2c96[_0xcbcda7(0x27d)]();_0x5f44fb[_0xcbcda7(0x2b2)]=()=>_0x1cf143(_0x5f44fb[_0xcbcda7(0x271)]['sort']((_0x2a69f0,_0x253b8a)=>_0x253b8a[_0xcbcda7(0x4f4)][_0xcbcda7(0x46c)](_0x2a69f0[_0xcbcda7(0x4f4)]))),_0x5f44fb[_0xcbcda7(0x233)]=_0x2ce04b=>_0x4605b1(_0x2ce04b['target'][_0xcbcda7(0x30e)]);});},async 'restoreBackup'(_0x3e6abe){const _0x476d53=_0x17450c;return await this[_0x476d53(0x4c7)](),new Promise((_0x41f732,_0x55f4b8)=>{const _0x5d232e=_0x476d53,_0x1199f6=this['db'][_0x5d232e(0x327)](['backups'],_0x5d232e(0x26d)),_0x2c3473=_0x1199f6['objectStore'](_0x5d232e(0x3f7)),_0x367192=_0x2c3473[_0x5d232e(0x4cf)](_0x3e6abe);_0x367192['onsuccess']=()=>{const _0x1c9b27=_0x5d232e;_0x367192[_0x1c9b27(0x271)]&&_0x367192[_0x1c9b27(0x271)][_0x1c9b27(0x249)]?(localStorage[_0x1c9b27(0x25d)](_0x1c9b27(0x228),JSON[_0x1c9b27(0x239)](_0x367192[_0x1c9b27(0x271)][_0x1c9b27(0x249)])),_0x41f732(_0x367192['result'][_0x1c9b27(0x249)])):_0x55f4b8(new Error(_0x1c9b27(0x4bc)));},_0x367192[_0x5d232e(0x233)]=_0x5e2c75=>_0x55f4b8(_0x5e2c75['target'][_0x5d232e(0x30e)]);});},'exportData'(_0x2cfa0f){const _0x3f111b=_0x17450c;let _0x21b156={};try{_0x21b156=JSON[_0x3f111b(0x31b)](JSON[_0x3f111b(0x239)](_0x2cfa0f||{}));}catch(_0x141e18){_0x21b156=_0x2cfa0f;}try{if(_0x21b156&&_0x21b156['settings'])_0x21b156[_0x3f111b(0x4a9)][_0x3f111b(0x27a)]='';}catch(_0x43af92){}const _0x27ddd2=new Blob([JSON[_0x3f111b(0x239)](_0x21b156,null,0x2)],{'type':_0x3f111b(0x2e5)}),_0x3b8138=document[_0x3f111b(0x251)]('a'),_0x2bf07d=new Date(),_0x3f23bd=_0x1517a7=>(''+_0x1517a7)[_0x3f111b(0x397)](0x2,'0');_0x3b8138['href']=URL[_0x3f111b(0x362)](_0x27ddd2),_0x3b8138[_0x3f111b(0x31a)]='pomodoro_backup_'+_0x2bf07d[_0x3f111b(0x38d)]()+_0x3f23bd(_0x2bf07d['getMonth']()+0x1)+_0x3f23bd(_0x2bf07d[_0x3f111b(0x3fa)]())+_0x3f111b(0x2dd),_0x3b8138['click'](),URL[_0x3f111b(0x459)](_0x3b8138[_0x3f111b(0x364)]);},async 'importData'(_0xadf059){const _0x364377=_0x17450c,_0x150511=await _0xadf059[_0x364377(0x2ee)](),_0x17b468=JSON[_0x364377(0x31b)](_0x150511);if(!_0x17b468[_0x364377(0x44e)]||!_0x17b468[_0x364377(0x4a9)]||!Array['isArray'](_0x17b468[_0x364377(0x3b3)]))throw new Error(_0x364377(0x39d));try{const _0x1c157f=window[_0x364377(0x249)]&&window[_0x364377(0x249)][_0x364377(0x4a9)]&&window[_0x364377(0x249)][_0x364377(0x4a9)][_0x364377(0x27a)]||'';(!(_0x364377(0x27a)in _0x17b468[_0x364377(0x4a9)])||_0x17b468[_0x364377(0x4a9)][_0x364377(0x27a)]==='')&&(_0x17b468[_0x364377(0x4a9)]['apiKey']=_0x1c157f);}catch(_0x70d9ea){}return localStorage['setItem'](_0x364377(0x228),JSON['stringify'](_0x17b468)),_0x17b468;}},$=(_0x376a40,_0x353b63=document)=>_0x353b63['querySelector'](_0x376a40),breakSuggestions=['H√£y\x20ƒë·ª©ng\x20d·∫≠y\x20v∆∞∆°n\x20vai\x20v√†\x20du·ªói\x20ng∆∞·ªùi.',_0x17450c(0x363),_0x17450c(0x4d8),_0x17450c(0x215),_0x17450c(0x371),_0x17450c(0x399),_0x17450c(0x247),_0x17450c(0x330),_0x17450c(0x342),_0x17450c(0x4a3),_0x17450c(0x207),_0x17450c(0x3bd),'Massage\x20nh·∫π\x20hai\x20b√™n\x20th√°i\x20d∆∞∆°ng.','Xem\x20m·ªôt\x20t·∫•m\x20·∫£nh\x20d·ªÖ\x20th∆∞∆°ng\x20ho·∫∑c\x20l√†m\x20b·∫°n\x20vui.',_0x17450c(0x346),_0x17450c(0x2a7),_0x17450c(0x3fc),_0x17450c(0x41b),_0x17450c(0x319),'Ch√∫\x20√Ω\x20ƒë·∫øn\x20c·∫£m\x20gi√°c\x20nhi·ªát\x20ƒë·ªô,\x20√°nh\x20s√°ng\x20trong\x20ph√≤ng.',_0x17450c(0x36d),_0x17450c(0x348),_0x17450c(0x447),_0x17450c(0x3d8),_0x17450c(0x296),_0x17450c(0x3a3),_0x17450c(0x4e6),_0x17450c(0x2b1),_0x17450c(0x428),_0x17450c(0x246),'Ki·ªÉm\x20tra\x20nh·ªãp\x20th·ªü\x20‚Äì\x20n·∫øu\x20g·∫•p\x20g√°p,\x20h√£y\x20l√†m\x20ch·∫≠m\x20l·∫°i.','T·ª±\x20nh·∫Øc:\x20Ngh·ªâ\x20ng∆°i\x20ƒë√∫ng\x20c√°ch\x20l√†\x20ƒë·ªÉ\x20l√†m\x20vi·ªác\x20t·ªët\x20h∆°n!'],$$=(_0x2a01cf,_0x296670=document)=>Array[_0x17450c(0x2c2)](_0x296670[_0x17450c(0x283)](_0x2a01cf));function on(_0x4cd024,_0x5af5d8,_0x159053){const _0x540e27=_0x17450c;if(!_0x4cd024){console[_0x540e27(0x1e9)](_0x540e27(0x24e),_0x5af5d8);return;}_0x4cd024[_0x540e27(0x45b)](_0x5af5d8,_0x159053);}const formatMMSS=_0x5c08e1=>{const _0x4fc0a2=_0x17450c,_0x2bd3ac=Math[_0x4fc0a2(0x294)](_0x5c08e1/0x3c)[_0x4fc0a2(0x314)]()[_0x4fc0a2(0x397)](0x2,'0'),_0x232fd5=Math[_0x4fc0a2(0x294)](_0x5c08e1%0x3c)[_0x4fc0a2(0x314)]()[_0x4fc0a2(0x397)](0x2,'0');return _0x2bd3ac+':'+_0x232fd5;},uid=(_0x29b0cd='id')=>_0x29b0cd+'_'+Date[_0x17450c(0x20e)]()+'_'+Math[_0x17450c(0x2f5)]()[_0x17450c(0x314)](0x24)[_0x17450c(0x2ba)](0x2,0x9);let __releaseFocusTrap=null;function trapFocus(_0x206a56){const _0x4ebaa9=_0x17450c;try{const _0x135173=_0x206a56[_0x4ebaa9(0x283)](_0x4ebaa9(0x4f1));if(!_0x135173[_0x4ebaa9(0x223)])return;const _0x4dd0c8=_0x135173[0x0],_0x3e48a9=_0x135173[_0x135173[_0x4ebaa9(0x223)]-0x1],_0x34b856=_0x46d3e5=>{const _0x2e2155=_0x4ebaa9;if(_0x46d3e5[_0x2e2155(0x2f4)]===_0x2e2155(0x33f)){if(_0x46d3e5['shiftKey']&&document[_0x2e2155(0x254)]===_0x4dd0c8)_0x46d3e5[_0x2e2155(0x441)](),_0x3e48a9['focus']();else!_0x46d3e5[_0x2e2155(0x1e8)]&&document['activeElement']===_0x3e48a9&&(_0x46d3e5[_0x2e2155(0x441)](),_0x4dd0c8[_0x2e2155(0x310)]());}};_0x206a56[_0x4ebaa9(0x45b)](_0x4ebaa9(0x4b2),_0x34b856),_0x4dd0c8['focus'](),__releaseFocusTrap=()=>{const _0x40c2fc=_0x4ebaa9;try{_0x206a56[_0x40c2fc(0x411)](_0x40c2fc(0x4b2),_0x34b856);}catch(_0x290050){}};}catch(_0x48a808){}}function releaseFocus(){if(__releaseFocusTrap){try{__releaseFocusTrap();}catch(_0x25fba0){}__releaseFocusTrap=null;}}const todayISO=()=>new Date()[_0x17450c(0x370)]();function toast(_0x4f7681,_0x474ea9=0xa28){const _0x187969=_0x17450c,_0x46613b=$(_0x187969(0x2b4)),_0x1bcf7d=document[_0x187969(0x251)](_0x187969(0x2d4));_0x1bcf7d[_0x187969(0x2a9)]='toast',_0x1bcf7d[_0x187969(0x48c)]=_0x4f7681,_0x46613b[_0x187969(0x2e8)](_0x1bcf7d),setTimeout(()=>{const _0x5519d7=_0x187969;_0x1bcf7d[_0x5519d7(0x3a2)][_0x5519d7(0x1ed)]='0';},_0x474ea9-0x12c),setTimeout(()=>_0x46613b[_0x187969(0x242)](_0x1bcf7d),_0x474ea9);}function escapeHTML(_0x270720){const _0x3e10ca=_0x17450c;return _0x270720[_0x3e10ca(0x466)](/[&<>"']/g,_0x26177b=>({'&':'&amp;','<':_0x3e10ca(0x24b),'>':_0x3e10ca(0x35c),'\x22':'&quot;','\x27':_0x3e10ca(0x1e6)}[_0x26177b]));}function formatDaysHoursMinutes(_0x55221e){const _0xc62730=_0x17450c;if(!_0x55221e||_0x55221e<0x1)return _0xc62730(0x28a);const _0x20e2e7=Math[_0xc62730(0x294)](_0x55221e/0x3c),_0x5d75ec=_0x55221e%0x3c,_0x28f61b=_0x5d75ec[_0xc62730(0x314)]()['padStart'](0x2,'0');return _0x20e2e7+'\x20ti·∫øng\x20'+_0x28f61b+_0xc62730(0x27e);}function formatGeminiResponse(_0x2df871){const _0x5e5d68=_0x17450c;return _0x2df871[_0x5e5d68(0x466)](/(\*\*|__|\*|_|#+\s*)/g,'');}function parseSimpleMarkdown(_0x1e3d92){const _0x18a9d8=_0x17450c,_0x262c59=(_0x1e3d92||'')[_0x18a9d8(0x33e)]('\x0a');let _0x5f497a='',_0x923cb1=null;const _0x2bc48f=()=>{const _0x1670bc=_0x18a9d8;_0x923cb1&&(_0x5f497a+=_0x923cb1==='ol'?_0x1670bc(0x3e6):_0x1670bc(0x4b0),_0x923cb1=null);};for(let _0x4bb7cb of _0x262c59){let _0x3ea51e=(_0x4bb7cb||'')[_0x18a9d8(0x404)]();if(!_0x3ea51e){_0x2bc48f();continue;}if(_0x3ea51e[_0x18a9d8(0x29a)]('####\x20'))_0x2bc48f(),_0x5f497a+=_0x18a9d8(0x299)+escapeHTML(_0x3ea51e['substring'](0x5))+_0x18a9d8(0x4d5);else{if(/^\d+\.\s/['test'](_0x3ea51e)){_0x923cb1!=='ol'&&(_0x2bc48f(),_0x5f497a+='<ol>',_0x923cb1='ol');const _0x1b269f=_0x3ea51e['substring'](_0x3ea51e[_0x18a9d8(0x379)]('\x20')+0x1);_0x5f497a+='<li>'+escapeHTML(_0x1b269f)+'</li>';}else _0x3ea51e[_0x18a9d8(0x29a)]('-\x20')?(_0x923cb1!=='ul'&&(_0x2bc48f(),_0x5f497a+=_0x18a9d8(0x4e5),_0x923cb1='ul'),_0x5f497a+='<li>'+escapeHTML(_0x3ea51e['substring'](0x2))+'</li>'):(_0x2bc48f(),_0x3ea51e=escapeHTML(_0x3ea51e)[_0x18a9d8(0x466)](/\*\*(.*?)\*\*/g,'<strong>$1</strong>')[_0x18a9d8(0x466)](/_(.*?)_/g,_0x18a9d8(0x425)),_0x5f497a+='<p>'+_0x3ea51e+_0x18a9d8(0x311));}}return _0x2bc48f(),_0x5f497a;}function wrapTextInMarkdown(_0x2d110a,_0x3b405a,_0x2fbc6c=''){const _0x2f58da=_0x17450c;if(!_0x2d110a)return;const _0x31f255=_0x2d110a['selectionStart']||0x0,_0x329b17=_0x2d110a[_0x2f58da(0x3c3)]||0x0,_0x4d2903=_0x2d110a['value']['substring'](_0x31f255,_0x329b17),_0x2c78eb=_0x3b405a+_0x4d2903+(_0x2fbc6c||_0x3b405a);_0x2d110a[_0x2f58da(0x2fe)](_0x2c78eb,_0x31f255,_0x329b17,_0x2f58da(0x42e)),_0x2d110a[_0x2f58da(0x310)]();}function updateEditorPreview(){const _0x2a6e44=_0x17450c,_0x2aaff3=$('#methodEditorContentInput'),_0x1aa117=$('#editorPreview');if(!_0x2aaff3||!_0x1aa117)return;const _0x17debe=_0x2aaff3[_0x2a6e44(0x406)]||'';_0x1aa117['innerHTML']=parseSimpleMarkdown(_0x17debe);}function _0x526e(){const _0xbbfd95=['N·∫°p\x20nƒÉng\x20l∆∞·ª£ng\x20b·∫±ng\x20m·ªôt\x20m√≥n\x20ƒÉn\x20nh·∫π\x20l√†nh\x20m·∫°nh.','\x22?\x20M·ªçi\x20ch·ªß\x20ƒë·ªÅ\x20con\x20v√†\x20d·ªØ\x20li·ªáu\x20li√™n\x20quan\x20s·∫Ω\x20b·ªã\x20m·∫•t.','prompt','acc','currentConfig','interval','end','A_winddown','statusText','ƒê√£\x20x√≥a\x20t√≥m\x20t·∫Øt.','#set_cycles','#modalNote','\x22\x20title=\x22Ho√†n\x20th√†nh\x20task\x22>\x20<label\x20for=\x22','_onFinishSegment','B_work','data:','<p>Benjamin\x20Franklin\x20ƒë√£\x20t·ª±\x20r√®n\x20luy·ªán\x20k·ªπ\x20nƒÉng\x20vi·∫øt\x20t·ª´\x20k√©m\x20c·ªèi\x20tr·ªü\x20n√™n\x20b·∫≠c\x20th·∫ßy\x20b·∫±ng\x20m·ªôt\x20ph∆∞∆°ng\x20ph√°p\x20ch·ªß\x20ƒë·ªông,\x20thay\x20v√¨\x20ch·ªâ\x20ƒë·ªçc\x20m·ªôt\x20c√°ch\x20th·ª•\x20ƒë·ªông.\x20C·ªët\x20l√µi\x20c·ªßa\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20l√†\x20ph√¢n\x20t√≠ch,\x20t√°i\x20t·∫°o,\x20v√†\x20so\x20s√°nh\x20v·ªõi\x20m·ªôt\x20b√†i\x20vi·∫øt\x20ch·∫•t\x20l∆∞·ª£ng\x20cao.</p><p>ƒê√¢y\x20l√†\x20m·ªôt\x20v√≠\x20d·ª•\x20kinh\x20ƒëi·ªÉn\x20c·ªßa\x20\x22Luy·ªán\x20t·∫≠p\x20c√≥\x20Ch·ªß\x20ƒë√≠ch\x22:\x20t·∫≠p\x20trung\x20v√†o\x20ƒëi·ªÉm\x20y·∫øu,\x20c√≥\x20m·ª•c\x20ti√™u\x20r√µ\x20r√†ng\x20v√†\x20nh·∫≠n\x20ph·∫£n\x20h·ªìi\x20ngay\x20l·∫≠p\x20t·ª©c.</p><h4>Quy\x20Tr√¨nh\x203\x20B∆∞·ªõc\x20C·ªët\x20L√µi</h4><ol><li><strong>Ph√¢n\x20T√≠ch\x20(Deconstruct):</strong>\x20ƒê·ªçc\x20m·ªôt\x20b√†i\x20vi·∫øt\x20m·∫´u\x20xu·∫•t\x20s·∫Øc.\x20Sau\x20ƒë√≥,\x20ch·ªâ\x20ghi\x20l·∫°i\x20nh·ªØng\x20√Ω\x20ch√≠nh\x20c·ªßa\x20t·ª´ng\x20ƒëo·∫°n\x20ho·∫∑c\x20t·ª´ng\x20c√¢u\x20ra\x20m·ªôt\x20t·ªù\x20gi·∫•y\x20ri√™ng.</li><li><strong>T√°i\x20T·∫°o\x20(Reconstruct):</strong>\x20V√†i\x20ng√†y\x20sau,\x20khi\x20ƒë√£\x20qu√™n\x20ƒëi\x20vƒÉn\x20phong\x20c·ªßa\x20b·∫£n\x20g·ªëc,\x20h√£y\x20d√πng\x20nh·ªØng\x20ghi\x20ch√∫\x20√Ω\x20ch√≠nh\x20ƒë√≥\x20ƒë·ªÉ\x20vi·∫øt\x20l·∫°i\x20to√†n\x20b·ªô\x20b√†i\x20vi·∫øt\x20b·∫±ng\x20ng√¥n\x20ng·ªØ\x20v√†\x20c√°ch\x20di·ªÖn\x20ƒë·∫°t\x20c·ªßa\x20ch√≠nh\x20b·∫°n.</li><li><strong>So\x20S√°nh\x20&\x20S·ª≠a\x20L·ªói\x20(Compare\x20&\x20Correct):</strong>\x20ƒê·ªëi\x20chi·∫øu\x20tr·ª±c\x20ti·∫øp\x20b√†i\x20vi·∫øt\x20c·ªßa\x20b·∫°n\x20v·ªõi\x20b·∫£n\x20g·ªëc.\x20ƒê√¢y\x20l√†\x20b∆∞·ªõc\x20quan\x20tr·ªçng\x20nh·∫•t.\x20N√≥\x20gi√∫p\x20b·∫°n\x20ph√°t\x20hi·ªán\x20ngay\x20l·∫≠p\x20t·ª©c\x20nh·ªØng\x20l·ªói\x20sai\x20v·ªÅ\x20t·ª´\x20v·ª±ng,\x20c·∫•u\x20tr√∫c\x20c√¢u,\x20v√†\x20c√°ch\x20s·∫Øp\x20x·∫øp\x20√Ω\x20t∆∞·ªüng\x20ƒë·ªÉ\x20s·ª≠a\x20ch·ªØa.</li></ol><p>Franklin\x20c√≤n\x20th·ª±c\x20h√†nh\x20c√°c\x20bi·∫øn\x20th·ªÉ\x20n√¢ng\x20cao\x20nh∆∞\x20x√°o\x20tr·ªôn\x20th·ª©\x20t·ª±\x20c√°c\x20√Ω\x20ch√≠nh\x20ƒë·ªÉ\x20r√®n\x20luy·ªán\x20t∆∞\x20duy\x20logic,\x20ho·∫∑c\x20chuy·ªÉn\x20vƒÉn\x20xu√¥i\x20th√†nh\x20th∆°\x20ƒë·ªÉ\x20l√†m\x20gi√†u\x20v·ªën\x20t·ª´.</p><h4>Nguy√™n\x20T·∫Øc\x20V√†ng</h4><p>Th√†nh\x20c√¥ng\x20c·ªßa\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20kh√¥ng\x20ƒë·∫øn\x20t·ª´\x20vi·ªác\x20l·∫∑p\x20l·∫°i\x20v√¥\x20th·ª©c,\x20m√†\x20ƒë·∫øn\x20t·ª´\x20v√≤ng\x20l·∫∑p\x20ph·∫£n\x20h·ªìi\x20tr·ª±c\x20ti·∫øp.\x20Vi·ªác\x20so\x20s√°nh\x20v·ªõi\x20b·∫£n\x20g·ªëc\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20ƒë·ªëi\x20m·∫∑t\x20v√†\x20s·ª≠a\x20ch·ªØa\x20nh·ªØng\x20ƒëi·ªÉm\x20y·∫øu\x20c·ª•\x20th·ªÉ\x20c·ªßa\x20m√¨nh,\x20bi·∫øn\x20vi·ªác\x20h·ªçc\x20t·ª´\x20m·ªôt\x20qu√°\x20tr√¨nh\x20m∆°\x20h·ªì\x20th√†nh\x20m·ªôt\x20b√†i\x20t·∫≠p\x20c√≥\x20th·ªÉ\x20ƒëo\x20l∆∞·ªùng\x20ƒë∆∞·ª£c.</p><p><i>ƒê·ªÉ\x20vi·∫øt\x20gi·ªèi\x20h∆°n,\x20ƒë·ª´ng\x20ch·ªâ\x20ƒë·ªçc.\x20H√£y\x20ch·ªçn\x20m·ªôt\x20b√†i\x20vi·∫øt\x20hay,\x20ph√¢n\x20t√≠ch\x20n√≥,\x20c·ªë\x20g·∫Øng\x20vi·∫øt\x20l·∫°i,\x20v√†\x20so\x20s√°nh\x20ƒë·ªÉ\x20t√¨m\x20ra\x20l·ªói\x20sai.</i></p>','PLAYING','lastBackupDate','Vui\x20l√≤ng\x20nh·∫≠p\x20ghi\x20ch√∫\x20tr∆∞·ªõc\x20khi\x20t√≥m\x20t·∫Øt.','--bg-image','winddown','https://www.youtube.com','Player','prevState','preventDefault','play','getIframe','1232329FsNlyE','by_topic','#generalNotesList','L·∫Øng\x20nghe\x20h∆°i\x20th·ªü\x20ra\x20v√†o\x20qua\x20m≈©i.','destination','#noteText','backgroundImage','exitFullscreen','toggle','join','version','__ytApiPromise','task','Th√™m\x20t√πy\x20ch·ªçn','Kh√¥ng\x20t·∫£i\x20ƒë∆∞·ª£c\x20API\x20YouTube.\x20Ki·ªÉm\x20tra\x20m·∫°ng\x20ho·∫∑c\x20t·∫£i\x20l·∫°i\x20trang.','splice','hidden','#btnAddSubtopicTask','L·ªói\x20m·∫°ng\x20khi\x20k·∫øt\x20n·ªëi\x20ƒë·∫øn\x20Gemini.\x20Vui\x20l√≤ng\x20ki·ªÉm\x20tra\x20k·∫øt\x20n·ªëi\x20internet.','main_settings','block','revokeObjectURL','<p>ƒê·ªÉ\x20kh√¥ng\x20b·ªã\x20cho√°ng\x20ng·ª£p\x20khi\x20h·ªçc\x20m·ªôt\x20lƒ©nh\x20v·ª±c\x20m·ªõi,\x20h√£y\x20t·∫≠p\x20trung\x20v√†o\x2020%\x20ki·∫øn\x20th·ª©c\x20c·ªët\x20l√µi\x20mang\x20l·∫°i\x2080%\x20k·∫øt\x20qu·∫£\x20(Li·ªÅu\x20l∆∞·ª£ng\x20Hi·ªáu\x20qu·∫£\x20T·ªëi\x20thi·ªÉu).</p><h4>20%\x20c·ªët\x20l√µi:\x20√Åp\x20d·ª•ng\x20Khung\x20Ph√¢n\x20t√≠ch\x205\x20B∆∞·ªõc\x20ƒë·ªÉ\x20x√°c\x20ƒë·ªãnh\x2020%\x20quan\x20tr·ªçng\x20nh·∫•t:</h4><ol><li><strong>X√°c\x20ƒë·ªãnh\x20K·∫øt\x20qu·∫£:</strong>\x20M·ª•c\x20ti√™u\x20cu·ªëi\x20c√πng\x20c·ªßa\x20b·∫°n\x20l√†\x20g√¨?\x20(v√≠\x20d·ª•:\x20x√¢y\x20d·ª±ng\x20ƒë∆∞·ª£c\x20m·ªôt\x20trang\x20web).</li><li><strong>Ph√¢n\x20t√≠ch\x20N·ªÅn\x20t·∫£ng:</strong>\x20T√¨m\x203-5\x20nguy√™n\x20l√Ω\x20b·∫•t\x20bi·∫øn\x20c·ªßa\x20ng√†nh.</li><li><strong>Nh·∫≠n\x20di·ªán\x20L·ªói\x20sai\x20Ph·ªï\x20bi·∫øn:</strong>\x20H·ªçc\x20c√°ch\x20tr√°nh\x20nh·ªØng\x20l·ªói\x20m√†\x20ng∆∞·ªùi\x20m·ªõi\x20hay\x20m·∫Øc\x20ph·∫£i.</li><li><strong>T√¨m\x20\x22Y·∫øu\x20t·ªë\x20Nh√¢n\x22:</strong>\x20K·ªπ\x20nƒÉng\x20n√†o\x20s·∫Ω\x20gi√∫p\x20h·ªçc\x20m·ªçi\x20th·ª©\x20kh√°c\x20d·ªÖ\x20d√†ng\x20h∆°n?\x20(v√≠\x20d·ª•:\x20nh·∫°c\x20l√Ω\x20trong\x20√¢m\x20nh·∫°c).</li><li><strong>L·∫≠p\x20b·∫£n\x20ƒë·ªì\x20·ª®ng\x20d·ª•ng\x20Th·ª±c\x20ti·ªÖn:</strong>\x20T·∫≠p\x20trung\x20v√†o\x2020%\x20c√¥ng\x20vi·ªác\x20chi·∫øm\x2080%\x20th·ªùi\x20gian\x20th·ª±c\x20t·∫ø\x20c·ªßa\x20ng√†nh.</li></ol>','addEventListener','#chatInput','#btnSummarizeNote','note-meta','btn\x20small','_getStore','Tho√°t\x20to√†n\x20m√†n\x20h√¨nh','Deleted\x20old\x20backup:\x20','#btnToggleBg','#btnFinishFlow','G·ª≠i\x20b·∫°n,\x2020\x20gi·ªù\x20(N·ªÅn\x20t·∫£ng)','replace','badge','C·∫ßn\x20c√≥\x20n·ªôi\x20dung\x20ƒë·ªÉ\x20AI\x20ƒë·ªãnh\x20d·∫°ng.','#btnSkip','Backup\x20failed:','#set_winddown','localeCompare','timerState_','<p>N·∫øu\x20G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20l√†\x20v·ªÅ\x20c√°ch\x20h·ªçc,\x20th√¨\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20l√†\x20v·ªÅ\x20th·ªùi\x20ƒëi·ªÉm\x20h·ªçc.\x20ƒê√¢y\x20l√†\x20m·ªôt\x20h·ªá\x20th·ªëng\x20l√™n\x20l·ªãch\x20√¥n\x20t·∫≠p\x20ƒë·ªÉ\x20ƒë∆∞a\x20th√¥ng\x20tin\x20v√†o\x20tr√≠\x20nh·ªõ\x20d√†i\x20h·∫°n\x20m·ªôt\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t.</p><h4>Nguy√™n\x20T·∫Øc\x20C·ªët\x20L√µi:\x20Ch·ªëng\x20L·∫°i\x20S·ª±\x20L√£ng\x20Qu√™n\x20üß†</h4><p>Ph∆∞∆°ng\x20ph√°p\x20n√†y\x20d·ª±a\x20tr√™n\x20\x22ƒê∆∞·ªùng\x20cong\x20L√£ng\x20qu√™n\x22,\x20cho\x20th·∫•y\x20ch√∫ng\x20ta\x20qu√™n\x20th√¥ng\x20tin\x20nhanh\x20nh·∫•t\x20ngay\x20sau\x20khi\x20h·ªçc.\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20ho·∫°t\x20ƒë·ªông\x20b·∫±ng\x20c√°ch\x20y√™u\x20c·∫ßu\x20b·∫°n\x20√¥n\x20t·∫≠p\x20l·∫°i\x20m·ªôt\x20th√¥ng\x20tin\x20ngay\x20tr∆∞·ªõc\x20khi\x20b·∫°n\x20s·∫Øp\x20qu√™n\x20n√≥.</p><p>M·ªói\x20l·∫ßn\x20√¥n\x20t·∫≠p\x20th√†nh\x20c√¥ng\x20s·∫Ω\x20l√†m\x20cho\x20kho·∫£ng\x20th·ªùi\x20gian\x20b·∫°n\x20nh·ªõ\x20th√¥ng\x20tin\x20ƒë√≥\x20d√†i\x20ra.\x20L·∫ßn\x20ƒë·∫ßu\x20b·∫°n\x20c√≥\x20th·ªÉ\x20qu√™n\x20sau\x201\x20ng√†y,\x20nh∆∞ng\x20sau\x20khi\x20√¥n\x20t·∫≠p,\x20b·∫°n\x20s·∫Ω\x20nh·ªõ\x20ƒë∆∞·ª£c\x20trong\x203\x20ng√†y,\x20r·ªìi\x201\x20tu·∫ßn,\x201\x20th√°ng,\x20v√†\x20c·ª©\x20th·∫ø\x20xa\x20d·∫ßn.</p><h4>C√¥ng\x20C·ª•\x20Hi·ªáu\x20Qu·∫£\x20Nh·∫•t:\x20Ph·∫ßn\x20M·ªÅm\x20SRS\x20üì±</h4><p>Thay\x20v√¨\x20t·ª±\x20l√™n\x20l·ªãch\x20th·ªß\x20c√¥ng,\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t\x20l√†\x20s·ª≠\x20d·ª•ng\x20c√°c\x20ph·∫ßn\x20m·ªÅm\x20L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20(Spaced\x20Repetition\x20Software\x20-\x20SRS).\x20Anki\x20ƒë∆∞·ª£c\x20xem\x20l√†\x20ti√™u\x20chu·∫©n\x20v√†ng.\x20N√≥\x20t·ª±\x20ƒë·ªông\x20h√≥a\x20ho√†n\x20to√†n\x20vi·ªác\x20l√™n\x20l·ªãch\x20√¥n\x20t·∫≠p\x20cho\x20h√†ng\x20ng√†n\x20th·∫ª\x20ghi\x20nh·ªõ\x20d·ª±a\x20tr√™n\x20ƒë·ªô\x20kh√≥\x20m√†\x20b·∫°n\x20t·ª±\x20ƒë√°nh\x20gi√°,\x20ƒë·∫£m\x20b·∫£o\x20b·∫°n\x20lu√¥n\x20√¥n\x20t·∫≠p\x20v√†o\x20th·ªùi\x20ƒëi·ªÉm\x20t·ªëi\x20∆∞u\x20nh·∫•t.</p><h4>Sai\x20L·∫ßm\x20L·ªõn\x20Nh·∫•t\x20C·∫ßn\x20Tr√°nh\x20‚ùå</h4><p>L√Ω\x20do\x20s·ªë\x20m·ªôt\x20khi·∫øn\x20m·ªçi\x20ng∆∞·ªùi\x20th·∫•t\x20b·∫°i\x20v·ªõi\x20ph∆∞∆°ng\x20ph√°p\x20n√†y\x20l√†\x20\x22Qu√°\x20t·∫£i\x20L·ªãch\x20√¥n\x20t·∫≠p\x22\x20(Review\x20Overload).\x20ƒêi·ªÅu\x20n√†y\x20x·∫£y\x20ra\x20khi\x20b·∫°n\x20t·∫°o\x20qu√°\x20nhi·ªÅu\x20th·∫ª\x20m·ªõi\x20m·ªói\x20ng√†y\x20ho·∫∑c\x20b·ªè\x20l·ª°\x20v√†i\x20ng√†y\x20√¥n\x20t·∫≠p,\x20d·∫´n\x20ƒë·∫øn\x20m·ªôt\x20l∆∞·ª£ng\x20th·∫ª\x20t·ªìn\x20ƒë·ªçng\x20kh·ªïng\x20l·ªì\x20g√¢y\x20n·∫£n\x20ch√≠.</p><p><strong>Gi·∫£i\x20ph√°p\x20(20%\x20h√†nh\x20ƒë·ªông,\x2080%\x20k·∫øt\x20qu·∫£):</strong>\x20H√£y\x20nh·∫•t\x20qu√°n.\x20ƒê·∫∑t\x20ra\x20gi·ªõi\x20h·∫°n\x20th·ª±c\x20t·∫ø\x20v·ªÅ\x20s·ªë\x20l∆∞·ª£ng\x20th·∫ª\x20m·ªõi\x20m·ªói\x20ng√†y\x20(v√≠\x20d·ª•:\x2010-20\x20th·∫ª)\x20v√†\x20duy\x20tr√¨\x20vi·ªác\x20√¥n\x20t·∫≠p\x20h√†ng\x20ng√†y.\x20Th√†\x20h·ªçc\x20√≠t\x20m√†\x20ƒë·ªÅu\x20c√≤n\x20h∆°n\x20h·ªçc\x20d·ªìn.</p><h4>S·ª±\x20K·∫øt\x20H·ª£p\x20S·ªëng\x20C√≤n:\x20AR\x20+\x20SR</h4><p>L·∫∑p\x20l·∫°i\x20ng·∫Øt\x20qu√£ng\x20(SR)\x20v√†\x20G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20(AR)\x20l√†\x20hai\x20m·∫∑t\x20c·ªßa\x20c√πng\x20m·ªôt\x20ƒë·ªìng\x20xu\x20v√†\x20kh√¥ng\x20th·ªÉ\x20t√°ch\x20r·ªùi.\x20SR\x20cung\x20c·∫•p\x20l·ªãch\x20tr√¨nh\x20KHI\x20N√ÄO\x20n√™n\x20√¥n\x20t·∫≠p.\x20AR\x20l√†\x20h√†nh\x20ƒë·ªông\x20b·∫°n\x20th·ª±c\x20hi·ªán\x20KHI\x20√¥n\x20t·∫≠p.\x20S·ª±\x20k·∫øt\x20h·ª£p\x20n√†y\x20ƒë·∫£m\x20b·∫£o\x20n·ªó\x20l·ª±c\x20g·ª£i\x20nh·ªõ\x20c·ªßa\x20b·∫°n\x20x·∫£y\x20ra\x20v√†o\x20\x22ƒëi·ªÉm\x20ng·ªçt\x22\x20c·ªßa\x20tr√≠\x20nh·ªõ.\x20S·ª≠\x20d·ª•ng\x20Anki\x20ch√≠nh\x20l√†\x20c√°ch\x20tri·ªÉn\x20khai\x20k·ªπ\x20thu·∫≠t\x20k·∫øt\x20h·ª£p\x20n√†y\x20m·ªôt\x20c√°ch\x20hi·ªáu\x20qu·∫£\x20nh·∫•t.</p>','#stateBadge','badge\x20state\x20work','Ch·ªânh-s·ª≠a\x20Tri\x20th·ª©c','right','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20d·ªØ\x20li·ªáu</div>','longBreakIntervalB','method-content','update','expanded','\x22\x0a\x0aH√£y\x20t·∫°o\x20m·ªôt\x20b·∫£n\x20t√≥m\x20t·∫Øt\x20ng·∫Øn\x20g·ªçn\x20v·ªÅ\x20nh·ªØng\x20g√¨\x20ƒë√£\x20l√†m\x20v√†\x20ƒë·ªÅ\x20xu·∫•t\x20m·ªôt\x20b∆∞·ªõc\x20h·ª£p\x20l√Ω\x20ti·∫øp\x20theo.\x20ƒê·ªãnh\x20d·∫°ng\x20c√¢u\x20tr·∫£\x20l·ªùi\x20nh∆∞\x20sau:\x0a\x0a---\x0a**‚ú®\x20T√≥m\x20t·∫Øt\x20AI:**\x0a[T√≥m\x20t·∫Øt\x20·ªü\x20ƒë√¢y]\x0a\x0a**üöÄ\x20G·ª£i\x20√Ω\x20ti·∫øp\x20theo:**\x0a[G·ª£i\x20√Ω\x20·ªü\x20ƒë√¢y]','cancel','.nav-btn','K·ªπ\x20Thu·∫≠t\x20Feynman:\x20Hi·ªÉu\x20S√¢u\x20B·∫±ng\x20C√°ch\x20Gi·∫£i\x20Th√≠ch\x20ƒê∆°n\x20Gi·∫£n','B_short','#uploadSoundBreak','isArray','BUFFERING','X√≥a','note','transition','#btnEnableSound','?\x20D·ªØ\x20li·ªáu\x20hi·ªán\x20t·∫°i\x20s·∫Ω\x20b·ªã\x20ghi\x20ƒë√®.','autoStartNext','isConnected','#windDownChecklist','stats','break','json','hours','textContent','querySelector','T√™n\x20Ch·ªß\x20ƒë·ªÅ\x20m·ªõi?','#toolBullet','#currentSubtopicName','#set_enableSessionNotes','pointerdown','candidates','A_short','G·ª£i\x20Nh·ªõ\x20Ch·ªß\x20ƒê·ªông\x20(Active\x20Recall):\x20Nguy√™n\x20T·∫Øc\x20C·ªët\x20L√µi\x20ƒê·ªÉ\x20H·ªçc\x20S√¢u','aria-expanded','flowtimeBreakRatio','#dashboardContent','#toolItalic','#btnSkipNote','createIndex','AI\x20ƒë√£\x20ƒë·ªãnh\x20d·∫°ng\x20xong!','#set_theme','load','includes','forEach','IndexedDB\x20error:','target','Th·∫£\x20l·ªèng\x20to√†n\x20th√¢n,\x20c·∫£m\x20nh·∫≠n\x20h∆°i\x20th·ªü.','click','B_winddown','requestFullscreen','beginWork','<div\x20class=\x22tiny\x22>Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20b·∫Øt\x20ƒë·∫ßu\x20chat.</div>','settings','long_end','#btnClearBg','skip','setPreset','save','#btnSummarize','</ul>','fullscreenElement','keydown','reduce','log','#view-methods','idle','autoplay;\x20encrypted-media;\x20picture-in-picture','onload','137632RqYfnv','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20to√†n\x20b·ªô\x20l·ªãch\x20s·ª≠\x20chat\x20c·ªßa\x20ch·ªß\x20ƒë·ªÅ\x20con\x20n√†y?','stroke','Kh√¥ng\x20t√¨m\x20th·∫•y\x20b·∫£n\x20sao\x20l∆∞u.','ƒê√£\x20x√≥a\x20l·ªãch\x20s·ª≠\x20chat.','2ZaxoCZ','topic','#set_panelOpacity','methods','timerState','Failed\x20to\x20delete\x20summary:','<li\x20class=\x22tiny\x22\x20style=\x22opacity:\x200.7;\x22>Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20xem\x20to-do\x20list.</li>','<p\x20class=\x22tiny\x22\x20style=\x22opacity:0.7;\x22>Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20xem\x20Kho\x20Tri\x20Th·ª©c.</p>','.timer-circle-progress','initDB','ƒê√£\x20d·ª´ng\x20nh·∫°c\x20n·ªÅn.','soundPermissionBar','theme','L·ªói\x20HTTP:\x20','#btnAddTopic','blob:','Kh√¥ng\x20nh·∫≠n\x20ƒë∆∞·ª£c\x20n·ªôi\x20dung\x20h·ª£p\x20l·ªá\x20t·ª´\x20AI.','get','<div\x20class=\x22spinner\x22></div>','#btnDashboard','Enter','getBackupList','#set_work','</h4>','Ch∆∞a\x20c√≥\x20link\x20h·ª£p\x20l·ªá.\x20D√°n\x20link\x20r·ªìi\x20b·∫•m\x20‚ñ∂Ô∏è.','breathing','Nh√¨n\x20ra\x20xa\x20qua\x20c·ª≠a\x20s·ªï\x20trong\x2020\x20gi√¢y.','isNaN','Xu·∫•t','.actions-menu.show','ƒêang\x20ph√°t\x20nh·∫°c\x20n·ªÅn...','...','.subtopic-btn','<option\x20value=\x22\x22>--\x20Ch·ªçn\x20ng√†y\x20ƒë·ªÉ\x20ph·ª•c\x20h·ªìi\x20--</option>','postMessage','pauseVideo','ƒê√£\x20l∆∞u\x20ghi\x20ch√∫','#btnSendMessage','#btnSaveMethod','<ul>','R·ª≠a\x20m·∫∑t\x20ho·∫∑c\x20v·ªó\x20nh·∫π\x20l√™n\x20m·∫∑t\x20ƒë·ªÉ\x20t·ªânh\x20t√°o\x20h∆°n.','workMinutes','Ph·ª•c\x20h·ªìi\x20d·ªØ\x20li·ªáu\x20th√†nh\x20c√¥ng!\x20T·∫£i\x20l·∫°i\x20trang...','timer.selectSubtopicPrompt','contains','#chatMessages','findIndex','<p>Nguy√™n\x20t·∫Øc\x20c·ªët\x20l√µi\x20c·ªßa\x20k·ªπ\x20thu·∫≠t\x20n√†y\x20d·ª±a\x20tr√™n\x20m·ªôt\x20√Ω\x20t∆∞·ªüng\x20duy\x20nh·∫•t:\x20\x22N·∫øu\x20b·∫°n\x20kh√¥ng\x20th·ªÉ\x20gi·∫£i\x20th√≠ch\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20m·ªôt\x20c√°ch\x20ƒë∆°n\x20gi·∫£n,\x20b·∫°n\x20ch∆∞a\x20th·ª±c\x20s·ª±\x20hi·ªÉu\x20n√≥.\x22\x20M·ª•c\x20ti√™u\x20l√†\x20bi·∫øn\x20ki·∫øn\x20th·ª©c\x20ph·ª©c\x20t·∫°p\x20th√†nh\x20l·ªùi\x20gi·∫£i\x20th√≠ch\x20ƒë∆°n\x20gi·∫£n\x20ƒë·∫øn\x20m·ª©c\x20m·ªôt\x20ƒë·ª©a\x20tr·∫ª\x20c≈©ng\x20c√≥\x20th·ªÉ\x20hi·ªÉu.</p><h4>Quy\x20Tr√¨nh\x204\x20B∆∞·ªõc\x20Tinh\x20G·ªçn</h4><ol><li><strong>H·ªçc:</strong>\x20Ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20v√†\x20vi·∫øt\x20ra\x20t·∫•t\x20c·∫£\x20nh·ªØng\x20g√¨\x20b·∫°n\x20bi·∫øt\x20v·ªÅ\x20n√≥.</li><li><strong>D·∫°y:</strong>\x20Gi·∫£\x20v·ªù\x20d·∫°y\x20l·∫°i\x20ch·ªß\x20ƒë·ªÅ\x20n√†y\x20b·∫±ng\x20ng√¥n\x20ng·ªØ\x20ƒë∆°n\x20gi·∫£n\x20nh·∫•t\x20c√≥\x20th·ªÉ.\x20Vi·∫øt\x20ho·∫∑c\x20n√≥i\x20to\x20ra.</li><li><strong>T√¨m\x20&\x20S·ª≠a\x20L·ªói:</strong>\x20B·∫•t\x20c·ª©\x20khi\x20n√†o\x20b·∫°n\x20b·ªã\x20\x22k·∫πt\x22,\x20ph·∫£i\x20d√πng\x20thu·∫≠t\x20ng·ªØ\x20ph·ª©c\x20t·∫°p,\x20ho·∫∑c\x20kh√¥ng\x20th·ªÉ\x20gi·∫£i\x20th√≠ch\x20tr√¥i\x20ch·∫£y,\x20b·∫°n\x20ƒë√£\x20t√¨m\x20th·∫•y\x20l·ªó\x20h·ªïng\x20ki·∫øn\x20th·ª©c\x20c·ªßa\x20m√¨nh.\x20H√£y\x20quay\x20l·∫°i\x20t√†i\x20li·ªáu\x20g·ªëc\x20ƒë·ªÉ\x20h·ªçc\x20l·∫°i\x20cho\x20ƒë·∫øn\x20khi\x20l·∫•p\x20ƒë∆∞·ª£c\x20l·ªó\x20h·ªïng\x20ƒë√≥.</li><li><strong>ƒê∆°n\x20Gi·∫£n\x20H√≥a:</strong>\x20S·∫Øp\x20x·∫øp\x20l·∫°i\x20l·ªùi\x20gi·∫£i\x20th√≠ch\x20cu·ªëi\x20c√πng,\x20s·ª≠\x20d·ª•ng\x20c√°c\x20v√≠\x20d·ª•\x20ho·∫∑c\x20ph√©p\x20v√≠\x20von\x20ƒë∆°n\x20gi·∫£n\x20ƒë·ªÉ\x20n√≥\x20tr·ªü\x20n√™n\x20m·∫°ch\x20l·∫°c\x20v√†\x20d·ªÖ\x20hi·ªÉu\x20nh·∫•t.</li></ol><h4>C·ªët\x20L√µi</h4><p>K·ªπ\x20thu·∫≠t\x20Feynman\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20chuy·ªÉn\x20t·ª´\x20vi·ªác\x20ti·∫øp\x20thu\x20th·ª•\x20ƒë·ªông\x20(ƒë·ªçc,\x20nghe)\x20sang\x20ch·ªß\x20ƒë·ªông\x20x·ª≠\x20l√Ω\x20th√¥ng\x20tin.\x20Qu√°\x20tr√¨nh\x20\x22b·ªã\x20k·∫πt\x22\x20khi\x20gi·∫£i\x20th√≠ch\x20ch√≠nh\x20l√†\x20c√¥ng\x20c·ª•\x20ch·∫©n\x20ƒëo√°n\x20m·∫°nh\x20m·∫Ω\x20nh·∫•t,\x20n√≥\x20ch·ªâ\x20ra\x20ch√≠nh\x20x√°c\x20ƒëi·ªÉm\x20b·∫°n\x20c√≤n\x20y·∫øu.</p><p><i>C√°ch\x20nhanh\x20nh·∫•t\x20ƒë·ªÉ\x20ki·ªÉm\x20tra\x20v√†\x20c·ªßng\x20c·ªë\x20s·ª±\x20hi·ªÉu\x20bi·∫øt\x20c·ªßa\x20b·∫°n\x20l√†\x20th·ª≠\x20d·∫°y\x20l·∫°i\x20n√≥\x20cho\x20ng∆∞·ªùi\x20kh√°c\x20m·ªôt\x20c√°ch\x20ƒë∆°n\x20gi·∫£n.</i></p>','#modalDashboard','#importFile','durationMinutes','button,\x20[href],\x20input,\x20select,\x20textarea,\x20[tabindex]:not([tabindex=\x22-1\x22])','map','removing','date','#btnCloseSettings','ƒê√£\x20chuy·ªÉn\x20sang\x20Ki·ªÉu\x20','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=','ArrowLeft','_sortable','X√°c\x20nh·∫≠n\x20ph·ª•c\x20h·ªìi','absolute','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20\x22','triangle','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M9.88\x209.88a3\x203\x200\x201\x200\x204.24\x204.24\x22/><path\x20d=\x22M10.73\x205.08A10.43\x2010.43\x200\x200\x201\x2012\x205c7\x200\x2010\x207\x2010\x207a13.16\x2013.16\x200\x200\x201-1.67\x202.68\x22/><path\x20d=\x22M6.61\x206.61A13.526\x2013.526\x200\x200\x200\x202\x2012s3\x207\x2010\x207a9.74\x209.74\x200\x200\x200\x205.39-1.61\x22/><line\x20x1=\x222\x22\x20y1=\x222\x22\x20x2=\x2222\x22\x20y2=\x2222\x22/></svg>','file:','X√°c\x20nh·∫≠n\x20x√≥a','&#39;','updateSettings','shiftKey','warn','</label>','#set_backgroundMode','ƒê√£\x20l∆∞u\x20c√†i\x20ƒë·∫∑t','opacity','currentTime','innerHTML','#set_interval','formatBlock','T·∫†M\x20D·ª™NG','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20chuy·ªÉn\x20sang\x20Ki·ªÉu\x20','panelOpacity','#set_theme_color','S·ª≠a','methodId','getElementById','Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.','Ch·ªçn\x20ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.','subtopic','checked','ƒê√£\x20t·∫Øt\x20n·ªÅn\x20YouTube\x20ƒë·ªÉ\x20h·ª£p\x20v·ªõi\x20theme\x20s√°ng.','status','https://www.youtube.com/iframe_api','#set_flowRatio','currentDurations','27618QaGleV','Ôºã\x20Th√™m','menu-item\x20danger','.presets\x20button','subtopics','ƒê·∫∑t\x20tay\x20l√™n\x20ng·ª±c,\x20c·∫£m\x20nh·∫≠n\x20nh·ªãp\x20tim\x20c·ªßa\x20m√¨nh.','T√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20m·ªõi?','#ytUrlFeedback','var(--acc-2)','bold','.app-content','sessions','now','‚ùå\x20Link\x20kh√¥ng\x20h·ª£p\x20l·ªá\x20ho·∫∑c\x20kh√¥ng\x20ƒë∆∞·ª£c\x20h·ªó\x20tr·ª£.','#settings-flowtime','Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc\x20khi\x20th·ª±c\x20hi·ªán\x20thao\x20t√°c.','sess','no-repeat','default','ƒêi\x20d·∫°o\x20m·ªôt\x20v√≤ng\x20ng·∫Øn\x20quanh\x20ph√≤ng.','soundOn','#btnCloseDashboard','#newSubtopicTaskInput','body','\x0a-\x20','.method-delete','#backupList','offsetHeight','left','beep','execCommand','</div>','AI\x20kh√¥ng\x20th·ªÉ\x20ƒë·ªãnh\x20d·∫°ng\x20l√∫c\x20n√†y.','length','segmentTotal','setVolume','getPropertyValue','Th√™m\x20Ch·ªß\x20ƒë·ªÅ\x20con','pomodoroData_v11','tasks','.topic-item.menu-active','tagName','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22dashboard-table\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead><tr><th>Ch·ªß\x20ƒë·ªÅ</th><th>Ch·ªß\x20ƒë·ªÅ\x20con</th><th>Th·ªùi\x20gian</th><th>Phi√™n</th><th>Nhi·ªám\x20v·ª•</th></tr></thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','cleanupOldBackups','Creating\x20backup\x20for\x20','beforeunload','.subtopics','B_long','L√ÄM\x20VI·ªÜC','onerror','G·ª≠i\x20b·∫°n,\x205\x20gi·ªù\x20ƒë·∫ßu\x20ti√™n\x20(Kh·ªüi\x20ƒë·ªông)','.color-swatch','sort','textarea','H·∫†\x20NHI·ªÜT','stringify','/hqdefault.jpg','#btnPresetA','actions-menu','newIndex','start','ƒê√£\x20kh√¥i\x20ph·ª•c\x20m·∫∑c\x20ƒë·ªãnh','long','title','removeChild','styleWithCSS','light','#btnBreakEarly','B∆∞·ªõc\x20ra\x20ban\x20c√¥ng,\x20t·∫≠n\x20h∆∞·ªüng\x20√°nh\x20s√°ng\x20t·ª±\x20nhi√™n.','Nghe\x20m·ªôt\x20b·∫£n\x20nh·∫°c\x20y√™u\x20th√≠ch.','Failed\x20to\x20load\x20YouTube\x20API','data','reset','&lt;','closest','state','Missing\x20element','ArrowRight','toLowerCase','createElement','Phi√™n\x20ƒë√£\x20ho√†n\x20th√†nh!\x20Nh·∫•n\x20B·∫Øt\x20ƒë·∫ßu\x20ƒë·ªÉ\x20b·∫Øt\x20ƒë·∫ßu\x20phi√™n\x20ti·∫øp\x20theo.','unshift','activeElement','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20t√≥m\x20t·∫Øt\x20n√†y?','round','Ch√†o\x20m·ª´ng\x20ƒë·∫øn\x20C√¢u\x20l·∫°c\x20b·ªô\x201000\x20gi·ªù.\x0a\x0aCon\x20s·ªë\x20n√†y\x20kh√¥ng\x20ch·ªâ\x20ƒëo\x20l∆∞·ªùng\x20th·ªùi\x20gian,\x20n√≥\x20ƒë·∫°i\x20di·ªán\x20cho\x20s·ª±\x20chuy·ªÉn\x20h√≥a.\x20S·ª±\x20t·∫≠p\x20trung\x20ƒë√£\x20tr·ªü\x20th√†nh\x20m·ªôt\x20ph·∫ßn\x20con\x20ng∆∞·ªùi\x20b·∫°n,\x20m·ªôt\x20\x27si√™u\x20nƒÉng\x20l·ª±c\x27\x20b·∫°n\x20c√≥\x20th·ªÉ\x20tri·ªáu\x20h·ªìi.\x20H√†nh\x20tr√¨nh\x20c·ªßa\x20b·∫°n\x20th·ª±c\x20s·ª±\x20truy·ªÅn\x20c·∫£m\x20h·ª©ng.','AutoBackup\x20error:','lastPersist','youtube-player-container','#set_long','#btnPresetB','setItem','·∫®n\x20giao\x20di·ªán','ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20L√ÄM\x20VI·ªÜC.','string','Th√™m\x20Tri\x20th·ª©c\x20m·ªõi','note-item','errorCode','finishFlowSession','Escape','#btnExport','innerWidth','reload','vi-VN','btnToggleYtSound','#uploadSoundWork','exportData','readonly','#statTotal','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20ph·ª•c\x20h·ªìi\x20d·ªØ\x20li·ªáu\x20t·ª´\x20ng√†y\x20','iframe','result','.nav-btn[data-view=\x22','longBreakIntervalA','Ph√¢n\x20t√≠ch\x20v√†\x20ƒë·ªãnh\x20d·∫°ng\x20l·∫°i\x20ƒëo·∫°n\x20vƒÉn\x20b·∫£n\x20sau\x20ƒë√¢y\x20th√†nh\x20m√£\x20HTML\x20s·∫°ch.\x20S·ª≠\x20d·ª•ng\x20c√°c\x20th·∫ª\x20sau:\x0a-\x20D√πng\x20<h4>\x20cho\x20c√°c\x20ti√™u\x20ƒë·ªÅ\x20ch√≠nh.\x0a-\x20D√πng\x20<strong>\x20ƒë·ªÉ\x20nh·∫•n\x20m·∫°nh\x20c√°c\x20thu·∫≠t\x20ng·ªØ\x20ho·∫∑c\x20√Ω\x20t∆∞·ªüng\x20quan\x20tr·ªçng.\x0a-\x20D√πng\x20<i>\x20cho\x20c√°c\x20c√¢u\x20ghi\x20ch√∫\x20ho·∫∑c\x20tr√≠ch\x20d·∫´n.\x0a-\x20D√πng\x20<ol>\x20v√†\x20<li>\x20cho\x20c√°c\x20danh\x20s√°ch\x20c√≥\x20th·ª©\x20t·ª±.\x0a-\x20D√πng\x20<ul>\x20v√†\x20<li>\x20cho\x20c√°c\x20danh\x20s√°ch\x20kh√¥ng\x20c√≥\x20th·ª©\x20t·ª±.\x0a-\x20B·ªçc\x20c√°c\x20ƒëo·∫°n\x20vƒÉn\x20th√¥ng\x20th∆∞·ªùng\x20trong\x20th·∫ª\x20<p>.\x0aVƒÉn\x20b·∫£n\x20c·∫ßn\x20ƒë·ªãnh\x20d·∫°ng:\x0a\x0a\x22','put','Nguy√™n\x20T·∫Øc\x2080/20\x20ƒê·ªÉ\x20Chinh\x20Ph·ª•c\x20Lƒ©nh\x20V·ª±c\x20M·ªõi','√Çm\x20thanh\x20ƒë√£\x20ƒë∆∞·ª£c\x20b·∫≠t!','<div>','classList','apiKey','L·ªói\x20kh·ªüi\x20t·∫°o:\x20','IndexedDB\x20initialized\x20successfully.','getAll','\x20ph√∫t','#breakSuggestionDisplay','Sortable','topicId','getVolume','querySelectorAll','OK.\x20Link\x20h·ª£p\x20l·ªá.\x20ƒêang\x20chu·∫©n\x20b·ªã\x20ph√°t...','btn\x20subtopic-btn','getItem','DB_VERSION','abs','ƒê√£\x20c·∫≠p\x20nh·∫≠t\x20h√¨nh\x20n·ªÅn.','0\x20ph√∫t','remaining','find','#set_ytThumbAsBg','space','width','altKey','X√°c\x20nh·∫≠n\x20chuy·ªÉn\x20ƒë·ªïi','menu-active','T√≥m\x20t·∫Øt\x20c√°c\x20ghi\x20ch√∫\x20sau\x20theo\x20g·∫°ch\x20ƒë·∫ßu\x20d√≤ng,\x20ng·∫Øn\x20g·ªçn,\x20r√µ\x20r√†ng:\x0a\x0a','floor','\x20|\x20<strong>T·ªïng\x20nhi·ªám\x20v·ª•:</strong>\x20','ƒê·ª©ng\x20l√™n\x20v√†\x20ƒëi\x20l·∫°i\x20v√†i\x20b∆∞·ªõc\x20ƒë·ªÉ\x20m√°u\x20l∆∞u\x20th√¥ng.','protocol','btn\x20small\x20ghost\x20actions-menu-btn','<h4>','startsWith','allow','topic-title','chat-msg\x20','scrollTop','#btnFullscreen','stopPropagation','L·ªói\x20l∆∞u\x20d·ªØ\x20li·ªáu:\x20','#audioLongEnd','100\x20gi·ªù!\x20ƒê√¢y\x20kh√¥ng\x20c√≤n\x20l√†\x20m·ªôt\x20th·ª≠\x20nghi·ªám\x20n·ªØa,\x20m√†\x20l√†\x20m·ªôt\x20s·ª±\x20ƒë·∫ßu\x20t∆∞\x20nghi√™m\x20t√∫c\x20cho\x20m·ª•c\x20ti√™u\x20c·ªßa\x20b·∫°n.\x0a\x0aH√£y\x20d√†nh\x20m·ªôt\x20ch√∫t\x20th·ªùi\x20gian\x20ƒë·ªÉ\x20nh√¨n\x20l·∫°i:\x20100\x20gi·ªù\x20t·∫≠p\x20trung\x20n√†y\x20ƒë√£\x20gi√∫p\x20b·∫°n\x20ti·∫øn\x20xa\x20ƒë·∫øn\x20ƒë√¢u?\x20NƒÉng\x20l∆∞·ª£ng\x20b·∫°n\x20b·ªè\x20ra\x20ƒëang\x20ƒë·ªãnh\x20h√¨nh\x20n√™n\x20k·∫øt\x20qu·∫£.','</td><td>','#welcomePanel\x20p','ƒêang\x20t·∫£i\x20API\x20YouTube...','T·ª±\x20h·ªèi\x20b·∫£n\x20th√¢n:\x20‚ÄúM√¨nh\x20c·∫£m\x20th·∫•y\x20th·∫ø\x20n√†o\x20l√∫c\x20n√†y?‚Äù','#modalMethodEditor','className','.color-picker-wrapper','enableSessionNotes','youtubeVolume','#btnReset','match','#btnToggleYtSound','gain','N·∫Øn\x20nh·∫π\x20c√°c\x20kh·ªõp\x20ng√≥n\x20tay\x20sau\x20khi\x20g√µ\x20ph√≠m.','onsuccess','tid','#toasts','undefined','#set_volume','#btnStart','L·ªói:\x20Gemini\x20API\x20Key\x20kh√¥ng\x20h·ª£p\x20l·ªá\x20ho·∫∑c\x20ƒë√£\x20b·ªã\x20thay\x20ƒë·ªïi.\x20Vui\x20l√≤ng\x20ki·ªÉm\x20tra\x20l·∫°i\x20trong\x20C√†i\x20ƒë·∫∑t.','topic-header','slice','#milestoneMessage','#btnRestoreBackup','#ytSoundVolume','#btnAddGeneralNote','ƒê·ªïi\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con','selectedSubtopicId','display','from','onclick','.topic-item','.tab-btn','enableWinddown','#toolList','btn\x20small\x20danger','toLocaleString','G·ª≠i\x20b·∫°n,\x20100\x20gi·ªù\x20c·ªëng\x20hi·∫øn\x20(Cam\x20k·∫øt)','img.youtube.com/vi/','kh√¥ng\x20r√µ','ƒêang\x20ph√°t','getMonth','POST','#genericInput','color','L√ÄM\x20VI·ªÜC\x20(FLOW)','https://www.youtube.com/embed/','div','lofi','#uploadBg','Hi·ªán\x20giao\x20di·ªán','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M2\x2012s3-7\x2010-7\x2010\x207\x2010\x207-3\x207-10\x207-10-7-10-7Z\x22/><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x223\x22/></svg>','#btnSaveSettings','connect','X√≥a\x20tri\x20th·ª©c\x20\x22','-9999px','.json','.modal','bg-view-mode','content','exponentialRampToValueAtTime','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20t√≥m\x20t·∫Øt\x20n√†o.</div>','http','.view','application/json','#aiPromptSuggestions\x20button','#toolH4','appendChild','disabled','\x20¬∑\x20','button','customBg','input','text','#set_backupDays','#btnGenericOk','code','playVideo','#timeDisplay','key','random','</tbody></table>','<div\x20class=\x22tiny\x22>Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con.</div>','pomodoro_files','#btnGenericCancel','#btnCancelMethodEditor','sid','work_end','#uploadSoundLong','setRangeText','cyclesB','isCompleted','async','long_break','innerHeight','menu-item','lang','blockReason','S·ª≠a\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ','location','height','finished','flex','readwrite','onkeydown','error','add','focus','</p>','.tab-content','stop','toString','change','PlayerState','head','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20phi√™n\x20n√†o</div>','Th·∫£\x20l·ªèng\x20hai\x20ch√¢n,\x20l·∫Øc\x20nh·∫π\x20c·ªï\x20ch√¢n\x20d∆∞·ªõi\x20b√†n.','download','parse','#set_apiKey','input,select,textarea','badge\x20state\x20break','‚ú®\x20T·ª±\x20ƒë·ªông\x20ƒë·ªãnh\x20d·∫°ng','note-content-wrapper','/maxresdefault.jpg','backgroundRepeat','preset','.\x20Vui\x20l√≤ng\x20th·ª≠\x20l·∫°i\x20v·ªõi\x20n·ªôi\x20dung\x20kh√°c.','clear','open','transaction','relative','onYouTubeIframeAPIReady','topic-item','Ch∆∞a\x20c√≥\x20ghi\x20ch√∫\x20ƒë·ªÉ\x20t√≥m\x20t·∫Øt.','Ch√∫c\x20m·ª´ng\x20b·∫°n\x20ƒë√£\x20l√†m\x20ƒë∆∞·ª£c\x20ƒëi·ªÅu\x20kh√≥\x20nh·∫•t:\x20B·∫Øt\x20ƒë·∫ßu\x20v√†\x20duy\x20tr√¨.\x0a\x0a20\x20gi·ªù\x20kh√¥ng\x20ch·ªâ\x20l√†\x20th·ªùi\x20gian,\x20ƒë√≥\x20l√†\x2020\x20gi·ªù\x20b·∫°n\x20ƒë√£\x20chi·∫øn\x20th·∫Øng\x20s·ª±\x20xao\x20nh√£ng.\x20B·∫°n\x20ƒëang\x20x√¢y\x20d·ª±ng\x20m·ªôt\x20n·ªÅn\x20t·∫£ng\x20v·ªØng\x20ch·∫Øc\x20cho\x20s·ª±\x20k·ª∑\x20lu·∫≠t.\x20H√£y\x20t·ª±\x20h√†o\x20v·ªÅ\x20kh·ªüi\x20ƒë·∫ßu\x20n√†y.','dataset','(Kh√¥ng\x20t·∫°o\x20ƒë∆∞·ª£c\x20t√≥m\x20t·∫Øt)','resolve','Nh·∫Øm\x20m·∫Øt\x20v√†\x20th∆∞\x20gi√£n\x20trong\x20m·ªôt\x20ph√∫t.','chatHistory','backupDaysToKeep','wind_down','unMute','onupgradeneeded','chev\x20btn\x20small\x20ghost','<div\x20class=\x22hist-meta\x22>','parts','#btnResume','backgroundSize','scroll','527278CTXBgS','removeProperty','split','Tab','PomodoroAppDB','#view-timer','L·∫Øc\x20nh·∫π\x20c·ªï\x20tay\x20v√†\x20vai\x20trong\x2030\x20gi√¢y.','Ch∆∞a\x20ch·ªçn\x20Ch·ªß\x20ƒë·ªÅ\x20con','presetTarget','updateUI','ƒê·∫øm\x20ng∆∞·ª£c\x20t·ª´\x2020\x20ƒë·∫øn\x200\x20th·∫≠t\x20ch·∫≠m\x20r√£i.','<div\x20class=\x22tiny\x22>Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con\x20ƒë·ªÉ\x20xem\x20t√≥m\x20t·∫Øt.</div>','L√†m\x20ƒë·ªông\x20t√°c\x20‚Äúth·ªü\x20d√†i‚Äù\x20s√¢u\x20m·ªôt\x20l·∫ßn,\x20th·∫£\x20l·ªèng\x20vai.','restoreBackup','#toolBold','toLocaleDateString','cyclesA','achievedMilestones','G·ª≠i\x20b·∫°n,\x201.000\x20gi·ªù\x20(Chuy·ªÉn\x20h√≥a)','Failed\x20to\x20save\x20data:','setAttribute','#methodEditorTitleInput','oldIndex','<span\x20class=\x22ico\x22>‚ñæ</span>','chime','#btnPause','sine','active','cycleIndex','contentWindow','position','src','&gt;','https://img.youtube.com/vi/','pause','.sub-row','user','function','createObjectURL','U·ªëng\x20m·ªôt\x20ly\x20n∆∞·ªõc\x20ƒë·ªÉ\x20gi·ªØ\x20ƒë·ªß\x20n∆∞·ªõc.','href','D·ª±a\x20v√†o\x20th√¥ng\x20tin\x20sau:\x0a-\x20Ch·ªß\x20ƒë·ªÅ:\x20\x22','objectStore','push','_startTick','totalMinutes','sessionsCompleted','.actions-menu','object','ƒê·∫øm\x20ch·∫≠m\x20t·ª´ng\x20nh·ªãp\x20th·ªü\x20ƒë·∫øn\x20s·ªë\x2010.','collapsedTopics','N·ªôi\x20dung\x20b·ªã\x20ch·∫∑n\x20v√¨:\x20','toISOString','Th·ª±c\x20hi·ªán\x20v√†i\x20ƒë·ªông\x20t√°c\x20h√≠t\x20th·ªü\x20s√¢u.','files','ArrowDown','mouseup','pastel','NƒÉm\x20gi·ªù\x20t·∫≠p\x20trung!\x20B·∫°n\x20ƒë√£\x20v∆∞·ª£t\x20qua\x20r√†o\x20c·∫£n\x20l·ªõn\x20nh·∫•t:\x20s·ª±\x20tr√¨\x20ho√£n.\x20M·ªói\x20ph√∫t\x20b·∫°n\x20d√†nh\x20ra\x20ƒë·ªÅu\x20l√†\x20m·ªôt\x20l·ªùi\x20kh·∫≥ng\x20ƒë·ªãnh\x20cho\x20m·ª•c\x20ti√™u\x20c·ªßa\x20m√¨nh.\x20H√£y\x20gi·ªØ\x20v·ªØng\x20ng·ªçn\x20l·ª≠a\x20n√†y!','radial-gradient(1200px\x20800px\x20at\x2010%\x20-10%,\x20#20285b\x200%,\x20#0f1222\x2050%,\x20#0b0e1a\x20100%)','ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20NGH·ªà\x20D√ÄI.','indexOf','.txt','?\x20Thao\x20t√°c\x20n√†y\x20s·∫Ω\x20d·ª´ng\x20v√†\x20ƒë·∫∑t\x20l·∫°i\x20phi√™n\x20l√†m\x20vi·ªác\x20hi·ªán\x20t·∫°i.','persistTimerState','bottom','strokeDasharray','customSounds','work','L·ªói\x20ph√°t\x20√¢m\x20thanh:','G·ª≠i\x20b·∫°n,\x20500\x20gi·ªù\x20(Chuy√™n\x20t√¢m)','tickHandle','beginBreak','cover','fixed','#set_youtubeUrl','#set_autoStartNext','üí°\x20G·ª£i\x20√Ω:\x20','\x20hidden','#modalGeneric','no-subtopic-selected','getFullYear','.color-palette','stopVideo','.method-item\x20.method-content','message','ƒê·ªïi\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ','remove','createObjectStore','ytUrlFeedback','generalNotes','padStart','__ytApiWatchdog','S·∫Øp\x20x·∫øp\x20l·∫°i\x20kh√¥ng\x20gian\x20l√†m\x20vi·ªác\x20c·ªßa\x20b·∫°n.','none','#cycleInfo','.nav-btn[data-view]','T·ªáp\x20kh√¥ng\x20ƒë√∫ng\x20ƒë·ªãnh\x20d·∫°ng','setProperty','\x20|\x20<strong>T·ªïng\x20phi√™n:</strong>\x20','filter','L·ªói:\x20','style','Ch·ªõp\x20m·∫Øt\x20li√™n\x20t·ª•c\x2010\x20l·∫ßn\x20ƒë·ªÉ\x20tr√°nh\x20kh√¥\x20m·∫Øt.','summaries','append','repeat','scrollHeight','sound_unlocked','webkitAudioContext','btn\x20small\x20danger\x20method-delete','.actions-menu-btn','backgroundMode','Kh√¥ng\x20th·ªÉ\x20l∆∞u\x20thay\x20ƒë·ªïi.','show','586892lVDRjp','9ZjAwWX','getAllKeys','S·ª≠a\x20t√™n\x20Ch·ªß\x20ƒë·ªÅ\x20con','topics','Gemini\x20API\x20Error:','item','note-content','ghost','#btnClearChat','ArrowUp','paused','getPlayerState','#welcomePanel','M·ªü\x20c·ª≠a\x20s·ªï\x20cho\x20kh√¥ng\x20kh√≠\x20m·ªõi\x20v√†o\x20ph√≤ng.','option','T√≥m\x20t·∫Øt','topicsList','#toolColor','mode','selectionEnd','top','#genericMessage','loadLanguage','880740fMCnQX','promptFeedback','Th√™m\x20ghi\x20ch√∫','#modalSettings','#btnAutoFormat','values','currentView','T√≥m\x20t·∫Øt\x20th·∫•t\x20b·∫°i.','To√†n\x20m√†n\x20h√¨nh','beginWindDown','ENDED','select','http:','D√πng\x20AI\x20ƒë·ªÉ\x20t·ª±\x20ƒë·ªông\x20ƒë·ªãnh\x20d·∫°ng\x20vƒÉn\x20b·∫£n','resume','summary_','#topicsList','Nh·ªõ\x20u·ªëng\x20m·ªôt\x20ng·ª•m\x20n∆∞·ªõc\x20nh√©!','durations','auto','.method-item','#modalMilestone','createdAt','origin','insertUnorderedList','url(','#view-','<p>G·ª£i\x20nh·ªõ\x20ch·ªß\x20ƒë·ªông\x20l√†\x20h√†nh\x20ƒë·ªông\x20n·ªó\x20l·ª±c\x20truy\x20xu·∫•t\x20th√¥ng\x20tin\x20t·ª´\x20n√£o\x20b·ªô\x20m√†\x20kh√¥ng\x20nh√¨n\x20v√†o\x20t√†i\x20li·ªáu.\x20ƒê√¢y\x20l√†\x20ph∆∞∆°ng\x20ph√°p\x20h·ªçc\x20hi·ªáu\x20qu·∫£\x20v∆∞·ª£t\x20tr·ªôi\x20so\x20v·ªõi\x20vi·ªác\x20ƒë·ªçc\x20l·∫°i,\x20highlight\x20hay\x20t√≥m\x20t·∫Øt\x20m·ªôt\x20c√°ch\x20th·ª•\x20ƒë·ªông.</p><h4>Nguy√™n\x20T·∫Øc\x2020/80</h4><p><strong>20%\x20C·ªët\x20l√µi:</strong>\x20H√†nh\x20ƒë·ªông\x20\x22v·∫Øt\x20√≥c\x22\x20ƒë·ªÉ\x20nh·ªõ\x20l·∫°i\x20th√¥ng\x20tin\x20s·∫Ω\x20c·ªßng\x20c·ªë\x20c√°c\x20li√™n\x20k·∫øt\x20th·∫ßn\x20kinh,\x20gi√∫p\x20chuy·ªÉn\x20ki·∫øn\x20th·ª©c\x20v√†o\x20b·ªô\x20nh·ªõ\x20d√†i\x20h·∫°n.\x20C·∫£m\x20gi√°c\x20kh√≥\x20khƒÉn\x20khi\x20c·ªë\x20g·∫Øng\x20nh·ªõ\x20ch√≠nh\x20l√†\x20d·∫•u\x20hi·ªáu\x20c·ªßa\x20vi·ªác\x20h·ªçc\x20t·∫≠p\x20hi·ªáu\x20qu·∫£\x20ƒëang\x20di·ªÖn\x20ra.</p><p><strong>80%\x20K·∫øt\x20qu·∫£:</strong>\x20B·∫°n\x20s·∫Ω\x20ghi\x20nh·ªõ\x20ki·∫øn\x20th·ª©c\x20s√¢u\x20v√†\x20l√¢u\x20h∆°n,\x20ƒë·ªìng\x20th·ªùi\x20bi·∫øt\x20ch√≠nh\x20x√°c\x20m√¨nh\x20ƒëang\x20y·∫øu\x20·ªü\x20ƒë√¢u.</p><h4>C√°c\x20Ph∆∞∆°ng\x20Ph√°p\x20Quan\x20Tr·ªçng\x20Nh·∫•t</h4><ul><li><strong>T·ª±\x20Ki·ªÉm\x20Tra\x20(Self-testing):</strong>\x20Thay\x20v√¨\x20ƒë·ªçc\x20l·∫°i\x20ghi\x20ch√∫,\x20h√£y\x20che\x20ch√∫ng\x20ƒëi\x20v√†\x20t·ª±\x20ƒë·∫∑t\x20c√¢u\x20h·ªèi\x20cho\x20m√¨nh.\x20V√≠\x20d·ª•:\x20D√πng\x20flashcards\x20(th·∫ª\x20ghi\x20nh·ªõ)\x20v√†\x20lu√¥n\x20tr·∫£\x20l·ªùi\x20tr∆∞·ªõc\x20khi\x20l·∫≠t\x20xem\x20ƒë√°p\x20√°n.</li><li><strong>K·ªπ\x20thu·∫≠t\x20\x22Blurting\x22:</strong>\x20Sau\x20khi\x20h·ªçc\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ,\x20h√£y\x20ƒë√≥ng\x20s√°ch\x20l·∫°i\x20v√†\x20vi·∫øt\x20ra\x20gi·∫•y\x20m·ªçi\x20th·ª©\x20b·∫°n\x20c√≥\x20th·ªÉ\x20nh·ªõ.\x20Sau\x20ƒë√≥,\x20so\x20s√°nh\x20v·ªõi\x20t√†i\x20li·ªáu\x20g·ªëc\x20ƒë·ªÉ\x20l·∫•p\x20ƒë·∫ßy\x20nh·ªØng\x20l·ªó\x20h·ªïng\x20ki·∫øn\x20th·ª©c.</li><li><strong>D·∫°y\x20l·∫°i\x20cho\x20ng∆∞·ªùi\x20kh√°c:</strong>\x20Gi·∫£i\x20th√≠ch\x20m·ªôt\x20kh√°i\x20ni·ªám\x20cho\x20ng∆∞·ªùi\x20kh√°c\x20bu·ªôc\x20b·∫°n\x20ph·∫£i\x20truy\x20xu·∫•t,\x20ƒë∆°n\x20gi·∫£n\x20h√≥a\x20v√†\x20s·∫Øp\x20x·∫øp\x20l·∫°i\x20th√¥ng\x20tin\x20m·ªôt\x20c√°ch\x20m·∫°ch\x20l·∫°c.</li></ul><p><i>T√≥m\x20l·∫°i:\x20ƒê·ª´ng\x20ch·ªâ\x20ƒë·ªçc\x20l·∫°i.\x20H√£y\x20d·ª´ng\x20l·∫°i,\x20che\x20t√†i\x20li·ªáu\x20ƒëi,\x20v√†\x20t·ª±\x20h·ªèi:\x20\x22M√¨nh\x20th·ª±c\x20s·ª±\x20nh·ªõ\x20ƒë∆∞·ª£c\x20g√¨?\x22</i></p>','delete','hist-item','offsetWidth','</ol>','selectedTopicId','max','<tr><td>','documentElement','strokeDashoffset','file','Ch·ªß\x20ƒë·ªÅ\x20con:\x20','üåä\x20Flow','\x22?\x20M·ªçi\x20d·ªØ\x20li·ªáu\x20li√™n\x20quan\x20s·∫Ω\x20b·ªã\x20m·∫•t.','topic-actions','#statTasks','getBoundingClientRect','timer','var(--warn)','#historyList','autoBackup','backups','clientY','flatMap','getDate','250\x20gi·ªù\x20l√†\x20minh\x20ch·ª©ng\x20cho\x20s·ª±\x20b·ªÅn\x20b·ªâ\x20ƒë√°ng\x20kinh\x20ng·∫°c.\x20B·∫°n\x20ƒë√£\x20ƒë·ªëi\x20m·∫∑t\x20v·ªõi\x20nh·ªØng\x20ng√†y\x20kh√≥\x20khƒÉn,\x20nh·ªØng\x20l√∫c\x20m·∫•t\x20t·∫≠p\x20trung,\x20nh∆∞ng\x20b·∫°n\x20v·∫´n\x20quay\x20tr·ªü\x20l·∫°i.\x20S·ª©c\x20m·∫°nh\x20th·ª±c\x20s·ª±\x20n·∫±m\x20·ªü\x20ch√≠nh\x20s·ª±\x20ki√™n\x20tr√¨\x20n√†y.','Ki·ªÉm\x20tra\x20v√†\x20ch·ªânh\x20l·∫°i\x20t∆∞\x20th·∫ø\x20ng·ªìi\x20cho\x20ƒë√∫ng.','volume','#audioWorkEnd','then','useYtThumbnailAsBg','#draggableTimer','N·ª≠a\x20ngh√¨n\x20gi·ªù\x20t·∫≠p\x20trung.\x20B·∫°n\x20ƒë√£\x20d√†nh\x20m·ªôt\x20kho·∫£ng\x20th·ªùi\x20gian\x20ƒë√°ng\x20k·ªÉ\x20ƒë·ªÉ\x20theo\x20ƒëu·ªïi\x20ƒëi·ªÅu\x20quan\x20tr·ªçng\x20v·ªõi\x20m√¨nh.\x20M·ª©c\x20ƒë·ªô\x20chuy√™n\x20t√¢m\x20n√†y\x20ch·∫Øc\x20ch·∫Øn\x20ƒëang\x20t·∫°o\x20ra\x20nh·ªØng\x20k·∫øt\x20qu·∫£\x20s√¢u\x20s·∫Øc\x20v√†\x20kh√°c\x20bi·ªát.\x20Th·∫≠t\x20ƒë√°ng\x20ng∆∞·ª°ng\x20m·ªô.','.method-edit','trim','<p\x20class=\x22tiny\x22><strong>T·ªïng\x20th·ªùi\x20gian:</strong>\x20','value','165JupErg','modalMethodEditor','#summariesList','<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20tin\x20nh·∫Øn\x20n√†o.</div>','short','oncomplete','soundTheme','method-title','A_long','#timerPresetSelector\x20button','removeEventListener','A_work','break_end','#methodEditorContentInput','objectStoreNames','#set_enableWinddown','reloading','1389519ymBGMD','cueVideoById','.method-content','Nh·∫π\x20nh√†ng\x20nh·∫Øm\x20m·∫Øt\x20v√†\x20m·ªâm\x20c∆∞·ªùi\x20v·ªõi\x20ch√≠nh\x20m√¨nh.','setValueAtTime','cyclesTarget','#selectedContext','var(--danger)','min','<input\x20type=\x22checkbox\x22\x20id=\x22','name','catch','cycles','<i>$1</i>','mute','X√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20con'];_0x526e=function(){return _0xbbfd95;};return _0x526e();}function normalizeDataStructure(_0x58902c){const _0x16ac3c=_0x17450c;if(!_0x58902c||typeof _0x58902c!==_0x16ac3c(0x36c))return;const _0x4a3e93=_0x58902c[_0x16ac3c(0x4a9)]||{},_0x1484b6={...defaults[_0x16ac3c(0x4a9)],..._0x4a3e93,'durations':{...defaults[_0x16ac3c(0x4a9)][_0x16ac3c(0x3d9)],..._0x4a3e93['durations']||{}}};if(!Array[_0x16ac3c(0x47e)](_0x1484b6[_0x16ac3c(0x34d)]))_0x1484b6[_0x16ac3c(0x34d)]=[];_0x58902c[_0x16ac3c(0x4a9)]=_0x1484b6,_0x58902c[_0x16ac3c(0x3b3)]=Array[_0x16ac3c(0x47e)](_0x58902c[_0x16ac3c(0x3b3)])?_0x58902c[_0x16ac3c(0x3b3)]:[],_0x58902c[_0x16ac3c(0x3b3)][_0x16ac3c(0x4a0)](_0x1930d0=>{const _0x43a4b8=_0x16ac3c;_0x1930d0['subtopics']=Array['isArray'](_0x1930d0[_0x43a4b8(0x206)])?_0x1930d0[_0x43a4b8(0x206)]:[],_0x1930d0[_0x43a4b8(0x206)][_0x43a4b8(0x4a0)](_0x4b057e=>{const _0x246f79=_0x43a4b8;_0x4b057e['tasks']=_0x4b057e[_0x246f79(0x229)]||[],_0x4b057e[_0x246f79(0x396)]=_0x4b057e[_0x246f79(0x396)]||[],_0x4b057e[_0x246f79(0x3a4)]=_0x4b057e[_0x246f79(0x3a4)]||[],_0x4b057e[_0x246f79(0x331)]=_0x4b057e['chatHistory']||[],_0x4b057e[_0x246f79(0x4c1)]=Array[_0x246f79(0x47e)](_0x4b057e[_0x246f79(0x4c1)])?_0x4b057e[_0x246f79(0x4c1)]:[],_0x4b057e['stats']=_0x4b057e[_0x246f79(0x488)]||{'totalMinutes':0x0,'sessionsCompleted':0x0,'tasksCompleted':0x0},_0x4b057e[_0x246f79(0x20d)]=_0x4b057e[_0x246f79(0x20d)]||[],_0x4b057e['timerState']=_0x4b057e[_0x246f79(0x4c2)]||{'state':'idle','prevState':null,'remaining':0x0,'segmentTotal':0x0,'cycleIndex':0x0};});});}function extractYouTubeID(_0x48e07a){const _0x77de75=_0x17450c;if(!_0x48e07a)return null;const _0x499863=/^.*(?:youtu.be\/|shorts\/|live\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([A-Za-z0-9_-]{11}).*/,_0xcdf8ba=_0x48e07a[_0x77de75(0x2ae)](_0x499863);return _0xcdf8ba?_0xcdf8ba[0x1]:null;}let sessionYoutubeUrl='';function getActiveYoutubeUrl(){const _0x192374=_0x17450c;try{if(sessionYoutubeUrl)return sessionYoutubeUrl;const _0x1452da=document[_0x192374(0x1f8)]('set_youtubeUrl'),_0x1187af=(_0x1452da&&_0x1452da['value']?_0x1452da[_0x192374(0x406)]:'')[_0x192374(0x404)]();return _0x1187af;}catch(_0x2cfb3d){return'';}}function getActiveVideoId(){return extractYouTubeID(getActiveYoutubeUrl());}function handleYoutubeUrlInput(){const _0x45f116=_0x17450c,_0x249b82=$(_0x45f116(0x387)),_0xf126df=$(_0x45f116(0x209)),_0x3d77d2=$('#btnToggleYtSound'),_0x18de21=_0x249b82['value']['trim'](),_0x5126ab=extractYouTubeID(_0x18de21);if(_0x5126ab){_0xf126df[_0x45f116(0x48c)]=_0x45f116(0x284),_0xf126df[_0x45f116(0x3a2)]['color']=_0x45f116(0x20a),_0x3d77d2[_0x45f116(0x2e9)]=![],sessionYoutubeUrl=_0x18de21;try{ytUserPaused=![];}catch(_0x362ba1){}try{const _0x55665c=_0x45f116(0x35d)+_0x5126ab+_0x45f116(0x321),_0x1351a0=new Image();_0x1351a0[_0x45f116(0x4b8)]=async()=>{const _0x22ad85=_0x45f116;data[_0x22ad85(0x4a9)][_0x22ad85(0x2ec)]=_0x55665c;try{await saveData();}catch(_0x1b2bb8){}applyCustomBg();},_0x1351a0['onerror']=async()=>{const _0x494fb8=_0x45f116,_0x1751b5=_0x494fb8(0x35d)+_0x5126ab+_0x494fb8(0x23a);data[_0x494fb8(0x4a9)][_0x494fb8(0x2ec)]=_0x1751b5;try{await saveData();}catch(_0x340e40){}applyCustomBg();},_0x1351a0[_0x45f116(0x35b)]=_0x55665c;}catch(_0x145334){}try{if(IS_FILE_PROTOCOL){const _0x540ba9=_ytUnlocked?0x0:0x1;fallbackLoadVideo(_0x5126ab,{'autoplay':0x1,'mute':_0x540ba9});try{setTimeout(()=>{const _0x3180da=_0x45f116;try{fallbackPostMessage(_0x3180da(0x2f2));}catch(_0x19b3f2){}},0xfa);}catch(_0x207300){}!_ytUnlocked&&showSoundPermission();try{setTimeout(()=>{const _0x18b69e=_0x45f116,_0x2670bc=document[_0x18b69e(0x1f8)]('ytUrlFeedback');if(_0x2670bc)_0x2670bc[_0x18b69e(0x48c)]=_0x18b69e(0x2cd);},0x1f4);}catch(_0x56d8bd){}}else ensureYouTubeAPI()[_0x45f116(0x3ff)](()=>{const _0x3eb768=_0x45f116;updateYouTubePlayer();try{if(_ytUnlocked)ytFadeInPlay();else ytPlayer&&ytPlayer[_0x3eb768(0x426)]&&ytPlayer[_0x3eb768(0x2f2)]&&(ytPlayer['mute'](),ytPlayer[_0x3eb768(0x2f2)](),_ytPrimed=!![],showSoundPermission());}catch(_0x35728f){}})[_0x45f116(0x423)](()=>{});}catch(_0x29405e){}}else{if(_0x18de21===''){_0xf126df['textContent']='',_0x3d77d2['disabled']=!![];if(IS_FILE_PROTOCOL)try{fallbackStop();}catch(_0x2fbe9e){}else ytPlayer&&ytPlayer['stopVideo']&&ytPlayer[_0x45f116(0x38f)]();}else _0xf126df[_0x45f116(0x48c)]=_0x45f116(0x20f),_0xf126df[_0x45f116(0x3a2)]['color']=_0x45f116(0x41f),_0x3d77d2['disabled']=!![];}}function applyTheme(_0x3657cc){const _0x178c8b=_0x17450c,_0x42caef=_0x3657cc||data[_0x178c8b(0x4a9)][_0x178c8b(0x4ca)]||_0x178c8b(0x214);document[_0x178c8b(0x219)][_0x178c8b(0x32d)]['theme']=_0x42caef;const _0x52295b=[_0x178c8b(0x2d5),_0x178c8b(0x28e)][_0x178c8b(0x49f)](_0x42caef),_0xbbd79c=_0x42caef===_0x178c8b(0x244)||_0x42caef==='pastel',_0x2785a2=data[_0x178c8b(0x4a9)][_0x178c8b(0x2ec)],_0x37d70a=()=>{const _0x2f7cc1=_0x178c8b;try{document[_0x2f7cc1(0x219)][_0x2f7cc1(0x3a2)][_0x2f7cc1(0x44a)]='';}catch(_0x7596a4){}};if(_0x2785a2&&!data[_0x178c8b(0x4a9)][_0x178c8b(0x400)])document[_0x178c8b(0x219)][_0x178c8b(0x3a2)][_0x178c8b(0x39e)]('--bg-image',_0x178c8b(0x3e0)+_0x2785a2+')'),_0x37d70a();else{if(_0x2785a2&&data['settings'][_0x178c8b(0x400)])document['body'][_0x178c8b(0x3a2)][_0x178c8b(0x39e)]('--bg-image',_0x178c8b(0x3e0)+_0x2785a2+')'),_0x37d70a();else{if(_0x52295b)document[_0x178c8b(0x219)][_0x178c8b(0x3a2)][_0x178c8b(0x33d)]('--bg-image'),_0x37d70a();else _0xbbd79c?(document[_0x178c8b(0x219)]['style'][_0x178c8b(0x39e)]('--bg-image',_0x178c8b(0x39a)),_0x37d70a()):(document[_0x178c8b(0x219)][_0x178c8b(0x3a2)][_0x178c8b(0x39e)](_0x178c8b(0x43c),''),document[_0x178c8b(0x219)][_0x178c8b(0x3a2)][_0x178c8b(0x44a)]=_0x178c8b(0x377));}}}const defaults={'version':0x1,'settings':{'apiKey':'','currentView':_0x17450c(0x3f3),'preset':'A','autoStartNext':!![],'soundOn':!![],'volume':0.8,'soundTheme':_0x17450c(0x21f),'theme':_0x17450c(0x214),'cyclesA':0x4,'longBreakIntervalA':0x4,'cyclesB':0x4,'longBreakIntervalB':0x4,'flowtimeBreakRatio':0x5,'enableWinddown':!![],'enableSessionNotes':!![],'durations':{'A_work':0x19,'A_short':0x5,'A_long':0xf,'A_winddown':0x2,'B_work':0x32,'B_short':0xa,'B_long':0x1e,'B_winddown':0x5},'selectedTopicId':'','selectedSubtopicId':'','collapsedTopics':{},'customBg':'','customSounds':{'work_end':'','break_end':'','long_end':''},'youtubeUrl':'','youtubeVolume':0x50,'useYtThumbnailAsBg':!![],'panelOpacity':0.85,'panelBlur':0xa,'backgroundMode':_0x17450c(0x385),'backupDaysToKeep':0x7,'achievedMilestones':[],'methods':[{'id':uid('m'),'title':_0x17450c(0x47b),'content':_0x17450c(0x4ed)},{'id':uid('m'),'title':'Ph∆∞∆°ng\x20Ph√°p\x20Vi·∫øt\x20c·ªßa\x20Benjamin\x20Franklin:\x20H·ªçc\x20Vi·∫øt\x20B·∫±ng\x20C√°ch\x20T√°i\x20T·∫°o','content':_0x17450c(0x438)},{'id':uid('m'),'title':_0x17450c(0x276),'content':_0x17450c(0x45a)},{'id':uid('m'),'title':_0x17450c(0x495),'content':_0x17450c(0x3e2)},{'id':uid('m'),'title':'L·∫∑p\x20L·∫°i\x20Ng·∫Øt\x20Qu√£ng\x20(Spaced\x20Repetition):\x20H·ªçc\x20ƒê√∫ng\x20Th·ªùi\x20ƒêi·ªÉm','content':_0x17450c(0x46e)}]},'topics':[]};let data,editingPreset='A',AUDIO_CTX=null;function ensureAudio(){const _0x455430=_0x17450c;if(!AUDIO_CTX)AUDIO_CTX=new(window['AudioContext']||window[(_0x455430(0x3a9))])();}function _0x2dbf(_0x4327d7,_0x3bbdda){const _0x526e37=_0x526e();return _0x2dbf=function(_0x2dbfe2,_0x3dc5cc){_0x2dbfe2=_0x2dbfe2-0x1e6;let _0x3d2037=_0x526e37[_0x2dbfe2];return _0x3d2037;},_0x2dbf(_0x4327d7,_0x3bbdda);}function tone(_0x65836d=0x370,_0x1cdbfb=0xc8,_0x64b776=0.2,_0x2d4894='sine',_0x1a8f9f=0x0){const _0x10f55b=_0x17450c;ensureAudio();const _0x2622a1=AUDIO_CTX,_0x39647d=_0x2622a1['createOscillator'](),_0x439169=_0x2622a1['createGain']();_0x39647d['type']=_0x2d4894,_0x39647d['frequency'][_0x10f55b(0x406)]=_0x65836d,_0x39647d[_0x10f55b(0x2da)](_0x439169),_0x439169[_0x10f55b(0x2da)](_0x2622a1[_0x10f55b(0x448)]);const _0xeb421f=_0x2622a1[_0x10f55b(0x1ee)]+_0x1a8f9f;_0x439169[_0x10f55b(0x2b0)][_0x10f55b(0x41c)](0x0,_0xeb421f),_0x439169['gain']['linearRampToValueAtTime'](_0x64b776,_0xeb421f+0.01),_0x439169[_0x10f55b(0x2b0)][_0x10f55b(0x2e1)](0.0001,_0xeb421f+_0x1cdbfb/0x3e8),_0x39647d[_0x10f55b(0x23e)](_0xeb421f),_0x39647d[_0x10f55b(0x313)](_0xeb421f+_0x1cdbfb/0x3e8+0.05);}function playSound(_0x7be38d){const _0x15eb29=_0x17450c;if(!data[_0x15eb29(0x4a9)][_0x15eb29(0x216)])return;const _0xd12d64=Math[_0x15eb29(0x3e8)](0x0,Math[_0x15eb29(0x420)](0x1,data[_0x15eb29(0x4a9)][_0x15eb29(0x3fd)]??0.8)),_0x5a1b95=data[_0x15eb29(0x4a9)]['customSounds']?.[_0x7be38d];let _0x226369;if(_0x7be38d===_0x15eb29(0x2fc))_0x226369=$(_0x15eb29(0x3fe));else{if(_0x7be38d==='break_end')_0x226369=$('#audioBreakEnd');else{if(_0x7be38d===_0x15eb29(0x4aa))_0x226369=$(_0x15eb29(0x2a2));}}if(_0x5a1b95&&_0x226369){_0x5a1b95[_0x15eb29(0x29a)](_0x15eb29(0x437))||_0x5a1b95['startsWith'](_0x15eb29(0x2e3))||_0x5a1b95['startsWith'](_0x15eb29(0x4cd))?(_0x226369[_0x15eb29(0x35b)]=_0x5a1b95,_0x226369['volume']=_0xd12d64,_0x226369['play']()[_0x15eb29(0x423)](_0x5caabf=>console[_0x15eb29(0x30e)](_0x15eb29(0x381),_0x5caabf))):getStoredFileUrl(_0x5a1b95)['then'](_0x37f15a=>{const _0x5088ac=_0x15eb29;_0x37f15a&&(_0x226369[_0x5088ac(0x35b)]=_0x37f15a,_0x226369[_0x5088ac(0x3fd)]=_0xd12d64,_0x226369[_0x5088ac(0x442)]()[_0x5088ac(0x423)](_0x4736a2=>console[_0x5088ac(0x30e)](_0x5088ac(0x381),_0x4736a2)));});return;}const _0x1cd089=data['settings']['soundTheme']||_0x15eb29(0x21f);if(_0x1cd089===_0x15eb29(0x21f)){if(_0x7be38d==='work_end')tone(0x370,0xfa,_0xd12d64),tone(0x294,0xb4,_0xd12d64*0.8,_0x15eb29(0x356),0.22);else{if(_0x7be38d===_0x15eb29(0x413))tone(0x294,0xdc,_0xd12d64*0.9);else _0x7be38d==='long_end'&&(tone(0x208,0xc8,_0xd12d64),tone(0x30c,0xc8,_0xd12d64,_0x15eb29(0x356),0.22),tone(0x410,0xdc,_0xd12d64,_0x15eb29(0x356),0.44));}}else{if(_0x7be38d==='work_end')tone(0x4b0,0xa0,_0xd12d64*0.9,_0x15eb29(0x4fd)),tone(0x384,0xdc,_0xd12d64*0.8,_0x15eb29(0x4fd),0.18);else{if(_0x7be38d===_0x15eb29(0x413))tone(0x370,0xf0,_0xd12d64*0.8,_0x15eb29(0x4fd));else _0x7be38d==='long_end'&&(tone(0x258,0xdc,_0xd12d64*0.9,_0x15eb29(0x4fd)),tone(0x3b6,0xf0,_0xd12d64*0.9,_0x15eb29(0x4fd),0.22),tone(0x4b0,0xf0,_0xd12d64,_0x15eb29(0x4fd),0.44));}}}async function saveData(){const _0x81ea68=_0x17450c;try{await storageManager[_0x81ea68(0x4ae)](data);}catch(_0x34cf07){console[_0x81ea68(0x30e)](_0x81ea68(0x34f),_0x34cf07),toast(_0x81ea68(0x2a1)+_0x34cf07[_0x81ea68(0x391)]);}}async function ensureValidSelection(){const _0x2b687c=_0x17450c,_0x4faf53=data[_0x2b687c(0x4a9)];if(!data[_0x2b687c(0x3b3)]||data['topics'][_0x2b687c(0x223)]===0x0){_0x4faf53[_0x2b687c(0x3e7)]='',_0x4faf53['selectedSubtopicId']='',await saveData();return;}const _0x34bfb7=data[_0x2b687c(0x3b3)][_0x2b687c(0x28c)](_0x388da0=>_0x388da0['id']===_0x4faf53['selectedTopicId']),_0x10fdee=_0x34bfb7?.[_0x2b687c(0x206)][_0x2b687c(0x28c)](_0x2e3ca0=>_0x2e3ca0['id']===_0x4faf53[_0x2b687c(0x2c0)]);if(!_0x34bfb7||!_0x10fdee){const _0x147878=data[_0x2b687c(0x3b3)][0x0],_0x2c01c9=_0x147878?.[_0x2b687c(0x206)]?.[0x0];_0x4faf53['selectedTopicId']=_0x147878?.['id']||'',_0x4faf53[_0x2b687c(0x2c0)]=_0x2c01c9?.['id']||'',await saveData();}}function showInputModal(_0x564dc0,_0x1ae063,_0x107ec1=''){const _0x576825=_0x17450c;$('#genericTitle')[_0x576825(0x48c)]=_0x564dc0,$(_0x576825(0x3c5))[_0x576825(0x279)][_0x576825(0x30f)](_0x576825(0x454));const _0x2dbbf4=$(_0x576825(0x2d0));_0x2dbbf4['value']=_0x107ec1,_0x2dbbf4['classList'][_0x576825(0x393)](_0x576825(0x454)),$(_0x576825(0x38b))['classList'][_0x576825(0x30f)](_0x576825(0x3ae));try{trapFocus($(_0x576825(0x38b)));}catch(_0x5c9072){}_0x2dbbf4[_0x576825(0x310)](),_0x2dbbf4[_0x576825(0x3d2)]();const _0x4ff153=()=>{const _0x52a6aa=_0x576825;_0x1ae063(_0x2dbbf4[_0x52a6aa(0x406)]),_0x9fd129();},_0x1f8353=()=>_0x9fd129(),_0x329927=_0x38bcbe=>{const _0x4c6c50=_0x576825;if(_0x38bcbe[_0x4c6c50(0x2f4)]===_0x4c6c50(0x4d2))_0x4ff153();if(_0x38bcbe[_0x4c6c50(0x2f4)]==='Escape')_0x1f8353();};$(_0x576825(0x2f0))[_0x576825(0x2c3)]=_0x4ff153,$(_0x576825(0x2f9))['onclick']=_0x1f8353,_0x2dbbf4[_0x576825(0x30d)]=_0x329927;function _0x9fd129(){const _0x5e46f5=_0x576825;$(_0x5e46f5(0x38b))[_0x5e46f5(0x279)]['remove'](_0x5e46f5(0x3ae)),$('#btnGenericOk')[_0x5e46f5(0x2c3)]=null,$(_0x5e46f5(0x2f9))[_0x5e46f5(0x2c3)]=null,_0x2dbbf4[_0x5e46f5(0x30d)]=null;try{releaseFocus();}catch(_0x5d0cc9){}}}function showConfirmModal(_0x5f1e68,_0x3ab93a,_0xffc642){const _0x421a5f=_0x17450c;$('#genericTitle')[_0x421a5f(0x48c)]=_0x5f1e68;const _0x4df276=$(_0x421a5f(0x3c5));_0x4df276['textContent']=_0x3ab93a,_0x4df276[_0x421a5f(0x279)]['remove']('hidden'),$('#genericInput')[_0x421a5f(0x279)]['add'](_0x421a5f(0x454)),$(_0x421a5f(0x38b))['classList'][_0x421a5f(0x30f)](_0x421a5f(0x3ae));try{trapFocus($(_0x421a5f(0x38b)));}catch(_0xf68159){}const _0x9cb050=()=>{_0xffc642(!![]),_0x3dafb1();},_0x3eb3e4=()=>{_0xffc642(![]),_0x3dafb1();};$(_0x421a5f(0x2f0))[_0x421a5f(0x2c3)]=_0x9cb050,$('#btnGenericCancel')['onclick']=_0x3eb3e4;function _0x3dafb1(){const _0x326bdc=_0x421a5f;$(_0x326bdc(0x38b))['classList']['remove']('show'),$(_0x326bdc(0x2f0))[_0x326bdc(0x2c3)]=null,$(_0x326bdc(0x2f9))[_0x326bdc(0x2c3)]=null;try{releaseFocus();}catch(_0x3a5000){}}}let pendingNoteSessionId=null;function openNoteModal(_0x54dcda){const _0x15f5fc=_0x17450c;pendingNoteSessionId=_0x54dcda||null;const _0x4db81=$(_0x15f5fc(0x433));if(!_0x4db81)return;const _0xe63b71=$(_0x15f5fc(0x449));if(_0xe63b71)try{_0xe63b71[_0x15f5fc(0x406)]='';}catch(_0x3de0c8){}_0x4db81[_0x15f5fc(0x279)][_0x15f5fc(0x30f)]('show');try{trapFocus(_0x4db81);}catch(_0x4e6ba5){}}function closeNoteModal(){const _0x2cade8=_0x17450c,_0x4ea61d=$(_0x2cade8(0x433));if(!_0x4ea61d)return;_0x4ea61d['classList']['remove'](_0x2cade8(0x3ae)),pendingNoteSessionId=null;try{releaseFocus();}catch(_0x3fdb17){}}async function switchView(_0x1ad564){const _0x495cb0=_0x17450c;$$(_0x495cb0(0x2e4))[_0x495cb0(0x4a0)](_0x246d3d=>_0x246d3d[_0x495cb0(0x279)]['remove'](_0x495cb0(0x357))),$(_0x495cb0(0x3e1)+_0x1ad564)[_0x495cb0(0x279)][_0x495cb0(0x30f)](_0x495cb0(0x357)),$$(_0x495cb0(0x47a))[_0x495cb0(0x4a0)](_0x59e415=>_0x59e415['classList'][_0x495cb0(0x393)](_0x495cb0(0x357)));const _0x3755cc=$(_0x495cb0(0x272)+_0x1ad564+'\x22]');if(_0x3755cc)_0x3755cc[_0x495cb0(0x279)][_0x495cb0(0x30f)](_0x495cb0(0x357));data['settings'][_0x495cb0(0x3cd)]=_0x1ad564,await saveData(),_0x1ad564===_0x495cb0(0x488)&&renderDashboard();}function closeAllMenus(){const _0xb0d39f=_0x17450c;$$(_0xb0d39f(0x4db))['forEach'](_0x572020=>_0x572020[_0xb0d39f(0x279)]['remove'](_0xb0d39f(0x3ae))),$$(_0xb0d39f(0x22a))[_0xb0d39f(0x4a0)](_0x40fe1e=>_0x40fe1e[_0xb0d39f(0x279)][_0xb0d39f(0x393)](_0xb0d39f(0x292)));}function renderTopics(){const _0x593f67=_0x17450c,_0x1f31a4=$(_0x593f67(0x3d7));if(!_0x1f31a4)return;_0x1f31a4[_0x593f67(0x1ef)]='';const _0x3aa5f5=data[_0x593f67(0x4a9)][_0x593f67(0x36e)]||{};data['topics'][_0x593f67(0x4a0)](_0x7f0620=>{const _0x1d786b=_0x593f67,_0xb37438=document[_0x1d786b(0x251)](_0x1d786b(0x2d4));_0xb37438[_0x1d786b(0x2a9)]=_0x1d786b(0x32a),_0xb37438[_0x1d786b(0x32d)][_0x1d786b(0x2b3)]=_0x7f0620['id'];const _0x141573=document[_0x1d786b(0x251)](_0x1d786b(0x2d4));_0x141573[_0x1d786b(0x2a9)]=_0x1d786b(0x2b9);const _0xbebd68=!!_0x3aa5f5[_0x7f0620['id']],_0x159437=document[_0x1d786b(0x251)]('button');_0x159437[_0x1d786b(0x2a9)]=_0x1d786b(0x336),_0x159437['setAttribute'](_0x1d786b(0x496),String(!_0xbebd68)),_0x159437['innerHTML']=_0x1d786b(0x353);const _0x489fb0=document[_0x1d786b(0x251)](_0x1d786b(0x2d4));_0x489fb0[_0x1d786b(0x2a9)]=_0x1d786b(0x29c),_0x489fb0[_0x1d786b(0x48c)]=_0x7f0620['name'];const _0x1db5b4=document['createElement'](_0x1d786b(0x2d4));_0x1db5b4[_0x1d786b(0x2a9)]=_0x1d786b(0x3f0);const _0x776eb3=document['createElement'](_0x1d786b(0x2eb));_0x776eb3['className']=_0x1d786b(0x45f),_0x776eb3[_0x1d786b(0x1ef)]=_0x1d786b(0x203),_0x776eb3[_0x1d786b(0x241)]=_0x1d786b(0x227);const _0x105d2b=document[_0x1d786b(0x251)](_0x1d786b(0x2d4));_0x105d2b[_0x1d786b(0x3a2)][_0x1d786b(0x35a)]=_0x1d786b(0x328);const _0x2b7b0c=document[_0x1d786b(0x251)]('button');_0x2b7b0c[_0x1d786b(0x2a9)]='btn\x20small\x20ghost\x20actions-menu-btn',_0x2b7b0c[_0x1d786b(0x1ef)]=_0x1d786b(0x4dd),_0x2b7b0c[_0x1d786b(0x241)]='Th√™m\x20t√πy\x20ch·ªçn';const _0x3a6db8=document[_0x1d786b(0x251)]('div');_0x3a6db8[_0x1d786b(0x2a9)]=_0x1d786b(0x23c);const _0xe962cb=document[_0x1d786b(0x251)](_0x1d786b(0x2eb));_0xe962cb[_0x1d786b(0x2a9)]=_0x1d786b(0x304),_0xe962cb[_0x1d786b(0x1ef)]=_0x1d786b(0x307);const _0x5064c1=document[_0x1d786b(0x251)]('button');_0x5064c1[_0x1d786b(0x2a9)]='menu-item\x20danger',_0x5064c1[_0x1d786b(0x1ef)]='X√≥a\x20Ch·ªß\x20ƒë·ªÅ',_0x3a6db8[_0x1d786b(0x3a5)](_0xe962cb,_0x5064c1),_0x105d2b[_0x1d786b(0x3a5)](_0x2b7b0c,_0x3a6db8),_0x1db5b4[_0x1d786b(0x3a5)](_0x776eb3,_0x105d2b),_0x141573['append'](_0x159437,_0x489fb0,_0x1db5b4),_0x159437[_0x1d786b(0x45b)](_0x1d786b(0x4a4),async _0x2ef26f=>{const _0x11902a=_0x1d786b;_0x2ef26f[_0x11902a(0x2a0)]();const _0x4608fc=!!_0x3aa5f5[_0x7f0620['id']];_0x4608fc?delete _0x3aa5f5[_0x7f0620['id']]:_0x3aa5f5[_0x7f0620['id']]=!![],data[_0x11902a(0x4a9)][_0x11902a(0x36e)]=_0x3aa5f5,await storageManager[_0x11902a(0x1e7)](data['settings']),renderTopics();});const _0x279bd1=async()=>{const _0x295387=_0x1d786b,_0x20a35b=!!_0x3aa5f5[_0x7f0620['id']];_0x20a35b?delete _0x3aa5f5[_0x7f0620['id']]:_0x3aa5f5[_0x7f0620['id']]=!![],data[_0x295387(0x4a9)][_0x295387(0x36e)]=_0x3aa5f5,await storageManager[_0x295387(0x1e7)](data[_0x295387(0x4a9)]),renderTopics();};_0x141573[_0x1d786b(0x45b)](_0x1d786b(0x4a4),async _0x203e3a=>{const _0x532cd1=_0x1d786b,_0x2ffa7d=_0x203e3a[_0x532cd1(0x4a2)];if(_0x2ffa7d&&_0x2ffa7d[_0x532cd1(0x24c)]){if(_0x2ffa7d['closest'](_0x532cd1(0x36b))||_0x2ffa7d['closest'](_0x532cd1(0x3ab))||_0x2ffa7d['closest']('button')||_0x2ffa7d[_0x532cd1(0x24c)](_0x532cd1(0x31d)))return;}_0x203e3a[_0x532cd1(0x2a0)](),await _0x279bd1();}),_0x489fb0[_0x1d786b(0x45b)](_0x1d786b(0x4a4),async _0x2215fd=>{_0x2215fd['stopPropagation'](),await _0x279bd1();}),_0xb37438[_0x1d786b(0x45b)]('click',async _0x423080=>{const _0x1a63e7=_0x1d786b,_0x5843e6=_0x423080[_0x1a63e7(0x4a2)];if(_0x5843e6&&_0x5843e6['closest']){if(_0x5843e6['closest'](_0x1a63e7(0x230)))return;if(_0x5843e6[_0x1a63e7(0x24c)](_0x1a63e7(0x36b))||_0x5843e6[_0x1a63e7(0x24c)](_0x1a63e7(0x3ab))||_0x5843e6[_0x1a63e7(0x24c)](_0x1a63e7(0x2eb))||_0x5843e6[_0x1a63e7(0x24c)](_0x1a63e7(0x31d)))return;}await _0x279bd1();});const _0x3e8c23=document[_0x1d786b(0x251)](_0x1d786b(0x2d4));_0x3e8c23[_0x1d786b(0x2a9)]='subtopics'+(_0xbebd68?_0x1d786b(0x38a):''),_0x3e8c23[_0x1d786b(0x32d)]['tid']=_0x7f0620['id'],_0x7f0620[_0x1d786b(0x206)][_0x1d786b(0x4a0)](_0x3b1097=>{const _0x501b01=_0x1d786b,_0x5ee8f5=document[_0x501b01(0x251)](_0x501b01(0x2d4));_0x5ee8f5[_0x501b01(0x2a9)]='sub-row',_0x5ee8f5[_0x501b01(0x32d)]['sid']=_0x3b1097['id'];const _0x41eac3=document[_0x501b01(0x251)](_0x501b01(0x2eb));_0x41eac3[_0x501b01(0x2a9)]=_0x501b01(0x285),_0x41eac3['textContent']='‚Ä¢\x20'+_0x3b1097[_0x501b01(0x422)],_0x41eac3['dataset'][_0x501b01(0x2fb)]=_0x3b1097['id'],_0x41eac3[_0x501b01(0x32d)][_0x501b01(0x2b3)]=_0x7f0620['id'];if(data[_0x501b01(0x4a9)][_0x501b01(0x2c0)]===_0x3b1097['id'])_0x41eac3['classList'][_0x501b01(0x30f)](_0x501b01(0x357));const _0x3bfb17=document[_0x501b01(0x251)]('div');_0x3bfb17['className']='actions';const _0x21ff6c=document[_0x501b01(0x251)](_0x501b01(0x2d4));_0x21ff6c['style']['position']=_0x501b01(0x328);const _0x1e2982=document[_0x501b01(0x251)](_0x501b01(0x2eb));_0x1e2982[_0x501b01(0x2a9)]=_0x501b01(0x298),_0x1e2982['innerHTML']=_0x501b01(0x4dd),_0x1e2982[_0x501b01(0x241)]=_0x501b01(0x451);const _0x4c07e7=document[_0x501b01(0x251)]('div');_0x4c07e7['className']='actions-menu';const _0x5becd3=document[_0x501b01(0x251)]('button');_0x5becd3[_0x501b01(0x2a9)]=_0x501b01(0x304),_0x5becd3[_0x501b01(0x1ef)]=_0x501b01(0x3b2);const _0x23c978=document['createElement']('button');_0x23c978[_0x501b01(0x2a9)]=_0x501b01(0x204),_0x23c978[_0x501b01(0x1ef)]=_0x501b01(0x427),_0x4c07e7[_0x501b01(0x3a5)](_0x5becd3,_0x23c978),_0x21ff6c[_0x501b01(0x3a5)](_0x1e2982,_0x4c07e7),_0x3bfb17['append'](_0x21ff6c),_0x5ee8f5[_0x501b01(0x3a5)](_0x41eac3,_0x3bfb17),_0x3e8c23['appendChild'](_0x5ee8f5),_0x41eac3[_0x501b01(0x45b)]('click',()=>selectSubtopic(_0x7f0620['id'],_0x3b1097['id'])),_0x1e2982['addEventListener']('click',_0x4b5052=>{const _0x3f5814=_0x501b01;_0x4b5052[_0x3f5814(0x2a0)]();const _0x8bece7=_0x4c07e7[_0x3f5814(0x279)][_0x3f5814(0x4ea)](_0x3f5814(0x3ae));closeAllMenus(),_0x8bece7?_0xb37438['classList'][_0x3f5814(0x393)](_0x3f5814(0x292)):(_0x4c07e7[_0x3f5814(0x279)][_0x3f5814(0x30f)](_0x3f5814(0x3ae)),_0xb37438[_0x3f5814(0x279)][_0x3f5814(0x30f)](_0x3f5814(0x292)));}),_0x5becd3[_0x501b01(0x45b)](_0x501b01(0x4a4),()=>showInputModal(_0x501b01(0x2bf),async _0x5f571c=>{const _0x3807a2=_0x501b01;if(!_0x5f571c)return;_0x3b1097['name']=_0x5f571c,await storageManager[_0x3807a2(0x476)](_0x3807a2(0x206),_0x3b1097),renderAll();},_0x3b1097['name'])),_0x23c978['addEventListener']('click',()=>showConfirmModal(_0x501b01(0x500),_0x501b01(0x4fc)+_0x3b1097[_0x501b01(0x422)]+_0x501b01(0x3ef),async _0x14738a=>{const _0x4efd94=_0x501b01;if(!_0x14738a)return;_0x7f0620['subtopics']=_0x7f0620[_0x4efd94(0x206)][_0x4efd94(0x3a0)](_0x931765=>_0x931765['id']!==_0x3b1097['id']);const _0x30b94b=data[_0x4efd94(0x4a9)];_0x30b94b[_0x4efd94(0x2c0)]===_0x3b1097['id']&&(_0x30b94b[_0x4efd94(0x2c0)]='',_0x30b94b[_0x4efd94(0x3e7)]='',ensureValidSelection()),await storageManager[_0x4efd94(0x3e3)](_0x4efd94(0x206),_0x3b1097['id']),renderAll();}));}),_0x2b7b0c[_0x1d786b(0x45b)](_0x1d786b(0x4a4),_0x27e861=>{const _0x27d87f=_0x1d786b;_0x27e861[_0x27d87f(0x2a0)]();const _0x376c45=_0x3a6db8[_0x27d87f(0x279)][_0x27d87f(0x4ea)](_0x27d87f(0x3ae));closeAllMenus(),_0x376c45?_0xb37438[_0x27d87f(0x279)][_0x27d87f(0x393)](_0x27d87f(0x292)):(_0x3a6db8[_0x27d87f(0x279)][_0x27d87f(0x30f)](_0x27d87f(0x3ae)),_0xb37438[_0x27d87f(0x279)][_0x27d87f(0x30f)](_0x27d87f(0x292)));}),_0x776eb3['addEventListener'](_0x1d786b(0x4a4),()=>showInputModal(_0x1d786b(0x208),async _0x5e35c0=>{const _0x1a42ee=_0x1d786b;if(!_0x5e35c0)return;const _0x49980d={'id':uid('s'),'topicId':_0x7f0620['id'],'name':_0x5e35c0,'tasks':[],'generalNotes':[],'summaries':[],'chatHistory':[],'methods':[],'stats':{'totalMinutes':0x0,'sessionsCompleted':0x0,'tasksCompleted':0x0},'sessions':[],'timerState':{'state':_0x1a42ee(0x4b6),'prevState':null,'remaining':0x0,'segmentTotal':0x0,'cycleIndex':0x0}};_0x7f0620[_0x1a42ee(0x206)][_0x1a42ee(0x367)](_0x49980d),await storageManager['add'](_0x1a42ee(0x206),_0x49980d),renderTopics();})),_0xe962cb['addEventListener'](_0x1d786b(0x4a4),()=>showInputModal(_0x1d786b(0x392),async _0x11b9c3=>{const _0x2aa342=_0x1d786b;if(!_0x11b9c3)return;_0x7f0620[_0x2aa342(0x422)]=_0x11b9c3,await storageManager[_0x2aa342(0x476)](_0x2aa342(0x3b3),_0x7f0620),renderTopics();},_0x7f0620[_0x1d786b(0x422)])),_0x5064c1['addEventListener'](_0x1d786b(0x4a4),()=>showConfirmModal(_0x1d786b(0x500),'B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20Ch·ªß\x20ƒë·ªÅ\x20\x22'+_0x7f0620[_0x1d786b(0x422)]+_0x1d786b(0x429),async _0x307691=>{const _0x3af855=_0x1d786b;if(!_0x307691)return;data['topics']=data[_0x3af855(0x3b3)]['filter'](_0x23c001=>_0x23c001['id']!==_0x7f0620['id']),delete _0x3aa5f5[_0x7f0620['id']];data[_0x3af855(0x4a9)][_0x3af855(0x3e7)]===_0x7f0620['id']&&(data[_0x3af855(0x4a9)]['selectedTopicId']='',data[_0x3af855(0x4a9)][_0x3af855(0x2c0)]='',ensureValidSelection());await storageManager[_0x3af855(0x3e3)]('topics',_0x7f0620['id']);for(const _0x42917c of _0x7f0620[_0x3af855(0x206)]){await storageManager[_0x3af855(0x3e3)](_0x3af855(0x206),_0x42917c['id']);}renderAll();})),_0x776eb3[_0x1d786b(0x45b)](_0x1d786b(0x4a4),_0x3339bf=>_0x3339bf[_0x1d786b(0x2a0)]()),_0xe962cb[_0x1d786b(0x45b)]('click',_0x1dd8f4=>_0x1dd8f4[_0x1d786b(0x2a0)]()),_0x5064c1['addEventListener'](_0x1d786b(0x4a4),_0x158991=>_0x158991[_0x1d786b(0x2a0)]()),_0xb37438[_0x1d786b(0x3a5)](_0x141573,_0x3e8c23),_0x1f31a4[_0x1d786b(0x2e8)](_0xb37438);});if(window['Sortable']){const _0xb0ee19=document[_0x593f67(0x1f8)](_0x593f67(0x3c0));if(_0xb0ee19){if(_0xb0ee19[_0x593f67(0x4f9)])try{_0xb0ee19[_0x593f67(0x4f9)]['destroy']();}catch(_0x94700b){}_0xb0ee19['_sortable']=new Sortable(_0xb0ee19,{'animation':0x96,'draggable':'.topic-item','onEnd':async function(_0x357e46){const _0x360645=_0x593f67;if(_0x357e46[_0x360645(0x352)]===_0x357e46[_0x360645(0x23d)])return;const _0x20d52e=data[_0x360645(0x3b3)][_0x360645(0x453)](_0x357e46['oldIndex'],0x1)[0x0];data['topics']['splice'](_0x357e46[_0x360645(0x23d)],0x0,_0x20d52e),await saveData(),renderTopics();}}),_0xb0ee19[_0x593f67(0x283)](_0x593f67(0x230))['forEach'](_0x1e52d7=>{const _0x43fde7=_0x593f67;new Sortable(_0x1e52d7,{'group':'subtopics-group','animation':0x96,'draggable':_0x43fde7(0x35f),'onEnd':async function(_0x15c241){const _0x3a704c=_0x43fde7,_0x315330=_0x15c241[_0x3a704c(0x2c2)]?.[_0x3a704c(0x32d)]?.[_0x3a704c(0x2b3)]||_0x15c241[_0x3a704c(0x2c2)]?.[_0x3a704c(0x24c)](_0x3a704c(0x2c4))?.[_0x3a704c(0x32d)]?.[_0x3a704c(0x2b3)],_0x399309=_0x15c241['to']?.[_0x3a704c(0x32d)]?.[_0x3a704c(0x2b3)]||_0x15c241['to']?.[_0x3a704c(0x24c)](_0x3a704c(0x2c4))?.[_0x3a704c(0x32d)]?.[_0x3a704c(0x2b3)],_0x1631cb=data[_0x3a704c(0x3b3)][_0x3a704c(0x28c)](_0x56b9f2=>_0x56b9f2['id']===_0x315330),_0x234783=data[_0x3a704c(0x3b3)][_0x3a704c(0x28c)](_0x14ef09=>_0x14ef09['id']===_0x399309);if(!_0x1631cb||!_0x234783)return;let _0x4bd817=null;const _0x7e5b1a=_0x15c241['item']?.[_0x3a704c(0x32d)]?.[_0x3a704c(0x2fb)]||_0x15c241[_0x3a704c(0x3b5)]?.[_0x3a704c(0x48d)](_0x3a704c(0x4de))?.[_0x3a704c(0x32d)]?.['sid'];if(_0x7e5b1a){const _0x2fb67d=_0x1631cb[_0x3a704c(0x206)][_0x3a704c(0x4ec)](_0x49332e=>_0x49332e['id']===_0x7e5b1a);if(_0x2fb67d>=0x0)_0x4bd817=_0x1631cb[_0x3a704c(0x206)][_0x3a704c(0x453)](_0x2fb67d,0x1)[0x0];}!_0x4bd817&&(_0x4bd817=_0x1631cb[_0x3a704c(0x206)][_0x3a704c(0x453)](_0x15c241['oldIndex'],0x1)[0x0]);if(!_0x4bd817)return;_0x4bd817[_0x3a704c(0x281)]=_0x234783['id'],_0x234783['subtopics'][_0x3a704c(0x453)](_0x15c241['newIndex'],0x0,_0x4bd817),data['settings']['selectedSubtopicId']===_0x4bd817['id']&&(data['settings'][_0x3a704c(0x3e7)]=_0x234783['id']),await saveData(),renderTopics();}});});}}}function selectSubtopic(_0x1a2515,_0xb060fa){const _0x83069b=_0x17450c,_0x5d587f=$('.app-content'),_0x1543af=getCurrentSubtopic();_0x1543af&&timer['state']!=='idle'&&(_0x1543af[_0x83069b(0x4c2)]={'state':timer['state'],'prevState':timer[_0x83069b(0x440)],'remaining':timer[_0x83069b(0x28b)],'segmentTotal':timer[_0x83069b(0x224)],'cycleIndex':timer[_0x83069b(0x358)]}),_0x5d587f[_0x83069b(0x279)]['add'](_0x83069b(0x417)),setTimeout(async()=>{const _0x597a8c=_0x83069b;data[_0x597a8c(0x4a9)][_0x597a8c(0x3e7)]=_0x1a2515,data['settings'][_0x597a8c(0x2c0)]=_0xb060fa;const _0x22c448=getCurrentSubtopic();_0x22c448[_0x597a8c(0x4c2)]?(timer[_0x597a8c(0x24d)]=_0x22c448['timerState'][_0x597a8c(0x24d)],timer[_0x597a8c(0x440)]=_0x22c448[_0x597a8c(0x4c2)][_0x597a8c(0x440)]||null,timer['remaining']=_0x22c448[_0x597a8c(0x4c2)][_0x597a8c(0x28b)],timer[_0x597a8c(0x224)]=_0x22c448['timerState'][_0x597a8c(0x224)],timer['cycleIndex']=_0x22c448['timerState'][_0x597a8c(0x358)]):timer[_0x597a8c(0x24a)](),await saveData(),timer[_0x597a8c(0x345)](),renderAll(),switchView('timer'),_0x5d587f[_0x597a8c(0x279)][_0x597a8c(0x393)]('reloading');},0xc8);}function getCurrentSubtopic(){const _0x5a5418=_0x17450c,_0x2ce57c=data['settings']['selectedTopicId'],_0x8e6253=data[_0x5a5418(0x4a9)][_0x5a5418(0x2c0)];if(!_0x2ce57c||!_0x8e6253)return null;const _0x49c58f=data[_0x5a5418(0x3b3)]['find'](_0x3cf30d=>_0x3cf30d['id']===_0x2ce57c);if(!_0x49c58f)return null;return _0x49c58f[_0x5a5418(0x206)][_0x5a5418(0x28c)](_0x3d1e70=>_0x3d1e70['id']===_0x8e6253)||null;}function renderContextBadge(){const _0x489863=_0x17450c,_0x32a229=getCurrentSubtopic(),_0x3ce682=_0x32a229?_0x32a229[_0x489863(0x422)]:'(ch∆∞a\x20ch·ªçn)',_0x3ff6fd=$(_0x489863(0x41e)),_0x31ba90=$(_0x489863(0x490)),_0x4d4a0e=$('#currentSubtopicNameChat');if(_0x3ff6fd)_0x3ff6fd[_0x489863(0x48c)]=_0x32a229?_0x489863(0x3ed)+_0x32a229[_0x489863(0x422)]:_0x489863(0x343);if(_0x31ba90)_0x31ba90[_0x489863(0x48c)]=_0x3ce682;if(_0x4d4a0e)_0x4d4a0e[_0x489863(0x48c)]=_0x3ce682;}function renderSubtopicTasks(){const _0x17f236=_0x17450c,_0xa2c893=getCurrentSubtopic(),_0x47f9d4=$('#subtopicTasksList'),_0x3cfef5=$('#newSubtopicTaskInput');if(!_0x47f9d4||!_0x3cfef5)return;const _0x25a798=_0x3cfef5['parentElement'];if(!_0xa2c893){_0x47f9d4['innerHTML']=_0x17f236(0x4c4),_0x25a798[_0x17f236(0x279)][_0x17f236(0x30f)]('hidden');return;}_0x25a798['classList'][_0x17f236(0x393)](_0x17f236(0x454)),_0x47f9d4[_0x17f236(0x1ef)]='';const _0x559678=_0xa2c893[_0x17f236(0x229)]?_0xa2c893[_0x17f236(0x229)][_0x17f236(0x3a0)](_0x2b6a10=>!_0x2b6a10[_0x17f236(0x300)]):[];_0x559678[_0x17f236(0x223)]===0x0&&(_0x47f9d4[_0x17f236(0x1ef)]='<li\x20class=\x22tiny\x22\x20style=\x22opacity:\x200.7;\x22>Tuy·ªát\x20v·ªùi!\x20Kh√¥ng\x20c√≤n\x20task\x20n√†o.</li>'),_0x559678[_0x17f236(0x4a0)](_0x5046cd=>{const _0x574f26=_0x17f236,_0x23a120=document[_0x574f26(0x251)]('li');_0x23a120[_0x574f26(0x1ef)]=_0x574f26(0x421)+_0x5046cd['id']+_0x574f26(0x434)+_0x5046cd['id']+'\x22>'+escapeHTML(_0x5046cd[_0x574f26(0x2ee)])+_0x574f26(0x1ea),_0x23a120[_0x574f26(0x48d)]('input')['addEventListener'](_0x574f26(0x315),_0x1728a9=>toggleSubtopicTask(_0x1728a9[_0x574f26(0x4a2)]['id'],_0x23a120)),_0x47f9d4[_0x574f26(0x2e8)](_0x23a120);});}async function addSubtopicTask(){const _0x15e797=_0x17450c,_0x4dc836=getCurrentSubtopic();if(!_0x4dc836){toast(t(_0x15e797(0x4e9)));return;}const _0x3290a5=$(_0x15e797(0x218)),_0x300769=_0x3290a5['value'][_0x15e797(0x404)]();if(_0x300769){if(!_0x4dc836[_0x15e797(0x229)])_0x4dc836[_0x15e797(0x229)]=[];_0x4dc836[_0x15e797(0x229)]['push']({'id':uid(_0x15e797(0x450)),'text':_0x300769,'isCompleted':![],'createdAt':todayISO()}),await saveData(),renderSubtopicTasks(),_0x3290a5[_0x15e797(0x406)]='';}_0x3290a5[_0x15e797(0x310)]();}async function toggleSubtopicTask(_0x51000a,_0x534220){const _0x273f05=_0x17450c,_0x24ca07=getCurrentSubtopic();if(!_0x24ca07||!_0x24ca07[_0x273f05(0x229)])return;const _0x2d11f5=_0x24ca07[_0x273f05(0x229)]['find'](_0x14c2fa=>_0x14c2fa['id']===_0x51000a);_0x2d11f5&&(_0x2d11f5[_0x273f05(0x300)]=!![],_0x24ca07[_0x273f05(0x488)]['tasksCompleted']=(_0x24ca07[_0x273f05(0x488)]['tasksCompleted']||0x0)+0x1,await saveData(),_0x534220[_0x273f05(0x279)][_0x273f05(0x30f)](_0x273f05(0x4f3)),setTimeout(()=>{renderSubtopicTasks(),renderStatsHistory();},0xc8));}const timer={'state':_0x17450c(0x4b6),'prevState':null,'tickHandle':null,'endAt':null,'remaining':0x0,'segmentTotal':0x0,'cyclesTarget':0x4,'cycleIndex':0x0,'mode':'A','persistInterval':0x3c*0x3e8,'lastPersist':0x0,async 'setPreset'(_0x344dfc,{silent:silent=![]}={}){const _0x3abee3=_0x17450c,_0x4fbf9a=data[_0x3abee3(0x4a9)];this['mode']=_0x344dfc,this[_0x3abee3(0x41d)]=_0x344dfc==='A'?_0x4fbf9a[_0x3abee3(0x34c)]:_0x344dfc==='B'?_0x4fbf9a['cyclesB']:0x0,_0x4fbf9a[_0x3abee3(0x323)]=_0x344dfc,await saveData(),this[_0x3abee3(0x24d)]===_0x3abee3(0x4b6)&&this[_0x3abee3(0x24a)]();},'currentDurations'(){const _0x12e39a=_0x17450c,_0x4c3c67=data[_0x12e39a(0x4a9)][_0x12e39a(0x3d9)];if(this[_0x12e39a(0x3c2)]==='A')return{'work':_0x4c3c67[_0x12e39a(0x412)],'short':_0x4c3c67[_0x12e39a(0x494)],'long':_0x4c3c67[_0x12e39a(0x40f)],'winddown':_0x4c3c67[_0x12e39a(0x42f)]??0x0};if(this[_0x12e39a(0x3c2)]==='B')return{'work':_0x4c3c67[_0x12e39a(0x436)],'short':_0x4c3c67[_0x12e39a(0x47c)],'long':_0x4c3c67[_0x12e39a(0x231)],'winddown':_0x4c3c67[_0x12e39a(0x4a5)]??0x0};return{'work':0x0,'short':0x0,'long':0x0,'winddown':0x0};},'currentConfig'(){const _0x481240=_0x17450c,_0x420315=data[_0x481240(0x4a9)];if(this['mode']==='A')return{'cycles':_0x420315[_0x481240(0x34c)],'interval':_0x420315['longBreakIntervalA']};if(this[_0x481240(0x3c2)]==='B')return{'cycles':_0x420315[_0x481240(0x2ff)],'interval':_0x420315[_0x481240(0x474)]};return{'cycles':0x0,'interval':0x0};},'updateUI'(){const _0x2a1146=_0x17450c,_0x59c190=$(_0x2a1146(0x46f)),_0x280c0a=$(_0x2a1146(0x4c6)),_0x2122e9=$('.timer-circle-container');if(!_0x59c190||!_0x280c0a||!_0x2122e9)return;const _0x22bf6f=this[_0x2a1146(0x3c2)]==='C';$(_0x2a1146(0x2b7))[_0x2a1146(0x279)]['toggle'](_0x2a1146(0x454),this[_0x2a1146(0x24d)]!==_0x2a1146(0x4b6)||_0x22bf6f&&this[_0x2a1146(0x24d)]===_0x2a1146(0x380)),$(_0x2a1146(0x464))[_0x2a1146(0x279)][_0x2a1146(0x44c)]('hidden',!(_0x22bf6f&&this['state']===_0x2a1146(0x380))),$(_0x2a1146(0x355))[_0x2a1146(0x279)][_0x2a1146(0x44c)](_0x2a1146(0x454),![_0x2a1146(0x380),'break',_0x2a1146(0x302)][_0x2a1146(0x49f)](this[_0x2a1146(0x24d)])),$(_0x2a1146(0x339))[_0x2a1146(0x279)][_0x2a1146(0x44c)](_0x2a1146(0x454),this['state']!==_0x2a1146(0x3ba));let _0xc605af='var(--muted)';if(this[_0x2a1146(0x24d)]===_0x2a1146(0x380))_0x59c190[_0x2a1146(0x48c)]=_0x22bf6f?_0x2a1146(0x2d2):_0x2a1146(0x232),_0x59c190['className']=_0x2a1146(0x470),_0xc605af='var(--acc)';else{if(this['state']==='break')_0x59c190['textContent']='NGH·ªà\x20NG·∫ÆN',_0x59c190[_0x2a1146(0x2a9)]=_0x2a1146(0x31e),_0xc605af=_0x2a1146(0x3f4);else{if(this[_0x2a1146(0x24d)]==='long_break')_0x59c190[_0x2a1146(0x48c)]='NGH·ªà\x20D√ÄI',_0x59c190['className']='badge\x20state\x20long',_0xc605af='var(--danger)';else{if(this['state']===_0x2a1146(0x333)){_0x59c190['textContent']=_0x2a1146(0x238),_0x59c190[_0x2a1146(0x2a9)]=_0x2a1146(0x470),_0xc605af=_0x2a1146(0x20a);try{$(_0x2a1146(0x487))[_0x2a1146(0x279)][_0x2a1146(0x393)](_0x2a1146(0x454)),$('#btnBreakEarly')[_0x2a1146(0x279)][_0x2a1146(0x393)](_0x2a1146(0x454));}catch(_0x48b914){}}else this['state']===_0x2a1146(0x3ba)?(_0x59c190[_0x2a1146(0x48c)]=_0x2a1146(0x1f2),_0x59c190['className']='badge'):(_0x59c190[_0x2a1146(0x48c)]='S·∫¥N\x20S√ÄNG',_0x59c190[_0x2a1146(0x2a9)]=_0x2a1146(0x467));}}}[_0x2a1146(0x380),_0x2a1146(0x489),_0x2a1146(0x302),'wind_down'][_0x2a1146(0x49f)](this[_0x2a1146(0x24d)])?_0x2122e9[_0x2a1146(0x279)]['add'](_0x2a1146(0x4d7)):_0x2122e9[_0x2a1146(0x279)][_0x2a1146(0x393)]('breathing');_0x280c0a[_0x2a1146(0x3a2)][_0x2a1146(0x4bb)]=_0xc605af,_0x2122e9[_0x2a1146(0x279)][_0x2a1146(0x393)](_0x2a1146(0x30a));const _0x3c6dd3=$(_0x2a1146(0x2f3));if(_0x3c6dd3)_0x3c6dd3[_0x2a1146(0x48c)]=formatMMSS(this['remaining']);const _0x2a6a80=_0x280c0a['r']['baseVal'][_0x2a1146(0x406)],_0xb10bf9=0x2*Math['PI']*_0x2a6a80,_0x5e394a=this['segmentTotal']>0x0?_0xb10bf9-this[_0x2a1146(0x28b)]/this[_0x2a1146(0x224)]*_0xb10bf9:_0xb10bf9;_0x280c0a[_0x2a1146(0x3a2)][_0x2a1146(0x37e)]=_0xb10bf9,_0x280c0a[_0x2a1146(0x3a2)][_0x2a1146(0x3eb)]=isNaN(_0x5e394a)?_0xb10bf9:_0x5e394a;const _0x1b819b=$(_0x2a1146(0x39b));if(_0x1b819b){const _0xf5949d=this[_0x2a1146(0x42c)]();_0x1b819b[_0x2a1146(0x48c)]=t('timer.cycleInfo',{'current':this[_0x2a1146(0x358)],'target':_0xf5949d[_0x2a1146(0x424)]}),_0x1b819b['classList'][_0x2a1146(0x44c)](_0x2a1146(0x454),_0x22bf6f);}const _0x5511c3=$('#breakSuggestionDisplay');_0x5511c3&&_0x5511c3[_0x2a1146(0x279)]['toggle'](_0x2a1146(0x454),_0x22bf6f&&this[_0x2a1146(0x24d)]===_0x2a1146(0x380));const _0x148a7a=$(_0x2a1146(0x401));if(_0x148a7a)_0x148a7a[_0x2a1146(0x48c)]=formatMMSS(this[_0x2a1146(0x28b)]);if(this['state']!=='wind_down')try{$(_0x2a1146(0x487))[_0x2a1146(0x279)][_0x2a1146(0x30f)]('hidden'),$(_0x2a1146(0x245))[_0x2a1146(0x279)][_0x2a1146(0x30f)](_0x2a1146(0x454));}catch(_0x4282f9){}},'persistTimerState'(_0x5387ee=![]){const _0x57a24c=_0x17450c;try{const _0x4cff45=getCurrentSubtopic();if(!_0x4cff45)return;const _0x2460be={'state':this[_0x57a24c(0x24d)],'prevState':this[_0x57a24c(0x440)],'remaining':this[_0x57a24c(0x28b)],'segmentTotal':this['segmentTotal'],'cycleIndex':this[_0x57a24c(0x358)]};_0x4cff45['timerState']=_0x2460be;try{localStorage[_0x57a24c(0x25d)](_0x57a24c(0x46d)+_0x4cff45['id'],JSON['stringify'](_0x2460be));}catch(_0xde2e67){}this[_0x57a24c(0x259)]=Date[_0x57a24c(0x20e)]();}catch(_0x91f17b){}},'_startTick'(){const _0x54140b=_0x17450c;if(this[_0x54140b(0x383)])clearInterval(this[_0x54140b(0x383)]);if(this[_0x54140b(0x3c2)]==='C'&&this[_0x54140b(0x24d)]===_0x54140b(0x380)){this['tickHandle']=setInterval(()=>{const _0x501c58=_0x54140b;this[_0x501c58(0x28b)]+=0x1,this['updateUI'](),this[_0x501c58(0x37c)]();},0x3e8);return;}this[_0x54140b(0x383)]=setInterval(()=>{const _0x3418ef=_0x54140b;this['remaining']>0x0&&(this[_0x3418ef(0x28b)]-=0x1,this[_0x3418ef(0x345)](),this[_0x3418ef(0x37c)]()),this[_0x3418ef(0x28b)]<=0x0&&(clearInterval(this[_0x3418ef(0x383)]),this[_0x3418ef(0x383)]=null,this[_0x3418ef(0x435)]());},0x3e8);},'_onFinishSegment'(){const _0x106802=_0x17450c;if(this[_0x106802(0x24d)]===_0x106802(0x380)){const _0x16383f=getCurrentSubtopic();if(_0x16383f){const _0x194695=this['currentDurations']()[_0x106802(0x380)];_0x16383f[_0x106802(0x488)]['totalMinutes']=(_0x16383f[_0x106802(0x488)]['totalMinutes']||0x0)+_0x194695,_0x16383f[_0x106802(0x488)][_0x106802(0x36a)]=(_0x16383f['stats'][_0x106802(0x36a)]||0x0)+0x1;const _0x38cd9a={'id':uid(_0x106802(0x212)),'dateISO':todayISO(),'durationMinutes':_0x194695,'mode':this[_0x106802(0x3c2)],'note':''};if(!_0x16383f[_0x106802(0x20d)])_0x16383f[_0x106802(0x20d)]=[];_0x16383f[_0x106802(0x20d)][_0x106802(0x253)](_0x38cd9a);if(data?.[_0x106802(0x4a9)]?.[_0x106802(0x2ab)]!==![])try{openNoteModal(_0x38cd9a['id']);}catch(_0x6ef302){}saveData(),renderStatsHistory(),checkAndShowMilestones();}this['cycleIndex']++;}if(typeof data!==_0x106802(0x2b5)&&data&&data[_0x106802(0x4a9)]&&data[_0x106802(0x4a9)][_0x106802(0x2c6)]===![]&&this[_0x106802(0x24d)]===_0x106802(0x380))playSound(_0x106802(0x2fc));else(this[_0x106802(0x24d)]===_0x106802(0x333)||this['state']===_0x106802(0x489)||this[_0x106802(0x24d)]===_0x106802(0x302))&&playSound('break_end');const _0x1b1440=$('.timer-circle-container');if(_0x1b1440)_0x1b1440['classList'][_0x106802(0x30f)]('finished');if(data[_0x106802(0x4a9)][_0x106802(0x485)]){if(this[_0x106802(0x24d)]===_0x106802(0x380))data[_0x106802(0x4a9)][_0x106802(0x2c6)]===![]?this['beginBreak']():this[_0x106802(0x3d0)]();else this[_0x106802(0x24d)]==='wind_down'?this['beginBreak']():this[_0x106802(0x4a7)]();}else this[_0x106802(0x383)]&&(clearInterval(this['tickHandle']),this['tickHandle']=null),this[_0x106802(0x24d)]=_0x106802(0x4b6),this[_0x106802(0x440)]=null,this[_0x106802(0x345)](),toast(_0x106802(0x252));},'beginWindDown'(){const _0x259b89=_0x17450c;if(data?.[_0x259b89(0x4a9)]?.[_0x259b89(0x2c6)]===![]){this[_0x259b89(0x384)]();return;}this[_0x259b89(0x440)]=this[_0x259b89(0x24d)],this[_0x259b89(0x24d)]=_0x259b89(0x333);const _0x5151a4=(this[_0x259b89(0x201)]()[_0x259b89(0x43d)]||0x0)*0x3c;if(_0x5151a4<=0x0){this[_0x259b89(0x384)]();return;}this[_0x259b89(0x224)]=_0x5151a4,this['remaining']=_0x5151a4;try{playSound(_0x259b89(0x413));}catch(_0x2f9fcc){}try{toast('ƒê·∫øn\x20gi·ªù\x20h·∫°\x20nhi·ªát.\x20H√£y\x20k·∫øt\x20th√∫c\x20c√¥ng\x20vi·ªác\x20v√†\x20chu·∫©n\x20b·ªã\x20ngh·ªâ\x20ng∆°i.');}catch(_0x41b48d){}this['_startTick'](),this[_0x259b89(0x345)]();},'beginWork'(){const _0x188c1f=_0x17450c;this['prevState']=this[_0x188c1f(0x24d)],this[_0x188c1f(0x24d)]='work';if(this[_0x188c1f(0x3c2)]==='C'){this['segmentTotal']=0x0;if(this[_0x188c1f(0x440)]!==_0x188c1f(0x3ba))this[_0x188c1f(0x28b)]=0x0;}else{const _0x2c0de7=this[_0x188c1f(0x201)]()[_0x188c1f(0x380)]*0x3c;this[_0x188c1f(0x224)]=_0x2c0de7;if(this['prevState']!=='paused')this['remaining']=_0x2c0de7;}const _0x5eea21=$(_0x188c1f(0x27f));_0x5eea21&&(_0x5eea21[_0x188c1f(0x48c)]=''),this[_0x188c1f(0x368)](),this['updateUI']();},'finishFlowSession'(){const _0x54dc93=_0x17450c;if(this[_0x54dc93(0x3c2)]!=='C'||this['state']!=='work')return;this[_0x54dc93(0x383)]&&(clearInterval(this['tickHandle']),this[_0x54dc93(0x383)]=null);const _0x13c8d3=Math[_0x54dc93(0x3e8)](0x1,parseInt(data[_0x54dc93(0x4a9)]['flowtimeBreakRatio']??0x5,0xa)),_0x228640=Math[_0x54dc93(0x3e8)](0x0,this[_0x54dc93(0x28b)]|0x0),_0x2a30c0=Math[_0x54dc93(0x3e8)](0x3c,Math[_0x54dc93(0x294)](_0x228640/_0x13c8d3));try{const _0x151424=getCurrentSubtopic();if(_0x151424){const _0x23a1d7=Math[_0x54dc93(0x3e8)](0x1,Math[_0x54dc93(0x256)](_0x228640/0x3c));_0x151424['stats'][_0x54dc93(0x369)]=(_0x151424[_0x54dc93(0x488)][_0x54dc93(0x369)]||0x0)+_0x23a1d7,_0x151424[_0x54dc93(0x488)][_0x54dc93(0x36a)]=(_0x151424[_0x54dc93(0x488)][_0x54dc93(0x36a)]||0x0)+0x1;const _0x4e18ec={'id':uid('sess'),'dateISO':todayISO(),'durationMinutes':_0x23a1d7,'mode':this[_0x54dc93(0x3c2)],'note':''};if(!_0x151424[_0x54dc93(0x20d)])_0x151424[_0x54dc93(0x20d)]=[];_0x151424[_0x54dc93(0x20d)][_0x54dc93(0x253)](_0x4e18ec),saveData(),renderStatsHistory(),data?.[_0x54dc93(0x4a9)]?.[_0x54dc93(0x2ab)]!==![]&&openNoteModal(_0x4e18ec['id']);}}catch(_0x29ba57){}this[_0x54dc93(0x24d)]='break',this['segmentTotal']=_0x2a30c0,this[_0x54dc93(0x28b)]=_0x2a30c0,this[_0x54dc93(0x368)](),this['updateUI'](),this[_0x54dc93(0x37c)](!![]);try{toast('Ngh·ªâ\x20'+Math['round'](_0x2a30c0/0x3c)+'\x20ph√∫t\x20theo\x20Flowtime\x20('+_0x13c8d3+').');}catch(_0x41fa84){}},'beginBreak'(){const _0x40e307=_0x17450c;this['prevState']=this[_0x40e307(0x24d)];const _0x4721dc=this[_0x40e307(0x42c)](),_0xaadf37=this[_0x40e307(0x201)]();if(this[_0x40e307(0x358)]>0x0&&this[_0x40e307(0x358)]%_0x4721dc[_0x40e307(0x42d)]===0x0){this[_0x40e307(0x24d)]=_0x40e307(0x302);const _0x29baf9=_0xaadf37[_0x40e307(0x240)]*0x3c;this[_0x40e307(0x224)]=_0x29baf9;if(this['prevState']!==_0x40e307(0x3ba))this[_0x40e307(0x28b)]=_0x29baf9;toast('Tuy·ªát\x20v·ªùi!\x20ƒê√£\x20ƒë·∫øn\x20l√∫c\x20ngh·ªâ\x20d√†i.');}else{this[_0x40e307(0x24d)]='break';const _0x470252=_0xaadf37[_0x40e307(0x40b)]*0x3c;this[_0x40e307(0x224)]=_0x470252;if(this['prevState']!=='paused')this[_0x40e307(0x28b)]=_0x470252;}const _0x2e8dc6=$(_0x40e307(0x27f));if(_0x2e8dc6){const _0x312f05=Math[_0x40e307(0x294)](Math[_0x40e307(0x2f5)]()*breakSuggestions[_0x40e307(0x223)]);_0x2e8dc6[_0x40e307(0x48c)]=_0x40e307(0x389)+breakSuggestions[_0x312f05];}this['_startTick'](),this[_0x40e307(0x345)]();},async 'start'(){const _0x5e09f0=_0x17450c;if(!getCurrentSubtopic()){toast('H√£y\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc\x20khi\x20b·∫Øt\x20ƒë·∫ßu');return;}ensureAudio();if(this[_0x5e09f0(0x3c2)]==='C'&&this[_0x5e09f0(0x24d)]===_0x5e09f0(0x4b6))this[_0x5e09f0(0x24d)]=_0x5e09f0(0x380),this['remaining']=0x0,this[_0x5e09f0(0x224)]=0x0,this[_0x5e09f0(0x358)]=0x0,this[_0x5e09f0(0x368)](),this['updateUI']();else{if(this[_0x5e09f0(0x24d)]===_0x5e09f0(0x4b6))this[_0x5e09f0(0x358)]=this[_0x5e09f0(0x358)]||0x0,this[_0x5e09f0(0x4a7)]();else this[_0x5e09f0(0x24d)]===_0x5e09f0(0x3ba)&&this[_0x5e09f0(0x3d5)]();}await this[_0x5e09f0(0x37c)](!![]);},async 'pause'(){const _0x3bf782=_0x17450c;this[_0x3bf782(0x383)]&&(clearInterval(this[_0x3bf782(0x383)]),this[_0x3bf782(0x383)]=null),this['prevState']=this[_0x3bf782(0x24d)],this['state']=_0x3bf782(0x3ba),this[_0x3bf782(0x345)](),await this['persistTimerState'](!![]);},async 'resume'(){const _0x550586=_0x17450c;if(this['state']!=='paused')return;this[_0x550586(0x24d)]=this['prevState']||'work',this['_startTick'](),this[_0x550586(0x345)](),await this['persistTimerState'](!![]);},async 'skip'(){const _0x3bebcf=_0x17450c;if(this[_0x3bebcf(0x3c2)]==='C'&&this[_0x3bebcf(0x24d)]===_0x3bebcf(0x380)){this[_0x3bebcf(0x264)](),await this['persistTimerState'](!![]);return;}this[_0x3bebcf(0x24d)]===_0x3bebcf(0x380)?(this[_0x3bebcf(0x383)]&&(clearInterval(this[_0x3bebcf(0x383)]),this['tickHandle']=null),this[_0x3bebcf(0x28b)]=0x0,this[_0x3bebcf(0x435)]()):(this[_0x3bebcf(0x28b)]=0x0,this[_0x3bebcf(0x383)]&&(clearInterval(this[_0x3bebcf(0x383)]),this[_0x3bebcf(0x383)]=null),this['_onFinishSegment']()),await this[_0x3bebcf(0x37c)](!![]);},async 'reset'(){const _0x532d2b=_0x17450c;this[_0x532d2b(0x383)]&&(clearInterval(this['tickHandle']),this['tickHandle']=null);this[_0x532d2b(0x24d)]=_0x532d2b(0x4b6),this[_0x532d2b(0x440)]=null,this[_0x532d2b(0x28b)]=0x0,this[_0x532d2b(0x224)]=0x0,this[_0x532d2b(0x358)]=0x0;const _0x53c1ae=$(_0x532d2b(0x27f));_0x53c1ae&&(_0x53c1ae['textContent']=''),this['updateUI'](),await this[_0x532d2b(0x37c)](!![]);}};async function deleteSummary(_0x2b5512){const _0x48d134=_0x17450c;showConfirmModal('X√°c\x20nh·∫≠n\x20x√≥a',_0x48d134(0x255),async _0x5b28cd=>{const _0x1009c6=_0x48d134;if(!_0x5b28cd)return;const _0x4dbd59=getCurrentSubtopic();if(!_0x4dbd59||!_0x4dbd59[_0x1009c6(0x3a4)])return;const _0x5c1b12=[..._0x4dbd59[_0x1009c6(0x3a4)]];_0x4dbd59[_0x1009c6(0x3a4)]=_0x4dbd59[_0x1009c6(0x3a4)][_0x1009c6(0x3a0)](_0x1f1ad4=>_0x1f1ad4['id']!==_0x2b5512);try{await storageManager[_0x1009c6(0x476)]('subtopics',_0x4dbd59),renderSummaries(),toast(_0x1009c6(0x431));}catch(_0x5db714){console['error'](_0x1009c6(0x4c3),_0x5db714),_0x4dbd59['summaries']=_0x5c1b12,toast(_0x1009c6(0x3ad));}});}function exportSummary(_0x20222a){const _0x1d3d0f=_0x17450c,_0x1678d1=new Blob([_0x20222a[_0x1d3d0f(0x2e0)]],{'type':'text/plain'}),_0x168dee=document[_0x1d3d0f(0x251)]('a'),_0x30f1c6=new Date(_0x20222a[_0x1d3d0f(0x3dd)]),_0x29f246=_0x1937e1=>(''+_0x1937e1)[_0x1d3d0f(0x397)](0x2,'0');_0x168dee['href']=URL[_0x1d3d0f(0x362)](_0x1678d1),_0x168dee[_0x1d3d0f(0x31a)]=_0x1d3d0f(0x3d6)+_0x30f1c6[_0x1d3d0f(0x38d)]()+_0x29f246(_0x30f1c6[_0x1d3d0f(0x2ce)]()+0x1)+_0x29f246(_0x30f1c6[_0x1d3d0f(0x3fa)]())+_0x1d3d0f(0x37a),_0x168dee[_0x1d3d0f(0x4a4)](),URL[_0x1d3d0f(0x459)](_0x168dee[_0x1d3d0f(0x364)]);}function renderStatsHistory(){const _0x418a96=_0x17450c,_0x181177=getCurrentSubtopic(),_0x4dac63=$(_0x418a96(0x26e)),_0x63657e=$('#statSessions'),_0x46a61e=$(_0x418a96(0x3f1)),_0x5ec40e=$(_0x418a96(0x3f5));if(!_0x4dac63||!_0x63657e||!_0x46a61e||!_0x5ec40e)return;if(!_0x181177){_0x4dac63['textContent']=_0x418a96(0x28a),_0x63657e[_0x418a96(0x48c)]='0',_0x46a61e['textContent']='0',_0x5ec40e[_0x418a96(0x1ef)]=_0x418a96(0x473);return;}const _0x5df635=_0x181177[_0x418a96(0x488)]&&_0x181177['stats'][_0x418a96(0x369)]?_0x181177[_0x418a96(0x488)][_0x418a96(0x369)]:0x0,_0x4e3691=_0x181177['stats']&&_0x181177[_0x418a96(0x488)][_0x418a96(0x36a)]?_0x181177['stats']['sessionsCompleted']:0x0,_0x5235a2=_0x181177[_0x418a96(0x229)]?_0x181177[_0x418a96(0x229)][_0x418a96(0x3a0)](_0xbf4b57=>_0xbf4b57[_0x418a96(0x300)])['length']:0x0;_0x4dac63[_0x418a96(0x48c)]=formatDaysHoursMinutes(_0x5df635),_0x63657e['textContent']=String(_0x4e3691),_0x46a61e['textContent']=String(_0x5235a2),_0x5ec40e[_0x418a96(0x1ef)]='';const _0x26b14e=Array[_0x418a96(0x47e)](_0x181177[_0x418a96(0x20d)])?_0x181177[_0x418a96(0x20d)]:[];if(_0x26b14e[_0x418a96(0x223)]===0x0){_0x5ec40e[_0x418a96(0x1ef)]=_0x418a96(0x318);return;}_0x26b14e['forEach'](_0x3378e9=>{const _0x5d97af=_0x418a96,_0xa9d24d=document[_0x5d97af(0x251)](_0x5d97af(0x2d4));_0xa9d24d['className']=_0x5d97af(0x3e4);const _0x1cc0b7=document[_0x5d97af(0x251)](_0x5d97af(0x2d4)),_0x312cac=_0x3378e9['dateISO']?new Date(_0x3378e9['dateISO']):new Date(),_0x2a4c87=_0x3378e9[_0x5d97af(0x4f0)]!=null?_0x3378e9[_0x5d97af(0x4f0)]:_0x3378e9[_0x5d97af(0x4e7)]||0x0,_0x2cb9ac=_0x5d97af(0x337)+_0x312cac[_0x5d97af(0x2c9)]()+_0x5d97af(0x2ea)+_0x2a4c87+'\x27\x20¬∑\x20Mode\x20'+(_0x3378e9['mode']||'')+_0x5d97af(0x221);let _0x418113='';if(_0x3378e9[_0x5d97af(0x481)])_0x418113=_0x5d97af(0x278)+escapeHTML(_0x3378e9['note'])+_0x5d97af(0x221);else data?.['settings']?.[_0x5d97af(0x2ab)]!==![]&&(_0x418113='<div><span\x20class=\x22tiny\x22>(ch∆∞a\x20c√≥\x20ghi\x20ch√∫)</span></div>');_0x1cc0b7[_0x5d97af(0x1ef)]=_0x2cb9ac+_0x418113,_0xa9d24d[_0x5d97af(0x2e8)](_0x1cc0b7),_0x5ec40e[_0x5d97af(0x2e8)](_0xa9d24d);});}function renderGeneralNotes(){const _0x6289a7=_0x17450c,_0x32c90b=$(_0x6289a7(0x446));if(!_0x32c90b)return;const _0x315531=getCurrentSubtopic();if(!_0x315531){_0x32c90b[_0x6289a7(0x1ef)]=_0x6289a7(0x2f7);return;}_0x315531['generalNotes']=_0x315531[_0x6289a7(0x396)]||[];if(_0x315531[_0x6289a7(0x396)][_0x6289a7(0x223)]===0x0){_0x32c90b[_0x6289a7(0x1ef)]='<div\x20class=\x22tiny\x22>Ch∆∞a\x20c√≥\x20ghi\x20ch√∫.</div>';return;}_0x32c90b[_0x6289a7(0x1ef)]='',_0x315531[_0x6289a7(0x396)][_0x6289a7(0x4a0)](_0x331993=>{const _0x2440da=_0x6289a7,_0x4acd16=document['createElement']('div');_0x4acd16['className']=_0x2440da(0x262);const _0x4d39d3=document['createElement'](_0x2440da(0x2d4));_0x4d39d3[_0x2440da(0x2a9)]=_0x2440da(0x3b6),_0x4d39d3['textContent']=typeof _0x331993==='string'?_0x331993:_0x331993[_0x2440da(0x2ee)]||'';const _0x292266=document[_0x2440da(0x251)]('div');_0x292266['className']=_0x2440da(0x45e),_0x292266[_0x2440da(0x48c)]=_0x331993[_0x2440da(0x3dd)]?new Date(_0x331993[_0x2440da(0x3dd)])[_0x2440da(0x2c9)]():'';const _0x1d4d7b=document[_0x2440da(0x251)](_0x2440da(0x2d4)),_0x5ce4ae=document[_0x2440da(0x251)]('button');_0x5ce4ae[_0x2440da(0x2a9)]=_0x2440da(0x2c8),_0x5ce4ae[_0x2440da(0x48c)]='X√≥a',_0x5ce4ae[_0x2440da(0x2c3)]=async _0x4b4e25=>{const _0x246ed2=_0x2440da;_0x4b4e25[_0x246ed2(0x2a0)]();const _0x5aa1b8=getCurrentSubtopic();if(!_0x5aa1b8)return;_0x5aa1b8[_0x246ed2(0x396)]=(_0x5aa1b8['generalNotes']||[])[_0x246ed2(0x3a0)](_0x1ee2b7=>(_0x1ee2b7['id']||_0x1ee2b7)!==(_0x331993['id']||_0x331993)),await saveData(),renderGeneralNotes();},_0x1d4d7b[_0x2440da(0x2e8)](_0x5ce4ae);const _0x28f6b2=document[_0x2440da(0x251)]('div');_0x28f6b2['className']=_0x2440da(0x320),_0x28f6b2[_0x2440da(0x3a5)](_0x4d39d3,_0x292266),_0x4acd16[_0x2440da(0x3a5)](_0x28f6b2,_0x1d4d7b),_0x32c90b[_0x2440da(0x2e8)](_0x4acd16);});}function renderMethods(){const _0x512ea3=_0x17450c,_0x40796c=document[_0x512ea3(0x48d)]('#view-methods\x20.methods-container');if(!_0x40796c)return;_0x40796c[_0x512ea3(0x1ef)]='';const _0xc9b664=getCurrentSubtopic();if(!_0xc9b664){_0x40796c[_0x512ea3(0x1ef)]=_0x512ea3(0x4c5);return;}const _0x29db03=Array[_0x512ea3(0x47e)](_0xc9b664[_0x512ea3(0x4c1)])?_0xc9b664[_0x512ea3(0x4c1)]:[];if(_0x29db03[_0x512ea3(0x223)]===0x0){_0x40796c[_0x512ea3(0x1ef)]='<p\x20class=\x22tiny\x22\x20style=\x22opacity:0.7;\x22>Ch∆∞a\x20c√≥\x20tri\x20th·ª©c\x20n√†o\x20trong\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20n√†y.</p>';return;}_0x29db03[_0x512ea3(0x4a0)](_0x2dbc08=>{const _0x1f2974=_0x512ea3,_0x482f6a=document['createElement'](_0x1f2974(0x2d4));_0x482f6a['className']='method-item',_0x482f6a[_0x1f2974(0x32d)][_0x1f2974(0x1f7)]=_0x2dbc08['id'];const _0x5ea727=document[_0x1f2974(0x251)](_0x1f2974(0x2d4)),_0x378301=document[_0x1f2974(0x251)]('span');_0x378301[_0x1f2974(0x2a9)]=_0x1f2974(0x40e),_0x378301[_0x1f2974(0x48c)]=_0x2dbc08[_0x1f2974(0x241)]||'Ch∆∞a\x20c√≥\x20ti√™u\x20ƒë·ªÅ',_0x378301['addEventListener'](_0x1f2974(0x4a4),_0x1e34c9=>{const _0x3cbb64=_0x1f2974;_0x1e34c9['preventDefault'](),_0x1e34c9[_0x3cbb64(0x2a0)]();const _0x51c607=_0x482f6a[_0x3cbb64(0x48d)](_0x3cbb64(0x41a));if(!_0x51c607)return;const _0x24e74d=_0x51c607[_0x3cbb64(0x454)];_0x40796c[_0x3cbb64(0x283)](_0x3cbb64(0x390))['forEach'](_0x2a6342=>{const _0x131fdb=_0x3cbb64;_0x2a6342[_0x131fdb(0x454)]=!![];}),_0x51c607[_0x3cbb64(0x454)]=!_0x24e74d;});const _0x23cde4=document[_0x1f2974(0x251)]('div');_0x23cde4[_0x1f2974(0x2a9)]='topic-actions';const _0x293860=document[_0x1f2974(0x251)](_0x1f2974(0x2eb));_0x293860['className']='btn\x20small\x20ghost\x20method-edit',_0x293860[_0x1f2974(0x48c)]=_0x1f2974(0x1f6),_0x293860['dataset']['id']=_0x2dbc08['id'];const _0x3aa24d=document[_0x1f2974(0x251)](_0x1f2974(0x2eb));_0x3aa24d['className']=_0x1f2974(0x3aa),_0x3aa24d[_0x1f2974(0x48c)]=_0x1f2974(0x480),_0x3aa24d['dataset']['id']=_0x2dbc08['id'],_0x23cde4[_0x1f2974(0x3a5)](_0x293860,_0x3aa24d),_0x5ea727['append'](_0x378301,_0x23cde4);const _0x31d0be=document[_0x1f2974(0x251)](_0x1f2974(0x2d4));_0x31d0be[_0x1f2974(0x2a9)]=_0x1f2974(0x475),_0x31d0be[_0x1f2974(0x1ef)]=_0x2dbc08[_0x1f2974(0x2e0)]||'',_0x31d0be[_0x1f2974(0x454)]=!![],_0x482f6a[_0x1f2974(0x3a5)](_0x5ea727,_0x31d0be),_0x40796c[_0x1f2974(0x2e8)](_0x482f6a),_0x482f6a[_0x1f2974(0x45b)](_0x1f2974(0x4a4),_0x5666f2=>{const _0x524800=_0x1f2974,_0x80b5a9=_0x5666f2[_0x524800(0x4a2)];if(!_0x80b5a9)return;if(_0x80b5a9[_0x524800(0x24c)](_0x524800(0x2eb))||_0x80b5a9[_0x524800(0x24c)]('a')||_0x80b5a9[_0x524800(0x24c)](_0x524800(0x2aa))||_0x80b5a9[_0x524800(0x24c)](_0x524800(0x38e)))return;const _0x2daa99=_0x31d0be[_0x524800(0x454)];_0x40796c[_0x524800(0x283)]('.method-item\x20.method-content')[_0x524800(0x4a0)](_0x15e159=>{const _0x5dec86=_0x524800;_0x15e159[_0x5dec86(0x454)]=!![];}),_0x31d0be[_0x524800(0x454)]=!_0x2daa99;});});const _0x1ce94c=_0x40796c['querySelectorAll'](_0x512ea3(0x3db));_0x1ce94c[_0x512ea3(0x4a0)](_0x226a4e=>{const _0x52fb4c=_0x512ea3;_0x226a4e['addEventListener'](_0x52fb4c(0x44c),()=>{const _0x245ec4=_0x52fb4c;_0x226a4e['open']&&_0x1ce94c[_0x245ec4(0x4a0)](_0x5a50e4=>{const _0x2b9cb8=_0x245ec4;if(_0x5a50e4!==_0x226a4e)_0x5a50e4[_0x2b9cb8(0x326)]=![];});});}),window[_0x512ea3(0x280)]&&new Sortable(_0x40796c,{'animation':0x96,'draggable':'.method-item','onEnd':async function(_0x1f585c){const _0x2e5d95=_0x512ea3;if(_0x1f585c['oldIndex']===_0x1f585c[_0x2e5d95(0x23d)])return;const _0x2a84e0=getCurrentSubtopic();if(!_0x2a84e0||!Array[_0x2e5d95(0x47e)](_0x2a84e0[_0x2e5d95(0x4c1)]))return;const _0x44a382=_0x2a84e0[_0x2e5d95(0x4c1)]['splice'](_0x1f585c[_0x2e5d95(0x352)],0x1)[0x0];_0x2a84e0[_0x2e5d95(0x4c1)][_0x2e5d95(0x453)](_0x1f585c[_0x2e5d95(0x23d)],0x0,_0x44a382),await saveData();}});}function addGeneralNote(){const _0x339f7c=_0x17450c;showInputModal(_0x339f7c(0x3c9),async _0x5c104c=>{const _0x3df269=_0x339f7c;if(!_0x5c104c)return;const _0xe3077b=getCurrentSubtopic();if(!_0xe3077b){toast('Ch·ªçn\x20m·ªôt\x20ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.');return;}_0xe3077b[_0x3df269(0x396)]=_0xe3077b[_0x3df269(0x396)]||[],_0xe3077b[_0x3df269(0x396)][_0x3df269(0x253)]({'id':uid('gn'),'text':_0x5c104c,'createdAt':todayISO()}),await saveData(),renderGeneralNotes();},'');}async function summarizeNotes(){const _0x240cde=_0x17450c,_0x3c35eb=getCurrentSubtopic();if(!_0x3c35eb){toast(_0x240cde(0x1fa));return;}const _0x5a87cf=(_0x3c35eb[_0x240cde(0x396)]||[])[_0x240cde(0x4f2)](_0x493e17=>typeof _0x493e17===_0x240cde(0x260)?_0x493e17:_0x493e17[_0x240cde(0x2ee)]||'')[_0x240cde(0x3a0)](Boolean);if(_0x5a87cf[_0x240cde(0x223)]===0x0){toast(_0x240cde(0x32b));return;}const _0x40dffb=$(_0x240cde(0x4af));_0x40dffb&&(_0x40dffb[_0x240cde(0x2e9)]=!![],_0x40dffb[_0x240cde(0x1ef)]=_0x240cde(0x4d0));try{const _0x31bae9=_0x240cde(0x293)+_0x5a87cf[_0x240cde(0x44d)](_0x240cde(0x21a)),_0x103882=await callGeminiAPI(_0x31bae9);if(!_0x3c35eb['summaries'])_0x3c35eb[_0x240cde(0x3a4)]=[];_0x3c35eb['summaries'][_0x240cde(0x253)]({'id':uid('sum'),'content':_0x103882||_0x240cde(0x32e),'createdAt':todayISO()}),await saveData(),renderSummaries();}catch(_0x52405e){console[_0x240cde(0x30e)](_0x52405e),toast(_0x240cde(0x3ce));}finally{_0x40dffb&&(_0x40dffb[_0x240cde(0x2e9)]=![],_0x40dffb[_0x240cde(0x48c)]=_0x240cde(0x3bf));}}function renderSummaries(){const _0x579274=_0x17450c,_0xaa662f=$(_0x579274(0x409));if(!_0xaa662f)return;const _0x4cf256=getCurrentSubtopic();if(!_0x4cf256){_0xaa662f[_0x579274(0x1ef)]=_0x579274(0x347);return;}_0xaa662f['innerHTML']='';if(!_0x4cf256[_0x579274(0x3a4)]||_0x4cf256[_0x579274(0x3a4)][_0x579274(0x223)]===0x0){_0xaa662f[_0x579274(0x1ef)]=_0x579274(0x2e2);return;}_0x4cf256[_0x579274(0x3a4)][_0x579274(0x4a0)](_0x2dd52e=>{const _0x2d1c2f=_0x579274,_0x7fc4bb=document[_0x2d1c2f(0x251)](_0x2d1c2f(0x2d4));_0x7fc4bb[_0x2d1c2f(0x2a9)]=_0x2d1c2f(0x262);const _0x15960c=document[_0x2d1c2f(0x251)](_0x2d1c2f(0x2d4));_0x15960c[_0x2d1c2f(0x2a9)]=_0x2d1c2f(0x320);const _0x34d133=document[_0x2d1c2f(0x251)](_0x2d1c2f(0x2d4));_0x34d133[_0x2d1c2f(0x2a9)]='note-content',_0x34d133[_0x2d1c2f(0x48c)]=_0x2dd52e[_0x2d1c2f(0x2e0)];const _0x54973a=document['createElement'](_0x2d1c2f(0x2d4));_0x54973a[_0x2d1c2f(0x2a9)]=_0x2d1c2f(0x45e),_0x54973a['textContent']=new Date(_0x2dd52e['createdAt'])[_0x2d1c2f(0x2c9)](),_0x15960c[_0x2d1c2f(0x3a5)](_0x34d133,_0x54973a);const _0x4a16a1=document[_0x2d1c2f(0x251)](_0x2d1c2f(0x2d4)),_0x3b0a9b=document[_0x2d1c2f(0x251)](_0x2d1c2f(0x2eb));_0x3b0a9b[_0x2d1c2f(0x2a9)]='btn\x20small',_0x3b0a9b['textContent']=_0x2d1c2f(0x4da),_0x3b0a9b['onclick']=_0x3ddb19=>{_0x3ddb19['stopPropagation'](),exportSummary(_0x2dd52e);};const _0x1b6ae6=document[_0x2d1c2f(0x251)]('button');_0x1b6ae6[_0x2d1c2f(0x2a9)]='btn\x20small\x20danger',_0x1b6ae6['textContent']=_0x2d1c2f(0x480),_0x1b6ae6[_0x2d1c2f(0x2c3)]=_0x32968c=>{const _0x1d3d97=_0x2d1c2f;_0x32968c[_0x1d3d97(0x2a0)](),deleteSummary(_0x2dd52e['id']);},_0x4a16a1[_0x2d1c2f(0x3a5)](_0x3b0a9b,_0x1b6ae6),_0x7fc4bb['append'](_0x15960c,_0x4a16a1),_0x7fc4bb[_0x2d1c2f(0x45b)](_0x2d1c2f(0x4a4),()=>_0x34d133[_0x2d1c2f(0x279)][_0x2d1c2f(0x44c)](_0x2d1c2f(0x477))),_0xaa662f['appendChild'](_0x7fc4bb);});}function loadEditingPresetFields(){const _0x239cba=_0x17450c,_0x1f4237=data[_0x239cba(0x4a9)],_0x37c52a=_0x1f4237[_0x239cba(0x3d9)],_0x21cb88=$('#settings-pomodoro'),_0x582414=$(_0x239cba(0x210));if(_0x21cb88&&_0x582414){const _0x3d3c92=editingPreset==='C';_0x21cb88[_0x239cba(0x279)][_0x239cba(0x44c)](_0x239cba(0x454),_0x3d3c92),_0x582414[_0x239cba(0x279)][_0x239cba(0x44c)](_0x239cba(0x454),!_0x3d3c92);}if(editingPreset==='A'){$(_0x239cba(0x4d4))[_0x239cba(0x406)]=_0x37c52a[_0x239cba(0x412)];if($(_0x239cba(0x46b)))$(_0x239cba(0x46b))[_0x239cba(0x406)]=_0x37c52a[_0x239cba(0x42f)]??0x0;$('#set_short')[_0x239cba(0x406)]=_0x37c52a['A_short'],$(_0x239cba(0x25b))[_0x239cba(0x406)]=_0x37c52a[_0x239cba(0x40f)],$('#set_cycles')[_0x239cba(0x406)]=_0x1f4237['cyclesA'],$(_0x239cba(0x1f0))[_0x239cba(0x406)]=_0x1f4237[_0x239cba(0x273)];}else{if(editingPreset==='B'){$(_0x239cba(0x4d4))['value']=_0x37c52a[_0x239cba(0x436)];if($(_0x239cba(0x46b)))$(_0x239cba(0x46b))['value']=_0x37c52a['B_winddown']??0x0;$('#set_short')['value']=_0x37c52a[_0x239cba(0x47c)],$('#set_long')['value']=_0x37c52a[_0x239cba(0x231)],$(_0x239cba(0x432))[_0x239cba(0x406)]=_0x1f4237[_0x239cba(0x2ff)],$(_0x239cba(0x1f0))[_0x239cba(0x406)]=_0x1f4237[_0x239cba(0x474)];}else{if(editingPreset==='C'){const _0x5748e8=$(_0x239cba(0x200));if(_0x5748e8)_0x5748e8[_0x239cba(0x406)]=_0x1f4237[_0x239cba(0x497)]??0x5;}}}}function highlightPresetSelector(){const _0x13fd1b=_0x17450c;$$(_0x13fd1b(0x410))[_0x13fd1b(0x4a0)](_0x54e876=>{const _0x1c82be=_0x13fd1b,_0x3a22b2=_0x54e876[_0x1c82be(0x32d)][_0x1c82be(0x344)]===editingPreset;_0x54e876[_0x1c82be(0x279)]['toggle'](_0x1c82be(0x42b),_0x3a22b2),_0x54e876[_0x1c82be(0x279)][_0x1c82be(0x44c)]('ghost',!_0x3a22b2);});}function openSettings(){const _0x1f0b5c=_0x17450c,_0x27ef91=data[_0x1f0b5c(0x4a9)];editingPreset=_0x27ef91[_0x1f0b5c(0x323)],$(_0x1f0b5c(0x31c))['value']=_0x27ef91[_0x1f0b5c(0x27a)]||'',loadEditingPresetFields(),highlightPresetSelector(),$(_0x1f0b5c(0x2b6))[_0x1f0b5c(0x406)]=_0x27ef91[_0x1f0b5c(0x3fd)]??0.8,$(_0x1f0b5c(0x49d))[_0x1f0b5c(0x406)]=_0x27ef91['soundTheme']||_0x1f0b5c(0x21f),$('#set_theme_color')[_0x1f0b5c(0x406)]=_0x27ef91[_0x1f0b5c(0x4ca)]||'default';const _0x25c52a=getActiveYoutubeUrl();$(_0x1f0b5c(0x387))[_0x1f0b5c(0x406)]=_0x25c52a||'';const _0x4e7c68=extractYouTubeID(_0x25c52a);$(_0x1f0b5c(0x2af))[_0x1f0b5c(0x2e9)]=!_0x4e7c68;$(_0x1f0b5c(0x209))&&($(_0x1f0b5c(0x209))[_0x1f0b5c(0x48c)]='');$('#ytSoundVolume')[_0x1f0b5c(0x406)]=_0x27ef91['youtubeVolume']||0x50,$(_0x1f0b5c(0x28d))[_0x1f0b5c(0x1fc)]=!!_0x27ef91['useYtThumbnailAsBg'],$(_0x1f0b5c(0x4c0))[_0x1f0b5c(0x406)]=_0x27ef91[_0x1f0b5c(0x1f4)]||0.85;$(_0x1f0b5c(0x1eb))&&($(_0x1f0b5c(0x1eb))['value']=_0x27ef91[_0x1f0b5c(0x3ac)]||_0x1f0b5c(0x385));$(_0x1f0b5c(0x388))&&($('#set_autoStartNext')[_0x1f0b5c(0x1fc)]=!!_0x27ef91[_0x1f0b5c(0x485)]);$(_0x1f0b5c(0x416))&&($(_0x1f0b5c(0x416))[_0x1f0b5c(0x1fc)]=_0x27ef91[_0x1f0b5c(0x2c6)]!==![]);$(_0x1f0b5c(0x491))&&($(_0x1f0b5c(0x491))[_0x1f0b5c(0x1fc)]=_0x27ef91[_0x1f0b5c(0x2ab)]!==![]);$(_0x1f0b5c(0x2ef))&&($('#set_backupDays')[_0x1f0b5c(0x406)]=_0x27ef91[_0x1f0b5c(0x332)]||0x7);const _0x49595f=$(_0x1f0b5c(0x21c));_0x49595f&&storageManager[_0x1f0b5c(0x4d3)]()[_0x1f0b5c(0x3ff)](_0x334fec=>{const _0x5115a6=_0x1f0b5c;_0x49595f[_0x5115a6(0x1ef)]=_0x5115a6(0x4df),_0x334fec&&_0x334fec['length']>0x0?_0x334fec['forEach'](_0x2b8e0a=>{const _0x1d9377=_0x5115a6,_0x424c80=document['createElement'](_0x1d9377(0x3be));_0x424c80[_0x1d9377(0x406)]=_0x2b8e0a[_0x1d9377(0x4f4)],_0x424c80[_0x1d9377(0x48c)]='B·∫£n\x20sao\x20l∆∞u\x20ng√†y:\x20'+new Date(_0x2b8e0a[_0x1d9377(0x4f4)])[_0x1d9377(0x34b)](_0x1d9377(0x269)),_0x49595f['appendChild'](_0x424c80);}):_0x49595f['innerHTML']='<option\x20value=\x22\x22>Kh√¥ng\x20c√≥\x20b·∫£n\x20sao\x20l∆∞u\x20n√†o</option>';});$(_0x1f0b5c(0x3ca))[_0x1f0b5c(0x279)][_0x1f0b5c(0x30f)](_0x1f0b5c(0x3ae));try{trapFocus($(_0x1f0b5c(0x3ca)));}catch(_0x3bb34f){}}function closeSettings(){const _0x5eabb4=_0x17450c;$('#modalSettings')[_0x5eabb4(0x279)][_0x5eabb4(0x393)]('show');try{releaseFocus();}catch(_0x2f1e16){}}async function setDefaults(){const _0x285894=_0x17450c;data[_0x285894(0x4a9)][_0x285894(0x3d9)]={'A_work':0x19,'A_short':0x5,'A_long':0xf,'A_winddown':0x2,'B_work':0x32,'B_short':0xa,'B_long':0x1e,'B_winddown':0x5},data['settings'][_0x285894(0x34c)]=0x4,data[_0x285894(0x4a9)]['longBreakIntervalA']=0x4,data[_0x285894(0x4a9)]['cyclesB']=0x4,data[_0x285894(0x4a9)][_0x285894(0x474)]=0x4,data[_0x285894(0x4a9)][_0x285894(0x497)]=0x5,data['settings'][_0x285894(0x323)]='A',data[_0x285894(0x4a9)][_0x285894(0x3fd)]=0.8,data['settings']['soundTheme']=_0x285894(0x21f),await saveData(),openSettings(),toast(_0x285894(0x23f));}async function saveSettings(){const _0x4e5cb1=_0x17450c,_0x4e053d=data[_0x4e5cb1(0x4a9)];_0x4e053d['apiKey']=$('#set_apiKey')[_0x4e5cb1(0x406)][_0x4e5cb1(0x404)]();const _0xf172e7=_0x4e053d['durations'];if(editingPreset==='A')_0xf172e7[_0x4e5cb1(0x412)]=clampInt($(_0x4e5cb1(0x4d4))['value'],0x1,0x3e7),_0xf172e7[_0x4e5cb1(0x42f)]=clampInt($(_0x4e5cb1(0x46b))[_0x4e5cb1(0x406)],0x0,0x3e7),_0xf172e7[_0x4e5cb1(0x494)]=clampInt($('#set_short')[_0x4e5cb1(0x406)],0x1,0x3e7),_0xf172e7[_0x4e5cb1(0x40f)]=clampInt($(_0x4e5cb1(0x25b))[_0x4e5cb1(0x406)],0x1,0x3e7),_0x4e053d['cyclesA']=clampInt($('#set_cycles')['value'],0x1,0xc),_0x4e053d[_0x4e5cb1(0x273)]=clampInt($(_0x4e5cb1(0x1f0))[_0x4e5cb1(0x406)],0x2,0xc);else{if(editingPreset==='B')_0xf172e7[_0x4e5cb1(0x436)]=clampInt($('#set_work')['value'],0x1,0x3e7),_0xf172e7[_0x4e5cb1(0x4a5)]=clampInt($(_0x4e5cb1(0x46b))[_0x4e5cb1(0x406)],0x0,0x3e7),_0xf172e7['B_short']=clampInt($('#set_short')[_0x4e5cb1(0x406)],0x1,0x3e7),_0xf172e7[_0x4e5cb1(0x231)]=clampInt($(_0x4e5cb1(0x25b))['value'],0x1,0x3e7),_0x4e053d['cyclesB']=clampInt($(_0x4e5cb1(0x432))['value'],0x1,0xc),_0x4e053d[_0x4e5cb1(0x474)]=clampInt($(_0x4e5cb1(0x1f0))['value'],0x2,0xc);else{if(editingPreset==='C'){const _0x495511=$(_0x4e5cb1(0x200));if(_0x495511)_0x4e053d[_0x4e5cb1(0x497)]=clampInt(_0x495511[_0x4e5cb1(0x406)],0x1,0x14);}}}_0x4e053d[_0x4e5cb1(0x3fd)]=clampFloat($(_0x4e5cb1(0x2b6))[_0x4e5cb1(0x406)],0x0,0x1,0.8),_0x4e053d[_0x4e5cb1(0x40d)]=$(_0x4e5cb1(0x49d))[_0x4e5cb1(0x406)]===_0x4e5cb1(0x354)?_0x4e5cb1(0x354):'beep',_0x4e053d[_0x4e5cb1(0x4ca)]=$('#set_theme_color')['value'],_0x4e053d[_0x4e5cb1(0x1f4)]=parseFloat($(_0x4e5cb1(0x4c0))[_0x4e5cb1(0x406)])||0.85;$(_0x4e5cb1(0x1eb))&&(_0x4e053d['backgroundMode']=$(_0x4e5cb1(0x1eb))[_0x4e5cb1(0x406)]);_0x4e053d[_0x4e5cb1(0x485)]=!!($(_0x4e5cb1(0x388))&&$('#set_autoStartNext')[_0x4e5cb1(0x1fc)]),_0x4e053d[_0x4e5cb1(0x2c6)]=!!($('#set_enableWinddown')&&$('#set_enableWinddown')[_0x4e5cb1(0x1fc)]),_0x4e053d[_0x4e5cb1(0x2ab)]=!!($(_0x4e5cb1(0x491))&&$(_0x4e5cb1(0x491))[_0x4e5cb1(0x1fc)]);$(_0x4e5cb1(0x2ef))&&(_0x4e053d['backupDaysToKeep']=clampInt($(_0x4e5cb1(0x2ef))[_0x4e5cb1(0x406)],0x1,0x1e));_0x4e053d[_0x4e5cb1(0x4ca)]===_0x4e5cb1(0x244)||_0x4e053d[_0x4e5cb1(0x4ca)]===_0x4e5cb1(0x375)?(_0x4e053d['useYtThumbnailAsBg']=![],typeof _0x4e053d[_0x4e5cb1(0x2ec)]===_0x4e5cb1(0x260)&&_0x4e053d[_0x4e5cb1(0x2ec)][_0x4e5cb1(0x49f)](_0x4e5cb1(0x2cb))&&(_0x4e053d[_0x4e5cb1(0x2ec)]='')):_0x4e053d[_0x4e5cb1(0x400)]=!![];const _0x41e82c=$(_0x4e5cb1(0x387))[_0x4e5cb1(0x406)][_0x4e5cb1(0x404)]();_0x4e053d[_0x4e5cb1(0x400)]=$(_0x4e5cb1(0x28d))[_0x4e5cb1(0x1fc)],_0x4e053d['youtubeVolume']=parseInt($(_0x4e5cb1(0x2bd))[_0x4e5cb1(0x406)],0xa),sessionYoutubeUrl=_0x41e82c;try{if(!IS_FILE_PROTOCOL){if(ytPlayer&&ytPlayer[_0x4e5cb1(0x225)])ytPlayer[_0x4e5cb1(0x225)](_0x4e053d[_0x4e5cb1(0x2ac)]);}else try{fallbackPostMessage('setVolume',[_0x4e053d[_0x4e5cb1(0x2ac)]]);}catch(_0x3f19ae){}}catch(_0x227762){}await saveData(),applyTheme(),applyCustomBg(),applyPanelOpacity(),updatePresetButtonsText(),timer[_0x4e5cb1(0x4ad)](_0x4e053d[_0x4e5cb1(0x323)],{'silent':!![]}),closeSettings(),toast(_0x4e5cb1(0x1ec));}function clampInt(_0x4c8d95,_0x2c5bcb,_0x5c5ef3){_0x4c8d95=parseInt(_0x4c8d95||0x0,0xa);if(isNaN(_0x4c8d95))_0x4c8d95=_0x2c5bcb;return Math['max'](_0x2c5bcb,Math['min'](_0x5c5ef3,_0x4c8d95));}function clampFloat(_0x44116d,_0x4d3aac,_0x20f05d,_0x1e36a9){const _0x157ef0=_0x17450c;_0x44116d=parseFloat(_0x44116d);if(Number[_0x157ef0(0x4d9)](_0x44116d))_0x44116d=_0x1e36a9;return Math[_0x157ef0(0x3e8)](_0x4d3aac,Math[_0x157ef0(0x420)](_0x20f05d,_0x44116d));}const dbPromise=new Promise((_0x300016,_0x4ab0c5)=>{const _0x46e283=_0x17450c,_0x337b5e=indexedDB[_0x46e283(0x326)](_0x46e283(0x2f8),0x1);_0x337b5e['onupgradeneeded']=_0x2aa971=>_0x2aa971['target'][_0x46e283(0x271)][_0x46e283(0x394)](_0x46e283(0x372)),_0x337b5e[_0x46e283(0x2b2)]=_0x533d49=>_0x300016(_0x533d49[_0x46e283(0x4a2)]['result']),_0x337b5e[_0x46e283(0x233)]=_0x9ce0c5=>_0x4ab0c5(_0x9ce0c5);}),fileCache={};function handleFileUpload(_0x18aeda,_0x42355b){const _0x467165=_0x17450c;if(!_0x18aeda)return;dbPromise[_0x467165(0x3ff)](_0x1c5de4=>{const _0xdf361a=_0x467165,_0x30cab5=uid(_0xdf361a(0x3ec)),_0xe7acd9=_0x1c5de4[_0xdf361a(0x327)](_0xdf361a(0x372),_0xdf361a(0x30c));_0xe7acd9[_0xdf361a(0x366)](_0xdf361a(0x372))[_0xdf361a(0x275)](_0x18aeda,_0x30cab5),_0xe7acd9[_0xdf361a(0x40c)]=()=>_0x42355b(_0x30cab5),_0xe7acd9[_0xdf361a(0x233)]=()=>toast('L·ªói\x20l∆∞u\x20file.');});}function getStoredFileUrl(_0x44c066){const _0x262e32=_0x17450c;if(!_0x44c066)return Promise[_0x262e32(0x32f)]('');if(fileCache[_0x44c066])return Promise[_0x262e32(0x32f)](fileCache[_0x44c066]);return dbPromise[_0x262e32(0x3ff)](_0x41ac58=>new Promise(_0x3b86bc=>{const _0x102eff=_0x262e32,_0x5a5c7d=_0x41ac58[_0x102eff(0x327)](_0x102eff(0x372),_0x102eff(0x26d)),_0x5ba583=_0x5a5c7d[_0x102eff(0x366)](_0x102eff(0x372))[_0x102eff(0x4cf)](_0x44c066);_0x5ba583[_0x102eff(0x2b2)]=_0x5213d7=>{const _0xcb004f=_0x102eff,_0x570134=_0x5213d7['target'][_0xcb004f(0x271)];if(_0x570134){const _0x55b4be=URL[_0xcb004f(0x362)](_0x570134);fileCache[_0x44c066]=_0x55b4be,_0x3b86bc(_0x55b4be);}else _0x3b86bc('');},_0x5ba583[_0x102eff(0x233)]=()=>_0x3b86bc('');}));}function applyCustomBg(){const _0x1b5273=_0x17450c,_0x2a5245=data[_0x1b5273(0x4a9)],_0x2dcb26=_0x2a5245[_0x1b5273(0x2ec)],_0x449436=_0x2a5245[_0x1b5273(0x4ca)],_0x260d4b=[_0x1b5273(0x2d5),'space']['includes'](_0x449436),_0x18e9c9=_0x449436===_0x1b5273(0x244)||_0x449436===_0x1b5273(0x375),_0x52137e=_0x2a5245[_0x1b5273(0x3ac)]||_0x1b5273(0x385);document['body']['style'][_0x1b5273(0x33a)]=_0x52137e,document[_0x1b5273(0x219)]['style'][_0x1b5273(0x322)]=_0x52137e===_0x1b5273(0x3da)?_0x1b5273(0x3a6):_0x1b5273(0x213);const _0x315e40=()=>{const _0x34a560=_0x1b5273;try{document[_0x34a560(0x219)][_0x34a560(0x3a2)][_0x34a560(0x44a)]='';}catch(_0x1ea838){}};if(_0x2dcb26){const _0x2dc702=_0x2dcb26['startsWith'](_0x1b5273(0x437))||_0x2dcb26[_0x1b5273(0x29a)]('http')||_0x2dcb26['startsWith'](_0x1b5273(0x4cd))?Promise[_0x1b5273(0x32f)](_0x2dcb26):getStoredFileUrl(_0x2dcb26);_0x2dc702[_0x1b5273(0x3ff)](_0x45992f=>{const _0x23d75a=_0x1b5273;_0x45992f?document[_0x23d75a(0x219)][_0x23d75a(0x3a2)][_0x23d75a(0x39e)](_0x23d75a(0x43c),_0x23d75a(0x3e0)+_0x45992f+')'):document[_0x23d75a(0x219)][_0x23d75a(0x3a2)][_0x23d75a(0x39e)](_0x23d75a(0x43c),_0x18e9c9?_0x23d75a(0x39a):''),_0x315e40();});}else!_0x260d4b?_0x18e9c9?(document[_0x1b5273(0x219)]['style']['setProperty'](_0x1b5273(0x43c),_0x1b5273(0x39a)),_0x315e40()):document['body'][_0x1b5273(0x3a2)][_0x1b5273(0x39e)]('--bg-image','radial-gradient(1200px\x20800px\x20at\x2010%\x20-10%,\x20#20285b\x200%,\x20#0f1222\x2050%,\x20#0b0e1a\x20100%)'):(document['body'][_0x1b5273(0x3a2)][_0x1b5273(0x33d)](_0x1b5273(0x43c)),_0x315e40());}function applyPanelOpacity(){const _0x55812a=_0x17450c;document[_0x55812a(0x3ea)][_0x55812a(0x3a2)]['setProperty']('--panel-opacity',data[_0x55812a(0x4a9)][_0x55812a(0x1f4)]);}function renderDashboard(){const _0x326dd5=_0x17450c,_0x29116b=data[_0x326dd5(0x3b3)][_0x326dd5(0x3f9)](_0x19a510=>_0x19a510['subtopics'][_0x326dd5(0x4f2)](_0x36b2c2=>({'topic':_0x19a510['name'],'subtopic':_0x36b2c2[_0x326dd5(0x422)],'m':_0x36b2c2[_0x326dd5(0x488)][_0x326dd5(0x369)]||0x0,'c':_0x36b2c2['stats'][_0x326dd5(0x36a)]||0x0,'t':_0x36b2c2[_0x326dd5(0x488)]['tasksCompleted']||0x0}))),_0x344535=_0x29116b['reduce']((_0x3fc946,_0x4fccc5)=>_0x3fc946+_0x4fccc5['m'],0x0),_0x519693=_0x29116b[_0x326dd5(0x4b3)]((_0x48a80c,_0x302169)=>_0x48a80c+_0x302169['c'],0x0),_0x21b681=_0x29116b[_0x326dd5(0x4b3)]((_0x2e6616,_0x499c72)=>_0x2e6616+_0x499c72['t'],0x0);let _0xa6bdda=_0x326dd5(0x405)+formatDaysHoursMinutes(_0x344535)+_0x326dd5(0x39f)+_0x519693+_0x326dd5(0x295)+_0x21b681+_0x326dd5(0x22c);_0x29116b[_0x326dd5(0x4a0)](_0x30d350=>{const _0xb7c8e2=_0x326dd5;_0xa6bdda+=_0xb7c8e2(0x3e9)+escapeHTML(_0x30d350[_0xb7c8e2(0x4bf)])+_0xb7c8e2(0x2a4)+escapeHTML(_0x30d350[_0xb7c8e2(0x1fb)])+_0xb7c8e2(0x2a4)+formatDaysHoursMinutes(_0x30d350['m'])+_0xb7c8e2(0x2a4)+_0x30d350['c']+_0xb7c8e2(0x2a4)+_0x30d350['t']+'</td></tr>';}),_0xa6bdda+=_0x326dd5(0x2f6);const _0x2ebe76=$(_0x326dd5(0x498));if(_0x2ebe76)_0x2ebe76[_0x326dd5(0x1ef)]=_0xa6bdda;}function getMilestones(){const _0x101639=_0x17450c;return[{'hours':0x5,'title':_0x101639(0x234),'message':_0x101639(0x376)},{'hours':0x14,'title':_0x101639(0x465),'message':_0x101639(0x32c)},{'hours':0x32,'title':'G·ª≠i\x20b·∫°n,\x2050\x20gi·ªù\x20(ƒê·ªông\x20l·ª±c)','message':'50\x20gi·ªù\x20t·∫≠p\x20trung!\x20Th√≥i\x20quen\x20c·ªßa\x20b·∫°n\x20ƒëang\x20t·∫°o\x20ra\x20ƒë·ªông\x20l·ª±c.\x20S·ª±\x20nh·∫•t\x20qu√°n\x20nh·ªè\x20b√©\x20m·ªói\x20ng√†y\x20ƒëang\x20c·ªông\x20h∆∞·ªüng\x20th√†nh\x20nh·ªØng\x20b∆∞·ªõc\x20ti·∫øn\x20l·ªõn.\x20B·∫°n\x20ƒëang\x20ƒëi\x20ƒë√∫ng\x20h∆∞·ªõng,\x20h√£y\x20ti·∫øp\x20t·ª•c\x20ph√°t\x20huy.'},{'hours':0x64,'title':_0x101639(0x2ca),'message':_0x101639(0x2a3)},{'hours':0xfa,'title':'G·ª≠i\x20b·∫°n,\x20250\x20gi·ªù\x20(B·ªÅn\x20b·ªâ)','message':_0x101639(0x3fb)},{'hours':0x1f4,'title':_0x101639(0x382),'message':_0x101639(0x402)},{'hours':0x3e8,'title':_0x101639(0x34e),'message':_0x101639(0x257)},{'hours':0x1388,'title':'G·ª≠i\x20b·∫°n,\x205.000+\x20gi·ªù\x20(Di\x20s·∫£n)','message':'5.000\x20gi·ªù\x20t·∫≠p\x20trung\x20c√≥\x20ch·ªß\x20ƒë√≠ch.\x20ƒê√¢y\x20l√†\x20m·ªôt\x20th√†nh\x20t·ª±u\x20m√†\x20r·∫•t\x20√≠t\x20ng∆∞·ªùi\x20ƒë·∫°t\x20ƒë∆∞·ª£c.\x0a\x0aT·∫°i\x20c·ªôt\x20m·ªëc\x20n√†y,\x20c√¢u\x20h·ªèi\x20kh√¥ng\x20c√≤n\x20l√†\x20\x27L√†m\x20th·∫ø\x20n√†o\x20ƒë·ªÉ\x20t·∫≠p\x20trung?\x27,\x20m√†\x20l√†\x20\x27S·ª±\x20t·∫≠p\x20trung\x20n√†y\x20s·∫Ω\x20ƒë∆∞·ª£c\x20d√πng\x20ƒë·ªÉ\x20t·∫°o\x20ra\x20gi√°\x20tr·ªã\x20g√¨?\x27.\x20B·∫°n\x20kh√¥ng\x20ch·ªâ\x20l√†m\x20vi·ªác,\x20b·∫°n\x20ƒëang\x20t·∫°o\x20ra\x20di\x20s·∫£n.'}]['sort']((_0x1d1e21,_0x12258e)=>_0x12258e['hours']-_0x1d1e21[_0x101639(0x48b)]);}async function checkAndShowMilestones(){const _0x1779c0=_0x17450c;if(!data||!data['settings'])return;if(!Array[_0x1779c0(0x47e)](data[_0x1779c0(0x4a9)][_0x1779c0(0x34d)]))data[_0x1779c0(0x4a9)][_0x1779c0(0x34d)]=[];const _0x9b5471=data[_0x1779c0(0x3b3)]['reduce']((_0x29d4fe,_0x1df672)=>{const _0x25d74c=_0x1779c0;return _0x29d4fe+_0x1df672[_0x25d74c(0x206)]['reduce']((_0x167d86,_0x279717)=>{const _0x57b7b0=_0x25d74c;return _0x167d86+(_0x279717['stats'][_0x57b7b0(0x369)]||0x0);},0x0);},0x0),_0xba37a9=_0x9b5471/0x3c,_0x3bb28b=getMilestones(),_0x46934b=Array[_0x1779c0(0x47e)](data['settings'][_0x1779c0(0x34d)])?data['settings']['achievedMilestones']:[],_0x72ad37=_0x3bb28b[_0x1779c0(0x3a0)](_0x4db42a=>_0xba37a9>=_0x4db42a['hours']&&!_0x46934b[_0x1779c0(0x49f)](_0x4db42a[_0x1779c0(0x48b)]));if(_0x72ad37[_0x1779c0(0x223)]===0x0)return![];const _0x4a821d=_0x72ad37[_0x1779c0(0x4b3)]((_0x55e0ae,_0x58db18)=>_0x55e0ae&&_0x55e0ae[_0x1779c0(0x48b)]>_0x58db18[_0x1779c0(0x48b)]?_0x55e0ae:_0x58db18,null);if(!_0x4a821d)return![];$('#milestoneTitle')[_0x1779c0(0x48c)]=_0x4a821d['title'],$(_0x1779c0(0x2bb))[_0x1779c0(0x48c)]=_0x4a821d['message'],$(_0x1779c0(0x3dc))[_0x1779c0(0x279)][_0x1779c0(0x30f)](_0x1779c0(0x3ae));try{trapFocus($(_0x1779c0(0x3dc)));}catch(_0x348fc1){}return data[_0x1779c0(0x4a9)][_0x1779c0(0x34d)][_0x1779c0(0x367)](_0x4a821d[_0x1779c0(0x48b)]),await saveData(),!![];}async function seedAchievedMilestones(){const _0x4364f7=_0x17450c;if(!data||!data['settings'])return;!Array[_0x4364f7(0x47e)](data['settings'][_0x4364f7(0x34d)])&&(data[_0x4364f7(0x4a9)][_0x4364f7(0x34d)]=[],await saveData());}async function handleSendMessage(){const _0x1d847f=_0x17450c,_0xbeebf7=$(_0x1d847f(0x4e3)),_0x6aa341=$(_0x1d847f(0x45c)),_0x37153e=_0x6aa341[_0x1d847f(0x406)][_0x1d847f(0x404)](),_0x102479=getCurrentSubtopic();if(!_0x37153e)return;if(!_0x102479){toast(t('timer.selectSubtopicPrompt'));return;}_0x6aa341[_0x1d847f(0x406)]='',_0xbeebf7['disabled']=!![],_0xbeebf7[_0x1d847f(0x1ef)]=_0x1d847f(0x4d0),_0x102479[_0x1d847f(0x331)][_0x1d847f(0x367)]({'role':_0x1d847f(0x360),'text':_0x37153e}),renderChat();const _0x31db39=await callGeminiAPI(_0x37153e);_0x31db39&&(_0x102479[_0x1d847f(0x331)][_0x1d847f(0x367)]({'role':'model','text':_0x31db39}),await saveData(),renderChat()),_0xbeebf7[_0x1d847f(0x2e9)]=![],_0xbeebf7[_0x1d847f(0x1ef)]='G·ª≠i';}function renderChat(){const _0x18c2e8=_0x17450c,_0x26ea8b=getCurrentSubtopic(),_0x464f0e=$(_0x18c2e8(0x4eb)),_0x1fc8e8=$('#chatInput'),_0x4d7520=$(_0x18c2e8(0x4e3));if(!_0x464f0e||!_0x1fc8e8||!_0x4d7520)return;if(!_0x26ea8b){_0x464f0e['innerHTML']=_0x18c2e8(0x4a8),_0x1fc8e8[_0x18c2e8(0x2e9)]=!![],_0x4d7520[_0x18c2e8(0x2e9)]=!![];return;}_0x1fc8e8[_0x18c2e8(0x2e9)]=![],_0x4d7520[_0x18c2e8(0x2e9)]=![],_0x464f0e['innerHTML']='';if(!_0x26ea8b['chatHistory']||_0x26ea8b[_0x18c2e8(0x331)][_0x18c2e8(0x223)]===0x0){_0x464f0e[_0x18c2e8(0x1ef)]=_0x18c2e8(0x40a);return;}_0x26ea8b[_0x18c2e8(0x331)][_0x18c2e8(0x4a0)](_0x1c6dec=>{const _0x23bf1f=_0x18c2e8,_0x2e8057=document[_0x23bf1f(0x251)](_0x23bf1f(0x2d4));_0x2e8057['className']=_0x23bf1f(0x29d)+_0x1c6dec['role'],_0x2e8057[_0x23bf1f(0x48c)]=_0x1c6dec[_0x23bf1f(0x2ee)],_0x464f0e[_0x23bf1f(0x2e8)](_0x2e8057);}),_0x464f0e[_0x18c2e8(0x29e)]=_0x464f0e[_0x18c2e8(0x3a7)];}async function handleSummarizeNote(){const _0x213594=_0x17450c,_0x11d3a6=$(_0x213594(0x45d)),_0x4250fb=$(_0x213594(0x449)),_0xc8ac1f=_0x4250fb[_0x213594(0x406)][_0x213594(0x404)](),_0x562c51=getCurrentSubtopic();if(!_0xc8ac1f){toast(_0x213594(0x43b));return;}const _0x5564bc=_0x11d3a6[_0x213594(0x1ef)];_0x11d3a6['innerHTML']=_0x213594(0x4d0),_0x11d3a6[_0x213594(0x2e9)]=!![];const _0x473d5a=_0x213594(0x365)+(_0x562c51?.['name']||_0x213594(0x2cc))+'\x22\x0a-\x20Ghi\x20ch√∫\x20c·ªßa\x20ng∆∞·ªùi\x20d√πng\x20sau\x20m·ªôt\x20phi√™n\x20l√†m\x20vi·ªác:\x20\x22'+_0xc8ac1f+_0x213594(0x478),_0x420472=await callGeminiAPI(_0x473d5a);_0x420472&&(_0x4250fb[_0x213594(0x406)]+='\x0a\x0a'+_0x420472),_0x11d3a6[_0x213594(0x1ef)]=_0x5564bc,_0x11d3a6[_0x213594(0x2e9)]=![];}function clearChat(){const _0x405351=_0x17450c,_0x2a195c=getCurrentSubtopic();if(!_0x2a195c){toast(t(_0x405351(0x4e9)));return;}showConfirmModal(_0x405351(0x500),_0x405351(0x4ba),async _0xaa2cf3=>{const _0x58f563=_0x405351;_0xaa2cf3&&(_0x2a195c['chatHistory']=[],await saveData(),renderChat(),toast(_0x58f563(0x4bd)));});}let ytPlayer,ytUserPaused=![],ytFallbackFrame=null,ytFallbackIsPlaying=![];function buildFallbackSrc(_0xb60eb4,{autoplay:autoplay=0x1,mute:mute=0x1}={}){const _0xe65534=_0x17450c,_0x4ee6fe=new URLSearchParams({'autoplay':String(autoplay),'mute':String(mute),'controls':'0','playsinline':'1','loop':'1','playlist':_0xb60eb4,'enablejsapi':'1','origin':'https://www.youtube.com'})[_0xe65534(0x314)]();return _0xe65534(0x2d3)+_0xb60eb4+'?'+_0x4ee6fe;}function ensureFallbackFrame(){const _0x104401=_0x17450c,_0x52a596=document[_0x104401(0x1f8)](_0x104401(0x25a));if(!_0x52a596)return null;if(ytFallbackFrame&&ytFallbackFrame[_0x104401(0x486)])return ytFallbackFrame;const _0x4820fe=document[_0x104401(0x251)]('iframe');return _0x4820fe['id']='yt-fallback',_0x4820fe[_0x104401(0x28f)]='1',_0x4820fe[_0x104401(0x309)]='1',_0x4820fe[_0x104401(0x3a2)][_0x104401(0x35a)]='absolute',_0x4820fe['style'][_0x104401(0x3c4)]='-9999px',_0x4820fe[_0x104401(0x3a2)][_0x104401(0x21e)]=_0x104401(0x2dc),_0x4820fe[_0x104401(0x29b)]='autoplay;\x20encrypted-media;\x20picture-in-picture',_0x52a596['innerHTML']='',_0x52a596[_0x104401(0x2e8)](_0x4820fe),ytFallbackFrame=_0x4820fe,_0x4820fe;}function fallbackLoadVideo(_0x41b59e,{autoplay:autoplay=0x1,mute:mute=0x1}={}){const _0x5833d4=_0x17450c,_0x3660c9=document['getElementById'](_0x5833d4(0x25a));if(!_0x3660c9)return;_0x3660c9[_0x5833d4(0x1ef)]='';const _0x56e88b=document[_0x5833d4(0x251)](_0x5833d4(0x270));_0x56e88b['id']='yt-fallback',_0x56e88b[_0x5833d4(0x28f)]='1',_0x56e88b[_0x5833d4(0x309)]='1',_0x56e88b['style'][_0x5833d4(0x35a)]=_0x5833d4(0x4fb),_0x56e88b[_0x5833d4(0x3a2)][_0x5833d4(0x3c4)]='-9999px',_0x56e88b[_0x5833d4(0x3a2)][_0x5833d4(0x21e)]=_0x5833d4(0x2dc),_0x56e88b[_0x5833d4(0x29b)]=_0x5833d4(0x4b7),_0x56e88b[_0x5833d4(0x35b)]=buildFallbackSrc(_0x41b59e,{'autoplay':autoplay,'mute':mute}),_0x3660c9['appendChild'](_0x56e88b),ytFallbackFrame=_0x56e88b,ytFallbackIsPlaying=!!autoplay;try{const _0x1992ae=document['getElementById'](_0x5833d4(0x26a));if(_0x1992ae)_0x1992ae['textContent']=ytFallbackIsPlaying?'‚è∏Ô∏è':'‚ñ∂Ô∏è';}catch(_0x462e70){}}function fallbackPostMessage(_0x1620fe,_0x1ad5b6=[]){const _0x45b18c=_0x17450c;try{if(!ytFallbackFrame||!ytFallbackFrame[_0x45b18c(0x359)])return;ytFallbackFrame[_0x45b18c(0x359)][_0x45b18c(0x4e0)](JSON['stringify']({'event':'command','func':_0x1620fe,'args':_0x1ad5b6}),_0x45b18c(0x43e));}catch(_0x2dfca6){}}function fallbackPlay(){const _0x31610b=_0x17450c;fallbackPostMessage(_0x31610b(0x2f2));}function fallbackStop(){const _0x6d2fd0=_0x17450c;try{ytFallbackFrame&&(ytFallbackFrame[_0x6d2fd0(0x35b)]='about:blank',ytFallbackIsPlaying=![]);}catch(_0x5430c6){}}function fallbackPause(){fallbackStop();}function fallbackUnMute(){const _0x5b951c=_0x17450c;fallbackPostMessage(_0x5b951c(0x334));}function fallbackMute(){fallbackPostMessage('mute');}window[_0x17450c(0x329)]=function(){const _0xecfc14=_0x17450c;if(IS_FILE_PROTOCOL){try{window[_0xecfc14(0x398)]&&window['__ytApiWatchdog']['cancel']();}catch(_0x4402ac){}return;}const _0x2d6cf8={'height':'1','width':'1','playerVars':{'autoplay':0x0,'controls':0x0,'playsinline':0x1},'events':{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange},'host':_0xecfc14(0x43e)};(window[_0xecfc14(0x308)][_0xecfc14(0x297)]===_0xecfc14(0x3d3)||window['location'][_0xecfc14(0x297)]==='https:')&&(_0x2d6cf8[_0xecfc14(0x3de)]=window[_0xecfc14(0x308)]['origin']);ytPlayer=new YT[(_0xecfc14(0x43f))](_0xecfc14(0x25a),_0x2d6cf8);try{window[_0xecfc14(0x398)]&&window[_0xecfc14(0x398)][_0xecfc14(0x479)]();const _0x4bda5a=document['getElementById'](_0xecfc14(0x395));_0x4bda5a&&(_0x4bda5a[_0xecfc14(0x48c)]='');}catch(_0x1dd433){}};let _ytPrimed=![],_ytUnlocked=![];try{_ytUnlocked=localStorage[_0x17450c(0x286)]('sound_unlocked')==='1';}catch(_0x25e7a4){}function showSoundPermission(){const _0x27b72c=_0x17450c,_0x18ce4d=document[_0x27b72c(0x1f8)](_0x27b72c(0x4c9));if(!_0x18ce4d)return;if(_ytUnlocked){_0x18ce4d[_0x27b72c(0x279)][_0x27b72c(0x393)](_0x27b72c(0x3ae));return;}_0x18ce4d[_0x27b72c(0x279)][_0x27b72c(0x30f)](_0x27b72c(0x3ae));}function hideSoundPermission(){const _0x427ea1=_0x17450c,_0x466681=document[_0x427ea1(0x1f8)]('soundPermissionBar');if(!_0x466681)return;_0x466681['classList'][_0x427ea1(0x393)](_0x427ea1(0x3ae));}function unlockAudioChain(){const _0x385c67=_0x17450c;try{if(AUDIO_CTX&&typeof AUDIO_CTX['resume']===_0x385c67(0x361))AUDIO_CTX[_0x385c67(0x3d5)]();}catch(_0x3d0434){}try{if(IS_FILE_PROTOCOL)fallbackUnMute(),fallbackPlay();else ytPlayer&&ytPlayer[_0x385c67(0x334)]&&(ytPlayer['unMute'](),ytPlayer[_0x385c67(0x2f2)]());}catch(_0x201f24){}_ytUnlocked=!![];try{localStorage[_0x385c67(0x25d)](_0x385c67(0x3a8),'1');}catch(_0x54b8c7){}hideSoundPermission(),toast(_0x385c67(0x277));}function onPlayerReady(_0x55f61d){const _0x2a45db=_0x17450c;try{const _0x1bac6=ytPlayer&&ytPlayer[_0x2a45db(0x443)]?ytPlayer['getIframe']():null;_0x1bac6&&_0x1bac6[_0x2a45db(0x350)](_0x2a45db(0x29b),_0x2a45db(0x4b7));}catch(_0xa03c51){}try{if(ytPlayer&&ytPlayer[_0x2a45db(0x225)])ytPlayer[_0x2a45db(0x225)](data&&data[_0x2a45db(0x4a9)]&&data['settings'][_0x2a45db(0x2ac)]||0x50);}catch(_0x40ded7){}try{const _0x8899ed=getActiveVideoId&&getActiveVideoId();if(_0x8899ed&&ytPlayer&&ytPlayer['mute']&&ytPlayer[_0x2a45db(0x2f2)]){ytPlayer[_0x2a45db(0x426)](),ytPlayer[_0x2a45db(0x2f2)](),_ytPrimed=!![];const _0x217e3d=()=>{const _0x279a93=_0x2a45db;if(_ytUnlocked)return;try{unlockAudioChain();}catch(_0x2e05fd){}window[_0x279a93(0x411)](_0x279a93(0x492),_0x217e3d,!![]),window[_0x279a93(0x411)](_0x279a93(0x4b2),_0x217e3d,!![]);};window['addEventListener']('pointerdown',_0x217e3d,!![]),window['addEventListener'](_0x2a45db(0x4b2),_0x217e3d,!![]),showSoundPermission();}}catch(_0x4ee9c4){}updateYouTubePlayer();}function onPlayerStateChange(_0x5055a1){const _0x251897=_0x17450c,_0x1a9197=$(_0x251897(0x2af));_0x5055a1[_0x251897(0x249)]==YT[_0x251897(0x316)][_0x251897(0x439)]?(_0x1a9197[_0x251897(0x48c)]='‚è∏Ô∏è',hideSoundPermission()):_0x1a9197[_0x251897(0x48c)]='‚ñ∂Ô∏è';if(_0x5055a1[_0x251897(0x249)]===YT[_0x251897(0x316)][_0x251897(0x3d1)]){if(!ytUserPaused)ytPlayer[_0x251897(0x2f2)]();}}async function ytFadeTo(_0x3c5031,_0x3b447c=0xfa){const _0x1a8c9d=_0x17450c;try{if(!ytPlayer||!ytPlayer[_0x1a8c9d(0x282)]||!ytPlayer[_0x1a8c9d(0x225)])return;ytPlayer[_0x1a8c9d(0x334)]();const _0x19b099=ytPlayer[_0x1a8c9d(0x282)](),_0x68c023=_0x3c5031-_0x19b099;if(Math[_0x1a8c9d(0x288)](_0x68c023)<0x1||_0x3b447c<=0x0){ytPlayer['setVolume'](_0x3c5031);return;}const _0x93197c=performance['now']();await new Promise(_0x5eb69f=>{const _0x18ae8b=_0x4189ec=>{const _0x8fb53b=_0x2dbf,_0x1ed2b6=Math[_0x8fb53b(0x420)](0x1,(_0x4189ec-_0x93197c)/_0x3b447c),_0x4434a6=Math[_0x8fb53b(0x256)](_0x19b099+_0x68c023*_0x1ed2b6);ytPlayer[_0x8fb53b(0x225)](_0x4434a6);if(_0x1ed2b6<0x1)requestAnimationFrame(_0x18ae8b);else _0x5eb69f();};requestAnimationFrame(_0x18ae8b);});}catch(_0x3648f7){}}async function ytFadeInPlay(_0x5384e1=0xdc){const _0x2c2672=_0x17450c;try{const _0x485663=Math[_0x2c2672(0x3e8)](0x0,Math[_0x2c2672(0x420)](0x64,data&&data[_0x2c2672(0x4a9)]&&data['settings'][_0x2c2672(0x2ac)]||0x50));if(!IS_FILE_PROTOCOL){if(!ytPlayer)return;ytPlayer[_0x2c2672(0x334)](),ytPlayer[_0x2c2672(0x2f2)]();try{ytPlayer[_0x2c2672(0x225)](0x0);}catch(_0x350380){}await ytFadeTo(_0x485663,_0x5384e1);}else{const _0x55e2c8=getActiveVideoId();_0x55e2c8&&fallbackLoadVideo(_0x55e2c8,{'autoplay':0x1,'mute':0x0});}}catch(_0x27a13e){}}async function ytFadeOutPause(_0x598fda=0xb4){const _0x56e07e=_0x17450c;try{const _0x554dc0=Math[_0x56e07e(0x3e8)](0x0,Math[_0x56e07e(0x420)](0x64,data&&data[_0x56e07e(0x4a9)]&&data[_0x56e07e(0x4a9)][_0x56e07e(0x2ac)]||0x50));if(!IS_FILE_PROTOCOL){if(!ytPlayer)return;await ytFadeTo(0x0,_0x598fda);try{ytPlayer[_0x56e07e(0x4e1)](),ytPlayer[_0x56e07e(0x225)](_0x554dc0);}catch(_0x34ca81){}}else try{fallbackPause();}catch(_0x61c07c){}}catch(_0xadb723){}}async function updateYouTubePlayer(){const _0x4fe2d9=_0x17450c,_0x549c46=getActiveVideoId();if(data['settings'][_0x4fe2d9(0x400)]&&_0x549c46){const _0x477628='https://img.youtube.com/vi/'+_0x549c46+_0x4fe2d9(0x321),_0x21604e=new Image();_0x21604e[_0x4fe2d9(0x4b8)]=async()=>{const _0x2d9e63=_0x4fe2d9;data[_0x2d9e63(0x4a9)][_0x2d9e63(0x2ec)]=_0x477628,await saveData(),applyCustomBg();},_0x21604e['onerror']=async()=>{const _0x281115=_0x4fe2d9,_0x285733='https://img.youtube.com/vi/'+_0x549c46+_0x281115(0x23a);data[_0x281115(0x4a9)][_0x281115(0x2ec)]=_0x285733,await saveData(),applyCustomBg();},_0x21604e[_0x4fe2d9(0x35b)]=_0x477628;}else!_0x549c46&&(data[_0x4fe2d9(0x4a9)]['customBg']='',await saveData(),applyCustomBg());if(IS_FILE_PROTOCOL){if(!_0x549c46){fallbackStop(),hideSoundPermission();return;}const _0x330bc6=_ytUnlocked?0x0:0x1;fallbackLoadVideo(_0x549c46,{'autoplay':0x1,'mute':_0x330bc6});!_ytUnlocked&&showSoundPermission();return;}if(!ytPlayer||!ytPlayer[_0x4fe2d9(0x419)]){try{ensureYouTubeAPI();}catch(_0x58dd54){}return;}if(!_0x549c46){if(ytPlayer['stopVideo'])ytPlayer[_0x4fe2d9(0x38f)]();hideSoundPermission();return;}ytPlayer[_0x4fe2d9(0x419)](_0x549c46),ytPlayer[_0x4fe2d9(0x225)](data['settings'][_0x4fe2d9(0x2ac)]);}function toggleYtSound(){const _0x32cc65=_0x17450c;if(!_ytUnlocked){try{ensureAudio();}catch(_0x12f37c){}try{unlockAudioChain();}catch(_0x51be23){}return;}if(IS_FILE_PROTOCOL){const _0x46d196=getActiveVideoId();if(!ytFallbackFrame||!ytFallbackFrame[_0x32cc65(0x486)]){if(!_0x46d196){toast('Ch∆∞a\x20c√≥\x20link\x20h·ª£p\x20l·ªá.\x20D√°n\x20link\x20r·ªìi\x20b·∫•m\x20‚ñ∂Ô∏è.');return;}fallbackLoadVideo(_0x46d196,{'autoplay':0x1,'mute':0x0}),ytFallbackIsPlaying=!![];try{const _0x31608a=document[_0x32cc65(0x1f8)]('btnToggleYtSound');if(_0x31608a)_0x31608a['textContent']='‚è∏Ô∏è';}catch(_0x5a8bdc){}toast('ƒêang\x20ph√°t\x20nh·∫°c\x20n·ªÅn...');return;}if(ytFallbackIsPlaying)fallbackPostMessage('pauseVideo'),ytFallbackIsPlaying=![],toast(_0x32cc65(0x4c8));else{if(!_0x46d196){toast(_0x32cc65(0x4d6));return;}fallbackPostMessage(_0x32cc65(0x2f2)),ytFallbackIsPlaying=!![],toast('ƒêang\x20ph√°t\x20nh·∫°c\x20n·ªÅn...');}try{const _0x397ffb=document[_0x32cc65(0x1f8)]('btnToggleYtSound');if(_0x397ffb)_0x397ffb['textContent']=ytFallbackIsPlaying?'‚è∏Ô∏è':'‚ñ∂Ô∏è';}catch(_0xb1dfe){}return;}if(!ytPlayer||typeof ytPlayer[_0x32cc65(0x3bb)]!=='function'){try{ensureYouTubeAPI();}catch(_0x1e3ede){}return;}const _0x4a2457=ytPlayer['getPlayerState']();_0x4a2457===YT[_0x32cc65(0x316)][_0x32cc65(0x439)]||_0x4a2457===YT[_0x32cc65(0x316)][_0x32cc65(0x47f)]?(ytFadeOutPause(),ytUserPaused=!![],toast(_0x32cc65(0x4c8))):(ytFadeInPlay(),ytUserPaused=![],toast(_0x32cc65(0x4dc)));}function bindEvents(){const _0x43fbe2=_0x17450c;try{const _0x4ade5b=document[_0x43fbe2(0x48d)](_0x43fbe2(0x2a5));_0x4ade5b&&(_0x4ade5b[_0x43fbe2(0x1ef)]='H√£y\x20b·∫Øt\x20ƒë·∫ßu\x20b·∫±ng\x20c√°ch\x20ch·ªçn\x20m·ªôt\x20<strong>Ch·ªß\x20ƒë·ªÅ\x20con</strong>\x20ho·∫∑c\x20t·∫°o\x20Ch·ªß\x20ƒë·ªÅ.');}catch(_0x47c02e){}on($(_0x43fbe2(0x463)),_0x43fbe2(0x4a4),toggleBackgroundView),on($('#btnMilestoneClose'),'click',()=>{const _0x36acb3=_0x43fbe2;$('#modalMilestone')['classList'][_0x36acb3(0x393)](_0x36acb3(0x3ae));try{releaseFocus();}catch(_0x1f1789){}}),on($(_0x43fbe2(0x4cc)),_0x43fbe2(0x4a4),()=>showInputModal(_0x43fbe2(0x48e),async _0x2ff877=>{if(!_0x2ff877)return;data['topics']['push']({'id':uid('t'),'name':_0x2ff877,'subtopics':[]}),await saveData(),renderTopics();})),on($(_0x43fbe2(0x266)),_0x43fbe2(0x4a4),()=>storageManager[_0x43fbe2(0x26c)](data)),on($(_0x43fbe2(0x4ef)),_0x43fbe2(0x315),_0x55a0c9=>{const _0x53f1aa=_0x43fbe2,_0x521f71=_0x55a0c9['target'][_0x53f1aa(0x372)][0x0];if(!_0x521f71)return;storageManager['importData'](_0x521f71)[_0x53f1aa(0x3ff)](async _0x2bfa9c=>{data=_0x2bfa9c,normalizeDataStructure(data),await ensureValidSelection(),await seedAchievedMilestones(),toast('ƒê√£\x20nh·∫≠p\x20d·ªØ\x20li·ªáu\x20th√†nh\x20c√¥ng!'),renderAll();})[_0x53f1aa(0x423)](_0x356183=>toast('Nh·∫≠p\x20th·∫•t\x20b·∫°i:\x20'+_0x356183['message'])),_0x55a0c9[_0x53f1aa(0x4a2)][_0x53f1aa(0x406)]=null;}),on($(_0x43fbe2(0x2bc)),'click',()=>{const _0xe19d7f=_0x43fbe2,_0x2a549a=$(_0xe19d7f(0x21c)),_0x3615d4=_0x2a549a?_0x2a549a['value']:'';if(!_0x3615d4){toast('Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20b·∫£n\x20sao\x20l∆∞u.');return;}showConfirmModal(_0xe19d7f(0x4fa),_0xe19d7f(0x26f)+new Date(_0x3615d4)[_0xe19d7f(0x34b)]()+_0xe19d7f(0x484),_0x2dabbe=>{const _0x74b667=_0xe19d7f;_0x2dabbe&&storageManager[_0x74b667(0x349)](_0x3615d4)[_0x74b667(0x3ff)](_0x7ea104=>{const _0x4c6281=_0x74b667;data=_0x7ea104,toast(_0x4c6281(0x4e8)),setTimeout(()=>window['location'][_0x4c6281(0x268)](),0x5dc);})[_0x74b667(0x423)](_0x3c80a2=>{const _0x3edd0f=_0x74b667;toast(_0x3edd0f(0x3a1)+_0x3c80a2['message']);});});}),on($(_0x43fbe2(0x1f5)),_0x43fbe2(0x2ed),_0x48862f=>{const _0x5644f5=_0x43fbe2,_0x4f9d5e=_0x48862f[_0x5644f5(0x4a2)][_0x5644f5(0x406)];applyTheme(_0x4f9d5e);if(_0x4f9d5e===_0x5644f5(0x244)||_0x4f9d5e==='pastel'){const _0x45c9ed=$(_0x5644f5(0x28d));_0x45c9ed&&(_0x45c9ed[_0x5644f5(0x1fc)]=![],toast(_0x5644f5(0x1fd),0x7d0));try{document[_0x5644f5(0x219)][_0x5644f5(0x3a2)]['setProperty']('--bg-image',_0x5644f5(0x39a));}catch(_0x1c6451){}}else{const _0x1a9a3b=$(_0x5644f5(0x28d));_0x1a9a3b&&(_0x1a9a3b[_0x5644f5(0x1fc)]=!![]);try{updateYouTubePlayer();}catch(_0x47bf97){}}}),on($('#btnSettings'),'click',openSettings),on($('#btnHelpCreateTopic'),_0x43fbe2(0x4a4),()=>{const _0x203188=_0x43fbe2;switchView(_0x203188(0x3b3)),$('#btnAddTopic')[_0x203188(0x4a4)]();}),on($(_0x43fbe2(0x4d1)),_0x43fbe2(0x4a4),()=>{const _0x450fa7=_0x43fbe2;renderDashboard(),$('#modalDashboard')['classList'][_0x450fa7(0x30f)](_0x450fa7(0x3ae));}),on($(_0x43fbe2(0x217)),_0x43fbe2(0x4a4),()=>{const _0x3b35f7=_0x43fbe2;$(_0x3b35f7(0x4ee))[_0x3b35f7(0x279)][_0x3b35f7(0x393)](_0x3b35f7(0x3ae));}),on($(_0x43fbe2(0x4f5)),_0x43fbe2(0x4a4),closeSettings),on($(_0x43fbe2(0x2d9)),_0x43fbe2(0x4a4),saveSettings),on($('#btnDefaults'),_0x43fbe2(0x4a4),setDefaults),on($('#btnTestSound'),_0x43fbe2(0x4a4),()=>{const _0x2dfc7b=_0x43fbe2;ensureAudio(),playSound(_0x2dfc7b(0x2fc));}),on($('#btnToggleCustomSounds'),_0x43fbe2(0x4a4),_0x398bad=>{const _0x455d5c=_0x43fbe2;_0x398bad['preventDefault']();const _0x19e1b8=$('#customSoundsContainer');if(_0x19e1b8)_0x19e1b8[_0x455d5c(0x279)][_0x455d5c(0x44c)]('hidden');}),on($('#btnSaveNote'),_0x43fbe2(0x4a4),async()=>{const _0x2c4604=_0x43fbe2,_0x57cf52=getCurrentSubtopic();if(!_0x57cf52)return;const _0x1bd7f8=pendingNoteSessionId,_0x3dbb9d=_0x57cf52[_0x2c4604(0x20d)]['find'](_0x265aee=>_0x265aee['id']===_0x1bd7f8);_0x3dbb9d&&(_0x3dbb9d['note']=$(_0x2c4604(0x449))[_0x2c4604(0x406)][_0x2c4604(0x404)](),await saveData(),renderStatsHistory(),toast(_0x2c4604(0x4e2))),closeNoteModal();}),on($(_0x43fbe2(0x49a)),_0x43fbe2(0x4a4),()=>closeNoteModal()),on($(_0x43fbe2(0x2be)),_0x43fbe2(0x4a4),addGeneralNote),on($(_0x43fbe2(0x45d)),_0x43fbe2(0x4a4),handleSummarizeNote),on($(_0x43fbe2(0x4e3)),_0x43fbe2(0x4a4),handleSendMessage),on($('#chatInput'),_0x43fbe2(0x4b2),_0x723daf=>{const _0x30e70f=_0x43fbe2;if(_0x723daf[_0x30e70f(0x2f4)]===_0x30e70f(0x4d2))handleSendMessage();}),$$(_0x43fbe2(0x2e6))[_0x43fbe2(0x4a0)](_0x58320b=>{const _0x48415c=_0x43fbe2;on(_0x58320b,_0x48415c(0x4a4),()=>{const _0x26b7aa=_0x48415c,_0x5de6b4=_0x58320b['dataset'][_0x26b7aa(0x42a)];$(_0x26b7aa(0x45c))[_0x26b7aa(0x406)]=_0x5de6b4,$(_0x26b7aa(0x45c))[_0x26b7aa(0x310)]();});}),on($(_0x43fbe2(0x3b8)),_0x43fbe2(0x4a4),clearChat),on($(_0x43fbe2(0x455)),_0x43fbe2(0x4a4),addSubtopicTask),on($(_0x43fbe2(0x218)),_0x43fbe2(0x4b2),_0x328bb1=>{const _0x31b2c8=_0x43fbe2;if(_0x328bb1[_0x31b2c8(0x2f4)]==='Enter')addSubtopicTask();}),on($(_0x43fbe2(0x2af)),'click',toggleYtSound),on($(_0x43fbe2(0x483)),_0x43fbe2(0x4a4),()=>{ensureAudio(),unlockAudioChain();}),on($(_0x43fbe2(0x2bd)),_0x43fbe2(0x2ed),_0x27df64=>{const _0xbe43d3=_0x43fbe2,_0x4a894f=parseInt(_0x27df64[_0xbe43d3(0x4a2)][_0xbe43d3(0x406)],0xa);ytPlayer&&ytPlayer[_0xbe43d3(0x225)]&&ytPlayer['setVolume'](_0x4a894f);}),on($(_0x43fbe2(0x387)),'input',handleYoutubeUrlInput),$$(_0x43fbe2(0x39c))[_0x43fbe2(0x4a0)](_0x2fa746=>{const _0x5e45a3=_0x43fbe2;_0x2fa746[_0x5e45a3(0x45b)](_0x5e45a3(0x4a4),()=>{const _0x4ee73f=_0x5e45a3,_0x307160=_0x2fa746[_0x4ee73f(0x32d)]['view'],_0x577460=data?.[_0x4ee73f(0x4a9)]?.['currentView']||_0x4ee73f(0x3f3);if(_0x577460===_0x307160&&_0x307160!==_0x4ee73f(0x3f3))switchView(_0x4ee73f(0x3f3));else switchView(_0x307160);});}),$$(_0x43fbe2(0x2c5))[_0x43fbe2(0x4a0)](_0x686c5f=>{const _0x4ba361=_0x43fbe2;_0x686c5f[_0x4ba361(0x45b)](_0x4ba361(0x4a4),()=>{const _0x5e3e45=_0x4ba361,_0x15edae=_0x686c5f[_0x5e3e45(0x32d)]['tab'],_0x50f548=_0x686c5f[_0x5e3e45(0x24c)]('.aux-panel,\x20.modal-card');if(!_0x50f548)return;_0x50f548[_0x5e3e45(0x283)]('.tab-btn')['forEach'](_0x9f8daf=>_0x9f8daf[_0x5e3e45(0x279)]['remove']('active')),_0x686c5f[_0x5e3e45(0x279)][_0x5e3e45(0x30f)](_0x5e3e45(0x357)),_0x50f548[_0x5e3e45(0x283)](_0x5e3e45(0x312))[_0x5e3e45(0x4a0)](_0x2a55b4=>{const _0x26313b=_0x5e3e45;_0x2a55b4[_0x26313b(0x279)][_0x26313b(0x393)](_0x26313b(0x357)),_0x2a55b4['style'][_0x26313b(0x2c1)]=_0x26313b(0x39a);});const _0x17eedf=_0x50f548['querySelector']('#'+_0x15edae);_0x17eedf&&(_0x17eedf['classList'][_0x5e3e45(0x30f)](_0x5e3e45(0x357)),_0x17eedf[_0x5e3e45(0x3a2)][_0x5e3e45(0x2c1)]=_0x5e3e45(0x458),_0x50f548['closest'](_0x5e3e45(0x3ca))&&(_0x17eedf[_0x5e3e45(0x3a2)]['display']=_0x5e3e45(0x30b)));});});const _0x5904b1=$(_0x43fbe2(0x414));function _0xd3232b(_0x28385b,_0x1051d5=null){const _0x28361a=_0x43fbe2;try{document[_0x28361a(0x220)](_0x28361a(0x243),![],!![]);}catch(_0x5ce704){}try{document[_0x28361a(0x220)](_0x28385b,![],_0x1051d5);}catch(_0x1211c2){}if(_0x5904b1)_0x5904b1[_0x28361a(0x310)]();}on($(_0x43fbe2(0x34a)),_0x43fbe2(0x4a4),()=>_0xd3232b(_0x43fbe2(0x20b))),on($(_0x43fbe2(0x499)),_0x43fbe2(0x4a4),()=>_0xd3232b('italic')),on($(_0x43fbe2(0x2e7)),_0x43fbe2(0x4a4),()=>_0xd3232b(_0x43fbe2(0x1f1),_0x43fbe2(0x299))),on($(_0x43fbe2(0x2c7)),_0x43fbe2(0x4a4),()=>_0xd3232b('insertOrderedList')),on($(_0x43fbe2(0x48f)),_0x43fbe2(0x4a4),()=>_0xd3232b(_0x43fbe2(0x3df)));const _0x3fb250=$(_0x43fbe2(0x2aa)),_0x38e161=$(_0x43fbe2(0x38e));on($(_0x43fbe2(0x3c1)),_0x43fbe2(0x4a4),_0x3888ec=>{const _0x4e4d2f=_0x43fbe2;if(!_0x38e161)return;_0x3888ec[_0x4e4d2f(0x2a0)](),_0x38e161[_0x4e4d2f(0x279)][_0x4e4d2f(0x44c)]('hidden');}),$$(_0x43fbe2(0x235))[_0x43fbe2(0x4a0)](_0x22d9ba=>{const _0x277c79=_0x43fbe2;on(_0x22d9ba,_0x277c79(0x4a4),_0x56215b=>{const _0x1568ab=_0x277c79;_0x56215b[_0x1568ab(0x441)]();const _0x9bc823=_0x22d9ba['dataset'][_0x1568ab(0x2d1)]||'';let _0x383599=_0x9bc823;try{const _0x4311a3=_0x9bc823[_0x1568ab(0x2ae)](/--[a-zA-Z0-9_-]+/);if(_0x4311a3)_0x383599=getComputedStyle(document[_0x1568ab(0x219)])[_0x1568ab(0x226)](_0x4311a3[0x0])[_0x1568ab(0x404)]();}catch(_0x1af3dc){}_0xd3232b('foreColor',_0x383599);if(_0x38e161)_0x38e161[_0x1568ab(0x279)][_0x1568ab(0x30f)](_0x1568ab(0x454));});}),on(document,_0x43fbe2(0x4a4),_0x372059=>{const _0x466b3d=_0x43fbe2;if(!_0x3fb250||!_0x38e161)return;!_0x3fb250[_0x466b3d(0x4ea)](_0x372059['target'])&&!_0x38e161[_0x466b3d(0x279)]['contains'](_0x466b3d(0x454))&&_0x38e161[_0x466b3d(0x279)][_0x466b3d(0x30f)](_0x466b3d(0x454));});function _0x593c5f(_0x1ed54b){const _0x55473e=_0x43fbe2,_0x166b09=getCurrentSubtopic();if(!_0x166b09){toast('Vui\x20l√≤ng\x20ch·ªçn\x20m·ªôt\x20Ch·ªß\x20ƒë·ªÅ\x20con\x20tr∆∞·ªõc.');return;}_0x166b09[_0x55473e(0x4c1)]=Array[_0x55473e(0x47e)](_0x166b09[_0x55473e(0x4c1)])?_0x166b09[_0x55473e(0x4c1)]:[];const _0x387427=_0x166b09['methods'],_0x45ad04=_0x1ed54b?_0x387427[_0x55473e(0x28c)](_0x98347a=>_0x98347a['id']===_0x1ed54b):null;$('#methodEditorId')[_0x55473e(0x406)]=_0x45ad04&&_0x45ad04['id']||'',$('#methodEditorTitle')[_0x55473e(0x48c)]=_0x45ad04?_0x55473e(0x471):_0x55473e(0x261),$(_0x55473e(0x351))['value']=_0x45ad04&&_0x45ad04[_0x55473e(0x241)]||'';const _0x5c1b84=$(_0x55473e(0x414));if(_0x5c1b84)_0x5c1b84[_0x55473e(0x1ef)]=_0x45ad04&&_0x45ad04[_0x55473e(0x2e0)]||'';$(_0x55473e(0x2a8))[_0x55473e(0x279)][_0x55473e(0x30f)](_0x55473e(0x3ae));try{trapFocus($(_0x55473e(0x2a8)));}catch(_0x23acf5){}try{const _0x37ee7e=$(_0x55473e(0x3cb));if(_0x37ee7e){const _0x1de0d5=!!(data?.[_0x55473e(0x4a9)]?.['apiKey']&&data[_0x55473e(0x4a9)][_0x55473e(0x27a)]['trim']());_0x37ee7e[_0x55473e(0x2e9)]=!_0x1de0d5,_0x37ee7e[_0x55473e(0x241)]=_0x1de0d5?_0x55473e(0x3d4):'Vui\x20l√≤ng\x20th√™m\x20Gemini\x20API\x20Key\x20trong\x20C√†i\x20ƒë·∫∑t\x20ƒë·ªÉ\x20s·ª≠\x20d·ª•ng\x20t√≠nh\x20nƒÉng\x20n√†y.';}}catch(_0x2e184e){}}on($(_0x43fbe2(0x2fa)),'click',()=>{const _0x5085e6=_0x43fbe2;$(_0x5085e6(0x2a8))[_0x5085e6(0x279)][_0x5085e6(0x393)](_0x5085e6(0x3ae));try{releaseFocus();}catch(_0x37ddd0){}}),on($(_0x43fbe2(0x4e4)),_0x43fbe2(0x4a4),async()=>{const _0x57bb00=_0x43fbe2,_0x786784=getCurrentSubtopic();if(!_0x786784){toast(_0x57bb00(0x1f9));return;}_0x786784['methods']=Array[_0x57bb00(0x47e)](_0x786784[_0x57bb00(0x4c1)])?_0x786784[_0x57bb00(0x4c1)]:[];const _0x48bc02=$('#methodEditorId')[_0x57bb00(0x406)]||uid('m'),_0x27c9b3=($(_0x57bb00(0x351))[_0x57bb00(0x406)]||'')[_0x57bb00(0x404)](),_0x4b85ba=$('#methodEditorContentInput'),_0x3b5d59=_0x4b85ba?_0x4b85ba[_0x57bb00(0x1ef)]||'':'',_0x1298bc=_0x786784[_0x57bb00(0x4c1)][_0x57bb00(0x4ec)](_0x4a1299=>_0x4a1299['id']===_0x48bc02),_0xbb3905={'id':_0x48bc02,'title':_0x27c9b3,'content':_0x3b5d59};if(_0x1298bc>=0x0)_0x786784['methods'][_0x1298bc]=_0xbb3905;else _0x786784[_0x57bb00(0x4c1)][_0x57bb00(0x253)](_0xbb3905);await storageManager[_0x57bb00(0x476)]('subtopics',_0x786784),renderMethods(),$(_0x57bb00(0x2a8))[_0x57bb00(0x279)]['remove']('show');try{releaseFocus();}catch(_0x51bd47){}}),on($(_0x43fbe2(0x3cb)),_0x43fbe2(0x4a4),async()=>{const _0x1402ba=_0x43fbe2,_0x521137=$(_0x1402ba(0x414));if(!_0x521137)return;const _0xc5752e=(_0x521137[_0x1402ba(0x48c)]||'')[_0x1402ba(0x404)]();if(!_0xc5752e||_0xc5752e['length']<0x14){toast(_0x1402ba(0x468));return;}const _0x4356ee=$('#btnAutoFormat');_0x4356ee&&(_0x4356ee[_0x1402ba(0x2e9)]=!![],_0x4356ee['innerHTML']='<div\x20class=\x22spinner\x22></div>');const _0x48a3ac=_0x1402ba(0x274)+_0xc5752e+'\x22',_0x559f11=await callGeminiAPI(_0x48a3ac);_0x559f11?(_0x521137[_0x1402ba(0x1ef)]=_0x559f11,toast(_0x1402ba(0x49c))):toast(_0x1402ba(0x222)),_0x4356ee&&(_0x4356ee[_0x1402ba(0x2e9)]=![],_0x4356ee[_0x1402ba(0x1ef)]=_0x1402ba(0x31f));}),on($('#btnAddMethod'),_0x43fbe2(0x4a4),()=>{const _0x11e78c=_0x43fbe2;if(!getCurrentSubtopic()){toast(_0x11e78c(0x1f9));return;}_0x593c5f();});const _0x5e8642=document[_0x43fbe2(0x48d)](_0x43fbe2(0x4b5));_0x5e8642&&_0x5e8642[_0x43fbe2(0x45b)](_0x43fbe2(0x4a4),_0x2ae459=>{const _0x1f9d85=_0x43fbe2,_0x221e80=_0x2ae459[_0x1f9d85(0x4a2)][_0x1f9d85(0x24c)]&&_0x2ae459[_0x1f9d85(0x4a2)][_0x1f9d85(0x24c)](_0x1f9d85(0x403)),_0x18aad9=!_0x221e80&&_0x2ae459[_0x1f9d85(0x4a2)][_0x1f9d85(0x24c)]&&_0x2ae459[_0x1f9d85(0x4a2)][_0x1f9d85(0x24c)](_0x1f9d85(0x21b));if(_0x221e80){_0x2ae459[_0x1f9d85(0x441)](),_0x2ae459['stopPropagation']();const _0x3cb247=_0x221e80[_0x1f9d85(0x32d)]['id'];if(_0x3cb247)_0x593c5f(_0x3cb247);return;}if(_0x18aad9){_0x2ae459['preventDefault'](),_0x2ae459[_0x1f9d85(0x2a0)]();const _0x31d1cf=_0x18aad9[_0x1f9d85(0x32d)]['id'];if(!_0x31d1cf)return;const _0x677048=getCurrentSubtopic();if(!_0x677048)return;_0x677048[_0x1f9d85(0x4c1)]=Array[_0x1f9d85(0x47e)](_0x677048[_0x1f9d85(0x4c1)])?_0x677048[_0x1f9d85(0x4c1)]:[];const _0x476d2c=_0x677048[_0x1f9d85(0x4c1)][_0x1f9d85(0x28c)](_0x55b9d2=>_0x55b9d2['id']===_0x31d1cf);if(!_0x476d2c)return;showConfirmModal('X√°c\x20nh·∫≠n\x20x√≥a',_0x1f9d85(0x2db)+(_0x476d2c[_0x1f9d85(0x241)]||'')+'\x22?',async _0x25d31f=>{const _0x5ffe1b=_0x1f9d85;if(!_0x25d31f)return;_0x677048['methods']=_0x677048[_0x5ffe1b(0x4c1)][_0x5ffe1b(0x3a0)](_0x483d60=>_0x483d60['id']!==_0x31d1cf),await storageManager[_0x5ffe1b(0x476)]('subtopics',_0x677048),renderMethods();});}});$$(_0x43fbe2(0x410))['forEach'](_0x43211f=>{const _0x3ef43a=_0x43fbe2;_0x43211f[_0x3ef43a(0x45b)](_0x3ef43a(0x4a4),()=>{const _0x19a587=_0x3ef43a;editingPreset=_0x43211f[_0x19a587(0x32d)]['presetTarget'],highlightPresetSelector(),loadEditingPresetFields();});}),$$(_0x43fbe2(0x205))[_0x43fbe2(0x4a0)](_0x3b9d73=>{const _0x451953=_0x43fbe2;_0x3b9d73[_0x451953(0x45b)](_0x451953(0x4a4),_0xf761f5=>{const _0x1514ed=_0x451953,_0x384249=_0xf761f5[_0x1514ed(0x4a2)][_0x1514ed(0x32d)][_0x1514ed(0x323)],_0x5ccfd8=data[_0x1514ed(0x4a9)][_0x1514ed(0x323)];if(_0x384249===_0x5ccfd8)return;timer[_0x1514ed(0x24d)]!==_0x1514ed(0x4b6)?showConfirmModal(_0x1514ed(0x291),_0x1514ed(0x1f3)+_0x384249+_0x1514ed(0x37b),_0x1e5e8e=>{const _0x3f5f7a=_0x1514ed;_0x1e5e8e&&(timer['reset'](),timer[_0x3f5f7a(0x4ad)](_0x384249),renderAll(),toast(_0x3f5f7a(0x4f6)+_0x384249+'.'));}):(timer[_0x1514ed(0x4ad)](_0x384249),renderAll(),toast(_0x1514ed(0x4f6)+_0x384249+'.'));});}),on($(_0x43fbe2(0x2b7)),_0x43fbe2(0x4a4),()=>timer[_0x43fbe2(0x23e)]()),on($(_0x43fbe2(0x464)),'click',()=>timer['finishFlowSession']()),on($(_0x43fbe2(0x355)),'click',()=>timer[_0x43fbe2(0x35e)]()),on($('#btnResume'),_0x43fbe2(0x4a4),()=>timer[_0x43fbe2(0x3d5)]()),on($(_0x43fbe2(0x469)),_0x43fbe2(0x4a4),()=>timer[_0x43fbe2(0x4ac)]()),on($(_0x43fbe2(0x2ad)),_0x43fbe2(0x4a4),()=>timer[_0x43fbe2(0x24a)]()),on($(_0x43fbe2(0x245)),'click',()=>timer[_0x43fbe2(0x384)]()),on($(_0x43fbe2(0x2d6)),_0x43fbe2(0x315),_0xb72d9c=>{const _0x425a0c=_0x43fbe2;handleFileUpload(_0xb72d9c[_0x425a0c(0x4a2)][_0x425a0c(0x372)][0x0],async _0x184ac0=>{const _0x35ca94=_0x425a0c;data[_0x35ca94(0x4a9)]['customBg']=_0x184ac0,await saveData(),applyCustomBg(),toast(_0x35ca94(0x289));}),_0xb72d9c[_0x425a0c(0x4a2)]['value']=null;}),on($(_0x43fbe2(0x4ab)),_0x43fbe2(0x4a4),async()=>{const _0xc33a6b=_0x43fbe2;data[_0xc33a6b(0x4a9)][_0xc33a6b(0x2ec)]='',data['settings']['useYtThumbnailAsBg']=![],await saveData(),applyCustomBg(),toast('ƒê√£\x20x√≥a\x20h√¨nh\x20n·ªÅn\x20t√πy\x20ch·ªânh.'),$(_0xc33a6b(0x3ca))[_0xc33a6b(0x279)][_0xc33a6b(0x4ea)](_0xc33a6b(0x3ae))&&openSettings();}),on($(_0x43fbe2(0x26b)),_0x43fbe2(0x315),_0x354862=>{const _0x3cb895=_0x43fbe2;handleFileUpload(_0x354862[_0x3cb895(0x4a2)][_0x3cb895(0x372)][0x0],async _0x599e10=>{const _0x371678=_0x3cb895;data[_0x371678(0x4a9)]['customSounds']['work_end']=_0x599e10,await saveData(),toast(_0x371678(0x25f));}),_0x354862[_0x3cb895(0x4a2)][_0x3cb895(0x406)]=null;}),on($(_0x43fbe2(0x47d)),'change',_0x1215f6=>{const _0x3bcf79=_0x43fbe2;handleFileUpload(_0x1215f6[_0x3bcf79(0x4a2)][_0x3bcf79(0x372)][0x0],async _0x1e80c8=>{const _0x1423bc=_0x3bcf79;data[_0x1423bc(0x4a9)][_0x1423bc(0x37f)][_0x1423bc(0x413)]=_0x1e80c8,await saveData(),toast('ƒê√£\x20l∆∞u\x20√¢m\x20b√°o\x20h·∫øt\x20NGH·ªà\x20NG·∫ÆN.');}),_0x1215f6[_0x3bcf79(0x4a2)][_0x3bcf79(0x406)]=null;}),on($(_0x43fbe2(0x2fd)),'change',_0x349975=>{const _0x40f3cb=_0x43fbe2;handleFileUpload(_0x349975[_0x40f3cb(0x4a2)][_0x40f3cb(0x372)][0x0],async _0x297957=>{const _0x1ff5cf=_0x40f3cb;data['settings'][_0x1ff5cf(0x37f)][_0x1ff5cf(0x4aa)]=_0x297957,await saveData(),toast(_0x1ff5cf(0x378));}),_0x349975[_0x40f3cb(0x4a2)][_0x40f3cb(0x406)]=null;}),on($('#btnFullscreen'),'click',toggleFullScreen),document[_0x43fbe2(0x45b)]('fullscreenchange',updateFullscreenButton),window['addEventListener'](_0x43fbe2(0x4b2),_0x52c112=>{const _0x560528=_0x43fbe2,_0x1f85ba=_0x52c112[_0x560528(0x4a2)],_0x2b22f5=(_0x1f85ba[_0x560528(0x22b)]||'')[_0x560528(0x250)](),_0x369202=['input',_0x560528(0x237),_0x560528(0x3d2)][_0x560528(0x49f)](_0x2b22f5)||_0x1f85ba['isContentEditable'];if(_0x52c112[_0x560528(0x2f1)]==='Space'&&!_0x369202){_0x52c112[_0x560528(0x441)]();if(timer[_0x560528(0x24d)]==='idle'||timer[_0x560528(0x24d)]===_0x560528(0x3ba))timer[_0x560528(0x23e)]();else timer['pause']();}(_0x52c112[_0x560528(0x2f4)]==='n'||_0x52c112[_0x560528(0x2f4)]==='N')&&(!_0x369202&&(_0x52c112[_0x560528(0x441)](),timer[_0x560528(0x4ac)]()));if(_0x52c112['key']===_0x560528(0x265)){$$(_0x560528(0x2de))[_0x560528(0x4a0)](_0x109d46=>_0x109d46['classList']['remove'](_0x560528(0x3ae)));try{releaseFocus();}catch(_0x320270){}}if(_0x52c112[_0x560528(0x290)]&&!_0x369202){if(_0x52c112[_0x560528(0x2f4)]===_0x560528(0x3b9))_0x52c112[_0x560528(0x441)](),_0x5158cb(0x0,-0xa);else{if(_0x52c112['key']===_0x560528(0x373))_0x52c112[_0x560528(0x441)](),_0x5158cb(0x0,0xa);else{if(_0x52c112[_0x560528(0x2f4)]===_0x560528(0x4f8))_0x52c112[_0x560528(0x441)](),_0x5158cb(-0xa,0x0);else _0x52c112['key']===_0x560528(0x24f)&&(_0x52c112[_0x560528(0x441)](),_0x5158cb(0xa,0x0));}}}}),$$('.modal')[_0x43fbe2(0x4a0)](_0x48336c=>_0x48336c['addEventListener'](_0x43fbe2(0x4a4),_0x468bbb=>{const _0x565b20=_0x43fbe2;if(_0x468bbb&&_0x468bbb[_0x565b20(0x4a2)]&&_0x468bbb[_0x565b20(0x4a2)]['id']===_0x565b20(0x408))return;if(_0x468bbb[_0x565b20(0x4a2)]===_0x48336c){_0x48336c[_0x565b20(0x279)][_0x565b20(0x393)]('show');try{releaseFocus();}catch(_0x17746c){}}})),window[_0x43fbe2(0x45b)](_0x43fbe2(0x4a4),_0x5a4805=>{const _0x184488=_0x43fbe2;!_0x5a4805[_0x184488(0x4a2)]['closest'](_0x184488(0x3ab))&&!_0x5a4805[_0x184488(0x4a2)][_0x184488(0x24c)]('.actions-menu')&&closeAllMenus();});try{const _0x3cb562=document[_0x43fbe2(0x48d)](_0x43fbe2(0x20c));if(_0x3cb562)_0x3cb562[_0x43fbe2(0x45b)](_0x43fbe2(0x33b),closeAllMenus);}catch(_0x5ef93b){}try{window[_0x43fbe2(0x45b)](_0x43fbe2(0x33b),closeAllMenus,!![]);}catch(_0x336cfd){}window[_0x43fbe2(0x45b)](_0x43fbe2(0x22f),()=>timer[_0x43fbe2(0x37c)](!![]));try{const _0x1ea98a=Array['from'](document[_0x43fbe2(0x283)]('#view-methods\x20.method-item'));_0x1ea98a['length']&&_0x1ea98a[_0x43fbe2(0x4a0)](_0x14b73d=>{const _0xcc28cc=_0x43fbe2;_0x14b73d['addEventListener'](_0xcc28cc(0x44c),()=>{const _0x111677=_0xcc28cc;_0x14b73d['open']&&_0x1ea98a[_0x111677(0x4a0)](_0x5f508a=>{if(_0x5f508a!==_0x14b73d)_0x5f508a['open']=![];});});});}catch(_0x3d1dc5){}const _0x6384e7=$('#draggableTimer');let _0x3e986c=![],_0x4d7b4c,_0xe605d1;_0x6384e7&&(_0x6384e7[_0x43fbe2(0x45b)]('mousedown',_0x1269c1=>{const _0x352110=_0x43fbe2;_0x3e986c=!![];const _0x54cef5=_0x6384e7[_0x352110(0x3f2)]();_0x4d7b4c=_0x1269c1['clientX']-_0x54cef5[_0x352110(0x21e)],_0xe605d1=_0x1269c1[_0x352110(0x3f8)]-_0x54cef5[_0x352110(0x3c4)],_0x6384e7[_0x352110(0x3a2)]['transition']=_0x352110(0x39a);}),document['addEventListener']('mousemove',_0x25425a=>{const _0x186c41=_0x43fbe2;if(!_0x3e986c)return;let _0x3d601b=_0x25425a['clientX']-_0x4d7b4c,_0x2e1c67=_0x25425a['clientY']-_0xe605d1;const _0x33e014=window[_0x186c41(0x267)]-_0x6384e7['offsetWidth'],_0x48e1c5=window['innerHeight']-_0x6384e7[_0x186c41(0x21d)];_0x3d601b=Math[_0x186c41(0x3e8)](0x0,Math[_0x186c41(0x420)](_0x3d601b,_0x33e014)),_0x2e1c67=Math[_0x186c41(0x3e8)](0x0,Math[_0x186c41(0x420)](_0x2e1c67,_0x48e1c5)),_0x6384e7['style'][_0x186c41(0x21e)]=_0x3d601b+'px',_0x6384e7[_0x186c41(0x3a2)]['top']=_0x2e1c67+'px',_0x6384e7[_0x186c41(0x3a2)]['bottom']='auto',_0x6384e7['style']['right']='auto';}),document[_0x43fbe2(0x45b)](_0x43fbe2(0x374),()=>{const _0x1286b7=_0x43fbe2;if(!_0x3e986c)return;_0x3e986c=![],_0x6384e7[_0x1286b7(0x3a2)]['transition']='';}));function _0x29a776(_0x2b77bd){const _0x22af5b=_0x43fbe2,_0x23efc9=$(_0x22af5b(0x401));if(!_0x23efc9)return;_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x35a)]=_0x22af5b(0x386),_0x23efc9['style'][_0x22af5b(0x482)]='',_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x21e)]=_0x22af5b(0x3da),_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x3c4)]='auto',_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x472)]='auto',_0x23efc9['style'][_0x22af5b(0x37d)]=_0x22af5b(0x3da);const _0x21bbba=0x10;_0x2b77bd==='tl'&&(_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x21e)]=_0x21bbba+'px',_0x23efc9['style']['top']=_0x21bbba+'px'),_0x2b77bd==='tr'&&(_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x472)]=_0x21bbba+'px',_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x3c4)]=_0x21bbba+'px'),_0x2b77bd==='bl'&&(_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x21e)]=_0x21bbba+'px',_0x23efc9[_0x22af5b(0x3a2)]['bottom']=_0x21bbba+'px'),_0x2b77bd==='br'&&(_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x472)]=_0x21bbba+'px',_0x23efc9[_0x22af5b(0x3a2)][_0x22af5b(0x37d)]=_0x21bbba+'px');}function _0x5158cb(_0x547b78,_0xa9465){const _0xc5ba8a=_0x43fbe2,_0x55b478=$(_0xc5ba8a(0x401));if(!_0x55b478)return;const _0x2e883f=_0x55b478['getBoundingClientRect'](),_0x39b03e=Math[_0xc5ba8a(0x3e8)](0x0,Math[_0xc5ba8a(0x420)](_0x2e883f[_0xc5ba8a(0x21e)]+_0x547b78,window[_0xc5ba8a(0x267)]-_0x55b478[_0xc5ba8a(0x3e5)])),_0x54d1fb=Math[_0xc5ba8a(0x3e8)](0x0,Math[_0xc5ba8a(0x420)](_0x2e883f['top']+_0xa9465,window[_0xc5ba8a(0x303)]-_0x55b478[_0xc5ba8a(0x21d)]));_0x55b478[_0xc5ba8a(0x3a2)][_0xc5ba8a(0x21e)]=_0x39b03e+'px',_0x55b478[_0xc5ba8a(0x3a2)][_0xc5ba8a(0x3c4)]=_0x54d1fb+'px',_0x55b478['style']['right']=_0xc5ba8a(0x3da),_0x55b478[_0xc5ba8a(0x3a2)][_0xc5ba8a(0x37d)]='auto';}}function toggleBackgroundView(){const _0x56f830=_0x17450c,_0x144fdc=document[_0x56f830(0x219)];_0x144fdc['classList'][_0x56f830(0x44c)](_0x56f830(0x2df));const _0x67d76a=_0x144fdc[_0x56f830(0x279)][_0x56f830(0x4ea)](_0x56f830(0x2df)),_0x4f794b=$(_0x56f830(0x463));if(!_0x4f794b)return;_0x67d76a?(_0x4f794b[_0x56f830(0x241)]=_0x56f830(0x2d7),_0x4f794b['innerHTML']=_0x56f830(0x4fe)):(_0x4f794b[_0x56f830(0x241)]=_0x56f830(0x25e),_0x4f794b[_0x56f830(0x1ef)]=_0x56f830(0x2d8));}function updateMainViewVisibility(){const _0x17f608=_0x17450c,_0x370082=!!getCurrentSubtopic(),_0x4bc846=$(_0x17f608(0x341)),_0x417d15=$(_0x17f608(0x3bc));_0x417d15&&_0x417d15['classList'][_0x17f608(0x44c)](_0x17f608(0x454),_0x370082),_0x4bc846&&(_0x370082?_0x4bc846[_0x17f608(0x279)]['remove'](_0x17f608(0x38c)):_0x4bc846['classList'][_0x17f608(0x30f)](_0x17f608(0x38c)));}function updatePresetButtonsText(){const _0x5489b6=_0x17450c,_0x3abb8b=data[_0x5489b6(0x4a9)],_0x2bd73c=_0x3abb8b[_0x5489b6(0x34c)],_0x7dcf2e=_0x3abb8b[_0x5489b6(0x2ff)],_0x57e006=_0x3abb8b[_0x5489b6(0x3d9)][_0x5489b6(0x412)],_0x4b264c=_0x3abb8b[_0x5489b6(0x3d9)][_0x5489b6(0x436)],_0x1a7c61=$(_0x5489b6(0x23b)),_0x529eea=$(_0x5489b6(0x25c)),_0x4a1a30=$('#btnPresetC');_0x1a7c61&&(_0x1a7c61[_0x5489b6(0x48c)]=_0x2bd73c+'√ó'+_0x57e006+'\x20(A)'),_0x529eea&&(_0x529eea[_0x5489b6(0x48c)]=_0x7dcf2e+'√ó'+_0x4b264c+'\x20(B)'),_0x4a1a30&&(_0x4a1a30[_0x5489b6(0x48c)]=_0x5489b6(0x3ee));}function renderAll(){const _0xc576dd=_0x17450c;updatePresetButtonsText();const _0x395ae6=data['settings'][_0xc576dd(0x323)];$$(_0xc576dd(0x205))[_0xc576dd(0x4a0)](_0x5ae5ac=>{const _0x4d8d93=_0xc576dd,_0x313883=_0x5ae5ac['dataset'][_0x4d8d93(0x323)]===_0x395ae6;_0x5ae5ac[_0x4d8d93(0x279)][_0x4d8d93(0x44c)]('acc',_0x313883),_0x5ae5ac[_0x4d8d93(0x279)][_0x4d8d93(0x44c)](_0x4d8d93(0x3b7),!_0x313883),_0x5ae5ac['setAttribute']('aria-pressed',_0x313883);}),updateMainViewVisibility(),timer[_0xc576dd(0x4ad)](data[_0xc576dd(0x4a9)][_0xc576dd(0x323)],{'silent':!![]}),renderTopics(),renderContextBadge(),renderStatsHistory(),renderGeneralNotes(),renderMethods(),renderChat(),applyCustomBg(),applyPanelOpacity(),renderSubtopicTasks(),updateFullscreenButton(),switchView(data[_0xc576dd(0x4a9)][_0xc576dd(0x3cd)]);}function toggleFullScreen(){const _0x488a4c=_0x17450c;!document[_0x488a4c(0x4b1)]?document[_0x488a4c(0x3ea)][_0x488a4c(0x4a6)]()[_0x488a4c(0x423)](_0x4e32f2=>{const _0x2b745d=_0x488a4c;toast('L·ªói:\x20Kh√¥ng\x20th·ªÉ\x20b·∫≠t\x20ch·∫ø\x20ƒë·ªô\x20to√†n\x20m√†n\x20h√¨nh:\x20'+_0x4e32f2[_0x2b745d(0x391)]);}):document['exitFullscreen']&&document[_0x488a4c(0x44b)]();}function updateFullscreenButton(){const _0x36f106=_0x17450c,_0x4822ed=$(_0x36f106(0x29f));document[_0x36f106(0x4b1)]?(_0x4822ed[_0x36f106(0x1ef)]='‚ÜôÔ∏è',_0x4822ed[_0x36f106(0x241)]=_0x36f106(0x461)):(_0x4822ed[_0x36f106(0x1ef)]='‚ÜóÔ∏è',_0x4822ed[_0x36f106(0x241)]=_0x36f106(0x3cf));}async function initializeApp(){const _0x47c3e3=_0x17450c;try{await storageManager[_0x47c3e3(0x4c7)]();const [_0x4fb96b,_0x3aa562,_0x259291]=await Promise['all']([storageManager['getSettings'](),storageManager['getAll'](_0x47c3e3(0x3b3)),storageManager[_0x47c3e3(0x27d)](_0x47c3e3(0x206))]);let _0x761088;if(!_0x4fb96b){const _0x519cd2=JSON[_0x47c3e3(0x31b)](JSON['stringify'](defaults));await storageManager[_0x47c3e3(0x1e7)](_0x519cd2[_0x47c3e3(0x4a9)]);for(const _0x1b9ede of _0x519cd2[_0x47c3e3(0x3b3)]){const {subtopics:_0x3d68f9,..._0x1f9d7f}=_0x1b9ede;await storageManager[_0x47c3e3(0x30f)](_0x47c3e3(0x3b3),_0x1f9d7f);for(const _0x110c46 of _0x3d68f9){await storageManager[_0x47c3e3(0x30f)](_0x47c3e3(0x206),{..._0x110c46,'topicId':_0x1b9ede['id']});}}_0x761088=_0x519cd2;}else{const _0x3d5202={};for(const _0x16a286 of _0x3aa562)_0x3d5202[_0x16a286['id']]={..._0x16a286,'subtopics':[]};for(const _0x1cb2e8 of _0x259291)_0x3d5202[_0x1cb2e8['topicId']]?.[_0x47c3e3(0x206)][_0x47c3e3(0x367)](_0x1cb2e8);_0x761088={'version':defaults[_0x47c3e3(0x44e)],'settings':_0x4fb96b,'topics':Object[_0x47c3e3(0x3cc)](_0x3d5202)};}data=window['data']=_0x761088,normalizeDataStructure(data),await ensureValidSelection(),await seedAchievedMilestones(),renderAll();try{storageManager[_0x47c3e3(0x3f6)](data);}catch(_0x1332e9){console[_0x47c3e3(0x1e9)](_0x47c3e3(0x258),_0x1332e9);}bindEvents(),applyTheme();}catch(_0x3092a6){console[_0x47c3e3(0x30e)]('Initialization\x20error:',_0x3092a6),toast(_0x47c3e3(0x27b)+_0x3092a6[_0x47c3e3(0x391)]);}}callGeminiAPI=async function(_0x12f66a,_0x2e1f8c=0x3,_0x9cc966=0x3e8){const _0x32ce5b=_0x17450c,_0x5083c9=data?.[_0x32ce5b(0x4a9)]?.['apiKey']||'';if(!_0x5083c9)return toast('Vui\x20l√≤ng\x20nh·∫≠p\x20Gemini\x20API\x20Key\x20trong\x20ph·∫ßn\x20C√†i\x20ƒë·∫∑t.'),null;const _0x15fb5c=_0x32ce5b(0x4f7)+_0x5083c9,_0x3885e5={'contents':[{'role':_0x32ce5b(0x360),'parts':[{'text':_0x12f66a}]}]};try{const _0x4e0ba7=await fetch(_0x15fb5c,{'method':_0x32ce5b(0x2cf),'headers':{'Content-Type':_0x32ce5b(0x2e5)},'body':JSON[_0x32ce5b(0x239)](_0x3885e5)});if(!_0x4e0ba7['ok']){if(_0x4e0ba7[_0x32ce5b(0x1fe)]===0x1ad&&_0x2e1f8c>0x0)return await new Promise(_0x2e99f2=>setTimeout(_0x2e99f2,_0x9cc966)),callGeminiAPI(_0x12f66a,_0x2e1f8c-0x1,_0x9cc966*0x2);let _0x4fae13=null;try{_0x4fae13=await _0x4e0ba7[_0x32ce5b(0x48a)]();}catch(_0x547fb8){}let _0xa3e186=_0x32ce5b(0x4cb)+_0x4e0ba7[_0x32ce5b(0x1fe)];if(_0x4e0ba7[_0x32ce5b(0x1fe)]===0x190)_0xa3e186=_0x32ce5b(0x2b8);else{if(_0x4e0ba7[_0x32ce5b(0x1fe)]===0x1ad)_0xa3e186='L·ªói:\x20ƒê√£\x20v∆∞·ª£t\x20qu√°\x20h·∫°n\x20m·ª©c\x20y√™u\x20c·∫ßu\x20t·ªõi\x20Gemini.\x20Vui\x20l√≤ng\x20th·ª≠\x20l·∫°i\x20sau\x20√≠t\x20ph√∫t.';else _0x4fae13?.[_0x32ce5b(0x30e)]?.[_0x32ce5b(0x391)]&&(_0xa3e186='L·ªói\x20t·ª´\x20Gemini:\x20'+_0x4fae13[_0x32ce5b(0x30e)][_0x32ce5b(0x391)]);}return toast(_0xa3e186,0xfa0),console[_0x32ce5b(0x30e)](_0x32ce5b(0x3b4),_0x4fae13||_0x4e0ba7[_0x32ce5b(0x430)]),null;}const _0x429547=await _0x4e0ba7['json']();if(_0x429547[_0x32ce5b(0x493)]&&_0x429547[_0x32ce5b(0x493)][0x0]?.[_0x32ce5b(0x2e0)]?.[_0x32ce5b(0x338)]?.[0x0]?.['text'])return formatGeminiResponse(_0x429547[_0x32ce5b(0x493)][0x0]['content'][_0x32ce5b(0x338)][0x0][_0x32ce5b(0x2ee)]);else{console['error']('API\x20response\x20structure\x20is\x20unexpected:',_0x429547);if(_0x429547['promptFeedback']?.[_0x32ce5b(0x306)])return _0x32ce5b(0x36f)+_0x429547[_0x32ce5b(0x3c8)][_0x32ce5b(0x306)]+_0x32ce5b(0x324);return _0x32ce5b(0x4ce);}}catch(_0x23875f){return console[_0x32ce5b(0x30e)]('L·ªói\x20khi\x20g·ªçi\x20Gemini\x20API:',_0x23875f),toast(_0x32ce5b(0x456),0xfa0),null;}},loadLanguage(localStorage['getItem'](_0x17450c(0x305))||'vi')[_0x17450c(0x3ff)](initializeApp);
    </script>
</body>
</html>
